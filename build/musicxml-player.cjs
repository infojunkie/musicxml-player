"use strict";var ic=Object.create;var Si=Object.defineProperty;var sc=Object.getOwnPropertyDescriptor;var oc=Object.getOwnPropertyNames;var ac=Object.getPrototypeOf,uc=Object.prototype.hasOwnProperty;var cc=(dt,J)=>()=>(J||dt((J={exports:{}}).exports,J),J.exports),lc=(dt,J)=>{for(var pt in J)Si(dt,pt,{get:J[pt],enumerable:!0})},Pa=(dt,J,pt,lt)=>{if(J&&typeof J=="object"||typeof J=="function")for(let mt of oc(J))!uc.call(dt,mt)&&mt!==pt&&Si(dt,mt,{get:()=>J[mt],enumerable:!(lt=sc(J,mt))||lt.enumerable});return dt};var kn=(dt,J,pt)=>(pt=dt!=null?ic(ac(dt)):{},Pa(J||!dt||!dt.__esModule?Si(pt,"default",{value:dt,enumerable:!0}):pt,dt)),fc=dt=>Pa(Si({},"__esModule",{value:!0}),dt);var cr=cc((ka,Ma)=>{"use strict";(function(){var dt;window.Resources={regexCategories:{IsBasicLatin:[["0000","007F"]],"IsLatin-1Supplement":[["0080","00FF"]],"IsLatinExtended-A":[["0100","017F"]],"IsLatinExtended-B":[["0180","024F"]],IsIPAExtensions:[["0250","02AF"]],IsSpacingModifierLetters:[["02B0","02FF"]],IsCombiningDiacriticalMarks:[["0300","036F"]],IsGreek:[["0370","03FF"]],IsGreekandCoptic:[["0370","03FF"]],IsCyrillic:[["0400","04FF"]],IsCyrillicSupplementary:[["0500","052F"]],IsCyrillicSupplement:[["0500","052F"]],IsArmenian:[["0530","058F"]],IsHebrew:[["0590","05FF"]],IsArabic:[["0600","06FF"]],IsSyriac:[["0700","074F"]],IsArabicSupplement:[["0750","077F"]],IsThaana:[["0780","07BF"]],IsNKo:[["07C0","07FF"]],IsSamaritan:[["0800","083F"]],IsMandaic:[["0840","085F"]],IsDevanagari:[["0900","097F"]],IsBengali:[["0980","09FF"]],IsGurmukhi:[["0A00","0A7F"]],IsGujarati:[["0A80","0AFF"]],IsOriya:[["0B00","0B7F"]],IsTamil:[["0B80","0BFF"]],IsTelugu:[["0C00","0C7F"]],IsKannada:[["0C80","0CFF"]],IsMalayalam:[["0D00","0D7F"]],IsSinhala:[["0D80","0DFF"]],IsThai:[["0E00","0E7F"]],IsLao:[["0E80","0EFF"]],IsTibetan:[["0F00","0FFF"]],IsMyanmar:[["1000","109F"]],IsGeorgian:[["10A0","10FF"]],IsHangulJamo:[["1100","11FF"]],IsEthiopic:[["1200","137F"]],IsEthiopicSupplement:[["1380","139F"]],IsCherokee:[["13A0","13FF"]],IsUnifiedCanadianAboriginalSyllabics:[["1400","167F"]],IsOgham:[["1680","169F"]],IsRunic:[["16A0","16FF"]],IsTagalog:[["1700","171F"]],IsHanunoo:[["1720","173F"]],IsBuhid:[["1740","175F"]],IsTagbanwa:[["1760","177F"]],IsKhmer:[["1780","17FF"]],IsMongolian:[["1800","18AF"]],IsUnifiedCanadianAboriginalSyllabicsExtended:[["18B0","18FF"]],IsLimbu:[["1900","194F"]],IsTaiLe:[["1950","197F"]],IsNewTaiLue:[["1980","19DF"]],IsKhmerSymbols:[["19E0","19FF"]],IsBuginese:[["1A00","1A1F"]],IsTaiTham:[["1A20","1AAF"]],IsBalinese:[["1B00","1B7F"]],IsSundanese:[["1B80","1BBF"]],IsBatak:[["1BC0","1BFF"]],IsLepcha:[["1C00","1C4F"]],IsOlChiki:[["1C50","1C7F"]],IsVedicExtensions:[["1CD0","1CFF"]],IsPhoneticExtensions:[["1D00","1D7F"]],IsPhoneticExtensionsSupplement:[["1D80","1DBF"]],IsCombiningDiacriticalMarksSupplement:[["1DC0","1DFF"]],IsLatinExtendedAdditional:[["1E00","1EFF"]],IsGreekExtended:[["1F00","1FFF"]],IsGeneralPunctuation:[["2000","206F"]],IsSuperscriptsandSubscripts:[["2070","209F"]],IsCurrencySymbols:[["20A0","20CF"]],IsCombiningMarksforSymbols:[["20D0","20FF"]],IsCombiningDiacriticalMarksforSymbols:[["20D0","20FF"]],IsLetterlikeSymbols:[["2100","214F"]],IsNumberForms:[["2150","218F"]],IsArrows:[["2190","21FF"]],IsMathematicalOperators:[["2200","22FF"]],IsMiscellaneousTechnical:[["2300","23FF"]],IsControlPictures:[["2400","243F"]],IsOpticalCharacterRecognition:[["2440","245F"]],IsEnclosedAlphanumerics:[["2460","24FF"]],IsBoxDrawing:[["2500","257F"]],IsBlockElements:[["2580","259F"]],IsGeometricShapes:[["25A0","25FF"]],IsMiscellaneousSymbols:[["2600","26FF"]],IsDingbats:[["2700","27BF"]],"IsMiscellaneousMathematicalSymbols-A":[["27C0","27EF"]],"IsSupplementalArrows-A":[["27F0","27FF"]],IsBraillePatterns:[["2800","28FF"]],"IsSupplementalArrows-B":[["2900","297F"]],"IsMiscellaneousMathematicalSymbols-B":[["2980","29FF"]],IsSupplementalMathematicalOperators:[["2A00","2AFF"]],IsMiscellaneousSymbolsandArrows:[["2B00","2BFF"]],IsGlagolitic:[["2C00","2C5F"]],"IsLatinExtended-C":[["2C60","2C7F"]],IsCoptic:[["2C80","2CFF"]],IsGeorgianSupplement:[["2D00","2D2F"]],IsTifinagh:[["2D30","2D7F"]],IsEthiopicExtended:[["2D80","2DDF"]],"IsCyrillicExtended-A":[["2DE0","2DFF"]],IsSupplementalPunctuation:[["2E00","2E7F"]],IsCJKRadicalsSupplement:[["2E80","2EFF"]],IsKangxiRadicals:[["2F00","2FDF"]],IsIdeographicDescriptionCharacters:[["2FF0","2FFF"]],IsCJKSymbolsandPunctuation:[["3000","303F"]],IsHiragana:[["3040","309F"]],IsKatakana:[["30A0","30FF"]],IsBopomofo:[["3100","312F"]],IsHangulCompatibilityJamo:[["3130","318F"]],IsKanbun:[["3190","319F"]],IsBopomofoExtended:[["31A0","31BF"]],IsCJKStrokes:[["31C0","31EF"]],IsKatakanaPhoneticExtensions:[["31F0","31FF"]],IsEnclosedCJKLettersandMonths:[["3200","32FF"]],IsCJKCompatibility:[["3300","33FF"]],IsCJKUnifiedIdeographsExtensionA:[["3400","4DBF"]],IsYijingHexagramSymbols:[["4DC0","4DFF"]],IsCJKUnifiedIdeographs:[["4E00","9FFF"]],IsYiSyllables:[["A000","A48F"]],IsYiRadicals:[["A490","A4CF"]],IsLisu:[["A4D0","A4FF"]],IsVai:[["A500","A63F"]],"IsCyrillicExtended-B":[["A640","A69F"]],IsBamum:[["A6A0","A6FF"]],IsModifierToneLetters:[["A700","A71F"]],"IsLatinExtended-D":[["A720","A7FF"]],IsSylotiNagri:[["A800","A82F"]],IsCommonIndicNumberForms:[["A830","A83F"]],"IsPhags-pa":[["A840","A87F"]],IsSaurashtra:[["A880","A8DF"]],IsDevanagariExtended:[["A8E0","A8FF"]],IsKayahLi:[["A900","A92F"]],IsRejang:[["A930","A95F"]],"IsHangulJamoExtended-A":[["A960","A97F"]],IsJavanese:[["A980","A9DF"]],IsCham:[["AA00","AA5F"]],"IsMyanmarExtended-A":[["AA60","AA7F"]],IsTaiViet:[["AA80","AADF"]],"IsEthiopicExtended-A":[["AB00","AB2F"]],IsMeeteiMayek:[["ABC0","ABFF"]],IsHangulSyllables:[["AC00","D7AF"]],"IsHangulJamoExtended-B":[["D7B0","D7FF"]],IsHighSurrogates:[["D800","DB7F"]],IsHighPrivateUseSurrogates:[["DB80","DBFF"]],IsLowSurrogates:[["DC00","DFFF"]],IsPrivateUse:[["E000","F8FF"],["F0000","FFFFD"],["100000","10FFFD"]],IsPrivateUseArea:[["E000","F8FF"]],IsCJKCompatibilityIdeographs:[["F900","FAFF"]],IsAlphabeticPresentationForms:[["FB00","FB4F"]],"IsArabicPresentationForms-A":[["FB50","FDFF"]],IsVariationSelectors:[["FE00","FE0F"]],IsVerticalForms:[["FE10","FE1F"]],IsCombiningHalfMarks:[["FE20","FE2F"]],IsCJKCompatibilityForms:[["FE30","FE4F"]],IsSmallFormVariants:[["FE50","FE6F"]],"IsArabicPresentationForms-B":[["FE70","FEFF"]],IsHalfwidthandFullwidthForms:[["FF00","FFEF"]],IsSpecials:[["FEFF","FEFF"],["FFF0","FFFF"]],IsLinearBSyllabary:[["10000","1007F"]],IsLinearBIdeograms:[["10080","100FF"]],IsAegeanNumbers:[["10100","1013F"]],IsAncientGreekNumbers:[["10140","1018F"]],IsAncientSymbols:[["10190","101CF"]],IsPhaistosDisc:[["101D0","101FF"]],IsLycian:[["10280","1029F"]],IsCarian:[["102A0","102DF"]],IsOldItalic:[["10300","1032F"]],IsGothic:[["10330","1034F"]],IsUgaritic:[["10380","1039F"]],IsOldPersian:[["103A0","103DF"]],IsDeseret:[["10400","1044F"]],IsShavian:[["10450","1047F"]],IsOsmanya:[["10480","104AF"]],IsCypriotSyllabary:[["10800","1083F"]],IsImperialAramaic:[["10840","1085F"]],IsPhoenician:[["10900","1091F"]],IsLydian:[["10920","1093F"]],IsKharoshthi:[["10A00","10A5F"]],IsOldSouthArabian:[["10A60","10A7F"]],IsAvestan:[["10B00","10B3F"]],IsInscriptionalParthian:[["10B40","10B5F"]],IsInscriptionalPahlavi:[["10B60","10B7F"]],IsOldTurkic:[["10C00","10C4F"]],IsRumiNumeralSymbols:[["10E60","10E7F"]],IsBrahmi:[["11000","1107F"]],IsKaithi:[["11080","110CF"]],IsCuneiform:[["12000","123FF"]],IsCuneiformNumbersandPunctuation:[["12400","1247F"]],IsEgyptianHieroglyphs:[["13000","1342F"]],IsBamumSupplement:[["16800","16A3F"]],IsKanaSupplement:[["1B000","1B0FF"]],IsByzantineMusicalSymbols:[["1D000","1D0FF"]],IsMusicalSymbols:[["1D100","1D1FF"]],IsAncientGreekMusicalNotation:[["1D200","1D24F"]],IsTaiXuanJingSymbols:[["1D300","1D35F"]],IsCountingRodNumerals:[["1D360","1D37F"]],IsMathematicalAlphanumericSymbols:[["1D400","1D7FF"]],IsMahjongTiles:[["1F000","1F02F"]],IsDominoTiles:[["1F030","1F09F"]],IsPlayingCards:[["1F0A0","1F0FF"]],IsEnclosedAlphanumericSupplement:[["1F100","1F1FF"]],IsEnclosedIdeographicSupplement:[["1F200","1F2FF"]],IsMiscellaneousSymbolsAndPictographs:[["1F300","1F5FF"]],IsEmoticons:[["1F600","1F64F"]],IsTransportAndMapSymbols:[["1F680","1F6FF"]],IsAlchemicalSymbols:[["1F700","1F77F"]],IsCJKUnifiedIdeographsExtensionB:[["20000","2A6DF"]],IsCJKUnifiedIdeographsExtensionC:[["2A700","2B73F"]],IsCJKUnifiedIdeographsExtensionD:[["2B740","2B81F"]],IsCJKCompatibilityIdeographsSupplement:[["2F800","2FA1F"]],IsTags:[["E0000","E007F"]],IsVariationSelectorsSupplement:[["E0100","E01EF"]],"IsSupplementaryPrivateUseArea-A":[["F0000","FFFFF"]],"IsSupplementaryPrivateUseArea-B":[["100000","10FFFF"]],C:"Cc|Cf|Cn|Co",Cc:[["0","1F"],["7F","9F"]],Cf:[["AD","AD"],["600","604"],["6DD","6DD"],["70F","70F"],["200B","200F"],["202A","202E"],["2060","2064"],["206A","206F"],["FEFF","FEFF"],["FFF9","FFFB"],["110BD","110BD"],["1D173","1D17A"],["E0001","E0001"],["E0020","E007F"]],Cn:[["378","379"],["37F","383"],["38B","38B"],["38D","38D"],["3A2","3A2"],["528","52F"],["530","530"],["557","558"],["560","560"],["588","588"],["58B","58E"],["590","590"],["5C8","5CF"],["5EB","5EF"],["5F5","5FF"],["605","605"],["61C","61D"],["70E","70E"],["74B","74C"],["7B2","7BF"],["7FB","7FF"],["82E","82F"],["83F","83F"],["85C","85D"],["85F","85F"],["860","89F"],["8A1","8A1"],["8AD","8E3"],["8FF","8FF"],["978","978"],["980","980"],["984","984"],["98D","98E"],["991","992"],["9A9","9A9"],["9B1","9B1"],["9B3","9B5"],["9BA","9BB"],["9C5","9C6"],["9C9","9CA"],["9CF","9D6"],["9D8","9DB"],["9DE","9DE"],["9E4","9E5"],["9FC","9FF"],["A00","A00"],["A04","A04"],["A0B","A0E"],["A11","A12"],["A29","A29"],["A31","A31"],["A34","A34"],["A37","A37"],["A3A","A3B"],["A3D","A3D"],["A43","A46"],["A49","A4A"],["A4E","A50"],["A52","A58"],["A5D","A5D"],["A5F","A65"],["A76","A7F"],["A80","A80"],["A84","A84"],["A8E","A8E"],["A92","A92"],["AA9","AA9"],["AB1","AB1"],["AB4","AB4"],["ABA","ABB"],["AC6","AC6"],["ACA","ACA"],["ACE","ACF"],["AD1","ADF"],["AE4","AE5"],["AF2","AFF"],["B00","B00"],["B04","B04"],["B0D","B0E"],["B11","B12"],["B29","B29"],["B31","B31"],["B34","B34"],["B3A","B3B"],["B45","B46"],["B49","B4A"],["B4E","B55"],["B58","B5B"],["B5E","B5E"],["B64","B65"],["B78","B7F"],["B80","B81"],["B84","B84"],["B8B","B8D"],["B91","B91"],["B96","B98"],["B9B","B9B"],["B9D","B9D"],["BA0","BA2"],["BA5","BA7"],["BAB","BAD"],["BBA","BBD"],["BC3","BC5"],["BC9","BC9"],["BCE","BCF"],["BD1","BD6"],["BD8","BE5"],["BFB","BFF"],["C00","C00"],["C04","C04"],["C0D","C0D"],["C11","C11"],["C29","C29"],["C34","C34"],["C3A","C3C"],["C45","C45"],["C49","C49"],["C4E","C54"],["C57","C57"],["C5A","C5F"],["C64","C65"],["C70","C77"],["C80","C81"],["C84","C84"],["C8D","C8D"],["C91","C91"],["CA9","CA9"],["CB4","CB4"],["CBA","CBB"],["CC5","CC5"],["CC9","CC9"],["CCE","CD4"],["CD7","CDD"],["CDF","CDF"],["CE4","CE5"],["CF0","CF0"],["CF3","CFF"],["D00","D01"],["D04","D04"],["D0D","D0D"],["D11","D11"],["D3B","D3C"],["D45","D45"],["D49","D49"],["D4F","D56"],["D58","D5F"],["D64","D65"],["D76","D78"],["D80","D81"],["D84","D84"],["D97","D99"],["DB2","DB2"],["DBC","DBC"],["DBE","DBF"],["DC7","DC9"],["DCB","DCE"],["DD5","DD5"],["DD7","DD7"],["DE0","DF1"],["DF5","DFF"],["E00","E00"],["E3B","E3E"],["E5C","E7F"],["E80","E80"],["E83","E83"],["E85","E86"],["E89","E89"],["E8B","E8C"],["E8E","E93"],["E98","E98"],["EA0","EA0"],["EA4","EA4"],["EA6","EA6"],["EA8","EA9"],["EAC","EAC"],["EBA","EBA"],["EBE","EBF"],["EC5","EC5"],["EC7","EC7"],["ECE","ECF"],["EDA","EDB"],["EE0","EFF"],["F48","F48"],["F6D","F70"],["F98","F98"],["FBD","FBD"],["FCD","FCD"],["FDB","FFF"],["10C6","10C6"],["10C8","10CC"],["10CE","10CF"],["1249","1249"],["124E","124F"],["1257","1257"],["1259","1259"],["125E","125F"],["1289","1289"],["128E","128F"],["12B1","12B1"],["12B6","12B7"],["12BF","12BF"],["12C1","12C1"],["12C6","12C7"],["12D7","12D7"],["1311","1311"],["1316","1317"],["135B","135C"],["137D","137F"],["139A","139F"],["13F5","13FF"],["169D","169F"],["16F1","16FF"],["170D","170D"],["1715","171F"],["1737","173F"],["1754","175F"],["176D","176D"],["1771","1771"],["1774","177F"],["17DE","17DF"],["17EA","17EF"],["17FA","17FF"],["180F","180F"],["181A","181F"],["1878","187F"],["18AB","18AF"],["18F6","18FF"],["191D","191F"],["192C","192F"],["193C","193F"],["1941","1943"],["196E","196F"],["1975","197F"],["19AC","19AF"],["19CA","19CF"],["19DB","19DD"],["1A1C","1A1D"],["1A5F","1A5F"],["1A7D","1A7E"],["1A8A","1A8F"],["1A9A","1A9F"],["1AAE","1AAF"],["1AB0","1AFF"],["1B4C","1B4F"],["1B7D","1B7F"],["1BF4","1BFB"],["1C38","1C3A"],["1C4A","1C4C"],["1C80","1CBF"],["1CC8","1CCF"],["1CF7","1CFF"],["1DE7","1DFB"],["1F16","1F17"],["1F1E","1F1F"],["1F46","1F47"],["1F4E","1F4F"],["1F58","1F58"],["1F5A","1F5A"],["1F5C","1F5C"],["1F5E","1F5E"],["1F7E","1F7F"],["1FB5","1FB5"],["1FC5","1FC5"],["1FD4","1FD5"],["1FDC","1FDC"],["1FF0","1FF1"],["1FF5","1FF5"],["1FFF","1FFF"],["2065","2069"],["2072","2073"],["208F","208F"],["209D","209F"],["20BB","20CF"],["20F1","20FF"],["218A","218F"],["23F4","23FF"],["2427","243F"],["244B","245F"],["2700","2700"],["2B4D","2B4F"],["2B5A","2BFF"],["2C2F","2C2F"],["2C5F","2C5F"],["2CF4","2CF8"],["2D26","2D26"],["2D28","2D2C"],["2D2E","2D2F"],["2D68","2D6E"],["2D71","2D7E"],["2D97","2D9F"],["2DA7","2DA7"],["2DAF","2DAF"],["2DB7","2DB7"],["2DBF","2DBF"],["2DC7","2DC7"],["2DCF","2DCF"],["2DD7","2DD7"],["2DDF","2DDF"],["2E3C","2E7F"],["2E9A","2E9A"],["2EF4","2EFF"],["2FD6","2FDF"],["2FE0","2FEF"],["2FFC","2FFF"],["3040","3040"],["3097","3098"],["3100","3104"],["312E","312F"],["3130","3130"],["318F","318F"],["31BB","31BF"],["31E4","31EF"],["321F","321F"],["32FF","32FF"],["4DB6","4DBF"],["9FCD","9FFF"],["A48D","A48F"],["A4C7","A4CF"],["A62C","A63F"],["A698","A69E"],["A6F8","A6FF"],["A78F","A78F"],["A794","A79F"],["A7AB","A7F7"],["A82C","A82F"],["A83A","A83F"],["A878","A87F"],["A8C5","A8CD"],["A8DA","A8DF"],["A8FC","A8FF"],["A954","A95E"],["A97D","A97F"],["A9CE","A9CE"],["A9DA","A9DD"],["A9E0","A9FF"],["AA37","AA3F"],["AA4E","AA4F"],["AA5A","AA5B"],["AA7C","AA7F"],["AAC3","AADA"],["AAF7","AAFF"],["AB00","AB00"],["AB07","AB08"],["AB0F","AB10"],["AB17","AB1F"],["AB27","AB27"],["AB2F","AB2F"],["AB30","ABBF"],["ABEE","ABEF"],["ABFA","ABFF"],["D7A4","D7AF"],["D7C7","D7CA"],["D7FC","D7FF"],["FA6E","FA6F"],["FADA","FAFF"],["FB07","FB12"],["FB18","FB1C"],["FB37","FB37"],["FB3D","FB3D"],["FB3F","FB3F"],["FB42","FB42"],["FB45","FB45"],["FBC2","FBD2"],["FD40","FD4F"],["FD90","FD91"],["FDC8","FDCF"],["FDD0","FDEF"],["FDFE","FDFF"],["FE1A","FE1F"],["FE27","FE2F"],["FE53","FE53"],["FE67","FE67"],["FE6C","FE6F"],["FE75","FE75"],["FEFD","FEFE"],["FF00","FF00"],["FFBF","FFC1"],["FFC8","FFC9"],["FFD0","FFD1"],["FFD8","FFD9"],["FFDD","FFDF"],["FFE7","FFE7"],["FFEF","FFEF"],["FFF0","FFF8"],["FFFE","FFFF"],["1000C","1000C"],["10027","10027"],["1003B","1003B"],["1003E","1003E"],["1004E","1004F"],["1005E","1007F"],["100FB","100FF"],["10103","10106"],["10134","10136"],["1018B","1018F"],["1019C","101CF"],["101FE","101FF"],["10200","1027F"],["1029D","1029F"],["102D1","102DF"],["102E0","102FF"],["1031F","1031F"],["10324","1032F"],["1034B","1034F"],["10350","1037F"],["1039E","1039E"],["103C4","103C7"],["103D6","103DF"],["103E0","103FF"],["1049E","1049F"],["104AA","104AF"],["104B0","107FF"],["10806","10807"],["10809","10809"],["10836","10836"],["10839","1083B"],["1083D","1083E"],["10856","10856"],["10860","108FF"],["1091C","1091E"],["1093A","1093E"],["10940","1097F"],["109B8","109BD"],["109C0","109FF"],["10A04","10A04"],["10A07","10A0B"],["10A14","10A14"],["10A18","10A18"],["10A34","10A37"],["10A3B","10A3E"],["10A48","10A4F"],["10A59","10A5F"],["10A80","10AFF"],["10B36","10B38"],["10B56","10B57"],["10B73","10B77"],["10B80","10BFF"],["10C49","10C4F"],["10C50","10E5F"],["10E7F","10E7F"],["10E80","10FFF"],["1104E","11051"],["11070","1107F"],["110C2","110CF"],["110E9","110EF"],["110FA","110FF"],["11135","11135"],["11144","1114F"],["11150","1117F"],["111C9","111CF"],["111DA","111DF"],["111E0","1167F"],["116B8","116BF"],["116CA","116CF"],["116D0","11FFF"],["1236F","123FF"],["12463","1246F"],["12474","1247F"],["12480","12FFF"],["1342F","1342F"],["13430","167FF"],["16A39","16A3F"],["16A40","16EFF"],["16F45","16F4F"],["16F7F","16F8E"],["16FA0","1AFFF"],["1B002","1B0FF"],["1B100","1CFFF"],["1D0F6","1D0FF"],["1D127","1D128"],["1D1DE","1D1FF"],["1D246","1D24F"],["1D250","1D2FF"],["1D357","1D35F"],["1D372","1D37F"],["1D380","1D3FF"],["1D455","1D455"],["1D49D","1D49D"],["1D4A0","1D4A1"],["1D4A3","1D4A4"],["1D4A7","1D4A8"],["1D4AD","1D4AD"],["1D4BA","1D4BA"],["1D4BC","1D4BC"],["1D4C4","1D4C4"],["1D506","1D506"],["1D50B","1D50C"],["1D515","1D515"],["1D51D","1D51D"],["1D53A","1D53A"],["1D53F","1D53F"],["1D545","1D545"],["1D547","1D549"],["1D551","1D551"],["1D6A6","1D6A7"],["1D7CC","1D7CD"],["1D800","1E7FF"],["1E800","1EDFF"],["1EE04","1EE04"],["1EE20","1EE20"],["1EE23","1EE23"],["1EE25","1EE26"],["1EE28","1EE28"],["1EE33","1EE33"],["1EE38","1EE38"],["1EE3A","1EE3A"],["1EE3C","1EE41"],["1EE43","1EE46"],["1EE48","1EE48"],["1EE4A","1EE4A"],["1EE4C","1EE4C"],["1EE50","1EE50"],["1EE53","1EE53"],["1EE55","1EE56"],["1EE58","1EE58"],["1EE5A","1EE5A"],["1EE5C","1EE5C"],["1EE5E","1EE5E"],["1EE60","1EE60"],["1EE63","1EE63"],["1EE65","1EE66"],["1EE6B","1EE6B"],["1EE73","1EE73"],["1EE78","1EE78"],["1EE7D","1EE7D"],["1EE7F","1EE7F"],["1EE8A","1EE8A"],["1EE9C","1EEA0"],["1EEA4","1EEA4"],["1EEAA","1EEAA"],["1EEBC","1EEEF"],["1EEF2","1EEFF"],["1EF00","1EFFF"],["1F02C","1F02F"],["1F094","1F09F"],["1F0AF","1F0B0"],["1F0BF","1F0C0"],["1F0D0","1F0D0"],["1F0E0","1F0FF"],["1F10B","1F10F"],["1F12F","1F12F"],["1F16C","1F16F"],["1F19B","1F1E5"],["1F203","1F20F"],["1F23B","1F23F"],["1F249","1F24F"],["1F252","1F2FF"],["1F321","1F32F"],["1F336","1F336"],["1F37D","1F37F"],["1F394","1F39F"],["1F3C5","1F3C5"],["1F3CB","1F3DF"],["1F3F1","1F3FF"],["1F43F","1F43F"],["1F441","1F441"],["1F4F8","1F4F8"],["1F4FD","1F4FF"],["1F53E","1F53F"],["1F544","1F54F"],["1F568","1F5FA"],["1F641","1F644"],["1F650","1F67F"],["1F6C6","1F6FF"],["1F774","1F77F"],["1F780","1FFFD"],["1FFFE","1FFFF"],["2A6D7","2A6DF"],["2A6E0","2A6FF"],["2B735","2B73F"],["2B81E","2B81F"],["2B820","2F7FF"],["2FA1E","2FA1F"],["2FA20","2FFFD"],["2FFFE","2FFFF"],["30000","3FFFD"],["3FFFE","3FFFF"],["40000","4FFFD"],["4FFFE","4FFFF"],["50000","5FFFD"],["5FFFE","5FFFF"],["60000","6FFFD"],["6FFFE","6FFFF"],["70000","7FFFD"],["7FFFE","7FFFF"],["80000","8FFFD"],["8FFFE","8FFFF"],["90000","9FFFD"],["9FFFE","9FFFF"],["A0000","AFFFD"],["AFFFE","AFFFF"],["B0000","BFFFD"],["BFFFE","BFFFF"],["C0000","CFFFD"],["CFFFE","CFFFF"],["D0000","DFFFD"],["DFFFE","DFFFF"],["E0000","E0000"],["E0002","E001F"],["E0080","E00FF"],["E01F0","E0FFF"],["E1000","EFFFD"],["EFFFE","EFFFF"],["FFFFE","FFFFF"],["10FFFE","10FFFF"]],Co:[["E000","F8FF"],["F0000","FFFFD"],["100000","10FFFD"]],L:"Ll|Lm|Lo|Lt|Lu",Ll:[["61","7A"],["B5","B5"],["DF","F6"],["F8","FF"],["101","101"],["103","103"],["105","105"],["107","107"],["109","109"],["10B","10B"],["10D","10D"],["10F","10F"],["111","111"],["113","113"],["115","115"],["117","117"],["119","119"],["11B","11B"],["11D","11D"],["11F","11F"],["121","121"],["123","123"],["125","125"],["127","127"],["129","129"],["12B","12B"],["12D","12D"],["12F","12F"],["131","131"],["133","133"],["135","135"],["137","138"],["13A","13A"],["13C","13C"],["13E","13E"],["140","140"],["142","142"],["144","144"],["146","146"],["148","149"],["14B","14B"],["14D","14D"],["14F","14F"],["151","151"],["153","153"],["155","155"],["157","157"],["159","159"],["15B","15B"],["15D","15D"],["15F","15F"],["161","161"],["163","163"],["165","165"],["167","167"],["169","169"],["16B","16B"],["16D","16D"],["16F","16F"],["171","171"],["173","173"],["175","175"],["177","177"],["17A","17A"],["17C","17C"],["17E","180"],["183","183"],["185","185"],["188","188"],["18C","18D"],["192","192"],["195","195"],["199","19B"],["19E","19E"],["1A1","1A1"],["1A3","1A3"],["1A5","1A5"],["1A8","1A8"],["1AA","1AB"],["1AD","1AD"],["1B0","1B0"],["1B4","1B4"],["1B6","1B6"],["1B9","1BA"],["1BD","1BF"],["1C6","1C6"],["1C9","1C9"],["1CC","1CC"],["1CE","1CE"],["1D0","1D0"],["1D2","1D2"],["1D4","1D4"],["1D6","1D6"],["1D8","1D8"],["1DA","1DA"],["1DC","1DD"],["1DF","1DF"],["1E1","1E1"],["1E3","1E3"],["1E5","1E5"],["1E7","1E7"],["1E9","1E9"],["1EB","1EB"],["1ED","1ED"],["1EF","1F0"],["1F3","1F3"],["1F5","1F5"],["1F9","1F9"],["1FB","1FB"],["1FD","1FD"],["1FF","1FF"],["201","201"],["203","203"],["205","205"],["207","207"],["209","209"],["20B","20B"],["20D","20D"],["20F","20F"],["211","211"],["213","213"],["215","215"],["217","217"],["219","219"],["21B","21B"],["21D","21D"],["21F","21F"],["221","221"],["223","223"],["225","225"],["227","227"],["229","229"],["22B","22B"],["22D","22D"],["22F","22F"],["231","231"],["233","239"],["23C","23C"],["23F","240"],["242","242"],["247","247"],["249","249"],["24B","24B"],["24D","24D"],["24F","293"],["295","2AF"],["371","371"],["373","373"],["377","377"],["37B","37D"],["390","390"],["3AC","3CE"],["3D0","3D1"],["3D5","3D7"],["3D9","3D9"],["3DB","3DB"],["3DD","3DD"],["3DF","3DF"],["3E1","3E1"],["3E3","3E3"],["3E5","3E5"],["3E7","3E7"],["3E9","3E9"],["3EB","3EB"],["3ED","3ED"],["3EF","3F3"],["3F5","3F5"],["3F8","3F8"],["3FB","3FC"],["430","45F"],["461","461"],["463","463"],["465","465"],["467","467"],["469","469"],["46B","46B"],["46D","46D"],["46F","46F"],["471","471"],["473","473"],["475","475"],["477","477"],["479","479"],["47B","47B"],["47D","47D"],["47F","47F"],["481","481"],["48B","48B"],["48D","48D"],["48F","48F"],["491","491"],["493","493"],["495","495"],["497","497"],["499","499"],["49B","49B"],["49D","49D"],["49F","49F"],["4A1","4A1"],["4A3","4A3"],["4A5","4A5"],["4A7","4A7"],["4A9","4A9"],["4AB","4AB"],["4AD","4AD"],["4AF","4AF"],["4B1","4B1"],["4B3","4B3"],["4B5","4B5"],["4B7","4B7"],["4B9","4B9"],["4BB","4BB"],["4BD","4BD"],["4BF","4BF"],["4C2","4C2"],["4C4","4C4"],["4C6","4C6"],["4C8","4C8"],["4CA","4CA"],["4CC","4CC"],["4CE","4CF"],["4D1","4D1"],["4D3","4D3"],["4D5","4D5"],["4D7","4D7"],["4D9","4D9"],["4DB","4DB"],["4DD","4DD"],["4DF","4DF"],["4E1","4E1"],["4E3","4E3"],["4E5","4E5"],["4E7","4E7"],["4E9","4E9"],["4EB","4EB"],["4ED","4ED"],["4EF","4EF"],["4F1","4F1"],["4F3","4F3"],["4F5","4F5"],["4F7","4F7"],["4F9","4F9"],["4FB","4FB"],["4FD","4FD"],["4FF","4FF"],["501","501"],["503","503"],["505","505"],["507","507"],["509","509"],["50B","50B"],["50D","50D"],["50F","50F"],["511","511"],["513","513"],["515","515"],["517","517"],["519","519"],["51B","51B"],["51D","51D"],["51F","51F"],["521","521"],["523","523"],["525","525"],["527","527"],["561","587"],["1D00","1D2B"],["1D6B","1D77"],["1D79","1D9A"],["1E01","1E01"],["1E03","1E03"],["1E05","1E05"],["1E07","1E07"],["1E09","1E09"],["1E0B","1E0B"],["1E0D","1E0D"],["1E0F","1E0F"],["1E11","1E11"],["1E13","1E13"],["1E15","1E15"],["1E17","1E17"],["1E19","1E19"],["1E1B","1E1B"],["1E1D","1E1D"],["1E1F","1E1F"],["1E21","1E21"],["1E23","1E23"],["1E25","1E25"],["1E27","1E27"],["1E29","1E29"],["1E2B","1E2B"],["1E2D","1E2D"],["1E2F","1E2F"],["1E31","1E31"],["1E33","1E33"],["1E35","1E35"],["1E37","1E37"],["1E39","1E39"],["1E3B","1E3B"],["1E3D","1E3D"],["1E3F","1E3F"],["1E41","1E41"],["1E43","1E43"],["1E45","1E45"],["1E47","1E47"],["1E49","1E49"],["1E4B","1E4B"],["1E4D","1E4D"],["1E4F","1E4F"],["1E51","1E51"],["1E53","1E53"],["1E55","1E55"],["1E57","1E57"],["1E59","1E59"],["1E5B","1E5B"],["1E5D","1E5D"],["1E5F","1E5F"],["1E61","1E61"],["1E63","1E63"],["1E65","1E65"],["1E67","1E67"],["1E69","1E69"],["1E6B","1E6B"],["1E6D","1E6D"],["1E6F","1E6F"],["1E71","1E71"],["1E73","1E73"],["1E75","1E75"],["1E77","1E77"],["1E79","1E79"],["1E7B","1E7B"],["1E7D","1E7D"],["1E7F","1E7F"],["1E81","1E81"],["1E83","1E83"],["1E85","1E85"],["1E87","1E87"],["1E89","1E89"],["1E8B","1E8B"],["1E8D","1E8D"],["1E8F","1E8F"],["1E91","1E91"],["1E93","1E93"],["1E95","1E9D"],["1E9F","1E9F"],["1EA1","1EA1"],["1EA3","1EA3"],["1EA5","1EA5"],["1EA7","1EA7"],["1EA9","1EA9"],["1EAB","1EAB"],["1EAD","1EAD"],["1EAF","1EAF"],["1EB1","1EB1"],["1EB3","1EB3"],["1EB5","1EB5"],["1EB7","1EB7"],["1EB9","1EB9"],["1EBB","1EBB"],["1EBD","1EBD"],["1EBF","1EBF"],["1EC1","1EC1"],["1EC3","1EC3"],["1EC5","1EC5"],["1EC7","1EC7"],["1EC9","1EC9"],["1ECB","1ECB"],["1ECD","1ECD"],["1ECF","1ECF"],["1ED1","1ED1"],["1ED3","1ED3"],["1ED5","1ED5"],["1ED7","1ED7"],["1ED9","1ED9"],["1EDB","1EDB"],["1EDD","1EDD"],["1EDF","1EDF"],["1EE1","1EE1"],["1EE3","1EE3"],["1EE5","1EE5"],["1EE7","1EE7"],["1EE9","1EE9"],["1EEB","1EEB"],["1EED","1EED"],["1EEF","1EEF"],["1EF1","1EF1"],["1EF3","1EF3"],["1EF5","1EF5"],["1EF7","1EF7"],["1EF9","1EF9"],["1EFB","1EFB"],["1EFD","1EFD"],["1EFF","1F07"],["1F10","1F15"],["1F20","1F27"],["1F30","1F37"],["1F40","1F45"],["1F50","1F57"],["1F60","1F67"],["1F70","1F7D"],["1F80","1F87"],["1F90","1F97"],["1FA0","1FA7"],["1FB0","1FB4"],["1FB6","1FB7"],["1FBE","1FBE"],["1FC2","1FC4"],["1FC6","1FC7"],["1FD0","1FD3"],["1FD6","1FD7"],["1FE0","1FE7"],["1FF2","1FF4"],["1FF6","1FF7"],["210A","210A"],["210E","210F"],["2113","2113"],["212F","212F"],["2134","2134"],["2139","2139"],["213C","213D"],["2146","2149"],["214E","214E"],["2184","2184"],["2C30","2C5E"],["2C61","2C61"],["2C65","2C66"],["2C68","2C68"],["2C6A","2C6A"],["2C6C","2C6C"],["2C71","2C71"],["2C73","2C74"],["2C76","2C7B"],["2C81","2C81"],["2C83","2C83"],["2C85","2C85"],["2C87","2C87"],["2C89","2C89"],["2C8B","2C8B"],["2C8D","2C8D"],["2C8F","2C8F"],["2C91","2C91"],["2C93","2C93"],["2C95","2C95"],["2C97","2C97"],["2C99","2C99"],["2C9B","2C9B"],["2C9D","2C9D"],["2C9F","2C9F"],["2CA1","2CA1"],["2CA3","2CA3"],["2CA5","2CA5"],["2CA7","2CA7"],["2CA9","2CA9"],["2CAB","2CAB"],["2CAD","2CAD"],["2CAF","2CAF"],["2CB1","2CB1"],["2CB3","2CB3"],["2CB5","2CB5"],["2CB7","2CB7"],["2CB9","2CB9"],["2CBB","2CBB"],["2CBD","2CBD"],["2CBF","2CBF"],["2CC1","2CC1"],["2CC3","2CC3"],["2CC5","2CC5"],["2CC7","2CC7"],["2CC9","2CC9"],["2CCB","2CCB"],["2CCD","2CCD"],["2CCF","2CCF"],["2CD1","2CD1"],["2CD3","2CD3"],["2CD5","2CD5"],["2CD7","2CD7"],["2CD9","2CD9"],["2CDB","2CDB"],["2CDD","2CDD"],["2CDF","2CDF"],["2CE1","2CE1"],["2CE3","2CE4"],["2CEC","2CEC"],["2CEE","2CEE"],["2CF3","2CF3"],["2D00","2D25"],["2D27","2D27"],["2D2D","2D2D"],["A641","A641"],["A643","A643"],["A645","A645"],["A647","A647"],["A649","A649"],["A64B","A64B"],["A64D","A64D"],["A64F","A64F"],["A651","A651"],["A653","A653"],["A655","A655"],["A657","A657"],["A659","A659"],["A65B","A65B"],["A65D","A65D"],["A65F","A65F"],["A661","A661"],["A663","A663"],["A665","A665"],["A667","A667"],["A669","A669"],["A66B","A66B"],["A66D","A66D"],["A681","A681"],["A683","A683"],["A685","A685"],["A687","A687"],["A689","A689"],["A68B","A68B"],["A68D","A68D"],["A68F","A68F"],["A691","A691"],["A693","A693"],["A695","A695"],["A697","A697"],["A723","A723"],["A725","A725"],["A727","A727"],["A729","A729"],["A72B","A72B"],["A72D","A72D"],["A72F","A731"],["A733","A733"],["A735","A735"],["A737","A737"],["A739","A739"],["A73B","A73B"],["A73D","A73D"],["A73F","A73F"],["A741","A741"],["A743","A743"],["A745","A745"],["A747","A747"],["A749","A749"],["A74B","A74B"],["A74D","A74D"],["A74F","A74F"],["A751","A751"],["A753","A753"],["A755","A755"],["A757","A757"],["A759","A759"],["A75B","A75B"],["A75D","A75D"],["A75F","A75F"],["A761","A761"],["A763","A763"],["A765","A765"],["A767","A767"],["A769","A769"],["A76B","A76B"],["A76D","A76D"],["A76F","A76F"],["A771","A778"],["A77A","A77A"],["A77C","A77C"],["A77F","A77F"],["A781","A781"],["A783","A783"],["A785","A785"],["A787","A787"],["A78C","A78C"],["A78E","A78E"],["A791","A791"],["A793","A793"],["A7A1","A7A1"],["A7A3","A7A3"],["A7A5","A7A5"],["A7A7","A7A7"],["A7A9","A7A9"],["A7FA","A7FA"],["FB00","FB06"],["FB13","FB17"],["FF41","FF5A"],["10428","1044F"],["1D41A","1D433"],["1D44E","1D454"],["1D456","1D467"],["1D482","1D49B"],["1D4B6","1D4B9"],["1D4BB","1D4BB"],["1D4BD","1D4C3"],["1D4C5","1D4CF"],["1D4EA","1D503"],["1D51E","1D537"],["1D552","1D56B"],["1D586","1D59F"],["1D5BA","1D5D3"],["1D5EE","1D607"],["1D622","1D63B"],["1D656","1D66F"],["1D68A","1D6A5"],["1D6C2","1D6DA"],["1D6DC","1D6E1"],["1D6FC","1D714"],["1D716","1D71B"],["1D736","1D74E"],["1D750","1D755"],["1D770","1D788"],["1D78A","1D78F"],["1D7AA","1D7C2"],["1D7C4","1D7C9"],["1D7CB","1D7CB"]],Lm:[["2B0","2C1"],["2C6","2D1"],["2E0","2E4"],["2EC","2EC"],["2EE","2EE"],["374","374"],["37A","37A"],["559","559"],["640","640"],["6E5","6E6"],["7F4","7F5"],["7FA","7FA"],["81A","81A"],["824","824"],["828","828"],["971","971"],["E46","E46"],["EC6","EC6"],["10FC","10FC"],["17D7","17D7"],["1843","1843"],["1AA7","1AA7"],["1C78","1C7D"],["1D2C","1D6A"],["1D78","1D78"],["1D9B","1DBF"],["2071","2071"],["207F","207F"],["2090","209C"],["2C7C","2C7D"],["2D6F","2D6F"],["2E2F","2E2F"],["3005","3005"],["3031","3035"],["303B","303B"],["309D","309E"],["30FC","30FE"],["A015","A015"],["A4F8","A4FD"],["A60C","A60C"],["A67F","A67F"],["A717","A71F"],["A770","A770"],["A788","A788"],["A7F8","A7F9"],["A9CF","A9CF"],["AA70","AA70"],["AADD","AADD"],["AAF3","AAF4"],["FF70","FF70"],["FF9E","FF9F"],["16F93","16F9F"]],Lo:[["AA","AA"],["BA","BA"],["1BB","1BB"],["1C0","1C3"],["294","294"],["5D0","5EA"],["5F0","5F2"],["620","63F"],["641","64A"],["66E","66F"],["671","6D3"],["6D5","6D5"],["6EE","6EF"],["6FA","6FC"],["6FF","6FF"],["710","710"],["712","72F"],["74D","7A5"],["7B1","7B1"],["7CA","7EA"],["800","815"],["840","858"],["8A0","8A0"],["8A2","8AC"],["904","939"],["93D","93D"],["950","950"],["958","961"],["972","977"],["979","97F"],["985","98C"],["98F","990"],["993","9A8"],["9AA","9B0"],["9B2","9B2"],["9B6","9B9"],["9BD","9BD"],["9CE","9CE"],["9DC","9DD"],["9DF","9E1"],["9F0","9F1"],["A05","A0A"],["A0F","A10"],["A13","A28"],["A2A","A30"],["A32","A33"],["A35","A36"],["A38","A39"],["A59","A5C"],["A5E","A5E"],["A72","A74"],["A85","A8D"],["A8F","A91"],["A93","AA8"],["AAA","AB0"],["AB2","AB3"],["AB5","AB9"],["ABD","ABD"],["AD0","AD0"],["AE0","AE1"],["B05","B0C"],["B0F","B10"],["B13","B28"],["B2A","B30"],["B32","B33"],["B35","B39"],["B3D","B3D"],["B5C","B5D"],["B5F","B61"],["B71","B71"],["B83","B83"],["B85","B8A"],["B8E","B90"],["B92","B95"],["B99","B9A"],["B9C","B9C"],["B9E","B9F"],["BA3","BA4"],["BA8","BAA"],["BAE","BB9"],["BD0","BD0"],["C05","C0C"],["C0E","C10"],["C12","C28"],["C2A","C33"],["C35","C39"],["C3D","C3D"],["C58","C59"],["C60","C61"],["C85","C8C"],["C8E","C90"],["C92","CA8"],["CAA","CB3"],["CB5","CB9"],["CBD","CBD"],["CDE","CDE"],["CE0","CE1"],["CF1","CF2"],["D05","D0C"],["D0E","D10"],["D12","D3A"],["D3D","D3D"],["D4E","D4E"],["D60","D61"],["D7A","D7F"],["D85","D96"],["D9A","DB1"],["DB3","DBB"],["DBD","DBD"],["DC0","DC6"],["E01","E30"],["E32","E33"],["E40","E45"],["E81","E82"],["E84","E84"],["E87","E88"],["E8A","E8A"],["E8D","E8D"],["E94","E97"],["E99","E9F"],["EA1","EA3"],["EA5","EA5"],["EA7","EA7"],["EAA","EAB"],["EAD","EB0"],["EB2","EB3"],["EBD","EBD"],["EC0","EC4"],["EDC","EDF"],["F00","F00"],["F40","F47"],["F49","F6C"],["F88","F8C"],["1000","102A"],["103F","103F"],["1050","1055"],["105A","105D"],["1061","1061"],["1065","1066"],["106E","1070"],["1075","1081"],["108E","108E"],["10D0","10FA"],["10FD","1248"],["124A","124D"],["1250","1256"],["1258","1258"],["125A","125D"],["1260","1288"],["128A","128D"],["1290","12B0"],["12B2","12B5"],["12B8","12BE"],["12C0","12C0"],["12C2","12C5"],["12C8","12D6"],["12D8","1310"],["1312","1315"],["1318","135A"],["1380","138F"],["13A0","13F4"],["1401","166C"],["166F","167F"],["1681","169A"],["16A0","16EA"],["1700","170C"],["170E","1711"],["1720","1731"],["1740","1751"],["1760","176C"],["176E","1770"],["1780","17B3"],["17DC","17DC"],["1820","1842"],["1844","1877"],["1880","18A8"],["18AA","18AA"],["18B0","18F5"],["1900","191C"],["1950","196D"],["1970","1974"],["1980","19AB"],["19C1","19C7"],["1A00","1A16"],["1A20","1A54"],["1B05","1B33"],["1B45","1B4B"],["1B83","1BA0"],["1BAE","1BAF"],["1BBA","1BE5"],["1C00","1C23"],["1C4D","1C4F"],["1C5A","1C77"],["1CE9","1CEC"],["1CEE","1CF1"],["1CF5","1CF6"],["2135","2138"],["2D30","2D67"],["2D80","2D96"],["2DA0","2DA6"],["2DA8","2DAE"],["2DB0","2DB6"],["2DB8","2DBE"],["2DC0","2DC6"],["2DC8","2DCE"],["2DD0","2DD6"],["2DD8","2DDE"],["3006","3006"],["303C","303C"],["3041","3096"],["309F","309F"],["30A1","30FA"],["30FF","30FF"],["3105","312D"],["3131","318E"],["31A0","31BA"],["31F0","31FF"],["3400","4DB5"],["4E00","9FCC"],["A000","A014"],["A016","A48C"],["A4D0","A4F7"],["A500","A60B"],["A610","A61F"],["A62A","A62B"],["A66E","A66E"],["A6A0","A6E5"],["A7FB","A801"],["A803","A805"],["A807","A80A"],["A80C","A822"],["A840","A873"],["A882","A8B3"],["A8F2","A8F7"],["A8FB","A8FB"],["A90A","A925"],["A930","A946"],["A960","A97C"],["A984","A9B2"],["AA00","AA28"],["AA40","AA42"],["AA44","AA4B"],["AA60","AA6F"],["AA71","AA76"],["AA7A","AA7A"],["AA80","AAAF"],["AAB1","AAB1"],["AAB5","AAB6"],["AAB9","AABD"],["AAC0","AAC0"],["AAC2","AAC2"],["AADB","AADC"],["AAE0","AAEA"],["AAF2","AAF2"],["AB01","AB06"],["AB09","AB0E"],["AB11","AB16"],["AB20","AB26"],["AB28","AB2E"],["ABC0","ABE2"],["AC00","D7A3"],["D7B0","D7C6"],["D7CB","D7FB"],["F900","FA6D"],["FA70","FAD9"],["FB1D","FB1D"],["FB1F","FB28"],["FB2A","FB36"],["FB38","FB3C"],["FB3E","FB3E"],["FB40","FB41"],["FB43","FB44"],["FB46","FBB1"],["FBD3","FD3D"],["FD50","FD8F"],["FD92","FDC7"],["FDF0","FDFB"],["FE70","FE74"],["FE76","FEFC"],["FF66","FF6F"],["FF71","FF9D"],["FFA0","FFBE"],["FFC2","FFC7"],["FFCA","FFCF"],["FFD2","FFD7"],["FFDA","FFDC"],["10000","1000B"],["1000D","10026"],["10028","1003A"],["1003C","1003D"],["1003F","1004D"],["10050","1005D"],["10080","100FA"],["10280","1029C"],["102A0","102D0"],["10300","1031E"],["10330","10340"],["10342","10349"],["10380","1039D"],["103A0","103C3"],["103C8","103CF"],["10450","1049D"],["10800","10805"],["10808","10808"],["1080A","10835"],["10837","10838"],["1083C","1083C"],["1083F","10855"],["10900","10915"],["10920","10939"],["10980","109B7"],["109BE","109BF"],["10A00","10A00"],["10A10","10A13"],["10A15","10A17"],["10A19","10A33"],["10A60","10A7C"],["10B00","10B35"],["10B40","10B55"],["10B60","10B72"],["10C00","10C48"],["11003","11037"],["11083","110AF"],["110D0","110E8"],["11103","11126"],["11183","111B2"],["111C1","111C4"],["11680","116AA"],["12000","1236E"],["13000","1342E"],["16800","16A38"],["16F00","16F44"],["16F50","16F50"],["1B000","1B001"],["1EE00","1EE03"],["1EE05","1EE1F"],["1EE21","1EE22"],["1EE24","1EE24"],["1EE27","1EE27"],["1EE29","1EE32"],["1EE34","1EE37"],["1EE39","1EE39"],["1EE3B","1EE3B"],["1EE42","1EE42"],["1EE47","1EE47"],["1EE49","1EE49"],["1EE4B","1EE4B"],["1EE4D","1EE4F"],["1EE51","1EE52"],["1EE54","1EE54"],["1EE57","1EE57"],["1EE59","1EE59"],["1EE5B","1EE5B"],["1EE5D","1EE5D"],["1EE5F","1EE5F"],["1EE61","1EE62"],["1EE64","1EE64"],["1EE67","1EE6A"],["1EE6C","1EE72"],["1EE74","1EE77"],["1EE79","1EE7C"],["1EE7E","1EE7E"],["1EE80","1EE89"],["1EE8B","1EE9B"],["1EEA1","1EEA3"],["1EEA5","1EEA9"],["1EEAB","1EEBB"],["20000","2A6D6"],["2A700","2B734"],["2B740","2B81D"],["2F800","2FA1D"]],Lt:[["1C5","1C5"],["1C8","1C8"],["1CB","1CB"],["1F2","1F2"],["1F88","1F8F"],["1F98","1F9F"],["1FA8","1FAF"],["1FBC","1FBC"],["1FCC","1FCC"],["1FFC","1FFC"]],Lu:[["41","5A"],["C0","D6"],["D8","DE"],["100","100"],["102","102"],["104","104"],["106","106"],["108","108"],["10A","10A"],["10C","10C"],["10E","10E"],["110","110"],["112","112"],["114","114"],["116","116"],["118","118"],["11A","11A"],["11C","11C"],["11E","11E"],["120","120"],["122","122"],["124","124"],["126","126"],["128","128"],["12A","12A"],["12C","12C"],["12E","12E"],["130","130"],["132","132"],["134","134"],["136","136"],["139","139"],["13B","13B"],["13D","13D"],["13F","13F"],["141","141"],["143","143"],["145","145"],["147","147"],["14A","14A"],["14C","14C"],["14E","14E"],["150","150"],["152","152"],["154","154"],["156","156"],["158","158"],["15A","15A"],["15C","15C"],["15E","15E"],["160","160"],["162","162"],["164","164"],["166","166"],["168","168"],["16A","16A"],["16C","16C"],["16E","16E"],["170","170"],["172","172"],["174","174"],["176","176"],["178","179"],["17B","17B"],["17D","17D"],["181","182"],["184","184"],["186","187"],["189","18B"],["18E","191"],["193","194"],["196","198"],["19C","19D"],["19F","1A0"],["1A2","1A2"],["1A4","1A4"],["1A6","1A7"],["1A9","1A9"],["1AC","1AC"],["1AE","1AF"],["1B1","1B3"],["1B5","1B5"],["1B7","1B8"],["1BC","1BC"],["1C4","1C4"],["1C7","1C7"],["1CA","1CA"],["1CD","1CD"],["1CF","1CF"],["1D1","1D1"],["1D3","1D3"],["1D5","1D5"],["1D7","1D7"],["1D9","1D9"],["1DB","1DB"],["1DE","1DE"],["1E0","1E0"],["1E2","1E2"],["1E4","1E4"],["1E6","1E6"],["1E8","1E8"],["1EA","1EA"],["1EC","1EC"],["1EE","1EE"],["1F1","1F1"],["1F4","1F4"],["1F6","1F8"],["1FA","1FA"],["1FC","1FC"],["1FE","1FE"],["200","200"],["202","202"],["204","204"],["206","206"],["208","208"],["20A","20A"],["20C","20C"],["20E","20E"],["210","210"],["212","212"],["214","214"],["216","216"],["218","218"],["21A","21A"],["21C","21C"],["21E","21E"],["220","220"],["222","222"],["224","224"],["226","226"],["228","228"],["22A","22A"],["22C","22C"],["22E","22E"],["230","230"],["232","232"],["23A","23B"],["23D","23E"],["241","241"],["243","246"],["248","248"],["24A","24A"],["24C","24C"],["24E","24E"],["370","370"],["372","372"],["376","376"],["386","386"],["388","38A"],["38C","38C"],["38E","38F"],["391","3A1"],["3A3","3AB"],["3CF","3CF"],["3D2","3D4"],["3D8","3D8"],["3DA","3DA"],["3DC","3DC"],["3DE","3DE"],["3E0","3E0"],["3E2","3E2"],["3E4","3E4"],["3E6","3E6"],["3E8","3E8"],["3EA","3EA"],["3EC","3EC"],["3EE","3EE"],["3F4","3F4"],["3F7","3F7"],["3F9","3FA"],["3FD","42F"],["460","460"],["462","462"],["464","464"],["466","466"],["468","468"],["46A","46A"],["46C","46C"],["46E","46E"],["470","470"],["472","472"],["474","474"],["476","476"],["478","478"],["47A","47A"],["47C","47C"],["47E","47E"],["480","480"],["48A","48A"],["48C","48C"],["48E","48E"],["490","490"],["492","492"],["494","494"],["496","496"],["498","498"],["49A","49A"],["49C","49C"],["49E","49E"],["4A0","4A0"],["4A2","4A2"],["4A4","4A4"],["4A6","4A6"],["4A8","4A8"],["4AA","4AA"],["4AC","4AC"],["4AE","4AE"],["4B0","4B0"],["4B2","4B2"],["4B4","4B4"],["4B6","4B6"],["4B8","4B8"],["4BA","4BA"],["4BC","4BC"],["4BE","4BE"],["4C0","4C1"],["4C3","4C3"],["4C5","4C5"],["4C7","4C7"],["4C9","4C9"],["4CB","4CB"],["4CD","4CD"],["4D0","4D0"],["4D2","4D2"],["4D4","4D4"],["4D6","4D6"],["4D8","4D8"],["4DA","4DA"],["4DC","4DC"],["4DE","4DE"],["4E0","4E0"],["4E2","4E2"],["4E4","4E4"],["4E6","4E6"],["4E8","4E8"],["4EA","4EA"],["4EC","4EC"],["4EE","4EE"],["4F0","4F0"],["4F2","4F2"],["4F4","4F4"],["4F6","4F6"],["4F8","4F8"],["4FA","4FA"],["4FC","4FC"],["4FE","4FE"],["500","500"],["502","502"],["504","504"],["506","506"],["508","508"],["50A","50A"],["50C","50C"],["50E","50E"],["510","510"],["512","512"],["514","514"],["516","516"],["518","518"],["51A","51A"],["51C","51C"],["51E","51E"],["520","520"],["522","522"],["524","524"],["526","526"],["531","556"],["10A0","10C5"],["10C7","10C7"],["10CD","10CD"],["1E00","1E00"],["1E02","1E02"],["1E04","1E04"],["1E06","1E06"],["1E08","1E08"],["1E0A","1E0A"],["1E0C","1E0C"],["1E0E","1E0E"],["1E10","1E10"],["1E12","1E12"],["1E14","1E14"],["1E16","1E16"],["1E18","1E18"],["1E1A","1E1A"],["1E1C","1E1C"],["1E1E","1E1E"],["1E20","1E20"],["1E22","1E22"],["1E24","1E24"],["1E26","1E26"],["1E28","1E28"],["1E2A","1E2A"],["1E2C","1E2C"],["1E2E","1E2E"],["1E30","1E30"],["1E32","1E32"],["1E34","1E34"],["1E36","1E36"],["1E38","1E38"],["1E3A","1E3A"],["1E3C","1E3C"],["1E3E","1E3E"],["1E40","1E40"],["1E42","1E42"],["1E44","1E44"],["1E46","1E46"],["1E48","1E48"],["1E4A","1E4A"],["1E4C","1E4C"],["1E4E","1E4E"],["1E50","1E50"],["1E52","1E52"],["1E54","1E54"],["1E56","1E56"],["1E58","1E58"],["1E5A","1E5A"],["1E5C","1E5C"],["1E5E","1E5E"],["1E60","1E60"],["1E62","1E62"],["1E64","1E64"],["1E66","1E66"],["1E68","1E68"],["1E6A","1E6A"],["1E6C","1E6C"],["1E6E","1E6E"],["1E70","1E70"],["1E72","1E72"],["1E74","1E74"],["1E76","1E76"],["1E78","1E78"],["1E7A","1E7A"],["1E7C","1E7C"],["1E7E","1E7E"],["1E80","1E80"],["1E82","1E82"],["1E84","1E84"],["1E86","1E86"],["1E88","1E88"],["1E8A","1E8A"],["1E8C","1E8C"],["1E8E","1E8E"],["1E90","1E90"],["1E92","1E92"],["1E94","1E94"],["1E9E","1E9E"],["1EA0","1EA0"],["1EA2","1EA2"],["1EA4","1EA4"],["1EA6","1EA6"],["1EA8","1EA8"],["1EAA","1EAA"],["1EAC","1EAC"],["1EAE","1EAE"],["1EB0","1EB0"],["1EB2","1EB2"],["1EB4","1EB4"],["1EB6","1EB6"],["1EB8","1EB8"],["1EBA","1EBA"],["1EBC","1EBC"],["1EBE","1EBE"],["1EC0","1EC0"],["1EC2","1EC2"],["1EC4","1EC4"],["1EC6","1EC6"],["1EC8","1EC8"],["1ECA","1ECA"],["1ECC","1ECC"],["1ECE","1ECE"],["1ED0","1ED0"],["1ED2","1ED2"],["1ED4","1ED4"],["1ED6","1ED6"],["1ED8","1ED8"],["1EDA","1EDA"],["1EDC","1EDC"],["1EDE","1EDE"],["1EE0","1EE0"],["1EE2","1EE2"],["1EE4","1EE4"],["1EE6","1EE6"],["1EE8","1EE8"],["1EEA","1EEA"],["1EEC","1EEC"],["1EEE","1EEE"],["1EF0","1EF0"],["1EF2","1EF2"],["1EF4","1EF4"],["1EF6","1EF6"],["1EF8","1EF8"],["1EFA","1EFA"],["1EFC","1EFC"],["1EFE","1EFE"],["1F08","1F0F"],["1F18","1F1D"],["1F28","1F2F"],["1F38","1F3F"],["1F48","1F4D"],["1F59","1F59"],["1F5B","1F5B"],["1F5D","1F5D"],["1F5F","1F5F"],["1F68","1F6F"],["1FB8","1FBB"],["1FC8","1FCB"],["1FD8","1FDB"],["1FE8","1FEC"],["1FF8","1FFB"],["2102","2102"],["2107","2107"],["210B","210D"],["2110","2112"],["2115","2115"],["2119","211D"],["2124","2124"],["2126","2126"],["2128","2128"],["212A","212D"],["2130","2133"],["213E","213F"],["2145","2145"],["2183","2183"],["2C00","2C2E"],["2C60","2C60"],["2C62","2C64"],["2C67","2C67"],["2C69","2C69"],["2C6B","2C6B"],["2C6D","2C70"],["2C72","2C72"],["2C75","2C75"],["2C7E","2C80"],["2C82","2C82"],["2C84","2C84"],["2C86","2C86"],["2C88","2C88"],["2C8A","2C8A"],["2C8C","2C8C"],["2C8E","2C8E"],["2C90","2C90"],["2C92","2C92"],["2C94","2C94"],["2C96","2C96"],["2C98","2C98"],["2C9A","2C9A"],["2C9C","2C9C"],["2C9E","2C9E"],["2CA0","2CA0"],["2CA2","2CA2"],["2CA4","2CA4"],["2CA6","2CA6"],["2CA8","2CA8"],["2CAA","2CAA"],["2CAC","2CAC"],["2CAE","2CAE"],["2CB0","2CB0"],["2CB2","2CB2"],["2CB4","2CB4"],["2CB6","2CB6"],["2CB8","2CB8"],["2CBA","2CBA"],["2CBC","2CBC"],["2CBE","2CBE"],["2CC0","2CC0"],["2CC2","2CC2"],["2CC4","2CC4"],["2CC6","2CC6"],["2CC8","2CC8"],["2CCA","2CCA"],["2CCC","2CCC"],["2CCE","2CCE"],["2CD0","2CD0"],["2CD2","2CD2"],["2CD4","2CD4"],["2CD6","2CD6"],["2CD8","2CD8"],["2CDA","2CDA"],["2CDC","2CDC"],["2CDE","2CDE"],["2CE0","2CE0"],["2CE2","2CE2"],["2CEB","2CEB"],["2CED","2CED"],["2CF2","2CF2"],["A640","A640"],["A642","A642"],["A644","A644"],["A646","A646"],["A648","A648"],["A64A","A64A"],["A64C","A64C"],["A64E","A64E"],["A650","A650"],["A652","A652"],["A654","A654"],["A656","A656"],["A658","A658"],["A65A","A65A"],["A65C","A65C"],["A65E","A65E"],["A660","A660"],["A662","A662"],["A664","A664"],["A666","A666"],["A668","A668"],["A66A","A66A"],["A66C","A66C"],["A680","A680"],["A682","A682"],["A684","A684"],["A686","A686"],["A688","A688"],["A68A","A68A"],["A68C","A68C"],["A68E","A68E"],["A690","A690"],["A692","A692"],["A694","A694"],["A696","A696"],["A722","A722"],["A724","A724"],["A726","A726"],["A728","A728"],["A72A","A72A"],["A72C","A72C"],["A72E","A72E"],["A732","A732"],["A734","A734"],["A736","A736"],["A738","A738"],["A73A","A73A"],["A73C","A73C"],["A73E","A73E"],["A740","A740"],["A742","A742"],["A744","A744"],["A746","A746"],["A748","A748"],["A74A","A74A"],["A74C","A74C"],["A74E","A74E"],["A750","A750"],["A752","A752"],["A754","A754"],["A756","A756"],["A758","A758"],["A75A","A75A"],["A75C","A75C"],["A75E","A75E"],["A760","A760"],["A762","A762"],["A764","A764"],["A766","A766"],["A768","A768"],["A76A","A76A"],["A76C","A76C"],["A76E","A76E"],["A779","A779"],["A77B","A77B"],["A77D","A77E"],["A780","A780"],["A782","A782"],["A784","A784"],["A786","A786"],["A78B","A78B"],["A78D","A78D"],["A790","A790"],["A792","A792"],["A7A0","A7A0"],["A7A2","A7A2"],["A7A4","A7A4"],["A7A6","A7A6"],["A7A8","A7A8"],["A7AA","A7AA"],["FF21","FF3A"],["10400","10427"],["1D400","1D419"],["1D434","1D44D"],["1D468","1D481"],["1D49C","1D49C"],["1D49E","1D49F"],["1D4A2","1D4A2"],["1D4A5","1D4A6"],["1D4A9","1D4AC"],["1D4AE","1D4B5"],["1D4D0","1D4E9"],["1D504","1D505"],["1D507","1D50A"],["1D50D","1D514"],["1D516","1D51C"],["1D538","1D539"],["1D53B","1D53E"],["1D540","1D544"],["1D546","1D546"],["1D54A","1D550"],["1D56C","1D585"],["1D5A0","1D5B9"],["1D5D4","1D5ED"],["1D608","1D621"],["1D63C","1D655"],["1D670","1D689"],["1D6A8","1D6C0"],["1D6E2","1D6FA"],["1D71C","1D734"],["1D756","1D76E"],["1D790","1D7A8"],["1D7CA","1D7CA"]],M:"Mc|Me|Mn",Mc:[["903","903"],["93B","93B"],["93E","940"],["949","94C"],["94E","94F"],["982","983"],["9BE","9C0"],["9C7","9C8"],["9CB","9CC"],["9D7","9D7"],["A03","A03"],["A3E","A40"],["A83","A83"],["ABE","AC0"],["AC9","AC9"],["ACB","ACC"],["B02","B03"],["B3E","B3E"],["B40","B40"],["B47","B48"],["B4B","B4C"],["B57","B57"],["BBE","BBF"],["BC1","BC2"],["BC6","BC8"],["BCA","BCC"],["BD7","BD7"],["C01","C03"],["C41","C44"],["C82","C83"],["CBE","CBE"],["CC0","CC4"],["CC7","CC8"],["CCA","CCB"],["CD5","CD6"],["D02","D03"],["D3E","D40"],["D46","D48"],["D4A","D4C"],["D57","D57"],["D82","D83"],["DCF","DD1"],["DD8","DDF"],["DF2","DF3"],["F3E","F3F"],["F7F","F7F"],["102B","102C"],["1031","1031"],["1038","1038"],["103B","103C"],["1056","1057"],["1062","1064"],["1067","106D"],["1083","1084"],["1087","108C"],["108F","108F"],["109A","109C"],["17B6","17B6"],["17BE","17C5"],["17C7","17C8"],["1923","1926"],["1929","192B"],["1930","1931"],["1933","1938"],["19B0","19C0"],["19C8","19C9"],["1A19","1A1B"],["1A55","1A55"],["1A57","1A57"],["1A61","1A61"],["1A63","1A64"],["1A6D","1A72"],["1B04","1B04"],["1B35","1B35"],["1B3B","1B3B"],["1B3D","1B41"],["1B43","1B44"],["1B82","1B82"],["1BA1","1BA1"],["1BA6","1BA7"],["1BAA","1BAA"],["1BAC","1BAD"],["1BE7","1BE7"],["1BEA","1BEC"],["1BEE","1BEE"],["1BF2","1BF3"],["1C24","1C2B"],["1C34","1C35"],["1CE1","1CE1"],["1CF2","1CF3"],["302E","302F"],["A823","A824"],["A827","A827"],["A880","A881"],["A8B4","A8C3"],["A952","A953"],["A983","A983"],["A9B4","A9B5"],["A9BA","A9BB"],["A9BD","A9C0"],["AA2F","AA30"],["AA33","AA34"],["AA4D","AA4D"],["AA7B","AA7B"],["AAEB","AAEB"],["AAEE","AAEF"],["AAF5","AAF5"],["ABE3","ABE4"],["ABE6","ABE7"],["ABE9","ABEA"],["ABEC","ABEC"],["11000","11000"],["11002","11002"],["11082","11082"],["110B0","110B2"],["110B7","110B8"],["1112C","1112C"],["11182","11182"],["111B3","111B5"],["111BF","111C0"],["116AC","116AC"],["116AE","116AF"],["116B6","116B6"],["16F51","16F7E"],["1D165","1D166"],["1D16D","1D172"]],Me:[["488","489"],["20DD","20E0"],["20E2","20E4"],["A670","A672"]],Mn:[["300","36F"],["483","487"],["591","5BD"],["5BF","5BF"],["5C1","5C2"],["5C4","5C5"],["5C7","5C7"],["610","61A"],["64B","65F"],["670","670"],["6D6","6DC"],["6DF","6E4"],["6E7","6E8"],["6EA","6ED"],["711","711"],["730","74A"],["7A6","7B0"],["7EB","7F3"],["816","819"],["81B","823"],["825","827"],["829","82D"],["859","85B"],["8E4","8FE"],["900","902"],["93A","93A"],["93C","93C"],["941","948"],["94D","94D"],["951","957"],["962","963"],["981","981"],["9BC","9BC"],["9C1","9C4"],["9CD","9CD"],["9E2","9E3"],["A01","A02"],["A3C","A3C"],["A41","A42"],["A47","A48"],["A4B","A4D"],["A51","A51"],["A70","A71"],["A75","A75"],["A81","A82"],["ABC","ABC"],["AC1","AC5"],["AC7","AC8"],["ACD","ACD"],["AE2","AE3"],["B01","B01"],["B3C","B3C"],["B3F","B3F"],["B41","B44"],["B4D","B4D"],["B56","B56"],["B62","B63"],["B82","B82"],["BC0","BC0"],["BCD","BCD"],["C3E","C40"],["C46","C48"],["C4A","C4D"],["C55","C56"],["C62","C63"],["CBC","CBC"],["CBF","CBF"],["CC6","CC6"],["CCC","CCD"],["CE2","CE3"],["D41","D44"],["D4D","D4D"],["D62","D63"],["DCA","DCA"],["DD2","DD4"],["DD6","DD6"],["E31","E31"],["E34","E3A"],["E47","E4E"],["EB1","EB1"],["EB4","EB9"],["EBB","EBC"],["EC8","ECD"],["F18","F19"],["F35","F35"],["F37","F37"],["F39","F39"],["F71","F7E"],["F80","F84"],["F86","F87"],["F8D","F97"],["F99","FBC"],["FC6","FC6"],["102D","1030"],["1032","1037"],["1039","103A"],["103D","103E"],["1058","1059"],["105E","1060"],["1071","1074"],["1082","1082"],["1085","1086"],["108D","108D"],["109D","109D"],["135D","135F"],["1712","1714"],["1732","1734"],["1752","1753"],["1772","1773"],["17B4","17B5"],["17B7","17BD"],["17C6","17C6"],["17C9","17D3"],["17DD","17DD"],["180B","180D"],["18A9","18A9"],["1920","1922"],["1927","1928"],["1932","1932"],["1939","193B"],["1A17","1A18"],["1A56","1A56"],["1A58","1A5E"],["1A60","1A60"],["1A62","1A62"],["1A65","1A6C"],["1A73","1A7C"],["1A7F","1A7F"],["1B00","1B03"],["1B34","1B34"],["1B36","1B3A"],["1B3C","1B3C"],["1B42","1B42"],["1B6B","1B73"],["1B80","1B81"],["1BA2","1BA5"],["1BA8","1BA9"],["1BAB","1BAB"],["1BE6","1BE6"],["1BE8","1BE9"],["1BED","1BED"],["1BEF","1BF1"],["1C2C","1C33"],["1C36","1C37"],["1CD0","1CD2"],["1CD4","1CE0"],["1CE2","1CE8"],["1CED","1CED"],["1CF4","1CF4"],["1DC0","1DE6"],["1DFC","1DFF"],["20D0","20DC"],["20E1","20E1"],["20E5","20F0"],["2CEF","2CF1"],["2D7F","2D7F"],["2DE0","2DFF"],["302A","302D"],["3099","309A"],["A66F","A66F"],["A674","A67D"],["A69F","A69F"],["A6F0","A6F1"],["A802","A802"],["A806","A806"],["A80B","A80B"],["A825","A826"],["A8C4","A8C4"],["A8E0","A8F1"],["A926","A92D"],["A947","A951"],["A980","A982"],["A9B3","A9B3"],["A9B6","A9B9"],["A9BC","A9BC"],["AA29","AA2E"],["AA31","AA32"],["AA35","AA36"],["AA43","AA43"],["AA4C","AA4C"],["AAB0","AAB0"],["AAB2","AAB4"],["AAB7","AAB8"],["AABE","AABF"],["AAC1","AAC1"],["AAEC","AAED"],["AAF6","AAF6"],["ABE5","ABE5"],["ABE8","ABE8"],["ABED","ABED"],["FB1E","FB1E"],["FE00","FE0F"],["FE20","FE26"],["101FD","101FD"],["10A01","10A03"],["10A05","10A06"],["10A0C","10A0F"],["10A38","10A3A"],["10A3F","10A3F"],["11001","11001"],["11038","11046"],["11080","11081"],["110B3","110B6"],["110B9","110BA"],["11100","11102"],["11127","1112B"],["1112D","11134"],["11180","11181"],["111B6","111BE"],["116AB","116AB"],["116AD","116AD"],["116B0","116B5"],["116B7","116B7"],["16F8F","16F92"],["1D167","1D169"],["1D17B","1D182"],["1D185","1D18B"],["1D1AA","1D1AD"],["1D242","1D244"],["E0100","E01EF"]],N:"Nd|Nl|No",Nd:[["30","39"],["660","669"],["6F0","6F9"],["7C0","7C9"],["966","96F"],["9E6","9EF"],["A66","A6F"],["AE6","AEF"],["B66","B6F"],["BE6","BEF"],["C66","C6F"],["CE6","CEF"],["D66","D6F"],["E50","E59"],["ED0","ED9"],["F20","F29"],["1040","1049"],["1090","1099"],["17E0","17E9"],["1810","1819"],["1946","194F"],["19D0","19D9"],["1A80","1A89"],["1A90","1A99"],["1B50","1B59"],["1BB0","1BB9"],["1C40","1C49"],["1C50","1C59"],["A620","A629"],["A8D0","A8D9"],["A900","A909"],["A9D0","A9D9"],["AA50","AA59"],["ABF0","ABF9"],["FF10","FF19"],["104A0","104A9"],["11066","1106F"],["110F0","110F9"],["11136","1113F"],["111D0","111D9"],["116C0","116C9"],["1D7CE","1D7FF"]],Nl:[["16EE","16F0"],["2160","2182"],["2185","2188"],["3007","3007"],["3021","3029"],["3038","303A"],["A6E6","A6EF"],["10140","10174"],["10341","10341"],["1034A","1034A"],["103D1","103D5"],["12400","12462"]],No:[["B2","B3"],["B9","B9"],["BC","BE"],["9F4","9F9"],["B72","B77"],["BF0","BF2"],["C78","C7E"],["D70","D75"],["F2A","F33"],["1369","137C"],["17F0","17F9"],["19DA","19DA"],["2070","2070"],["2074","2079"],["2080","2089"],["2150","215F"],["2189","2189"],["2460","249B"],["24EA","24FF"],["2776","2793"],["2CFD","2CFD"],["3192","3195"],["3220","3229"],["3248","324F"],["3251","325F"],["3280","3289"],["32B1","32BF"],["A830","A835"],["10107","10133"],["10175","10178"],["1018A","1018A"],["10320","10323"],["10858","1085F"],["10916","1091B"],["10A40","10A47"],["10A7D","10A7E"],["10B58","10B5F"],["10B78","10B7F"],["10E60","10E7E"],["11052","11065"],["1D360","1D371"],["1F100","1F10A"]],P:"Pc|Pd|Pe|Pf|Pi|Po|Ps",Pc:[["5F","5F"],["203F","2040"],["2054","2054"],["FE33","FE34"],["FE4D","FE4F"],["FF3F","FF3F"]],Pd:[["2D","2D"],["58A","58A"],["5BE","5BE"],["1400","1400"],["1806","1806"],["2010","2015"],["2E17","2E17"],["2E1A","2E1A"],["2E3A","2E3B"],["301C","301C"],["3030","3030"],["30A0","30A0"],["FE31","FE32"],["FE58","FE58"],["FE63","FE63"],["FF0D","FF0D"]],Pe:[["29","29"],["5D","5D"],["7D","7D"],["F3B","F3B"],["F3D","F3D"],["169C","169C"],["2046","2046"],["207E","207E"],["208E","208E"],["232A","232A"],["2769","2769"],["276B","276B"],["276D","276D"],["276F","276F"],["2771","2771"],["2773","2773"],["2775","2775"],["27C6","27C6"],["27E7","27E7"],["27E9","27E9"],["27EB","27EB"],["27ED","27ED"],["27EF","27EF"],["2984","2984"],["2986","2986"],["2988","2988"],["298A","298A"],["298C","298C"],["298E","298E"],["2990","2990"],["2992","2992"],["2994","2994"],["2996","2996"],["2998","2998"],["29D9","29D9"],["29DB","29DB"],["29FD","29FD"],["2E23","2E23"],["2E25","2E25"],["2E27","2E27"],["2E29","2E29"],["3009","3009"],["300B","300B"],["300D","300D"],["300F","300F"],["3011","3011"],["3015","3015"],["3017","3017"],["3019","3019"],["301B","301B"],["301E","301F"],["FD3F","FD3F"],["FE18","FE18"],["FE36","FE36"],["FE38","FE38"],["FE3A","FE3A"],["FE3C","FE3C"],["FE3E","FE3E"],["FE40","FE40"],["FE42","FE42"],["FE44","FE44"],["FE48","FE48"],["FE5A","FE5A"],["FE5C","FE5C"],["FE5E","FE5E"],["FF09","FF09"],["FF3D","FF3D"],["FF5D","FF5D"],["FF60","FF60"],["FF63","FF63"]],Pf:[["BB","BB"],["2019","2019"],["201D","201D"],["203A","203A"],["2E03","2E03"],["2E05","2E05"],["2E0A","2E0A"],["2E0D","2E0D"],["2E1D","2E1D"],["2E21","2E21"]],Pi:[["AB","AB"],["2018","2018"],["201B","201C"],["201F","201F"],["2039","2039"],["2E02","2E02"],["2E04","2E04"],["2E09","2E09"],["2E0C","2E0C"],["2E1C","2E1C"],["2E20","2E20"]],Po:[["21","23"],["25","27"],["2A","2A"],["2C","2C"],["2E","2F"],["3A","3B"],["3F","40"],["5C","5C"],["A1","A1"],["A7","A7"],["B6","B7"],["BF","BF"],["37E","37E"],["387","387"],["55A","55F"],["589","589"],["5C0","5C0"],["5C3","5C3"],["5C6","5C6"],["5F3","5F4"],["609","60A"],["60C","60D"],["61B","61B"],["61E","61F"],["66A","66D"],["6D4","6D4"],["700","70D"],["7F7","7F9"],["830","83E"],["85E","85E"],["964","965"],["970","970"],["AF0","AF0"],["DF4","DF4"],["E4F","E4F"],["E5A","E5B"],["F04","F12"],["F14","F14"],["F85","F85"],["FD0","FD4"],["FD9","FDA"],["104A","104F"],["10FB","10FB"],["1360","1368"],["166D","166E"],["16EB","16ED"],["1735","1736"],["17D4","17D6"],["17D8","17DA"],["1800","1805"],["1807","180A"],["1944","1945"],["1A1E","1A1F"],["1AA0","1AA6"],["1AA8","1AAD"],["1B5A","1B60"],["1BFC","1BFF"],["1C3B","1C3F"],["1C7E","1C7F"],["1CC0","1CC7"],["1CD3","1CD3"],["2016","2017"],["2020","2027"],["2030","2038"],["203B","203E"],["2041","2043"],["2047","2051"],["2053","2053"],["2055","205E"],["2CF9","2CFC"],["2CFE","2CFF"],["2D70","2D70"],["2E00","2E01"],["2E06","2E08"],["2E0B","2E0B"],["2E0E","2E16"],["2E18","2E19"],["2E1B","2E1B"],["2E1E","2E1F"],["2E2A","2E2E"],["2E30","2E39"],["3001","3003"],["303D","303D"],["30FB","30FB"],["A4FE","A4FF"],["A60D","A60F"],["A673","A673"],["A67E","A67E"],["A6F2","A6F7"],["A874","A877"],["A8CE","A8CF"],["A8F8","A8FA"],["A92E","A92F"],["A95F","A95F"],["A9C1","A9CD"],["A9DE","A9DF"],["AA5C","AA5F"],["AADE","AADF"],["AAF0","AAF1"],["ABEB","ABEB"],["FE10","FE16"],["FE19","FE19"],["FE30","FE30"],["FE45","FE46"],["FE49","FE4C"],["FE50","FE52"],["FE54","FE57"],["FE5F","FE61"],["FE68","FE68"],["FE6A","FE6B"],["FF01","FF03"],["FF05","FF07"],["FF0A","FF0A"],["FF0C","FF0C"],["FF0E","FF0F"],["FF1A","FF1B"],["FF1F","FF20"],["FF3C","FF3C"],["FF61","FF61"],["FF64","FF65"],["10100","10102"],["1039F","1039F"],["103D0","103D0"],["10857","10857"],["1091F","1091F"],["1093F","1093F"],["10A50","10A58"],["10A7F","10A7F"],["10B39","10B3F"],["11047","1104D"],["110BB","110BC"],["110BE","110C1"],["11140","11143"],["111C5","111C8"],["12470","12473"]],Ps:[["28","28"],["5B","5B"],["7B","7B"],["F3A","F3A"],["F3C","F3C"],["169B","169B"],["201A","201A"],["201E","201E"],["2045","2045"],["207D","207D"],["208D","208D"],["2329","2329"],["2768","2768"],["276A","276A"],["276C","276C"],["276E","276E"],["2770","2770"],["2772","2772"],["2774","2774"],["27C5","27C5"],["27E6","27E6"],["27E8","27E8"],["27EA","27EA"],["27EC","27EC"],["27EE","27EE"],["2983","2983"],["2985","2985"],["2987","2987"],["2989","2989"],["298B","298B"],["298D","298D"],["298F","298F"],["2991","2991"],["2993","2993"],["2995","2995"],["2997","2997"],["29D8","29D8"],["29DA","29DA"],["29FC","29FC"],["2E22","2E22"],["2E24","2E24"],["2E26","2E26"],["2E28","2E28"],["3008","3008"],["300A","300A"],["300C","300C"],["300E","300E"],["3010","3010"],["3014","3014"],["3016","3016"],["3018","3018"],["301A","301A"],["301D","301D"],["FD3E","FD3E"],["FE17","FE17"],["FE35","FE35"],["FE37","FE37"],["FE39","FE39"],["FE3B","FE3B"],["FE3D","FE3D"],["FE3F","FE3F"],["FE41","FE41"],["FE43","FE43"],["FE47","FE47"],["FE59","FE59"],["FE5B","FE5B"],["FE5D","FE5D"],["FF08","FF08"],["FF3B","FF3B"],["FF5B","FF5B"],["FF5F","FF5F"],["FF62","FF62"]],S:"Sc|Sk|Sm|So",Sc:[["24","24"],["A2","A5"],["58F","58F"],["60B","60B"],["9F2","9F3"],["9FB","9FB"],["AF1","AF1"],["BF9","BF9"],["E3F","E3F"],["17DB","17DB"],["20A0","20BA"],["A838","A838"],["FDFC","FDFC"],["FE69","FE69"],["FF04","FF04"],["FFE0","FFE1"],["FFE5","FFE6"]],Sk:[["5E","5E"],["60","60"],["A8","A8"],["AF","AF"],["B4","B4"],["B8","B8"],["2C2","2C5"],["2D2","2DF"],["2E5","2EB"],["2ED","2ED"],["2EF","2FF"],["375","375"],["384","385"],["1FBD","1FBD"],["1FBF","1FC1"],["1FCD","1FCF"],["1FDD","1FDF"],["1FED","1FEF"],["1FFD","1FFE"],["309B","309C"],["A700","A716"],["A720","A721"],["A789","A78A"],["FBB2","FBC1"],["FF3E","FF3E"],["FF40","FF40"],["FFE3","FFE3"]],Sm:[["2B","2B"],["3C","3E"],["7C","7C"],["7E","7E"],["AC","AC"],["B1","B1"],["D7","D7"],["F7","F7"],["3F6","3F6"],["606","608"],["2044","2044"],["2052","2052"],["207A","207C"],["208A","208C"],["2118","2118"],["2140","2144"],["214B","214B"],["2190","2194"],["219A","219B"],["21A0","21A0"],["21A3","21A3"],["21A6","21A6"],["21AE","21AE"],["21CE","21CF"],["21D2","21D2"],["21D4","21D4"],["21F4","22FF"],["2308","230B"],["2320","2321"],["237C","237C"],["239B","23B3"],["23DC","23E1"],["25B7","25B7"],["25C1","25C1"],["25F8","25FF"],["266F","266F"],["27C0","27C4"],["27C7","27E5"],["27F0","27FF"],["2900","2982"],["2999","29D7"],["29DC","29FB"],["29FE","2AFF"],["2B30","2B44"],["2B47","2B4C"],["FB29","FB29"],["FE62","FE62"],["FE64","FE66"],["FF0B","FF0B"],["FF1C","FF1E"],["FF5C","FF5C"],["FF5E","FF5E"],["FFE2","FFE2"],["FFE9","FFEC"],["1D6C1","1D6C1"],["1D6DB","1D6DB"],["1D6FB","1D6FB"],["1D715","1D715"],["1D735","1D735"],["1D74F","1D74F"],["1D76F","1D76F"],["1D789","1D789"],["1D7A9","1D7A9"],["1D7C3","1D7C3"],["1EEF0","1EEF1"]],So:[["A6","A6"],["A9","A9"],["AE","AE"],["B0","B0"],["482","482"],["60E","60F"],["6DE","6DE"],["6E9","6E9"],["6FD","6FE"],["7F6","7F6"],["9FA","9FA"],["B70","B70"],["BF3","BF8"],["BFA","BFA"],["C7F","C7F"],["D79","D79"],["F01","F03"],["F13","F13"],["F15","F17"],["F1A","F1F"],["F34","F34"],["F36","F36"],["F38","F38"],["FBE","FC5"],["FC7","FCC"],["FCE","FCF"],["FD5","FD8"],["109E","109F"],["1390","1399"],["1940","1940"],["19DE","19FF"],["1B61","1B6A"],["1B74","1B7C"],["2100","2101"],["2103","2106"],["2108","2109"],["2114","2114"],["2116","2117"],["211E","2123"],["2125","2125"],["2127","2127"],["2129","2129"],["212E","212E"],["213A","213B"],["214A","214A"],["214C","214D"],["214F","214F"],["2195","2199"],["219C","219F"],["21A1","21A2"],["21A4","21A5"],["21A7","21AD"],["21AF","21CD"],["21D0","21D1"],["21D3","21D3"],["21D5","21F3"],["2300","2307"],["230C","231F"],["2322","2328"],["232B","237B"],["237D","239A"],["23B4","23DB"],["23E2","23F3"],["2400","2426"],["2440","244A"],["249C","24E9"],["2500","25B6"],["25B8","25C0"],["25C2","25F7"],["2600","266E"],["2670","26FF"],["2701","2767"],["2794","27BF"],["2800","28FF"],["2B00","2B2F"],["2B45","2B46"],["2B50","2B59"],["2CE5","2CEA"],["2E80","2E99"],["2E9B","2EF3"],["2F00","2FD5"],["2FF0","2FFB"],["3004","3004"],["3012","3013"],["3020","3020"],["3036","3037"],["303E","303F"],["3190","3191"],["3196","319F"],["31C0","31E3"],["3200","321E"],["322A","3247"],["3250","3250"],["3260","327F"],["328A","32B0"],["32C0","32FE"],["3300","33FF"],["4DC0","4DFF"],["A490","A4C6"],["A828","A82B"],["A836","A837"],["A839","A839"],["AA77","AA79"],["FDFD","FDFD"],["FFE4","FFE4"],["FFE8","FFE8"],["FFED","FFEE"],["FFFC","FFFD"],["10137","1013F"],["10179","10189"],["10190","1019B"],["101D0","101FC"],["1D000","1D0F5"],["1D100","1D126"],["1D129","1D164"],["1D16A","1D16C"],["1D183","1D184"],["1D18C","1D1A9"],["1D1AE","1D1DD"],["1D200","1D241"],["1D245","1D245"],["1D300","1D356"],["1F000","1F02B"],["1F030","1F093"],["1F0A0","1F0AE"],["1F0B1","1F0BE"],["1F0C1","1F0CF"],["1F0D1","1F0DF"],["1F110","1F12E"],["1F130","1F16B"],["1F170","1F19A"],["1F1E6","1F202"],["1F210","1F23A"],["1F240","1F248"],["1F250","1F251"],["1F300","1F320"],["1F330","1F335"],["1F337","1F37C"],["1F380","1F393"],["1F3A0","1F3C4"],["1F3C6","1F3CA"],["1F3E0","1F3F0"],["1F400","1F43E"],["1F440","1F440"],["1F442","1F4F7"],["1F4F9","1F4FC"],["1F500","1F53D"],["1F540","1F543"],["1F550","1F567"],["1F5FB","1F640"],["1F645","1F64F"],["1F680","1F6C5"],["1F700","1F773"]],Z:"Zl|Zp|Zs",Zl:[["2028","2028"]],Zp:[["2029","2029"]],Zs:[["20","20"],["A0","A0"],["1680","1680"],["180E","180E"],["2000","200A"],["202F","202F"],["205F","205F"],["3000","3000"]],"~i":[["3A","3A"],["41","5A"],["5F","5F"],["61","7A"],["C0","D6"],["D8","F6"],["F8","2FF"],["370","37D"],["37F","1FFF"],["200C","200D"],["2070","218F"],["2C00","2FEF"],["3001","D7FF"],["F900","FDCF"],["FDF0","FFFD"],["10000","EFFFF"]],"~c":[["2D","2E"],["30","3A"],["41","5A"],["5F","5F"],["61","7A"],["B7","B7"],["C0","D6"],["D8","F6"],["F8","37D"],["37F","1FFF"],["200C","200D"],["203F","2040"],["2070","218F"],["2C00","2FEF"],["3001","D7FF"],["F900","FDCF"],["FDF0","FFFD"],["10000","EFFFF"]],w:"Ll|Lm|Lo|Lt|Lu|Mc|Me|Mn|Nd|Nl|No|Sc|Sk|Sm|So"},functions:{"http://www.w3.org/2005/xpath-functions":{QName:[2],abs:[1],"accumulator-after":[1],"accumulator-before":[1],"adjust-date-to-timezone":[1,2],"adjust-dateTime-to-timezone":[1,2],"adjust-time-to-timezone":[1,2],"analyze-string":[2,3],apply:[2],"available-environment-variables":[0],"available-system-properties":[0],avg:[1],"base-uri":[0,1],boolean:[1],ceiling:[1],"codepoint-equal":[2],"codepoints-to-string":[1],"collation-key":[1,2],collection:[0,1],compare:[2,3],concat:[3],contains:[2,3],"contains-token":[2,3],"copy-of":[0,1],count:[1],current:[0],"current-date":[0],"current-dateTime":[0],"current-group":[0],"current-grouping-key":[0],"current-merge-group":[0,1],"current-merge-key":[0],"current-output-uri":[0],"current-time":[0],data:[0,1],dateTime:[2],"day-from-date":[1],"day-from-dateTime":[1],"days-from-duration":[1],"deep-equal":[2,3],"default-collation":[0],"default-language":[0],"distinct-values":[1,2],doc:[1],"doc-available":[1],document:[1,2],"document-uri":[0,1],"element-available":[1],"element-with-id":[1,2],empty:[1],"encode-for-uri":[1],"ends-with":[2,3],"environment-variable":[1],error:[0,1,2,3],"escape-html-uri":[1],"exactly-one":[1],exists:[1],false:[0],filter:[2],floor:[1],"fold-left":[3],"fold-right":[3],"for-each":[2],"for-each-pair":[3],"format-date":[2,5],"format-dateTime":[2,5],"format-integer":[2,3],"format-number":[2,3],"format-time":[2,5],"function-arity":[1],"function-available":[1,2],"function-lookup":[2],"function-name":[1],"generate-id":[0,1],"has-children":[0,1],head:[1],"hours-from-dateTime":[1],"hours-from-duration":[1],"hours-from-time":[1],id:[1,2],idref:[1,2],"implicit-timezone":[0],"in-scope-prefixes":[1],"index-of":[2,3],innermost:[1],"insert-before":[3],"iri-to-uri":[1],"json-doc":[1,2],"json-to-xml":[1,2],key:[2,3],lang:[1,2],last:[0],"load-xquery-module":[1,2],"local-name":[0,1],"local-name-from-QName":[1],"lower-case":[1],matches:[2,3],max:[1,2],min:[1,2],"minutes-from-dateTime":[1],"minutes-from-duration":[1],"minutes-from-time":[1],"month-from-date":[1],"month-from-dateTime":[1],"months-from-duration":[1],name:[0,1],"namespace-uri":[0,1],"namespace-uri-for-prefix":[2],"namespace-uri-from-QName":[1],nilled:[0,1],"node-name":[0,1],"normalize-space":[0,1],"normalize-unicode":[1,2],not:[1],number:[0,1],"one-or-more":[1],outermost:[1],"parse-ietf-date":[1],"parse-json":[1,2],"parse-xml":[1],"parse-xml-fragment":[1],path:[0,1],position:[0],"prefix-from-QName":[1],put:[2],"random-number-generator":[0,1],"regex-group":[1],remove:[2],replace:[3,4],"resolve-QName":[2],"resolve-uri":[1,2],reverse:[1],root:[0,1],round:[1,2],"round-half-to-even":[1,2],"seconds-from-dateTime":[1],"seconds-from-duration":[1],"seconds-from-time":[1],serialize:[1,2],"serialize-json":[1,2],snapshot:[0,1],sort:[1,3],"starts-with":[2,3],"static-base-uri":[0],"stream-available":[1],string:[0,1],"string-join":[1,2],"string-length":[0,1],"string-to-codepoints":[1],subsequence:[2,3],substring:[2,3],"substring-after":[2,3],"substring-before":[2,3],sum:[1,2],"system-property":[1],tail:[1],"timezone-from-date":[1],"timezone-from-dateTime":[1],"timezone-from-time":[1],tokenize:[1,2,3],trace:[1,2],transform:[1],translate:[3],true:[0],"type-available":[1],unordered:[1],"unparsed-entity-public-id":[1,2],"unparsed-entity-uri":[1,2],"unparsed-text":[1,2],"unparsed-text-available":[1,2],"unparsed-text-lines":[1,2],"upper-case":[1],"uri-collection":[0,1],"xml-to-json":[1,2],"year-from-date":[1],"year-from-dateTime":[1],"years-from-duration":[1],"zero-or-one":[1]},"http://www.w3.org/2005/xpath-functions/array":{append:[2],filter:[2],flatten:[1],"fold-left":[3],"fold-right":[3],"for-each":[2],"for-each-pair":[3],get:[2],head:[1],"insert-before":[3],join:[1],remove:[2],reverse:[1],size:[1],sort:[1,2],subarray:[2,3],tail:[1]},"http://www.w3.org/2005/xpath-functions/map":{contains:[2],entry:[2],"for-each":[2],get:[2],keys:[1],merge:[1],put:[3],remove:[2],size:[1]},"http://www.w3.org/2005/xpath-functions/math":{acos:[1],asin:[1],atan:[1],atan2:[2],cos:[1],exp:[1],exp10:[1],log:[1],log10:[1],pi:[0],pow:[2],sin:[1],sqrt:[1],tan:[1]},"http://www.w3.org/2001/XMLSchema":{numeric:[1],string:[1],boolean:[1],duration:[1],dateTime:[1],date:[1],time:[1],gYearMonth:[1],gMonth:[1],gMonthDay:[1],gYear:[1],gDay:[1],hexBinary:[1],base64Binary:[1],anyURI:[1],QName:[1],untypedAtomic:[1],decimal:[1],float:[1],double:[1],integer:[1],nonPositiveInteger:[1],negativeInteger:[1],long:[1],int:[1],short:[1],byte:[1],nonNegativeInteger:[1],positiveInteger:[1],unsignedLong:[1],unsignedInt:[1],unsignedShort:[1],unsignedByte:[1],yearMonthDuration:[1],dayTimeDuration:[1],dateTimeStamp:[1],normalizedString:[1],token:[1],language:[1],Name:[1],NMTOKEN:[1],NCName:[1],ID:[1],IDREF:[1],ENTITY:[1],NMTOKENS:[1],ENTITIES:[1],IDREFS:[1],error:[1]},"http://saxonica.com/ns/interactiveXSLT":{apply:[2],call:[3],contains:[2],eval:[1],event:[0],get:[2],location:[0],page:[0],"query-params":[0],source:[0],style:[1],window:[0]}},elements:{accept:{},accumulator:{},"accumulator-rule":{},"analyze-string":{},"apply-imports":{},"apply-templates":{},assert:{},attribute:{},"attribute-set":{},break:{},"call-template":{},catch:{},"character-map":{},choose:{},comment:{},"context-item":{},copy:{},"copy-of":{},"decimal-format":{},document:{},element:{},evaluate:{},expose:{},fallback:{},"for-each":{},"for-each-group":{},fork:{},function:{},"global-context-item":{},if:{},import:{},include:{},iterate:{},key:{},map:{},"map-entry":{},"matching-substring":{},merge:{},"merge-action":{},"merge-key":{},"merge-source":{},message:{},mode:{},namespace:{},"namespace-alias":{},"next-iteration":{},"next-match":{},"non-matching-substring":{},number:{},"on-completion":{},"on-empty":{},"on-non-empty":{},otherwise:{},output:{},"output-character":{},override:{},package:{},param:{},"perform-sort":{},"preserve-space":{},"processing-instruction":{},"result-document":{},sequence:{},sort:{},"source-document":{},"strip-space":{},stylesheet:{},template:{},text:{},transform:{},try:{},"use-package":{},"value-of":{},variable:{},when:{},"where-populated":{},"with-param":{}},compiler:{}};let J=function(){let e;return{getPlatform:function(){return e},zj:function(t){e=t},$g:function(){return e.name},ah:function(){return e.edition},createDocument:function(){return e.createDocument()},Ig:function(t,i,f,v){return e.decodeBuffer(t,i,f,v)},ki:function(t){return e.encodeToBase64(t)},Yg:function(){return e.getDefaultDeliverMessage()},ra:function(){return e.inBrowser()},Qb:function(t){return e.isHTMLElement(t)},aj:function(t,i){return e.makeBuffer(t,i)},Sb:function(t,i=!0,f=null){return e.parseXmlFromString(t,i,f)},ve:function(t){return e.readFile(t)},fg:function(t,i){return e.readFileSync(t,i)},sj:function(t,i){return e.readFilePromise(t,i)},xe:function(t){return e.resource(t)},ec:function(t){return e.resourcePromise(t)},pb:function(t,i){return e.resolveUri(t,i)},xa:function(t){return e.saxonPrint(t)},newURL:function(t,i){return e.newURL(t,i)},Mf:function(t){return e.fileURL(t)},Df:function(){return e.baseURL()},Jh:function(t,i,f){return e.writeFileSync(t,i,f)},Ih:function(t,i,f){return e.writeFileAsync(t,i,f)},Gi:function(){return e.getStdOut()},crypto:function(t){return e.crypto(t)},Ij:function(){return e.xdmDTlocale()},Hi:function(){return e.globalObject},addEventListener:function(t,i,f,v){return e.addEventListener(t,i,f,v)}}}(),pt=0;function lt(){return pt}function mt(){pt=0}class F extends Error{constructor(t="SaxonJS run-time error",i="FORG0001",f=null){super(),this.name="XError",this.message=t,this.code=i,f?this.setExpr(f):this.xsltModule=this.xsltLineNr=null,this.errorObject=null,this.g=!1,pt++}toString(){return this.name+":"+this.message+"; code:"+this.code}setExpr(t){function i(f,v){for(;f;){if(f[v])return f[v];f=f.parentNode}return null}this.xsltLineNr=i(t,"line"),this.xsltModule=i(t,"module")}getStackTrace(){return null.getStackTrace()}getMessage(){let t="Error "+this.code;return this.xsltLineNr!=null&&(t+=" at "+this.xsltModule+"#"+this.xsltLineNr),t+=`
  `+this.message}getRawMessage(){return this.message}getErrorCode(){return this.code}getOriginatingModule(){return this.xsltModule}getOriginatingLineNr(){return this.xsltLineNr}}let Z=function(){function e(l){throw v("Internal error: "+l+`
`+Error().stack),new F("Internal error: "+l,"SXJS0004")}function t(l){if(l===null)return"#null";if(typeof l>"u")return"#undefined";let A;if(l.showValue)return l.showValue();if(l.N)return"expression "+l.N;if(a&&a.U(l)){if(a.me(l))return"attribute @"+l.name+"='"+l.value+"'";if(a.Ed(l))return"ns:"+l.prefix+"="+l.uri;if(A={1:"element <"+l.tagName+">",2:"attribute @"+l.name,3:"text:"+(l.nodeValue?l.nodeValue.substring(0,8):"''"),7:"pi: "+l.target+"("+l.tagName+")",8:"comment ("+l.nodeValue+")",9:"document "+(l._saxonDocumentNumber?"#"+l._saxonDocumentNumber:"(No nr / #0)"),11:"docFrag"}[l.nodeType],l.nodeType==="9"||l.nodeType==="11"){var S;for(S=0;S<l.childNodes.length;S++)A+="~>"+t(l.childNodes[S])}return A}if(l.code)return"atomic:"+l.code+"('"+l.toString()+"')";if(typeof l=="object"&&"length"in l){if(l.length===1)return t(l[0]);for(A="(",S=0;S<l.length&&3>S;S++)S!==0&&(A+=","),A+=t(l[S]);return 4<=l.length&&(A+=",...("+l.length+")"),A+")"}return typeof l=="function"?l.toString():"("+typeof l+") "+l}function i(l){return"{'N':'"+l.N+"','C':["+(l.C||[]).map(A=>i(A)).join(",")+"]}"}function f(l,A){for(;l;){if(l[A])return l[A];l=l.parentNode}return null}function v(l,A=1,S){let O=u;S&&(O=S),A<=O&&J.xa(l)}let a,u=1;return Error.stackTraceLimit=100,{assert:function(l,A="assertion failed"){l||e(A)},ka:e,location:function(l){return f(l,"module")+"#"+f(l,"line")},tj:function(l){a=l},xa:v,showValue:t,yh:function(l){return l.showValue?l.showValue():a&&a.U(l)?t(l):l.code?"atomic:"+l.code+"('"+l.toString()+"')":l.Bi?l.toString():"("+typeof l+") "+l},Bj:function(l){if(!l)return"null expr";let A=l.N||"?";for(let S in l)l.hasOwnProperty(S)&&!["C","N","parentNode","ELAB","PUSH"].includes(S)&&(A+=" "+S+"="+l[S]);return l.C&&(A+=" ("+l.C.map(S=>S.N).join(",")+")"),A+=" at "+this.location(l)},jl:i,getLogLevel:function(){return u},setLogLevel:function(l){typeof l=="number"&&(u=l)}}}(),gt=function(){function e(){function a(u){if(!(this instanceof a))return u===void 0?e():new a(u);if(u instanceof a)this.ia=u.ia,this.e=u.e,this.c=u.c.slice();else{if(typeof u!="string"){if(a.ig===!0)throw TypeError("[big.js] Invalid number");u=u===0&&0>1/u?"-0":String(u)}var l,A;if(!v.test(u))throw Error("[big.js] Invalid number");this.ia=u.charAt(0)=="-"?(u=u.slice(1),-1):1,-1<(l=u.indexOf("."))&&(u=u.replace(".","")),0<(A=u.search(/e/i))?(0>l&&(l=A),l+=+u.slice(A+1),u=u.substring(0,A)):0>l&&(l=u.length);var S=u.length;for(A=0;A<S&&u.charAt(A)=="0";)++A;if(A==S)this.c=[this.e=0];else{for(;0<S&&u.charAt(--S)=="0";);for(this.e=l-A-1,this.c=[],l=0;A<=S;)this.c[l++]=+u.charAt(A++)}}this.constructor=a}return a.prototype=f,a.sc=20,a.xd=1,a.qf=-7,a.vf=21,a.ig=!1,a}function t(a,u,l,A){var S=a.c;if(l===void 0&&(l=a.constructor.xd),l!==0&&l!==1&&l!==2&&l!==3)throw Error("[big.js] Invalid rounding mode");if(1>u)A=l===3&&(A||!!S[0])||u===0&&(l===1&&5<=S[0]||l===2&&(5<S[0]||S[0]===5&&(A||S[1]!==void 0))),S.length=1,A?(a.e=a.e-u+1,S[0]=1):S[0]=a.e=0;else if(u<S.length){if(A=l===1&&5<=S[u]||l===2&&(5<S[u]||S[u]===5&&(A||S[u+1]!==void 0||S[u-1]&1))||l===3&&(A||!!S[0]),S.length=u--,A)for(;9<++S[u];)S[u]=0,u--||(++a.e,S.unshift(1));for(u=S.length;!S[--u];)S.pop()}return a}function i(a,u,l){var A=a.e,S=a.c.join(""),O=S.length;if(u)S=S.charAt(0)+(1<O?"."+S.slice(1):"")+(0>A?"e":"e+")+A;else if(0>A){for(;++A;)S="0"+S;S="0."+S}else if(0<A)if(++A>O)for(A-=O;A--;)S+="0";else A<O&&(S=S.slice(0,A)+"."+S.slice(A));else 1<O&&(S=S.charAt(0)+"."+S.slice(1));return 0>a.ia&&l?"-"+S:S}let f={},v=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;return f.abs=function(){var a=new this.constructor(this);return a.ia=1,a},f.cmp=function(a){var u=this.c,l=(a=new this.constructor(a)).c,A=this.ia,S=a.ia,O=this.e,M=a.e;if(!u[0]||!l[0])return u[0]?A:l[0]?-S:0;if(A!=S)return A;if(a=0>A,O!=M)return O>M^a?1:-1;for(S=(O=u.length)<(M=l.length)?O:M,A=-1;++A<S;)if(u[A]!=l[A])return u[A]>l[A]^a?1:-1;return O==M?0:O>M^a?1:-1},f.Nb=function(a){var u=this.constructor,l=this.c,A=(a=new u(a)).c,S=this.ia==a.ia?1:-1,O=u.sc;if(O!==~~O||0>O||1e6<O)throw Error("[big.js] Invalid decimal places");if(!A[0])throw Error("[big.js] Division by zero");if(!l[0])return a.ia=S,a.c=[a.e=0],a;var M,d=A.slice(),o=M=A.length,E=l.length,T=l.slice(0,M),C=T.length,n=a,r=n.c=[],h=0,m=O+(n.e=this.e-a.e)+1;for(n.ia=S,S=0>m?0:m,d.unshift(0);C++<M;)T.push(0);do{for(O=0;10>O;O++){if(M!=(C=T.length))var c=M>C?1:-1;else{var P=-1;for(c=0;++P<M;)if(A[P]!=T[P]){c=A[P]>T[P]?1:-1;break}}if(0>c){for(a=C==M?A:d;C;){if(T[--C]<a[C]){for(P=C;P&&!T[--P];)T[P]=9;--T[P],T[C]+=10}T[C]-=a[C]}for(;!T[0];)T.shift()}else break}r[h++]=c?O:++O,T[0]&&c?T[C]=l[o]||0:T=[l[o]]}while((o++<E||T[0]!==void 0)&&S--);return r[0]||h==1||(r.shift(),n.e--,m--),h>m&&t(n,m,u.xd,T[0]!==void 0),n},f.Sg=function(a){return this.cmp(a)===0},f.Mk=function(a){return 0<this.cmp(a)},f.Nk=function(a){return-1<this.cmp(a)},f.$i=function(){var a=gt(2).pow(52);return 0>this.cmp(a)},f.Xk=function(a){return 1>this.cmp(a)},f.Hd=f.sub=function(a){var u=this.constructor,l=this.ia,A=(a=new u(a)).ia;if(l!=A)return a.ia=-A,this.qd(a);var S=this.c.slice(),O=this.e,M=a.c,d=a.e;if(!S[0]||!M[0])return M[0]?a.ia=-A:S[0]?a=new u(this):a.ia=1,a;if(l=O-d){for((u=0>l)?(l=-l,O=S):(d=O,O=M),O.reverse(),A=l;A--;)O.push(0);O.reverse()}else for(O=((u=S.length<M.length)?S:M).length,l=A=0;A<O;A++)if(S[A]!=M[A]){u=S[A]<M[A];break}if(u&&(O=S,S=M,M=O,a.ia=-a.ia),0<(A=(O=M.length)-(u=S.length)))for(;A--;)S[u++]=0;for(A=u;O>l;){if(S[--O]<M[O]){for(u=O;u&&!S[--u];)S[u]=9;--S[u],S[O]+=10}S[O]-=M[O]}for(;S[--A]===0;)S.pop();for(;S[0]===0;)S.shift(),--d;return S[0]||(a.ia=1,S=[d=0]),a.c=S,a.e=d,a},f.$e=function(a){var u=this,l=u.constructor,A=u.ia,S=(a=new l(a)).ia;if(!a.c[0])throw Error("[big.js] Division by zero");u.ia=a.ia=1;var O=a.cmp(u)==1;return u.ia=A,a.ia=S,O?new l(u):(A=l.sc,S=l.xd,l.sc=l.xd=0,u=u.Nb(a),l.sc=A,l.xd=S,this.Hd(u.Vb(a)))},f.qd=f.add=function(a){var u=this.constructor;if(a=new u(a),this.ia!=a.ia)return a.ia=-a.ia,this.Hd(a);var l=this.e,A=this.c,S=a.e,O=a.c;if(!A[0]||!O[0])return O[0]||(A[0]?a=new u(this):a.ia=this.ia),a;if(A=A.slice(),u=l-S){for(0<u?(S=l,l=O):(u=-u,l=A),l.reverse();u--;)l.push(0);l.reverse()}for(0>A.length-O.length&&(l=O,O=A,A=l),u=O.length,l=0;u;A[u]%=10)l=(A[--u]=A[u]+O[u]+l)/10|0;for(l&&(A.unshift(l),++S),u=A.length;A[--u]===0;)A.pop();return a.c=A,a.e=S,a},f.pow=function(a){var u=this,l=new u.constructor("1"),A=l,S=0>a;if(a!==~~a||-1e6>a||1e6<a)throw Error("[big.js] Invalid exponent");for(S&&(a=-a);a&1&&(A=A.Vb(u)),a>>=1,!!a;)u=u.Vb(u);return S?l.Nb(A):A},f.ob=function(a,u){if(a!==~~a||1>a||1e6<a)throw Error("[big.js] Invalid precision");return t(new this.constructor(this),a,u)},f.round=function(a,u){if(a===void 0)a=0;else if(a!==~~a||-1e6>a||1e6<a)throw Error("[big.js] Invalid decimal places");return t(new this.constructor(this),a+this.e+1,u)},f.sqrt=function(){var a=this.constructor,u=this.ia,l=this.e,A=new a("0.5");if(!this.c[0])return new a(this);if(0>u)throw Error("[big.js] No square root");if(u=Math.sqrt(this+""),u===0||u===1/0){var S=this.c.join("");S.length+l&1||(S+="0"),u=Math.sqrt(S),l=((l+1)/2|0)-(0>l||l&1),S=new a((u==1/0?"5e":(u=u.toExponential()).slice(0,u.indexOf("e")+1))+l)}else S=new a(u+"");l=S.e+(a.sc+=4);do u=S,S=A.Vb(u.qd(this.Nb(u)));while(u.c.slice(0,l).join("")!==S.c.slice(0,l).join(""));return t(S,(a.sc-=4)+S.e+1,a.xd)},f.Vb=f.bl=function(a){var u=this.c,l=(a=new this.constructor(a)).c,A=u.length,S=l.length,O=this.e,M=a.e;if(a.ia=this.ia==a.ia?1:-1,!u[0]||!l[0])return a.c=[a.e=0],a;if(a.e=O+M,A<S){var d=u;u=l,l=d,M=A,A=S,S=M}for(d=Array(M=A+S);M--;)d[M]=0;for(O=S;O--;){for(S=0,M=A+O;M>O;)S=d[M]+l[O]*u[M-O-1]+S,d[M--]=S%10,S=S/10|0;d[M]=S}for(S?++a.e:d.shift(),O=d.length;!d[--O];)d.pop();return a.c=d,a},f.toExponential=function(a,u){var l=this,A=l.c[0];if(a!==void 0){if(a!==~~a||0>a||1e6<a)throw Error("[big.js] Invalid decimal places");for(l=t(new l.constructor(l),++a,u);l.c.length<a;)l.c.push(0)}return i(l,!0,!!A)},f.toFixed=function(a,u){var l=this,A=l.c[0];if(a!==void 0){if(a!==~~a||0>a||1e6<a)throw Error("[big.js] Invalid decimal places");for(l=t(new l.constructor(l),a+l.e+1,u),a=a+l.e+1;l.c.length<a;)l.c.push(0)}return i(l,!1,!!A)},f.toJSON=f.toString=function(){var a=this.constructor;return i(this,this.e<=a.qf||this.e>=a.vf,!!this.c[0])},f.toNumber=function(){var a=Number(i(this,!0,!0));if(this.constructor.ig===!0&&!this.Sg(a.toString()))throw Error("[big.js] Imprecise conversion");return a},f.toPrecision=function(a,u){var l=this,A=l.constructor,S=l.c[0];if(a!==void 0){if(a!==~~a||1>a||1e6<a)throw Error("[big.js] Invalid precision");for(l=t(new A(l),a,u);l.c.length<a;)l.c.push(0)}return i(l,a<=l.e||l.e<=A.qf||l.e>=A.vf,!!S)},f.valueOf=function(){var a=this.constructor;if(a.ig===!0)throw Error("[big.js] valueOf disallowed");return i(this,this.e<=a.qf||this.e>=a.vf,!0)},e()}(),Ct={ai:function(e){if(32>e&&![9,10,13].includes(e)||55295<e&&57344>e||65533<e&&65536>e||1114111<e)throw new F("Invalid XML character 0x"+e.toString(16),"FOCH0001");return e},ce:function(e,t){return Ct.Zf(e)||Ct.Zf(t)?(e=Ct.ci(e,t),0>e?-1:e===0?0:1):e<t?-1:e===t?0:1},ci:function(e,t){e=Ct.La(e.toString()),t=Ct.La(t.toString());let i=0;for(;;){if(i===e.length)return i===t.length?0:-1;if(i===t.length)return 1;if(e[i]!==t[i])return e[i]-t[i];i++}},ac:function(e){return String.fromCodePoint(...e.map(Ct.ai))},Zf:function(e){return Array.from(e).some(t=>65535<t.codePointAt(0))},La:function(e){return Array.from(e).map(t=>t.codePointAt(0))},Ib:function(e){return e.replace(/[ \n\r\t]+/g," ").replace(/^[ ]|[ ]$/g,"")}},Ft={Qc:"http://www.w3.org/1999/XSL/Transform",Ma:"http://www.w3.org/2005/xpath-functions",jh:"http://www.w3.org/2005/xpath-functions/math",map:"http://www.w3.org/2005/xpath-functions/map",He:"http://www.w3.org/2005/xpath-functions/array",xml:"http://www.w3.org/XML/1998/namespace",ic:"http://www.w3.org/2001/XMLSchema",nl:"http://www.w3.org/2001/XMLSchema-instance",mi:"http://www.w3.org/2005/xqt-errors",jd:"http://saxonica.com/ns/interactiveXSLT",ih:"http://saxonica.com/ns/globalJS",qb:"http://saxon.sf.net/",ri:"http://ns.saxonica.com/xslt/export",withPrefix:{xsl:"http://www.w3.org/1999/XSL/Transform",fn:"http://www.w3.org/2005/xpath-functions",math:"http://www.w3.org/2005/xpath-functions/math",map:"http://www.w3.org/2005/xpath-functions/map",array:"http://www.w3.org/2005/xpath-functions/array",xml:"http://www.w3.org/XML/1998/namespace",xs:"http://www.w3.org/2001/XMLSchema",xsi:"http://www.w3.org/2001/XMLSchema-instance",err:"http://www.w3.org/2005/xqt-errors",ixsl:"http://saxonica.com/ns/interactiveXSLT",js:"http://saxonica.com/ns/globalJS",saxon:"http://saxon.sf.net/",ex:"http://ns.saxonica.com/xslt/export"},og:"http://ns.saxonica.com/anonymous-type"},Rt=function(){function e(){return i===null&&(i=J.xe("regexCategories")),i}function t(u,l,A=null,S=null){function O(w,g){function x($){for($=$.toString(16);4>$.length;)$="0"+$;return"\\u"+(f&&4<$.length?"{"+$+"}":$)}function I($,rt,st){if(st){st=$,$=[],st[0][0]!==0&&$.push([0,st[0][0]-1]);for(var ht=1;ht<st.length;ht++){let tt=st[ht-1][1]+1,Y=st[ht][0]-1;Y>=tt&&$.push([tt,Y])}st=st[st.length-1][1],(f||65535>st)&&$.push([st+1,f?1114111:65535])}for(st="",ht=0;ht<$.length;ht++)(f||65536>$[ht][1])&&(st+=x($[ht][0]),$[ht][1]>$[ht][0]&&(st+="-"+x($[ht][1])));return $=st,rt||($="["+$+"]"),$}function L($){return $.sort(function(rt,st){return rt[0]-st[0]})}function _($,rt,st,ht){let tt=[];return Array.isArray($)||d("Ranges must be array"),$.forEach(function(Y){tt.push([parseInt(Y[0],16),parseInt(Y[1],16)])}),st&&ht&&L(tt),I(tt,rt,st)}let q=w.charAt(g+1);switch(0>"nrt\\|.-^?*+{}()[]pPsSiIcCdDwW$".indexOf(q)&&(m!==0||!/[0-9]/.test(q))&&d("\\"+q+" is not allowed in XPath regular expressions"),q){case"p":case"P":let $=w.indexOf("}",g);w=w.substring(g+3,$),M("x")&&(w=w.replace(/[ \n\r\t]+/g,""));let rt=e();(g=rt[w])||d("Unknown category "+w);let st;w.length===1?(st=[],g.split("|").forEach(function(Y){st=st.concat(rt[Y])})):st=g,E+=_(st,0<m,q==="P",w.length===1),g=$;break;case"d":E+=_(e().Nd,0<m,!1,!1),g++;break;case"i":E+=I(T,0<m,!1),g++;break;case"c":E+=I(C,0<m,!1),g++;break;case"I":E+=I(T,0<m,!0),g++;break;case"C":E+=I(C,0<m,!0),g++;break;case"w":case"W":let ht=e(),tt=[];ht.w.split("|").forEach(function(Y){tt=tt.concat(ht[Y])}),E+=_(tt,0<m,q==="W",!0),g++;break;case"-":0<m&&(E+="\\"),E+=q,g++;break;default:/[0-9]/.test(q)?0<m?d("Numeric escape within charclass"):(r[parseInt(q,10)]||d("No capturing expression #"+q),E+="\\"+q,9>=h&&/[0-9]/.test(w.charAt(g+2))&&(E+="(?:)"),g++):(E+="\\"+q,g++)}return{output:E,i:g}}function M(w){return 0<=l.indexOf(w)}function d(w){throw new F("Invalid XPath regular expression: "+w,"FORX0002")}let o=0;if(l=l?l.toString():"",!f&&A&&Ct.Zf(A))throw new F("Cannot handle non-BMP characters with regular expressions in this browser","SXJS0002");if(A=(M("i")?"i":"")+(M("m")?"m":"")+(M("g")?"g":"")+(f?"u":""),M("j"))return new RegExp(u,l.replace("j",""));if(M("q"))return new RegExp(u.replace(/[\[\]\/\{\}\(\)\*\+\?\.\\^$|]/g,"\\$&"),A);let E="",T=[[58,58],[65,90],[95,95],[97,122],[192,214],[216,246],[248,767],[880,893],[895,8191],[8204,8205],[8304,8591],[11264,12271],[12289,55295],[63744,64975],[65008,65533],[65536,983039]],C=[[45,46],[48,58],[65,90],[95,95],[97,122],[183,183],[192,214],[216,246],[248,893],[895,8191],[8204,8205],[8255,8256],[8304,8591],[11264,12271],[12289,55295],[63744,64975],[65008,65533],[65536,983039]],n=[],r=[],h=1,m=0,c=!1;for(var P=!1,Q=0;Q<u.length;Q++){let w=u.charAt(Q);switch(w){case"[":0<m&&d("Nested square brackets");for(var H=!1,B=!1,y=Q+2;y<u.length-3;y++){if(!H&&u.substring(y,y+2)==="-["){H=u.substring(Q+1,y);let g;for(B=y+2;B<u.length;B++)if(u.charAt(B)==="]"&&u.charAt(B-1)!=="\\"){g=u.substring(y+2,B+1);break}H==="^"&&d("Invalid subtraction"),u=u.substring(0,Q)+"(?!["+g+")["+H+"]"+u.substring(B+2),Q--,B=!0;break}else if(!H&&u.charAt(y)==="]")break;H=u.charAt(y)==="\\"&&!H}if(B){c=!0;break}u.charAt(Q+1)==="]"?d("Character group is empty"):u.substring(Q,Q+3)==="[^]"&&d("Invalid character group [^]"),m++,E+=w;break;case"]":m===0&&d("Unmatched ']'"),m--,E+=w,P=!0;break;case"(":m===0&&(y=!0,Q+2<u.length&&u.charAt(Q+1)==="?"&&(u.charAt(Q+2)===":"||c&&u.charAt(Q+2)==="!"?y=!1:d("'(?' must be followed by ':'")),n.push(y?h++:-1),P=!1,y&&o++),E+=w;break;case")":m===0&&(n.length===0&&d("Unmatched ')'"),P=n.pop(),0<P&&(r[P]=!0)),E+=w,P=!0;break;case".":E=m===0&&M("s")?E+"[^]":E+w,P=!0;break;case"{":m===0&&(P||d("'{' not allowed here"),P=u.indexOf("}",Q+1),(0>P||!/^[0-9]+(,[0-9]*)?$/.test(u.substring(Q+1,P)))&&d("Invalid quantifier {"+u.substring(Q+1,P+1)),P=!1),E+=w;break;case" ":case`
`:case"\r":case"	":(!M("x")||0<m)&&(E+=w),P=!0;break;case"\\":if(M("q"))E+="\\\\";else if(Q+1<u.length)M("x")&&/\s/.test(u.charAt(Q+1))&&Q++,Q=O(u,Q),E=Q.output,Q=Q.i;else throw new F("No character for escape code in XPath regex","FORX0002");P=!0;break;default:P=!0,E+=w}}0<m&&d("Unmatched '['"),n.length!==0&&d("Unmatched '("),S&&S(o);try{return new RegExp(E,A)}catch(w){throw/^[imsxjqg]*$/.test(l)?new F("Invalid regular expression /"+u+"/: "+w.message.substring(/Invalid |Range out/.test(w.message)?w.message.lastIndexOf(":"):0),"FORX0002"):new F("Invalid regex flags: "+l,"FORX0001")}}let i=null,f=!1;try{f="\u{1F680}".match(new RegExp(/./,"gu")).length===1}catch{f=!1}let v=null,a=null;return{yf:function(){v=t("^\\i\\c*$",""),a=t("^\\c+$","")},lj:e,ue:t,fi:function(u,l,A){if(l=l.toString(),/j/.test(l))return u;if(/q/.test(l))return u.replace(/\$/g,"$$$$");if(/(^|[^\\])\$([^0-9]|$)/.test(u)||/(^|[^\\])\\([^\\$]|$)/.test(u))throw new F("Invalid replacement string: "+u,"FORX0004");let S=l=!1,O="";for(let M=0;M<u.length;M++){let d=u.charAt(M);switch(d){case"\\":l&&(O+=d),l=!l;break;case"$":l?(O+="$$",l=!l):S=!0;break;case"0":S?(O+="$&",S=!1):O+=d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":S?parseInt(d,10)<=A&&(O+="$"+d,S=!1):O+=d;break;default:O+=d}}return O},Db:function(u){return v.test(u)&&!/:/.test(u)},Vi:function(u){return v.test(u)},Ui:function(u){return a.test(u)},Rk:function(u){return u.match(/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})?$/)!==null},fh:function(u){return v.test(u)&&/^[^:]+(:[^:]+)?$/.test(u)},trim:function(u){return u.replace(/^[ \t\r\n]+|[ \t\r\n]+$/g,"")},collapse:function(u){return this.trim(u).replace(/[ \t\r\n]+/g," ")},ng:function(u){var l=u.indexOf(";");if(0<=l){let A=u.substring(0,l);if(l=u.substring(l+1),!A.match(/^[smixq]*$/))throw new F("Illegal flags for regular expression: "+u,"FORX0001");if(!l.match(/^[j]*$/))throw new F("Illegal extension flags for regular expression: "+u,"FORX0001");return A+l}if(!u.match(/^[smijxq]*$/))throw new F("Illegal flags for regular expression: "+u,"FORX0001");return u}}}();class Te{constructor(t){Z.assert(this.g().test(t)),this.code=t}getCode(){return this.code}getType(){return"atomic"}g(){return/.*/}toString(){return""}compareTo(){return null}equals(){return!0}hashCode(){return""}matchKey(){return this.code+"_"+this.toString()}isNumeric(){return/^A[DFO]/.test(this.code)}isStringLike(){return/^A[SUZ]/.test(this.code)}showValue(){return ot.ld(this.code)+"('"+this.toString()+"')"}}class Un extends Te{isNumeric(){return!0}getType(){switch(this.code){case"AO":return"double";case"AF":return"float";case"AD":return"decimal";case"ADI":return"integer";case"ADIN":return"nonPositiveInteger";case"ADINN":return"negativeInteger";case"ADIL":return"long";case"ADILI":return"int";case"ADILIS":return"short";case"ADILISB":return"byte";case"ADIP":return"nonNegativeInteger";case"ADIPP":return"positiveInteger";case"ADIPL":return"unsignedLong";case"ADIPLI":return"unsignedInt";case"ADIPLIS":return"unsignedShort";case"ADIPLISB":return"unsignedByte";default:return Z.xa("Unexpected numeric code: "+this.code,1),"numeric"}}toDouble(){return new Ae(this.toNumber())}toNumber(){return NaN}toBig(){return new gt(this.toNumber())}}class ze extends Te{constructor(t,i="AS"){super(i),this.value=String(t||""),this.j=0}g(){return/^A(S|Z$|U$)/}getType(){switch(this.code){case"AS":return"string";case"ASN":return"normalizedString";case"ASNT":return"token";case"ASNTL":return"language";case"ASNTK":return"NMTOKEN";case"ASNTN":return"Name";case"ASNTNC":return"NCName";case"ASNTNCI":return"ID";case"ASNTNCR":return"IDREF";case"ASNTNCE":return"ENTITY";case"AU":return"anyURI";case"AZ":return"untypedAtomic";default:return Z.xa("Unexpected string code: "+this.code,1),"string"}}toString(){return this.value}compareTo(t){return t instanceof ze?Ct.ce(this.value,t.value):Ue(this.code,t.code)}equals(t){return this.compareTo(t)===0}hashCode(){if(6>=this.value.length)return this.value;let t=this.j,i=this.value.length;if(t===0&&0<i){for(let f=0;f<i;f++)t=31*t+this.value.charCodeAt(f++);this.j=t&=16777215}return Ur(t)}matchKey(){return"s"+this.toString()}}function kr(e){return e.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),"").toUpperCase()}class be extends Te{constructor(t,i="AX"){if(super(i),!(t instanceof Uint8Array))throw new F("Supplied value is not a Uint8Array","FORG0001");this.value=t}getType(){return this.code==="AX"?"hexBinary":"base64Binary"}g(){return/^A[X2]$/}toUint8Array(){return this.value}toString(){if(this.code==="AX")var t=kr(this.value);else{t=this.value;var i=0;let l=0,A=[];if(t.length===0)t="";else{do{var f=t[i++],v=t[i++],a=t[i++],u=f<<16|v<<8|a;f=u>>18&63,v=u>>12&63,a=u>>6&63,u&=63,A[l++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(v)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(u)}while(i<t.length);i=A.join(""),t=t.length%3,t=(t?i.slice(0,t-3):i)+"===".slice(t||3)}}return t}compareTo(t){return t instanceof be&&this.code===t.code?Ct.ce(kr(this.value),kr(t.value)):Ue(this.code,t.code)}equals(t){if(t instanceof be&&this.code===t.code){let i=t.value;return this.value.length===i.length&&this.value.every((f,v)=>f===i[v])}return Ue(this.code,t.code)}hashCode(){return new ze(kr(this.value.slice(0,8))).hashCode()}matchKey(){return(this.code==="AX"?"h":"i")+this.toString()}}class Ae extends Un{constructor(t,i="AO"){if(super(i),this.value=t,typeof t!="number")throw new F(`Supplied value is not a number: "${t}"`,"FORG0001")}g(){return/^A[OF]$/}toString(){if(this.value===0)return 0>1/this.value?"-0":"0";if(this.value===Number.POSITIVE_INFINITY)return"INF";if(this.value===Number.NEGATIVE_INFINITY)return"-INF";var t=this.value,i=Math.abs(t);if(1e6<=i||1e-6>i){i=t.toExponential();let f=i.indexOf("e");return t=i.substring(0,f),i=i.substring(f+1),this.code==="AF"&&(t=parseFloat(t),t=(0>t?t-5e-8:t+5e-8).toString(),t=t.substring(0,t.indexOf(".")+8),t=t.replace(/\.?0+$/,"")),t.includes(".")||(t+=".0"),t+"E"+i.replace("+","")}return this.code==="AF"&&t%1!==0?(i=(0>t?t-5e-8:t+5e-8).toString(),i=i.substring(0,i.indexOf(".")+6),i.replace(/0+$/,"")):t.toString()}equals(t){return this.compareTo(t)===0}compareTo(t){return t.isNumeric()?(t=t.toNumber(),this.code==="AF"&&Math.fround&&(t=Math.fround(t)),this.value<t?-1:this.value===t?0:1):Ue(this.code,t.code)}gg(t){return t instanceof Ae||t instanceof Me?this.value===t.value||isNaN(this.value)&&isNaN(t.value):t instanceof se?ot.XS.decimal.cast(this).equals(t):!1}hashCode(){return isNaN(this.value)?"NaN":isFinite(this.value)?Ur(this.value):0>this.value?"-INF":"INF"}matchKey(){return"n"+this.hashCode()}toNumber(){return this.value}toDouble(){return this}abs(){return new Ae(Math.abs(this.value),this.code)}af(){return new Ae(-this.value,this.code)}Ef(){return new Ae(Math.ceil(this.value),this.code)}floor(){return new Ae(Math.floor(this.value),this.code)}round(t){return t===0?t=Math.round(this.value):(t=Math.pow(10,-t),t*=Math.round(this.value/t)),new Ae(t,this.code)}ef(t){return isFinite(this.value)?(t=new se(gt(this.value)).ef(t),t.toNumber()===0&&0>this.value&&(t=ot.XS.double.fromString("-0")),ot.codes[this.code].cast(t)):this}}class Me extends Un{constructor(t){if(super("ADI"),typeof t!="number")throw new F(`Supplied value is not a number: "${t}"`,"FORG0001");this.value=Math.trunc(t)}g(){return/^ADI/}toString(){return this.value.toString()}equals(t){return this.compareTo(t)===0}compareTo(t){return t.isNumeric()?this.value-t.toNumber():Ue(this.code,t.code)}hashCode(){return Ur(this.value)}gg(t){return t instanceof Ae||t instanceof Me?this.value===t.value:t instanceof se?ot.XS.decimal.cast(this).equals(t):!1}matchKey(){return"n"+this.hashCode()}toDouble(){return new Ae(this.value)}toNumber(){return this.value}toBig(){return new gt(this.value)}abs(){return new Me(Math.abs(this.value))}af(){return new Me(-this.value)}Ef(){return this}floor(){return this}round(t){return 0>t?(t=Math.pow(10,-t),new Me(Math.round(this.value/t)*t)):this}ef(t){return 0>t?(t=Math.pow(10,-t),new Me(parseInt(gt(this.value).Nb(t).round(0,2).Vb(t),10))):this}}class se extends Un{constructor(t,i="AD"){super(i);try{this.value=new gt(t)}catch{throw new F(`Supplied value is not a valid decimal: "${t}"`,"FORG0001")}}g(){return/^AD/}toString(){return this.value.toFixed()}equals(t){return this.compareTo(t)===0}compareTo(t){return t instanceof se?this.value.cmp(t.value):/^AD/.test(t.code)?this.value.cmp(t.toBig()):t.isNumeric()?this.value.cmp(new gt(t.toDouble())):Ue(this.code,t.code)}hashCode(){let t=this.value;return t.$e(gt(1)).Sg(gt(0))&&t.abs().$i()?this.toNumber().toString(36):this.toString().substring(0,8)}gg(t){return t instanceof Ae||t instanceof Me?this.compareTo(ot.XS.decimal.cast(t))===0:t instanceof se?this.compareTo(t)===0:!1}matchKey(){return"n"+this.hashCode()}toBig(){return this.value}toDouble(){return new Ae(parseFloat(this.value.toFixed()))}toNumber(){return parseFloat(this.value.toFixed())}abs(){return new se(this.value.abs(),this.code)}af(){let t=gt(this.value);return t.ia=-t.ia,new se(t,this.code==="AD"?"AD":"ADI")}Ef(){return new se(this.value.round(0,0>this.value.ia?0:3),this.code)}floor(){return new se(this.value.round(0,0>this.value.ia?3:0),this.code)}round(t){function i(u,l){return u=new gt(u),u.e+=l,u}let f=this.value,v=0;0>t&&(v=t,t=0,f=i(f,v));let a=0<f.ia?gt(0):this.floor().abs();return f=f.qd(a).round(t,1).Hd(a),v!==0&&(f=i(f,-v)),new se(f,this.code==="AD"?"AD":"ADI")}ef(t){return 0>t?(t=gt(10).pow(-t),t=this.value.Nb(t).round(0,2).Vb(t)):t=this.value.round(t,2),new se(t,this.code==="AD"?"AD":"ADI")}}class pr extends Te{constructor(t){if(super("AB"),typeof t!="boolean")throw new F(`Supplied value is not a boolean: "${t}"`,"FORG0001");this.value=t}getType(){return"boolean"}g(){return/^AB$/}toString(){return this.value.toString()}toBoolean(){return this.value}compareTo(t){return t instanceof pr?(this.value?1:0)-(t.value?1:0):Ue(this.code,t.code)}equals(t){return this.compareTo(t)===0}hashCode(){return this.value.toString()}matchKey(){return"b"+this.toString()}}class Ln extends Te{constructor(t,i,f){if(super("AQ"),this.prefix=t=t||"",this.uri=i=i||"",this.local=f,t===""||Rt.Db(t)){if(!Rt.Db(f))throw new F("Invalid local name: '"+f+"' (prefix='"+t+"', uri='"+i+"')","FORG0001");if(t!==""&&i==="")throw new F("For no namespace URI, invalid prefix: '"+t+"'","FORG0001")}else throw new F("Invalid prefix: '"+t+"'","FORG0001")}getType(){return"QName"}getPrefix(){return this.prefix}getURI(){return this.uri}getLocal(){return this.local}g(){return/^AQ$/}toEQName(){return"Q{"+this.uri+"}"+this.local}toString(){return(0<this.prefix.length?this.prefix+":":"")+this.local}equals(t){return t instanceof Ln?t instanceof Ln&&this.local===t.local&&this.uri===t.uri:Ue(this.code,t.code)}compareTo(){throw new F("QNames are not ordered","FORG0006")}hashCode(){return this.uri.substring(this.uri.length-3)+":"+new ze(this.local).hashCode()}matchKey(){return"q"+this.toEQName()}dd(t){return this.uri===t}withPrefix(t){return new Ln(t,this.uri,this.local)}}function iu(e,t){if(t=t.substring(0,t.length-1),e.UTCdate.getUTCMilliseconds()===0)t=t.replace(".000","");else for(;t.charAt(t.length-1)==="0";)t=t.substring(0,t.length-1);return t=t.replace(/^-0?0?/,"-"),t=t.replace(/^\+0?0?/,"")}function Mr(e){if(e=e.timezoneOffset){let t=Math.abs(e);return(0>e?"-":"+")+(100+Math.floor(t/60)).toString().substring(1)+":"+(100+t%60).toString().substring(1)}return e===0?"Z":""}function Ks(e,t){return t instanceof Ge&&(t.code.startsWith(e.code)||e.code.startsWith(t.code))?+e.UTCdate.getTime()-t.UTCdate.getTime():Ue(e.code,t.code)}function Bi(e,t){return ot.XS.dateTime.fromDate(new Date(e.UTCdate.getTime()+6e4*t),e.timezoneOffset)}function Ys(e,t){let i=e.toString(),f=parseInt(i.substring(5,7),10),v=parseInt(i.substring(8,10),10),a=parseInt(i.substring(0,4),10)+Math.floor((f+t-1)/12),u=0>a;for(t=(f+t-1)%12+1,0>=t&&(t+=12);!ot.Yi([a,t,v,0,0,0]);)--v;return ot.codes[e.code].fromString((u?"-"+(1e4+-a).toString().substring(1):(1e4+a).toString().substring(1))+"-"+(100+t).toString().substring(1)+"-"+(100+v).toString().substring(1)+i.substring(10))}class Ge extends Te{constructor(t,i,f="AM"){if(super(f),this.UTCdate=t,this.timezoneOffset=i,!(t instanceof Date))throw new F(`Supplied value is not a Date: "${t}"`,"FORG0001");if(i&&typeof i!="number")throw new F(`Timezone offset is not a number: ${i}`,"FORG0001")}g(){return/^A([AGHIJKMT]|MP)$/}getType(){switch(this.code){case"AA":return"date";case"AM":return"dateTime";case"AT":return"time";case"AMP":return"dateTimeStamp";case"AG":return"gYear";case"AH":return"gYearMonth";case"AI":return"gMonth";case"AJ":return"gMonthDay";case"AK":return"gDay";default:return Z.xa("Unexpected date code: "+this.code,1),"dateTime"}}getUTCDate(){return this.UTCdate}getTimezoneOffset(){return this.timezoneOffset}proxy(){var t=new Date;return t=this.timezoneOffset||this.timezoneOffset===0?this.timezoneOffset:-t.getTimezoneOffset(),new Date(this.UTCdate.getTime()+6e4*t)}toString(){let t=iu(this,this.proxy().toISOString()),i=t.charAt(0)==="-"?1:0;return function(f){switch(f){case"AM":case"AMP":return t;case"AA":return t.substring(0,10+i);case"AT":return t.substring(11+i);case"AH":return t.substring(0,7+i);case"AG":return t.substring(0,4+i);case"AJ":return"-"+t.substring(4+i,10+i);case"AI":return"-"+t.substring(4+i,7+i);case"AK":return"--"+t.substring(7+i,10+i);default:throw"type not recognised "+f}}(this.code)+Mr(this)}compareTo(t){return/^A[GHIJK]/.test(this.code)||/^A[GHIJK]/.test(t.code)?Ue(this.code,t.code):Ks(this,t)}equals(t){return Ks(this,t)===0}hashCode(){return Ur(this.UTCdate.getTime()-1454346732296)}matchKey(){return"t"+this.hashCode()}}function Ni(e){function t(f,v){v.forEach(function(a){a!==1e3?(i.push(Math.floor(f/a)),f%=a):i.push(f/a)})}let i=[];return t(Math.abs(e.months),[12,1]),t(Math.abs(e.milliseconds),[864e5,36e5,6e4,1e3]),i}function Ii(e){return e=e.months+e.milliseconds,0>e?-1:0<e?1:0}class mn extends Te{constructor(t,i,f="AR"){if(super(f),this.months=t,this.milliseconds=i,typeof t!="number")throw new F(`Supplied month is not a number: "${t}"`,"FORG0001");if(typeof i!="number")throw new F(`Supplied milliseconds is not a number: "${i}"`,"FORG0001");if(0<t&&0>i||0>t&&0<i)throw new F("Months/milliseconds must both be negative or both be positive","FORG0001")}g(){return/^AR[DY]?$/}getType(){switch(this.code){case"AR":return"duration";case"ARD":return"dayTimeDuration";case"ARY":return"yearMonthDuration";default:return Z.xa("Unexpected duration code: "+this.code,1),"duration"}}getMonthsPart(){return this.months}getMillisecondsPart(){return this.milliseconds}toString(){let t,i=Ii(this);return i===0?t=this.code==="ARY"?"P0M":"PT0S":(t=0>i?"-P":"P",Ni(this).forEach(function(f,v){v===3&&(t+="T"),f!==0&&(v===6?t+=f/1e3+"S":t+=f+"YMDHMS".split("")[v])}),t=t.replace(/T$/,"")),t}compareTo(t){if(t instanceof mn){if(ot.XS.yearMonthDuration.matches(this)&&ot.XS.yearMonthDuration.matches(t))return this.months-t.months;if(ot.XS.dayTimeDuration.matches(this)&&ot.XS.dayTimeDuration.matches(t))return this.milliseconds-t.milliseconds;throw new F("Cannot compare durations that mix months and seconds","XPTY0004")}return Ue(this.code,t.code)}equals(t){return t instanceof mn?t instanceof mn&&this.months===t.months&&this.milliseconds===t.milliseconds:Ue(this.code,t.code)}hashCode(){return this.months.toString()+":"+this.milliseconds.toString()}matchKey(){return"d"+this.hashCode()}}function Ur(e){return Number.isInteger(e)&&Math.abs(e)<Math.pow(2,52)?e.toString(36):ot.XS.decimal.fromNumber(e).toString().substring(0,8)}function Ue(e,t){throw new F(`Cannot compare ${ot.ld(e)} with ${ot.ld(t)}`,"XPTY0004")}let ot=function(){function e(){function b(j,V,ct,z){let xt=Y[ct],Dt=tt[j]=Y[V]={name:j,code:V,gb:xt,matches:Tt=>Tt instanceof Te&&Tt.code.startsWith(V),Yc:function(Tt){return z(Tt)?(Tt.code=V,Tt):u(Tt.toString(),V)},fromString:function(Tt){return Dt.Yc(xt.fromString(Tt))},cast:function(Tt){return Dt.Yc(xt.cast(Tt))}}}function s(j,V,ct){let z=V.replace(/.$/,"");b(j,V,z,ct);let xt=tt[j],Dt=Y[z];xt.fromString=function(Tt){return/INF|NaN/.test(Tt)?u(Tt,V,null,"FOCA0002"):xt.Yc(Dt.fromString(Tt))},xt.fromNumber=function(Tt){{Tt=Dt.fromNumber(Tt);let Nt=Tt.toNumber();isFinite(Nt)?ct(Tt)?Tt.code=V:Tt=u(Tt.toString(),V):Tt=u(Tt.toString(),V,null,"FOCA0002")}return Tt}}function p(j,V,ct,z){let xt=V.replace(/.$/,"");b(j,V,xt,ct);let Dt=Y[V],Tt=Y[xt];Dt.Yc=function(Nt){return Nt=z(Nt.toString()),ct(Nt)?new ze(Nt,V):u(Nt,V)},Dt.fromString=function(Nt){return Dt.Yc(Tt.fromString(z(Nt)))}}function N(j,V,ct){b(j,V,"AR",ct);let z=tt[j];z.fromString=function(xt){return n(xt,V)},z.fromMonthsMilliseconds=function(xt,Dt){if(xt=rt.fromMonthsMilliseconds(xt,Dt),!ct(xt))throw new F(`Values supplied to fromMonthsMilliseconds are not valid for ${r(V)}`,"FORG0001");return z.Yc(xt)},z.Xg=V==="ARY"?void 0:function(xt){return new mn(0,6e4*xt,"ARD")},z.cast=function(xt){return rt.matches(xt)?new mn(V==="ARY"?xt.months:0,V==="ARD"?xt.milliseconds:0,V):G.string.matches(xt)||G.untypedAtomic.matches(xt)?n(xt.toString(),V):z.Yc(rt.cast(xt))}}function D(j,V){return function(ct){return ct=ct.toNumber(),ct>=j&&ct<=V}}for(var k in tt){let j=tt[k];Y[j.code]=j}O("gYear","AG"),O("gYearMonth","AH"),O("gMonth","AI"),O("gMonthDay","AJ"),O("gDay","AK"),s("nonPositiveInteger","ADIN",j=>0>=j.toNumber()),s("negativeInteger","ADINN",j=>0>j.toNumber()),s("long","ADIL",function(j){return j=j.toBig(),0<=j.cmp(gt("-9223372036854775808"))&&0>=j.cmp(gt("9223372036854775807"))}),s("int","ADILI",D(-2147483648,2147483647)),s("short","ADILIS",D(-32768,32767)),s("byte","ADILISB",D(-128,127)),s("nonNegativeInteger","ADIP",j=>0<=j.toNumber()),s("positiveInteger","ADIPP",j=>0<j.toNumber()),s("unsignedLong","ADIPL",function(j){return 0<=j.toNumber()&&0>=j.toBig().cmp(gt("18446744073709551615"))}),s("unsignedInt","ADIPLI",function(j){return 0<=j.toNumber()&&0>=j.toBig().cmp(gt("4294967295"))}),s("unsignedShort","ADIPLIS",D(0,65535)),s("unsignedByte","ADIPLISB",D(0,255)),k=()=>!0,p("normalizedString","ASN",k,j=>j.replace(/[ \r\t\n]/g," ")),p("token","ASNT",k,Ct.Ib),p("language","ASNTL",j=>/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(j),Ct.Ib),p("NMTOKEN","ASNTK",Rt.Ui,Ct.Ib),p("Name","ASNTN",Rt.Vi,Ct.Ib),p("NCName","ASNTNC",Rt.Db,Ct.Ib),p("ID","ASNTNCI",Rt.Db,Ct.Ib),p("IDREF","ASNTNCR",Rt.Db,Ct.Ib),p("ENTITY","ASNTNCE",Rt.Db,Ct.Ib),N("yearMonthDuration","ARY",j=>j.milliseconds===0),N("dayTimeDuration","ARD",j=>j.months===0),G.language=tt.language,G.NCName=tt.NCName,G.dayTimeDuration=tt.dayTimeDuration,G.yearMonthDuration=tt.yearMonthDuration,G.gYearMonth=tt.gYearMonth,G.gYear=tt.gYear,G.gMonthDay=tt.gMonthDay,G.gMonth=tt.gMonth,G.gDay=tt.gDay,G.ENTITY=tt.ENTITY,G.ID=tt.ID,G.IDREF=tt.IDREF,G.NMTOKEN=tt.NMTOKEN,G.Name=tt.Name,G.byte=tt.byte,G.int=tt.int,G.long=tt.long,G.negativeInteger=tt.negativeInteger,G.nonNegativeInteger=tt.nonNegativeInteger,G.nonPositiveInteger=tt.nonPositiveInteger,G.normalizedString=tt.normalizedString,G.positiveInteger=tt.positiveInteger,G.short=tt.short,G.token=tt.token,G.unsignedByte=tt.unsignedByte,G.unsignedInt=tt.unsignedInt,G.unsignedLong=tt.unsignedLong,G.unsignedShort=tt.unsignedShort,e=function(){}}function t(b,s){return s?-b:b}function i(b,s){return s*(b===void 0?0:Math.round(1e3*parseFloat(b)))}function f(b,s){return s*(b===void 0?0:parseInt(b,10))}function v(b){return b.gb&&!["ADI","ARY","ARD"].includes(b.code)?v(b.gb):b}function a(b,s){throw new F(`Casting from ${r(b.code)} to ${r(s)} is not allowed`,"XPTY0004")}function u(b,s,p=null,N="FORG0001"){throw new F(`Supplied value "${b}" is not a valid ${r(s)}${p?` (${p})`:""}`,N)}function l(b,s){return b=Rt.trim(b),/.\.$/.test(b)&&(b+="0"),/^[-+]?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee][-+]?[0-9]+)?$/.test(b)?parseFloat(b):/^NaN$/.test(b)?NaN:/^-INF$/.test(b)?-1/0:/^(\+)?INF$/.test(b)?1/0:(s&&u(b,"AO"),NaN)}function A(b){b=b.replace(/\s/g,""),/^(....)*$/.test(b)||u(b,"A2","length must be a multiple of 4"),/^[A-Za-z0-9+/]*=?=?$/.test(b)||u(b,"A2","only [A-Za-z0-9+/] allowed, or '=' at the end"),/^([^=]*|.*[AQgw]==|.*[AEIMQUYcgkosw048]=)$/.test(b)||u(b,"A2","invalid characters before '='");let s,p,N=0,D=[];if(b.length===0)return new Uint8Array(0);do{var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(N++)),j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(N++));s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(N++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(N++));var V=k<<18|j<<12|s<<6|p;k=V>>16&255,j=V>>8&255,V&=255,s===64?D.push(k):p===64?D.push(k,j):D.push(k,j,V)}while(N<b.length);return new Uint8Array(D)}function S(b){return b=Rt.trim(b),/^([a-fA-F0-9][a-fA-F0-9])*$/.test(b)||u(b,"AX"),(b=b.match(/../g))?new Uint8Array(b.map(s=>parseInt(s,16))):new Uint8Array(0)}function O(b,s){tt[b]=Y[s]={name:b,code:s,matches:p=>p instanceof Ge&&p.code.startsWith(s),fromString:p=>E(p,s),fromDate:(p,N)=>new Ge(p,N,s),cast:p=>{if(p instanceof Ge&&p.code.startsWith(s))return p;if(G.dateTime.matches(p)||G.date.matches(p)){let N=Y[s];return N.fromString(N.fromDate(p.UTCdate,p.timezoneOffset).toString())}return/^A[SZ]/.test(p.code)?E(p.value,s):a(p,s)}}}function M(b){if(b.indexOf(".",b.length-4)!==-1){b=b.split(".");let s=b[1];for(;3>s.length;)s+="0";b=b[0]+"."+s}return b}function d(b){let s=b[0],p=b[1],N=b[2],D=b[3],k=b[4];return b=b[5],!(1>p||12<p||1>N||N>[31,s%4!==0||s%100===0&&s%400!==0?28:29,31,30,31,30,31,31,30,31,30,31][p-1]||24<=D||60<=k||60<=b)}function o(b,s){b=b.split(/[\-T:]/).map(function(N){return parseFloat(N)});let p=b[0];if(-9999>p||9999<p)throw new F("Year "+p+" is out of range","FODT0001");if(!d(b))return u(s,"AM")}function E(b,s){var p=b.match(X[s]);if(p===null)return u(b,s);let N=p[2]?p[2]:"";var D=U[s](p[1])+N;return/24:00:00(\.0+)?([Z+\-]|$)/.test(D)&&(D=s==="AT"?D.substring(0,10)+"T00:00:00":Bi(E(D.substring(0,10),"AA"),1440)+"T00:00:00"),p=D.charAt(0)==="-",o(p?D.substring(1,20):D.substring(0,19),b),b=(p?D.substring(1):D).split(/[\-T:]/).map(function(k){return parseFloat(k)}),D=b[5],p=p?-b[0]:b[0],D=new Date(Date.UTC(p,b[1]-1,b[2],b[3],b[4],D,Math.round(1e3*(D-Math.floor(D))))),100>b[0]&&D.setUTCFullYear(p),D=N===""?C(D):C(D,T(N)),new Ge(D,T(N),s)}function T(b){if(b==="")return null;if(b==="Z")return 0;var s=b.split(":");let p=/^-.*/.test(s[0]),N=Math.abs(parseInt(s[0],10));if(s=parseInt(s[1],10),14<N||59<s)throw new F("Invalid timezone "+b,"FORG0001");return(p?-1:1)*(60*N+s)}function C(b,s=null){let p=new Date;return new Date(b.getTime()-6e4*(s??-p.getTimezoneOffset()))}function n(b,s){let p=b.match(X[s]);if(p===null||!/\d/.test(b)||/T$/.test(b))return u(b,s);let N=nt[W[s][0]](p,b);return b=nt[W[s][1]](p,b),new mn(N,b,s)}function r(b){let s=Y[b];return s?"xs:"+s.name:b}let h={name:"anyAtomicType",code:"A",matches:function(b){return b instanceof Te}},m={name:"untypedAtomic",code:"AZ",fromString:function(b){return new ze(b,"AZ")},matches:function(b){return b.code==="AZ"},cast:function(b){return new ze(b.toString(),"AZ")}},c={name:"string",code:"AS",fromString:function(b){return new ze(b,"AS")},matches:function(b){return/^AS/.test(b.code)},cast:function(b){return new ze(b.toString(),"AS")}},P={name:"anyURI",code:"AU",fromString:function(b){return b=b.replace(/[ \r\t\n]+/g," ").replace(/^[ ]|[ ]$/g,""),new ze(b,"AU")},matches:function(b){return b.code==="AU"},cast:function(b){return b instanceof ze?G.anyURI.fromString(b.toString()):a(b,"AU")}},Q={name:"double",code:"AO",fromString:function(b){return new Ae(l(b,!0))},ie:function(b){return new Ae(l(b,!1))},fromNumber:function(b){return new Ae(b)},matches:function(b){return b.code==="AO"},cast:function(b){return b===null||typeof b>"u"?G.double.fromNumber(NaN):G.string.matches(b)||G.untypedAtomic.matches(b)?G.double.fromString(b.toString()):b.isNumeric()?G.double.fromNumber(b.toNumber()):G.boolean.matches(b)?G.double.fromNumber(b.toBoolean()?1:0):a(b,"AO")},NaN:null};Q.NaN=Q.fromNumber(NaN);let H={name:"decimal",code:"AD",fromString:function(b){return b=Rt.trim(b).replace(/^\+/,""),/^[-+]?([0-9]+(\.[0-9]*)?|\.[0-9]+)$/.test(b)?new se(new gt(b)):u(b,"AD")},hb:function(b){return new se(b)},fromNumber:function(b){return isFinite(b)?new se(new gt(b)):u(b,"AD",null,"FOCA0002")},matches:function(b){return b instanceof se||b instanceof Me},cast:function(b){switch(b.code.substring(0,2)){case"AD":return new se(b.value,"AD");case"AS":case"AZ":return G.decimal.fromString(b.toString());case"AO":case"AF":return G.decimal.fromNumber(b.toNumber());case"AB":return G.decimal.fromString(b.toBoolean()?"1":"0");default:return a(b,"AD")}}},B={name:"float",code:"AF",fromString:function(b){return G.float.fromNumber(l(b,!0))},fromNumber:function(b){return Math.fround&&(b=Math.fround(b)),new Ae(b,"AF")},matches:function(b){return b.code==="AF"},cast:function(b){return G.float.fromNumber(G.double.cast(b).toNumber())}},y={name:"boolean",code:"AB",Rc:new pr(!0),Ud:new pr(!1),fromString:function(b){switch(Rt.trim(b)){case"true":case"1":return this.Rc;case"false":case"0":return this.Ud;default:return u(b,"AB")}},fromBoolean:function(b){return b?this.Rc:this.Ud},matches:function(b){return b instanceof pr},cast:function(b){switch(b.code.substring(0,2)){case"AS":case"AZ":return G.boolean.fromString(b.toString());case"AD":case"AF":case"AO":return b=b.toNumber(),G.boolean.fromBoolean(b!==0&&!isNaN(b));case"AB":return b;default:return a(b,"AB")}}},w={name:"integer",code:"ADI",gb:"decimal",matches:function(b){return/^ADI/.test(b.code)},fromString:function(b){return/^\s*[-+]?[0-9]+\s*$/.test(b)?9<b.length?new se(b,"ADI"):new Me(parseInt(b,10)):u(b,"ADI")},fromNumber:function(b){return isFinite(b)?(b=Math.trunc(b),Math.abs(b)>Number.MAX_SAFE_INTEGER?new se(new gt(b),"ADI"):new Me(b)):u(b,"ADI",null,"FOCA0002")},hb:function(b){return new se(b,"ADI")},fromByteArray:function(b,s,p,N,D){function k(j,V,ct,z){let xt=new gt(0);if(z)for(V=V+ct-1;0<=V;V--)xt=xt.Vb(256).qd(j[V]);else for(z=V;z<V+ct;z++)xt=xt.Vb(256).qd(j[z]);return xt}return D&&128<=b[N?p-1:0]?(b=b.slice(s,s+p),N&&b.reverse(),b[0]&=127,p=k(b,0,p,!1).Hd(new gt(2).pow(8*p-1))):p=k(b,s,p,N),new se(p,"ADI")},valid:function(b){return b.value.$e(1)===0},cast:function(b){switch(b.code.substring(0,2)){case"AS":case"AZ":return G.integer.fromString(b.toString());case"AF":case"AO":return G.integer.fromNumber(b.toNumber());case"AD":return G.integer.hb(b.toBig().round(0,0));case"AB":return G.integer.fromNumber(b.toBoolean()?1:0);default:return a(b,"AB")}},Ek:function(b){return typeof b=="number"?G.integer.fromNumber(b):typeof b=="boolean"?G.integer.fromNumber(b?1:0):typeof b=="string"?G.integer.fromString(b):G.integer.fromString(b.toString())}},g={name:"numeric",code:"Anumeric",$k:["double","decimal","float"],matches:function(b){return b instanceof Ae||b instanceof Me||b instanceof se},cast:function(b){return G.string.matches(b)||G.untypedAtomic.matches(b)?G.double.fromString(b.toString()):G.numeric.matches(b)?b:G.boolean.matches(b)?G.double.fromNumber(b.toBoolean()?1:0):a(b,"Anumeric")},Id:function(b){let s=G.double;return b===null?s.fromNumber(Number.NaN):G.boolean.matches(b)?s.fromNumber(b.toBoolean()?1:0):G.numeric.matches(b)?s.cast(b):G.string.matches(b)||G.untypedAtomic.matches(b)?s.ie(b.toString()):s.fromNumber(Number.NaN)}},x={name:"QName",code:"AQ",matches:function(b){return b instanceof Ln},fromParts:function(b,s,p){return new Ln(b,s,p)},fromString:function(b,s){if(b=Rt.trim(b),b.substring(0,2)==="Q{")return G.QName.fromEQName(b);if(!Rt.fh(b))return u(b,"AQ");if(b=b.split(":"),b.length===1)return G.QName.fromParts("",s(""),b[0]);if(s=s(b[0]),s===null)throw new F("Undeclared prefix: "+b[0],"FONS0004");return G.QName.fromParts(b[0],s,b[1])},fromEQName:function(b){var s=b.indexOf("{");let p=b.indexOf("}");if(!(s===-1&&p===-1||-1<s&&-1<p))throw new F("Invalid EQName: "+b,"FORG0001");if(s=Ct.Ib(b.substring(s+1,p)),s==="http://www.w3.org/2000/xmlns/")throw new F("Use of reserved namespace: "+s,"XQST0070");let N=s===Ft.xml?"xml":"";if(/{/.test(s))throw new F("Invalid URI: "+s,"FORG0001");return G.QName.fromParts(N,s,b.substring(p+1))},cast:function(b,s){if(G.string.matches(b)||G.untypedAtomic.matches(b)){let p=Rt.trim(b.toString());if(p.substring(0,2)==="Q{")return G.QName.fromEQName(p);if(s)return G.QName.fromString(b.toString(),s);throw new F("Casting to QName from lexical QName form requires a namespace resolver","XPTY0117")}return G.QName.matches(b)?b:a(b,"AQ")}},I={name:"notation",code:"AN",fromString:function(b){return this.cast(b)},matches:function(){return!1},cast:function(){throw new F("Casting to xs:NOTATION is not possible","XPST0080")}},L={name:"dateTime",code:"AM",matches:function(b){return/^AM/.test(b.code)},fromString:function(b){return E(b,"AM")},fromDate:function(b,s=null){return new Ge(b,s,"AM")},fromUTCDate:function(b,s=null){return s==null?G.dateTime.fromDate(C(b),null):G.dateTime.fromDate(b,s)},cast:function(b){switch(b.code.substring(0,2)){case"AM":return b;case"AA":return G.dateTime.fromDate(b.UTCdate,b.timezoneOffset);case"AS":case"AZ":return G.dateTime.fromString(b.toString());default:return a(b,"AM")}}},_={name:"date",code:"AA",matches:function(b){return b.code==="AA"},fromString:function(b){return E(b,"AA")},fromDate:function(b,s=null){b=new Ge(b,s,"AA").toString();let p=b.charAt(0)==="-"?11:10;return b=G.dateTime.fromString(b.substring(0,p)+"T00:00:00"+b.substring(p)),new Ge(b.UTCdate,s,"AA")},fromUTCDate:function(b,s=null){return s==null?G.date.fromDate(C(b),null):G.date.fromDate(b,s)},cast:function(b){switch(b.code.substring(0,2)){case"AM":return G.date.fromDate(b.UTCdate,b.timezoneOffset);case"AA":return b;case"AS":case"AZ":return G.date.fromString(b.toString());default:return a(b,"AA")}}},q={name:"time",code:"AT",matches:function(b){return b.code==="AT"},fromString:function(b){return E(b,"AT")},fromDate:function(b,s=null){return b=new Ge(b,s,"AT"),b=G.dateTime.fromString("1972-01-01T"+b.toString()),new Ge(b.UTCdate,s,"AT")},fromUTCDate:function(b,s=null){return s==null?G.time.fromDate(C(b),null):G.time.fromDate(b,s)},cast:function(b){switch(b.code.substring(0,2)){case"AM":return G.time.fromDate(b.UTCdate,b.timezoneOffset);case"AT":return b;case"AS":case"AZ":return G.time.fromString(b.toString());default:return a(b,"AT")}}},$={name:"dateTimeStamp",code:"AMP",matches:function(b){return b.code==="AMP"},fromString:function(b){return E(b,"AMP")},fromDate:function(b,s=null){if(s==null)throw new F("Timezone offset must not be null for dateTimeStamp.fromDate()","FORG0001");return new Ge(b,s,"AMP")},fromUTCDate:function(b,s=null){return s==null?G.dateTimeStamp.fromDate(b,0):G.dateTimeStamp.fromDate(b,s)},cast:function(b){switch(b.code.substring(0,2)){case"AM":return b.code==="AMP"?b:b.timezoneOffset==null?u(b.toString(),"AMP"):G.dateTimeStamp.fromDate(b.UTCdate,b.timezoneOffset);case"AA":return b.timezoneOffset==null?u(b.toString(),"AMP"):G.dateTimeStamp.fromDate(b.UTCdate,b.timezoneOffset);case"AS":case"AZ":return G.dateTimeStamp.fromString(b.toString());default:return a(b,"AMP")}}},rt={name:"duration",code:"AR",matches:function(b){return/^AR/.test(b.code)},fromString:function(b){return n(b,"AR")},fromMonthsMilliseconds:function(b,s){return new mn(b,s,"AR")},cast:function(b){return G.duration.matches(b)?b:G.string.matches(b)||G.untypedAtomic.matches(b)?G.duration.fromString(b.toString()):a(b,"AR")}},st={name:"hexBinary",code:"AX",matches:function(b){return b.code==="AX"},fromString:function(b){return new be(S(b),"AX")},fromUint8Array:function(b){return new be(b,"AX")},fromUtf8EncodedString:function(b){return new be(new TextEncoder().encode(b),"AX")},cast:function(b){return b instanceof be?new be(b.value,"AX"):G.string.matches(b)||G.untypedAtomic.matches(b)?new be(S(b.toString()),"AX"):a(b,"AX")}},ht={name:"base64Binary",code:"A2",matches:function(b){return b.code==="A2"},fromString:function(b){return new be(A(b),"A2")},fromUint8Array:function(b){return new be(b,"A2")},cast:function(b){return b instanceof be?new be(b.value,"A2"):G.string.matches(b)||G.untypedAtomic.matches(b)?new be(A(b.toString()),"A2"):a(b,"A2")},fromUtf8EncodedString:function(b){return new be(new TextEncoder().encode(b),"A2")}},tt={anyAtomicType:h,untypedAtomic:m,string:c,anyURI:P,double:Q,decimal:H,float:B,boolean:y,integer:w,NOTATION:I,numeric:g,QName:x,dateTime:L,date:_,time:q,dateTimeStamp:$,duration:rt,hexBinary:st,base64Binary:ht},Y={},X={AM:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AA:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2}-[0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AT:/^\s*([0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AMP:/^\s*(-?[0-9]+-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|([+\-])[0-9]{2}:[0-9]{2})\s*$/,AH:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AG:/^\s*(-?[1-9][0-9]{4,}|-?[0-9]{4})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AJ:/^\s*--([0-9]{2}-[0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AI:/^\s*--([0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AK:/^\s*---([0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AR:/^\s*-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)S)?)?\s*$/,ARD:/^\s*-?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)S)?)?\s*$/,ARY:/^\s*-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?\s*$/},U={AM:function(b){return M(b)},AA:function(b){return b+"T00:00:00"},AT:function(b){return"1972-01-01T"+M(b)},AMP:function(b){return M(b)},AH:function(b){return b+"-01T00:00:00"},AG:function(b){return b+"-01-01T00:00:00"},AJ:function(b){return"1972-"+b+"T00:00:00"},AI:function(b){return"1972-"+b+"-01T00:00:00"},AK:function(b){return"1972-01-"+b+"T00:00:00"}},nt=[function(b,s){return t(f(b[1],12)+f(b[2],1),s.match(/^\s*-.*/))},function(b,s){return t(f(b[3],864e5)+f(b[4],36e5)+f(b[5],6e4)+i(b[6],1),s.match(/^\s*-.*/))},function(b,s){return t(f(b[1],864e5)+f(b[2],36e5)+f(b[3],6e4)+i(b[4],1),s.match(/^\s*-.*/))},function(){return 0}],W={AR:[0,1],ARD:[3,2],ARY:[0,3]},G={anyAtomicType:h,anyURI:P,base64Binary:ht,boolean:y,date:_,dateTime:L,dateTimeStamp:$,dayTimeDuration:null,decimal:H,double:Q,duration:rt,float:B,gDay:null,gMonth:null,gMonthDay:null,gYear:null,gYearMonth:null,hexBinary:st,integer:w,language:null,NCName:null,NOTATION:I,numeric:g,QName:x,string:c,time:q,untypedAtomic:m,yearMonthDuration:null,ENTITY:null,ID:null,IDREF:null,NMTOKEN:null,Name:null,byte:null,int:null,long:null,negativeInteger:null,nonNegativeInteger:null,nonPositiveInteger:null,normalizedString:null,positiveInteger:null,short:null,token:null,unsignedByte:null,unsignedInt:null,unsignedLong:null,unsignedShort:null};return{yf:e,la:function(b){return h.matches(b)},Yi:d,qj:v,Yf:function(b,s,p,N){return b instanceof se||s instanceof se?w.hb(N(b.toBig(),s.toBig())):(p=p(b.toNumber(),s.toNumber()),Math.abs(p)<Math.pow(2,52)?w.fromNumber(p):w.hb(N(b.toBig(),s.toBig())))},ld:r,eg:function(b,s){let p=ot.codes[s];if(p.matches(b))return b;if(G.decimal.matches(b)?/^A[OFD]$/.test(s):G.float.matches(b)&&/^A[OF]$/.test(s))return p.cast(b);throw new F(`Incompatible operands: ${r(b.code)} (${b.toString()}) and ${r(s)}`,"XPTY0004")},type:tt,codes:Y,XS:G}}(),sn=function(){function e(d){return Math.abs(d)<Math.pow(2,52)}function t(d,o){return S.matches(d)&&S.matches(o)?S:A}function i(d="FOAR0001"){throw new F("Division by zero",d)}function f(d="FOAR0002"){throw new F("Numeric overflow/underflow",d)}function v(d,o,E){throw new F(`Arithmetic operation ${E} not available for operands ${ot.ld(d.code)} and ${ot.ld(o.code)}`,"XPTY0004")}function a(d,o,E){function T(P){return/^A[AMT]/.test(P.code)}let C,n,r,h=u.untypedAtomic,m=u.dayTimeDuration,c=u.yearMonthDuration;return h.matches(d)?(d=u.double.fromString(d.value),a(d,o,E)):h.matches(o)?(o=u.double.fromString(o.value),a(d,o,E)):((m.matches(d)||c.matches(d))&&u.numeric.matches(o)?(r="u"+E+"n",C=d.code,n=o.code):(m.matches(o)||c.matches(o))&&u.numeric.matches(d)?(r="n"+E+"u",C=d.code,n=o.code):S.matches(d)&&S.matches(o)?(r="i"+E+"i",C=n="ADI"):l.matches(d)||l.matches(o)?(r="d"+E+"d",C=n="AO"):O.matches(d)||O.matches(o)?(r="f"+E+"f",C=n="AF"):A.matches(d)||A.matches(o)?(r="c"+E+"c",C=n="AD"):T(d)&&T(o)?(r="t"+E+"t",C=d.code,n=o.code):T(d)&&(m.matches(o)||c.matches(o))?(r="t"+E+"u",C=d.code,n=o.code):(m.matches(d)||c.matches(d))&&T(o)?(r="u"+E+"t",C=d.code,n=o.code):m.matches(d)&&m.matches(o)||c.matches(d)&&c.matches(o)?(r="u"+E+"u",C=n=d.code):v(E,d,o),M[r]||v(E,d,o),M[r](ot.eg(d,C),ot.eg(o,n)))}let u=ot.XS,l=u.double,A=u.decimal,S=u.integer,O=u.float,M={"d+d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d+o)},"d-d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d-o)},"d*d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d*o)},"d/d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d/o)},"d%d":function(d,o){let E=d.toNumber();return o=o.toNumber(),!isFinite(E)||isNaN(o)||o===0?l.fromNumber(NaN):isFinite(o)&&E!==0?l.fromNumber(E%o):d},"d~d":function(d,o){return d=d.toNumber(),o=o.toNumber(),o===0&&i(),(!isFinite(d)&&isFinite(o)||isNaN(d)||isNaN(o))&&f(),o=Math.trunc(d/o),isFinite(o)||f(),e(o)?S.fromNumber(o):l.fromNumber(o)},"f+f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d+o)},"f-f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d-o)},"f*f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d*o)},"f/f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d/o)},"f%f":function(d,o){let E=d.toNumber();return o=o.toNumber(),!isFinite(E)||isNaN(o)||o===0?O.fromNumber(NaN):!isFinite(o)||E===0?d:(d=E%o,isFinite(d)||i(),O.fromNumber(d))},"f~f":function(d,o){return d=d.toNumber(),o=o.toNumber(),o===0&&i(),(!isFinite(d)&&isFinite(o)||isNaN(d)||isNaN(o))&&f(),o=Math.trunc(d/o),isFinite(o)||f(),e(o)?S.fromNumber(o):O.fromNumber(o)},"i+i":function(d,o){return ot.Yf(d,o,(E,T)=>E+T,(E,T)=>E.qd(T))},"i-i":function(d,o){return ot.Yf(d,o,(E,T)=>E-T,(E,T)=>E.Hd(T))},"i*i":function(d,o){return ot.Yf(d,o,(E,T)=>E*T,(E,T)=>E.Vb(T))},"i/i":function(d,o){return o.equals(ot.XS.integer.fromNumber(0))&&i(),d=d.toBig(),o=o.toBig(),A.hb(d.Nb(o))},"i%i":function(d,o){var E=d.toNumber();let T=o.toNumber();return!isFinite(E)||isNaN(T)||T===0?(T===0&&i(),S.fromNumber(NaN)):!isFinite(T)||E===0?d:(E=d.toNumber()%o.toNumber(),isFinite(E)||i(),e(E)?S.fromNumber(E):S.hb(gt(d.toBig().$e(o.toBig()))))},"i~i":function(d,o){let E=d.toNumber()/o.toNumber();return isFinite(E)||i(),e(E)?S.fromNumber(Math.trunc(E)):S.hb(gt(d.toBig().Nb(o.toBig())).round(0,0))},"c+c":function(d,o){let E=d.toBig(),T=o.toBig();return t(d,o).hb(E.qd(T))},"c-c":function(d,o){let E=d.toBig(),T=o.toBig();return t(d,o).hb(E.Hd(T))},"c*c":function(d,o){let E=d.toBig(),T=o.toBig();return t(d,o).hb(E.Vb(T))},"c/c":function(d,o){try{let E=d.toBig(),T=o.toBig();return A.hb(E.Nb(T))}catch{i()}},"c%c":function(d,o){try{let E=d.toBig(),T=o.toBig();return A.hb(E.$e(T))}catch{i()}},"c~c":function(d,o){try{let E=d.toBig(),T=o.toBig(),C=E.Nb(T).round(0,0);return S.hb(C)}catch{i()}},"a+a":function(d,o){return a(d,o,"+")},"a-a":function(d,o){return a(d,o,"-")},"a*a":function(d,o){return a(d,o,"*")},"a/a":function(d,o){return a(d,o,"/")},"a%a":function(d,o){return a(d,o,"%")},"a~a":function(d,o){return a(d,o,"~")},"u+u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(d)&&E.matches(o)||T.matches(d)&&T.matches(o)||v(d,o,"+"),T.matches(d)?T.fromMonthsMilliseconds(d.months+o.months,0):E.fromMonthsMilliseconds(0,d.milliseconds+o.milliseconds)},"u-u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(d)&&E.matches(o)||T.matches(d)&&T.matches(o)||v(d,o,"-"),T.matches(d)?T.fromMonthsMilliseconds(d.months-o.months,0):E.fromMonthsMilliseconds(0,d.milliseconds-o.milliseconds)},"u*n":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;if(E.matches(d)||T.matches(d)||v(d,o,"*"),o=o.toNumber(),!isFinite(o))throw new F("Cannot multiply duration by "+isNaN(o)?"NaN":"+/-INF",isNaN(o)?"FOCA0005":"FODT0002");return T.matches(d)?T.fromMonthsMilliseconds(Math.round(d.months*o),0):E.fromMonthsMilliseconds(0,Math.round(d.milliseconds*o))},"n*u":function(d,o){return sn["u*n"](o,d)},"u/n":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;if(E.matches(d)||T.matches(d)||v(d,o,"/"),o=o.toNumber(),o===0&&i("FODT0002"),isNaN(o))throw new F("Cannot divide duration by NaN","FOCA0005");return o=T.matches(d)?d.months/o:d.milliseconds/o,isFinite(o)||f("FODT0002"),T.matches(d)?T.fromMonthsMilliseconds(Math.round(o),0):E.fromMonthsMilliseconds(0,Math.round(o))},"u/u":function(d,o){var E=u.dayTimeDuration;let T=u.yearMonthDuration;E.matches(d)&&E.matches(o)||T.matches(d)&&T.matches(o)||v(d,o,"/"),E=new gt(0),d=new gt(T.matches(d)?d.months:d.milliseconds),o=new gt(T.matches(o)?o.months:o.milliseconds),o.cmp(E)===0&&i();try{return A.hb(d.Nb(o))}catch{f()}},"t+u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(o)||T.matches(o)||v(d,o,"+"),E.matches(o)?ot.codes[d.code].fromDate(new Date(d.UTCdate.getTime()+o.milliseconds),d.timezoneOffset):Ys(d,o.months)},"u+t":function(d,o){return sn["t+u"](o,d)},"t-u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(o)||T.matches(o)||v(d,o,"-"),E.matches(o)?ot.codes[d.code].fromDate(new Date(d.UTCdate.getTime()-o.milliseconds),d.timezoneOffset):Ys(d,-o.months)},"t-t":function(d,o){return u.dayTimeDuration.fromMonthsMilliseconds(0,d.UTCdate.getTime()-o.UTCdate.getTime())}};return M}();function su(e){function t(){function a(M){throw new F("In alphaCode '"+e+"' @ "+f+": "+M)}function u(M){let d=f>=e.length?-1:e.charAt(f++);d!==M&&a("Expected '"+M+"', found '"+d+"'")}function l(){let M=0,d=f;for(;f<e.length;)switch(e.charAt(f++)){case"{":M++;break;case"}":M--;break;case"]":case",":if(M===0)return e.substring(d,--f);break;case" ":if(M===0)return e.substring(d,f-1)}return e.substring(d,f)}typeof e!="string"&&Z.ka("No input to alphaParser");let A={};v.push(f);var S=e.charAt(f);if(/[01+?*]/.test(S)?(f++,i.Od(A,"o",S)):i.Od(A,"o","1"),(S=l())&&!/^[ANFE]/.test(S))throw Z.ka("Invalid alphaCode '"+e+"'");for(i.Od(A,"p",S);f<e.length;)switch(S=e.charAt(f),S){case"]":case",":return S=e.substring(v.pop(),f),i.Od(A,"code",S),A;case" ":f++;break;case"n":case"c":f++;var O=l();/^~/.test(O)&&(O="Q{http://www.w3.org/2001/XMLSchema}"+O.substring(1)),i.Od(A,S,O);break;case"k":case"r":case"v":case"e":f++,u("["),O=t(),u("]"),i.Aj(A,S,O);break;case"a":case"m":case"u":case"i":case"d":if(f++,u("["),O=[],e.charAt(f)==="]")f++,i.xh(A,S,O);else for(;;){let M=t();if(O.push(M),e.charAt(f)===",")f++;else{u("]"),i.xh(A,S,O);break}}break;case"t":a("Tuple types not yet implemented");break;default:a("Expected one of n|c|t|k|r|v|a|u, found '"+S+"'")}return S=e.substring(v.pop(),f),i.Od(A,"code",S),v.pop(),A}var i=ou;let f=0,v=[];this.g=t}let ou={Yk:function(){return{}},Od:function(e,t,i){e[t]=i},Aj:function(e,t,i){e[t]=i},xh:function(e,t,i){e[t]=i}};function Le(e){return new su(e).g()}function pn(e){let t=(e.o||"1")+e.p;if(e.n&&(t+=" n"+e.n),e.c&&(t+=" c"+e.c),e.k&&(t+=" k["+pn(e.k)+"]"),e.v&&(t+=" v["+pn(e.v)+"]"),e.r&&(t+=" r["+pn(e.r)+"]"),e.a){t+=" a";for(var i=0;i<e.a.length;i++)t+=(i===0?"[":",")+pn(e.a[i]);t+="]"}if(e.m){for(t+=" m",i=0;i<e.m.length;i++)t+=(i===0?"[":",")+pn(e.m[i]);t+="]"}return t}function Zs(e,t){if(e.startsWith(t))return t;if(t.startsWith(e))return e;let i=Math.min(e.length,t.length);for(;0<i;){if(e.substring(0,i)===t.substring(0,i))return e.substring(0,i);i--}return""}let It=function(){function e(A,S){if(S==="")return A.eb;let O=S.charAt(0);return A.za.hasOwnProperty(O)?e(A.za[O],S.substring(1)):[]}function t(A,S){let O=e(A,A.options.hash(S));for(let M=0;M<O.length;M++)if(A.options.Kc(O[M].k,S))return O[M];return null}function i(A,S,O,M){if(M===""){for(M=0;M<A.eb.length;M++)if(A.options.Kc(A.eb[M].k,S)){A.eb[M]={k:S,v:O};return}A.eb.push({k:S,v:O})}else{let d=M.charAt(0),o;A.za.hasOwnProperty(d)?o=A.za[d]:(o=new a(A.options),o.id=u++,A.za[d]=o),i(o,S,O,M.substring(1))}}function f(A,S,O,M){let d=new a(A.options),o=!1;if(M==="")d.eb=A.eb.map(function(T){return A.options.Kc(T.k,S)?(o=!0,{k:S,v:O}):T}),o||d.eb.push({k:S,v:O}),d.za=A.za;else{let T=M.charAt(0);for(var E in A.za)A.za.hasOwnProperty(E)&&(E===T?(d.za[E]=f(A.za[E],S,O,M.substring(1)),o=!0):d.za[E]=A.za[E]);o||(E=new a(A.options),E=f(E,S,O,M.substring(1)),d.za[T]=E),d.eb=A.eb}return d}function v(A,S,O){let M=new a(A.options);if(O==="")M.eb=A.eb.filter(function(d){return!A.options.Kc(d.k,S)}),M.za=A.za;else{let d=O.charAt(0);for(let o in A.za)A.za.hasOwnProperty(o)&&(M.za[o]=o===d?v(A.za[o],S,O.substring(1)):A.za[o]);M.eb=A.eb}return M}function a(A=null){this.eb=[],this.za={},this.options=A||{hash:l.hash,Kc:l.Kc}}let u=0,l={hash:function(A){return A.hashCode()},Kc:function(A,S){try{return A.isNumeric()?A.gg(S):A.equals(S)&&(A.timezoneOffset!==void 0&&A.timezoneOffset!==null)==(S.timezoneOffset!==void 0&&S.timezoneOffset!==null)}catch{return!1}}};return a.prototype={eb:[],za:{},options:l,containsKey:function(A){return t(this,A)!==null},get:function(A){return A=t(this,A),A===null?[]:A.v},evaluate:function(A){return A=t(this,A[0][0]),A===null?bt:wt(A.v)},inSituPut:function(A,S){i(this,A,S,this.options.hash(A))},put:function(A,S){return f(this,A,S,this.options.hash(A))},remove:function(A){return v(this,A,this.options.hash(A))},forAllPairs:function(A){this.eb.forEach(A);for(let S in this.za)this.za.hasOwnProperty(S)&&this.za[S].forAllPairs(A)},keys:function(){let A=[];return this.forAllPairs(function(S){A.push(S.k)}),A},conforms:function(A,S,O){let M=this;return wt(M.keys()).every(function(d){let o=M.get(d);return A(d)&&O(o.length)&&wt(o).every(S)})},showValue:function(){let A="HashTrie map{",S="";return this.forAllPairs(function(O){A+=S,S=", ",A+=Z.showValue(O.k),A+=": ",A+=Z.showValue(O.v)}),A+="}"}},a}();class qt{constructor(t){Array.isArray(t)||Z.ka("XdmArray value must be an array. Supplied:"+t),this.value=t}get(t){if(typeof t!="number")throw new F("Array subscript is not numeric","XPTY0004");if(1>t||t>this.value.length)throw new F("Array index ("+t+") out of bounds (1 to "+this.value.length+")","FOAY0001");return this.value[t-1]}evaluate(t){return wt(this.value[t[0][0]-1])}size(){return this.value.length}showValue(){let t="[";for(let i=0;i<this.value.length&&3>i;i++)i!==0&&(t+=","),t+=Z.showValue(this.value[i]);return 4<=this.value.length&&(t+=",...("+this.value.length+")"),t+"]"}flatten(t){for(let i=0;i<this.value.length;i++){let f=this.value[i];for(let v=0;v<f.length;v++)t(f[v])}}conforms(t,i,f){var v=ot.XS.integer.fromNumber(this.value.length);if(!t(v))return!1;for(t=0;t<this.value.length;t++)if(v=this.value[t],!f(v.length)||!wt(v).every(i))return!1;return!0}}let Et={ya:null,jc:null,tf:null,De:null,Yb:null,wd:null,Zb:null,xg:null,uf:null,yg:null,sg:null,Ya:null,Oh:null,tc:null,ug:null,sf:null,Xd:null,rg:null,vg:null,qg:null,wg:null,Wd:null,Vd:null,Ce:null,Ee:null,wf:null,pf:null,Be:null};function on(e){if(/^[01?+*]/.test(e))var t=e.charAt(0),i=e.substring(1);else t="1",i=e;return i=Ie(i),t=new Vt(i,Vi(t)),t._alphaCode=e,t}function Be(e){let t=Xe(e);return new Vt(t,Vi(e.o))}function Je(e){return Z.assert(e instanceof ae),new Vt(e,2)}function au(){function e(i,f){return new Vt(i,f)}function t(i,f){return e(new Ee(ot.codes[i]),Vi(f))}Tn=new fo,Vn=new Kr,ho=new gu,An=new go,Bn=new Hr,ti=new Ao,ei=new Fo,qn=new Wr,zr=new De(9),mo=new De(1),_i=new De(2),Mi=new De(3),ki=new De(8),Ui=new De(7),Li=new De(13),Fn=new Ee(ot.XS.double),Ji=new Ee(ot.XS.float),$i=new Ee(ot.XS.string),xr=new Ee(ot.XS.decimal),Qi=new Ee(ot.XS.integer),xo=new Ee(ot.XS.dayTimeDuration),wr=new Ee(ot.XS.anyAtomicType),Er.NMTOKENS=ot.type.NMTOKEN,Er.IDREFS=ot.type.IDREF,Er.ENTITIES=ot.type.ENTITY,Object.assign(Et,{ya:e(Ri,7),jc:e(Ri,2),tf:e(Ri,3),De:t("A","1"),Yb:t("A","?"),wd:t("A","*"),Zb:t("AS","1"),xg:t("AZ","1"),uf:t("AZ","?"),yg:t("AZ","*"),sg:t("AS","?"),Ya:t("AB","1"),Oh:t("AB","?"),tc:t("ADI","1"),ug:t("AD","1"),sf:t("ADI","?"),Xd:t("AO","1"),rg:t("AO","?"),vg:t("AF","1"),qg:t("AU","?"),wg:t("AQ","1"),Wd:e(Vn,3),Vd:e(Vn,7),Ce:t("ADI","*"),Ee:e(Bn,2),wf:e(ti,2),pf:e(Bn,7),Be:e(qn,1)})}function te(e,t){return new Vt(e.itemType,t)}function Lr(e,t){var i=e.cardinality;return new Vt(e.itemType,i===1||t===1?1:t===2?i:i===2?t:je(i)||je(t)?7:i===6&&t===6?6:7)}class Vt{constructor(t,i){this.itemType=t,this.cardinality=i,this.g=this._alphaCode=null}V(){if(!this.g)if(this._alphaCode)this.g=Le(this._alphaCode);else{let t=Object.assign(this.itemType.V()||{});t.o=Kn(this.cardinality),this.g=t}return this.g}ga(){return this._alphaCode||(this._alphaCode=this.g?pn(this.g):(Kn(this.cardinality)||"1")+this.itemType.ga()),this._alphaCode}matches(t){let i;switch(t.length){case 0:i=je(this.cardinality);break;case 1:i=this.cardinality!==1;break;default:i=qe(this.cardinality)}if(!i)return!1;let f=this.itemType.ha();return t.every(v=>f(v))}toString(){return this.itemType instanceof Wr&&this.cardinality===1?"empty-sequence()":this.itemType.toString()+Kn(this.cardinality)}equals(t){return this.ga()===t.ga()}}let Ut=function(){class e{constructor(S,O){if(this.rb=S,this.J=S.alphaTree,this.arity=O,this.resultType=this.J.r?Be(this.J.r):on("*"),this.j=[],S.variadic){S=Be(this.J.a[0]);for(let M=0;M<O;M++)this.j.push(S)}else for(S=0;S<O;S++)this.j[S]=Be(this.J.a[S])}Bi(){return this.arity}cc(){return null}evaluate(){return Z.ka("Not implemented"),bt}oc(){return this.cc()?this.cc().toEQName()+"#"+this.arity:"anonymous function (arity "+this.arity+")"}showValue(){return this.oc()}g(S,O){if(O=O&&O.name==="apply",S.length!==this.arity)throw new F("Too "+(S.length<this.arity?"few":"many")+" arguments in call to "+this.oc()+": required "+this.arity+", supplied "+S.length,O?"FOAP0001":"XPTY0004");O=[];for(let M=0;M<S.length;M++)O[M]=ut.Gf(S[M],this.j[M],()=>"dynamic call of "+this.oc());return O}$(S){return wt(ut.Gf(S,this.resultType,()=>"result of dynamic call of "+this.oc()))}Ve(){return new Ve(this.j,this.resultType)}}class t extends e{constructor(S,O,M,d,o){super(S,M),this.name=O,this.fa=[Ft.jh,Ft.map,Ft.He,Ft.qb,Ft.jd].includes(O.uri)?ut.oi:ut.ni,this.K=d,(S.defaultToDot&&M===0||["accumulator-after","accumulator-before","lang"].includes(O.local))&&(this.B=ue(o))}cc(){return this.name}evaluate(S,O,M){var d=this.cc().local;if(d==="current")throw new F("current() function cannot be evaluated dynamically","XTDE1360");if(d==="current-output-uri")return bt;if(d==="regex-group")return kt("");let o=O;this.B&&(o=O.X(),o.focus=me(this.B)),O=["string-length","normalize-space"].includes(d);let E=this.rb.defaultToDot;return d=d==="number",(O||E||d)&&S.length===0?(He(o,"XPDY0002",". (dot)"),M=ue(o),(O||d)&&(M=ut.Kb(M).next()),O&&(M=ot.XS.string.cast(M)),S.push([M])):S=this.g(S,M),this.fa(this.cc(),S,o,this.K)}}let i={NMTOKENS:"NMTOKEN",IDREFS:"IDREF",ENTITIES:"ENTITY"};class f extends e{constructor(S,O,M){if(super(S,1),this.name=O,S=i[O.local]){let d=ot.type[S].fromString;Z.assert(d),this.evaluate=o=>(o=this.g(o,M)[0][0].toString(),o=Ct.Ib(o).split(" "),wt(o.map(d)))}else if(O.local==="QName"){let d=ut.Sd(M,!0);this.evaluate=o=>(o=this.g(o,M)[0][0].toString(),At(ot.XS.QName.fromString(o,d)))}else{let d=ot.type[O.local].cast;Z.assert(d),this.evaluate=o=>At(d(this.g(o,M)[0][0]))}}cc(){return this.name}}class v extends e{constructor(S,O){super(S,S.alphaTree.a.length),this.R=S.componentBinding,this.B=O.fixed.Ja[this.R],this.body=ut.ba(this.B.actor,"body"),this.name=ot.XS.QName.fromEQName(this.B.actor.name),this.K=ut.ib(this.B.actor,"u")}cc(){return this.name}evaluate(S,O,M){for(S=this.g(S,M),O=O.X(!0),Yn(O),this.K||(O.pa="function"),O.ab={},O.Wa=null,O.focus=null,O.oa=this.B,M=0;M<S.length;M++)O.ma[M]=S[M];return ut.evaluate(this.body,O)}}class a extends e{constructor(S,O,M){super(S,S.alphaTree.a.length),this.body=ut.ba(O,"body"),this.K=O.C,this.B=M}evaluate(S,O,M){S=this.g(S,M),O=O.X(!0),Yn(O),O.pa="function",O.ab={},O.Wa=null,O.focus=null,O.ma=this.B.ma.slice(),O.oa=this.B.oa,M=this.K;for(let d=0;d<S.length;d++)O.ma[parseInt(M[d].slot,10)]=S[d];return ut.evaluate(this.body,O)}}class u extends e{constructor(S,O,M){super(S,S.alphaTree.a.length),this.B=O,this.K=M}oc(){return"partially-applied "+this.B.oc()}evaluate(S,O,M){let d=[];for(let o=0;o<this.B.arity;o++)if(d[o]=this.K[o]||S.shift(),!d[o])throw new F("Too few arguments in call of "+this.oc(),"XPTY0004");return this.B.evaluate(d,O,M)}}class l extends e{constructor(S,O){super(S,S.alphaTree.p==="F"?S.alphaTree.a.length:1),this.B=O}oc(){return"coerced "+this.B.oc()}evaluate(S,O,M){return S=this.g(S,M),this.$(this.B.evaluate(S,O,M).expand())}}return{XdmFunction:e,Ae:t,nf:f,rf:v,Nh:a,Mh:u,pg:l}}();class Jr{constructor(t){this.value=t}showValue(){return"XDMValue "+Z.showValue(this.value)}}class ee{constructor(t){this.value=t}containsKey(t){return typeof this.value[t]<"u"}get(t){return Yt(this.value[t])}showValue(){return"JSValue "+Z.showValue(this.value)}}let oe=ot.XS,uu=Object.getPrototypeOf(function*(){}).prototype,cu=Object.getPrototypeOf(uu);function zs(e){switch(typeof e){case"undefined":return[];case"string":return oe.untypedAtomic.fromString(e);case"number":return oe.double.fromNumber(e);case"boolean":return oe.boolean.fromBoolean(e);case"function":return new ee(e);case"object":if(oe.anyAtomicType.matches(e)||at.U(e)||e instanceof qt||e instanceof Ut.XdmFunction||e instanceof It||e instanceof ee)return e;if(e instanceof Date)return oe.dateTime.fromString(e.toISOString());if(e instanceof Uint8Array)return oe.hexBinary.fromUint8Array(e);if(Array.isArray(e)){let t=[];return e.forEach(function(i){t.push(Yt(i))}),new qt(t)}return e===null?[]:e instanceof Jr?e.value:new ee(e);default:return new ee(e)}}function lu(e){let t=[];return e.forEach(function(i){i=zs(i),Array.isArray(i)&&i.length===0||t.push(i)}),t}function fu(e){if(e instanceof qt){let t=[];return e.value.forEach(i=>t.push(Gs(i))),new qt(t)}if(e instanceof ee){let t=e.value;if(typeof t!="object"||t instanceof Uint8Array)return e;e=new It;for(let i in t)if(t.hasOwnProperty(i)){let f=Yt(i)[0],v=Yt(t[i]);e.inSituPut(f,Ne(v))}return e}return e}function Gs(e){let t=[];return e.forEach(function(i){i=fu(i),Array.isArray(i)&&i.length===0||t.push(i)}),t}function Oi(e,t){if(Array.isArray(e))throw new F("convertItemToJS() called for an array","SXJS0004");if(e===null)return null;if(oe.string.matches(e)||oe.anyURI.matches(e)||oe.duration.matches(e)||oe.hexBinary.matches(e)||oe.base64Binary.matches(e)||oe.untypedAtomic.matches(e))return e.toString();if(oe.numeric.matches(e))return e.toNumber();if(oe.boolean.matches(e))return e.toBoolean();if(oe.dateTime.matches(e)||oe.date.matches(e)||oe.dateTimeStamp.matches(e)||oe.time.matches(e)||oe.gYearMonth.matches(e)||oe.gYear.matches(e)||oe.gMonthDay.matches(e)||oe.gMonth.matches(e)||oe.gDay.matches(e))return e.toString();if(oe.QName.matches(e))return e.toEQName();if(at.U(e))return e;if(e instanceof qt){let i=[];return e.value.length!==0&&e.value.forEach(function(f){i.push(re(f,t))}),i}if(e instanceof It){if(t){let i={};return e.forAllPairs(function(f){i[f.k.toString()]=re(f.v,t)}),i}return new Jr(e)}return e instanceof Jr?e:e instanceof ee?e.value:new Jr(e)}function hu(e,t){let i=[];return e.length===0?null:e.length===1?Oi(e[0],t):(e.forEach(function(f){i.push(Oi(f,t))}),i)}function $r(e,t){function i(a){return re(a,!0)}if(t==="iterator")return e.mapOneToOne(i);if(t==="xdm")return e.expand();let f=[],v;for(;(v=e.next())!=null;)f.push(i(v));switch(t){case"iterator":return wt(f);case"array":return f;default:return f.length===0?null:f.length===1?f[0]:f}}function Jn(e){if(cu.isPrototypeOf(e)){e=new Pi(e);for(var t=[],i=e.next();i!=null;)t.push(Jn(i)),i=e.next();return Ne(Yt(t))}if(Array.isArray(e)){t=[];for(i of e)t.push(Jn(i));return Ne(Yt([t]))}if(e instanceof Map){t=new It;for(let[f,v]of e.entries())e=Jn(f),i=Jn(v),t.inSituPut(e[0],i);return Yt(t)}return Ne(Yt(e))}function Yt(e){return Array.isArray(e)?lu(e):(e=zs(e),Array.isArray(e)&&e.length===0?[]:[e])}function Ne(e){return Z.assert(Array.isArray(e)),Gs(e)}function re(e,t=!1){return Array.isArray(e)?hu(e,t):Oi(e,t)}let $n=ot.XS,mu=Object.getPrototypeOf(function*(){}).prototype,pu=Object.getPrototypeOf(mu);class ft{*[Symbol.iterator](){let t=this.next();for(;t!=null;)yield re(t,!0),t=this.next()}filter(t){return new eo(this,t)}next(){return Z.ka("next()"),null}itemAt(t){let i=1,f;for(;(f=this.next())!==null;)if(i++===t)return f;return null}mapOneToOne(t){return new ro(this,t)}mapOneToMany(t){return new no(this,t)}forEachItem(t){let i;for(;(i=this.next())!==null;)t(i)}some(t){let i;for(;(i=this.next())!==null;)if(t(i))return!0;return!1}every(t){let i;for(;(i=this.next())!==null;)if(!t(i))return!1;return!0}count(){let t=0;return this.forEachItem(function(){t++}),t}expand(){let t=[];return this.forEachItem(function(i){t.push(i)}),t}showValue(){return"Iterator"}}class dn extends ft{constructor(t){super(),this.g=t}next(){let t=this.g;return this.g=null,t}itemAt(t){return t===1?this.g:null}peek(){return this.g}expand(){return this.g===null?[]:[this.g]}showValue(){return"Singleton of "+Z.showValue(this.g)}}class Ws extends ft{next(){return null}peek(){return null}expand(){return[]}count(){return 0}filter(){return this}itemAt(){return null}mapOneToOne(){return this}mapOneToMany(){return this}forEachItem(){}some(){return!1}every(){return!0}showValue(){return"EmptyIter"}}class Hs extends ft{constructor(t){super(),Array.isArray(t)||Z.ka("ForArrayIter expects array. Supplied value: "+Z.showValue(t)),this.g=t,this.j=0}next(){return this.j<this.g.length?this.g[this.j++]:null}peek(){return this.j<this.g.length?this.g[this.j]:null}expand(){return this.g}count(){return this.g.length}itemAt(t){return this.g[t-1]}showValue(){return"ForArray "+this.g}}class Pi extends ft{constructor(t){super(),this.g=t}next(){let t=this.g.next();return t.done?null:t.value}}class Xi{constructor(t){this.g=t}saxonIterator(){return this.g}*[Symbol.iterator](){let t=this.g.next();for(;t!=null;)yield re(t,!0),t=this.g.next()}}class to extends ft{constructor(t){super(),this.g=t}next(){var t=this.g.next();return t===null?null:(t=Array.isArray(t)?Yt([t]):Yt(t),t=Ne(t),pu.isPrototypeOf(t[0])?Jn(t[0]):t[0])}}class eo extends ft{constructor(t,i){super(),this.g=t,(this.j=i)||Z.ka("Filter iterator undefined predicate")}next(){for(;;){let t=this.g.next();if(!t)return null;let i=this.j(t);if(i==="done")return null;if(i)return t}}}class no extends ft{constructor(t,i){super(),this.B=t,this.j=i,this.g=null}next(){for(;;){if(this.g!==null){var t=this.g.next();if(t)return t}if(t=this.B.next(),t===null)return null;(this.g=this.j(t))&&!this.g.next&&Z.ka("Result of mapper is not an iterator, mapper = "+this.j)}}}class ro extends ft{constructor(t,i){super(),this.g=t,this.B=0,typeof t=="object"&&"next"in t||Z.ka("Base not an iterator"),this.j=i}next(){for(;;){var t=this.g.next();if(t===null)return null;if(t=this.j(t,this.B++))return t}}}class Cn extends ft{constructor(t,i){super(),this.g=t,this.j=i}next(){let t=this.g;return t?(this.g=this.j(t),t):null}peek(){return this.g}}class io extends ft{constructor(t){super(),Array.isArray(t)||Z.ka("Join iterator expects array"),this.g=t}next(){for(;;){if(this.g.length===0)return null;let t=this.g[0].next();if(t===null)this.g.shift();else return t}}}class Qr extends ft{constructor(t,i,f){super(),this.g=We(t),this.j=We(i),this.B=f,this.current=null}next(){var t=this.g.peek();let i=this.j.peek();return t&&i?(t=this.B(t,i),0>t?this.current=this.g.next():0<t?this.current=this.j.next():(this.current=this.g.next(),this.j.next()),this.current):t?this.current=this.g.next():i?this.current=this.j.next():this.current=null}}class so extends ft{constructor(t,i,f){super(),this.g=We(t),this.j=We(i),this.B=f,this.current=null}next(){let t=this.g.peek(),i=this.j.peek();for(;t&&i;){let f=this.B(t,i);if(0>f)this.g.next(),t=this.g.peek();else if(0<f)this.j.next(),i=this.j.peek();else return this.current=this.g.next(),this.j.next(),this.current}return this.current=null}}class oo extends ft{constructor(t,i,f){super(),this.g=We(t),this.j=We(i),this.B=f,this.current=null}next(){let t=this.g.peek();for(var i=this.j.peek();t&&i;){if(i=this.B(t,i),0>i)return this.current=this.g.next();0<i?this.j.next():(this.g.next(),this.j.next(),t=this.g.peek()),i=this.j.peek()}return t&&!i?this.current=this.g.next():this.current=null}}function We(e){return"peek"in e?e:new ao(e)}class ao extends ft{constructor(t){super(),this.j=t,this.g=t.next()}next(){let t=this.g;return t&&(this.g=this.j.next()),t}peek(){return this.g}showValue(){return"LookAhead of "+this.j.showValue()}}class uo extends ft{constructor(t){super(),this.g=t,this.j=-1,this.position=0,this.current=null}next(){return this.position++,this.current=this.g.next(),this.current===null&&(this.position=-1),this.current}last(){if(0>this.j)if(this.g instanceof wt)this.j=this.g.expand().length;else{let t=[],i;for(;(i=this.g.next())!==null;)t.push(i);this.j=this.position+t.length,this.g=wt(t)}return this.j}showValue(){return"Tracker of "+this.g.showValue()}}class co extends ft{constructor(t){super(),this.current=t,this.position=1}next(){return null}last(){return 1}}class Vr extends ft{constructor(t){super(),this.g=t}next(){let t=this.g.next();return t.done?null:t.value}}class ji extends ft{constructor(t,i,f){for(super(),this.g=t,this.j=f,this.B=1;!(this.B++>=i);)if(this.g.next()==null){this.j=Number.NEGATIVE_INFINITY;break}}next(){return this.B++<=this.j?this.g.next():null}}let bt=new Ws;function At(e){return new dn(e)}function $e(e){return new io(e)}function me(e){return new co(e)}function Lt(e){return new uo(e)}function wt(e){return new Hs(e)}function kt(e){return new dn($n.string.fromString(e))}function he(e){return new dn($n.integer.fromNumber(e))}function lo(e){return new dn($n.double.fromNumber(e))}function qr(e){return new dn($n.decimal.hb(e))}function Pt(e){return new dn($n.boolean.fromBoolean(e))}var Kt={};Kt.Mj=ft,Kt.Sj=oo,Kt.Empty=bt,Kt.Tj=Ws,Kt.Vj=eo,Kt.ForArray=wt,Kt.Wj=Hs,Kt.Xj=Vr,Kt.$j=so,Kt.ak=Pi,Kt.bk=Xi,Kt.ck=$e,Kt.dk=io,Kt.ek=ao,Kt.hk=no,Kt.ik=ro,Kt.Singleton=At,Kt.lk=dn,Kt.mk=me,Kt.nk=co,Kt.pk=Cn,Kt.qk=ji,Kt.Tracker=Lt,Kt.tk=uo,Kt.wk=Qr,Kt.yk=to,Kt.oneBoolean=Pt,Kt.fl=qr,Kt.oneDouble=lo,Kt.oneFloat=function(e){return new dn($n.float.fromNumber(e))},Kt.oneInteger=he,Kt.oneString=kt;class cn{constructor(t,i,f=null){this.prefix=t===null?"":t,this.uri=i===null?"":i,this.parentNode=f===null?null:f,this.nodeType=13}}class vn{constructor(t,i,f){this.qname=t,this.value=i,this.parent=f,this.nodeType=2,this.name=t.toString(),this.namespaceURI=t.uri,this.localName=t.local,this.prefix=t.prefix}}let at=function(){function e(a){return a?a.nodeType===9?a:e(a.ownerDocument):null}let t=ot.XS,i=1,f={Uc:function(a){switch(a.nodeType){case 9:case 11:return bt;case 2:return a.parent?new Cn(a.parent,u=>u.parentNode):bt;default:return(a=a.parentNode)?new Cn(a,u=>u.parentNode):bt}},Sa:function(a){return $e([At(a),f.Uc(a)])},Ga:function(a){if(a.nodeType===1){let u=a.attributes,l=a.ownerDocument.documentElement&&J.Qb(a.ownerDocument.documentElement),A=[];for(let S=0;S<u.length;S++){let O=u[S].name;(O.substring(0,5)!=="xmlns"||O.length!==5&&O.charAt(5)!==":")&&(l&&u[S].localName.substring(0,4)==="xml:"?A.push(new vn(t.QName.fromParts("xml",Ft.xml,u[S].localName.substring(4)),u[S].value,a)):A.push(new vn(t.QName.fromParts(u[S].prefix,u[S].namespaceURI,u[S].localName),u[S].value,a)))}return wt(A)}return bt},Ia:function(a){function u(l){return new Cn(l.firstChild,A=>A.nextSibling)}if(a===null)return bt;switch(a.nodeType){case 9:return u(a).filter(function(l){return!(l.nodeType===7&&l.target==="xml"||l.nodeType===3||l.nodeType===4)});case 11:case 1:return u(a);default:return bt}},Se:function(a){return f.Ia(a).mapOneToMany(function(u){return f.he(u)})},he:function(a){return $e([At(a),f.Se(a)])},Ug:function(a){switch(a.nodeType){case 9:case 11:return bt;case 2:case 13:return a=at.Va(a),a===null?bt:$e([f.Se(a),f.Ug(a)]);default:return f.Sa(a).mapOneToMany(function(u){return f.Vg(u).mapOneToMany(f.he)})}},Vg:function(a){switch(a.nodeType){case 9:case 11:case 2:case 13:return bt;default:return new Cn(a.nextSibling,u=>u.nextSibling)}},jb:function(a){return a.nodeType===1?wt(at.Dc(a).map(function(u){return new cn(u.prefix,u.uri,a)})):bt},parent:function(a){return At(at.Va(a))},dg:function(a){return f.Sa(a).mapOneToMany(function(u){return f.Ic(u).mapOneToMany(function(l){return wt(f.he(l).expand().reverse())})})},Ic:function(a){switch(a.nodeType){case 9:case 11:case 2:case 13:return bt;default:return new Cn(a.previousSibling,u=>u.previousSibling)}},self:function(a){return At(a)}},v={Ha:f,Bg:{ancestor:f.Uc,"ancestor-or-self":f.Sa,attribute:f.Ga,child:f.Ia,descendant:f.Se,"descendant-or-self":f.he,following:f.Ug,"following-sibling":f.Vg,namespace:f.jb,parent:f.parent,preceding:f.dg,"preceding-sibling":f.Ic,self:f.self},Ac:e,nc:function(a){return f.Sa(a).expand().pop()},dc:function(a){return a._saxonDocumentNumber||(a._saxonDocumentNumber=i++),a},hi:function(a){return at.dc(a)._saxonDocumentNumber},aa:function(a){if(!a||!a.nodeType)return null;switch(a.nodeType){case 1:return t.QName.fromParts(a.prefix,a.namespaceURI,a.localName);case 2:if(a.prefix==="xml")return t.QName.fromParts(a.prefix,Ft.xml,a.localName);if(!a.qname)throw new F("ATTRIBUTE_NODE not local","SXJS0004");return a.qname;case 7:return t.QName.fromParts("","",a.target);case 13:return a.prefix?t.QName.fromParts("","",a.prefix):null;default:return null}},Ok:function(a,u){if(!a||!a.nodeType)return!1;switch(a.nodeType){case 1:case 2:return a.localName===u;case 7:return a.target===u;case 13:return a.prefix===u;default:return!1}},dd:function(a,u){if(!a||!a.nodeType)return!1;switch(a.nodeType){case 1:return(a.namespaceURI||"")===u;case 2:return a.prefix==="xml"?Ft.xml===u:a.namespaceURI===u;default:return u===""}},ad:function(a,u=null){let l=[];for(a=a.firstChild;a!==null;)a.nodeType!==1||u&&u!==a.tagName||l.push(a),a=a.nextSibling;return l},firstElementChild:function(a,u){for(a=a.firstChild;a!==null;){if(a.nodeType===1&&(!u||u===a.tagName))return a;a=a.nextSibling}return null},ed:function(a){let u=a.expand();if(1<u.length){let l=!0,A=!0,S=!0;if(u.forEach(O=>{at.U(O)?(S=!1,at.Va(O)||O._saxonDocumentNumber?l=!1:at.dc(O)):A=!1}),!A&&!S)throw new F("Cannot sort a sequence including both nodes and non-nodes","XPTY0018");return l||S||u.sort(at.mb),wt(u).mapOneToOne(function(O,M){return 0<M&&at.isSameNode(O,u[M-1])?null:O})}return wt(u)},mb:function(a,u){if(at.isSameNode(a,u))return 0;var l=at.Va(a),A=at.Va(u);if(l===null)return A===null?(l=at.dc,l(a)._saxonDocumentNumber-l(u)._saxonDocumentNumber):a===A?-1:at.mb(a,A);if(A===null)return u===l?1:at.mb(l,u);if(l===A){A=a.nodeType;var S=u.nodeType;if(A===2){if(S===2){for(l=l.attributes,A=0;A<l.length;A++){if(S=t.QName.fromParts(l[A].prefix,l[A].namespaceURI,l[A].localName),S.equals(at.aa(a)))return-1;if(S.equals(at.aa(u)))return 1}throw new F("Att not found in parent","SXJS0004")}return S===13?1:-1}if(A===13)return S===13?a.prefix<u.prefix?-1:1:-1;if(S===2||S===13)return 1;for(l=a,A=u;;){if(l=l.previousSibling,!l)return-1;if(l===u||(A=A.previousSibling,!A))return 1;if(A===a)return-1}}else{if(a===A)return-1;if(u===l)return 1;S=f.Uc(l).count();let O=f.Uc(A).count();return S===O?at.mb(l,A):S>O?at.mb(l,u):at.mb(a,A)}},Va:function(a){return at.me(a)?a.parent:a.parentNode},Re:function(a,u,l){a.setAttributeNS("http://www.w3.org/2000/xmlns/",u===""?"xmlns":"xmlns:"+u,l)},Dc:function(a,u=f.Sa){let l=[{prefix:"xml",uri:Ft.xml}],A={xml:!0};for(a=u(a);(u=a.next())!==null&&u.nodeType===1;){var S=at.aa(u);for(S.prefix===""&&S.uri===""&&(A[""]=!0),u=u.attributes,S=0;S<u.length;S++){var O=u[S].name;O.substring(0,5)==="xmlns"&&(O.length!==5||A[""]?O.charAt(5)===":"&&(O=O.substring(6),A[O]||(A[O]=!0,l.push({prefix:O,uri:u[S].value}))):(A[""]=!0,u[S].value!==""&&l.push({prefix:"",uri:u[S].value})))}}return l},Ii:function(a){if(a.Qh){t:{a=a.Qh;for(u in a)if(a.hasOwnProperty(u)){var u=!1;break t}u=!0}return!u}for(u=a.attributes,a=0;a<u.length;a++){let l=u[a].name;if(l.substring(0,5)==="xmlns"&&(l.length===5||l.charAt(5)===":"))return!0}return!1},dh:function(a){for(a=a.firstChild;a!==null;){if(a.nodeType===1&&at.Ii(a)||!at.dh(a))return!1;a=a.nextSibling}return!0},Pk:function(a){return(a=a.attributes.getNamedItem("xmlns"))&&a.value===""},Ei:function(a,u){for(;a&&a.nodeType===1;){if(a.hasAttribute(u))return a.getAttribute(u);a=a.parentNode}return null},Fi:function(a,u,l){for(;a&&a.nodeType===1;){if(a.hasAttributeNS(u,l))return a.getAttributeNS(u,l);a=a.parentNode}return null},getAttribute:function(a,u,l){return a.hasAttribute(u)?a.getAttribute(u):2<arguments.length?l:null},Jk:function(a,u){return parseInt(a.getAttribute(u),10)},vj:function(a,u,l){let A=t.QName;return/:/.test(u)?A.fromString(u,function(S){return S==="xml"?Ft.xml:a.lookupNamespaceURI(S)}):(l=l&&a.lookupNamespaceURI(null)||"",A.fromParts("",l,u))},me:function(a){return a instanceof vn},Ed:function(a){return a instanceof cn},Ye:function(a){return a instanceof abstractNode&&(a.nodeType===9||a.nodeType===11)},$f:function(a){return a instanceof abstractNode&&a.nodeType===1},U:function(a){return a instanceof abstractNode&&!(a.nodeType===7&&a.target==="xml")||at.me(a)||at.Ed(a)},Uk:function(a){return a instanceof abstractNode&&a.nodeType===7},isSameNode:function(a,u){return a===u||at.Ed(a)&&at.Ed(u)&&a.parentNode&&u.parentNode&&a.parentNode===u.parentNode&&a.prefix===u.prefix||at.me(a)&&at.me(u)&&a.parent&&u.parent&&a.parent===u.parent&&at.aa(a).equals(at.aa(u))},Wi:function(a,u){return a===u||a===9&&u===11||u===9&&a===11},Vk:function(a){return a instanceof abstractNode&&(a.nodeType===3||a.nodeType===4)},fd:function(a){return a.startsWith("blob:")||a.startsWith("data:")||/^(?:[A-Za-z][A-Za-z0-9+.-]+:)?\/\//i.test(a)},baseURI:function(a){function u(l){let A=at.Va(l);return l=A?at.baseURI(A):l._saxonBaseUri?l._saxonBaseUri:null,l!=null&&0<=l.indexOf("\\")&&(l=l.replaceAll("\\","/"),1<l.length&&l[1]===":"&&(l="file:///"+l)),l}if(a===null||at.Ed(a))return null;if(a.nodeType===1&&a.hasAttribute("xml:base")){let l=a.getAttribute("xml:base");return at.fd(l)?l:u(a)?J.pb(l.toString(),u(a)).toString():null}return u(a)}};return Z.tj(v),v}();function du(e,t){e.g=t}function fe(e,t){e._alphaCode=t.replace(/^[01?*+]/,"")}function Qn(e){return/^N/.test(e.V().p)}function gn(e){return e instanceof go}class ae{constructor(){this.g=this._alphaCode=null}ha(){return()=>!0}V(){if(!this.g)if(this._alphaCode)this.g=Le(this._alphaCode);else return null;return this.g}ga(){if(!this._alphaCode)if(this.g)fe(this,pn(this.g));else return null;return this._alphaCode}la(t="A"){return this.V().p.startsWith(t)}isNumeric(){return gn(this)||/^A[ODF]/.test(this.V().p.substring(0))}gd(){return/^F/.test(this.V().p)}Si(){return!0}J(){return null}B(){return null}K(){return null}toString(){return this.ga()}equals(t){return this.ga()===t.ga()}}class fo extends ae{constructor(){super(),fe(this,""),this.g={p:""}}ha(){return()=>!0}toString(){return"item()"}}var Tn;let Ri=new fo;class Kr extends ae{constructor(){super(),fe(this,"N"),this.g={p:"N"}}ha(){return t=>at.U(t)}toString(){return"node()"}}var Vn;class gu extends ae{constructor(){super(),fe(this,"N u[NT,NP,NC,NE]"),this.g={p:"N",u:[{p:"NT"},{p:"NP"},{p:"NC"},{p:"NE"}]}}ha(){return t=>at.U(t)&&[1,3,4,8,7].includes(t.nodeType)}toString(){return"node()"}}var ho;function Yr(e){switch(e){case 9:return zr;case 1:return mo;case 2:return _i;case 8:return ki;case 3:case 4:return Mi;case 7:return Ui;case 13:return Li;default:throw new F("Unknown node kind "+e)}}function Zr(e){switch(e){case 1:return"NE";case 3:return"NT";case 2:return"NA";case 9:return"ND";case 8:return"NC";case 4:return"NT";case 7:return"NP";case 13:return"NN";case 0:return"N";default:throw new F("Unknown node kind "+e+" in NodeKindTest")}}class De extends ae{constructor(t){super(),this.kind=t,t=Zr(t),fe(this,t),this.g={p:t}}ha(){switch(this.kind){case 9:return t=>at.U(t)&&(t.nodeType===9||t.nodeType===11);case 3:case 4:return t=>at.U(t)&&(t.nodeType===3||t.nodeType===4);default:return t=>at.U(t)&&t.nodeType===this.kind}}toString(){switch(this.kind){case 9:return"document-node()";case 1:return"element(*)";case 2:return"attribute(*)";case 8:return"comment()";case 3:case 4:return"text()";case 7:return"processing-instruction()";case 13:return"namespace-node()";case 0:return"node()";default:throw new F("Unknown node kind "+this.kind+" in NodeKindTest")}}}var zr,mo,_i,ki,Mi,Ui,Li;class an extends De{constructor(t,i){super(t),this.name=i,t=Zr(t),fe(this,t+" n"+i.toEQName()),this.g={p:t,n:i.toEQName()}}ha(){let t=this.name;return i=>{var f;return(f=at.U(i)&&i.nodeType===this.kind)&&(f=(i=at.aa(i))&&t.equals(i)),f}}toString(){return super.toString().replace(/\(\*?\)/,"("+this.V().n+")")}}class dr extends De{constructor(t,i){super(t),this.localName=i,t=Zr(t),fe(this,t+" n*:"+i),this.g={p:t,n:"*:"+i}}ha(){return t=>at.U(t)&&t.nodeType===this.kind&&at.aa(t).local===this.localName}toString(){return super.toString().replace(/\(\*?\)/,"(*:"+this.localName+")")}}class Gr extends De{constructor(t,i){super(t),this.uri=i,t=Zr(t),fe(this,t+" nQ{"+i+"}*"),this.g={p:t,n:"Q{"+i+"}*"}}ha(){return t=>at.U(t)&&t.nodeType===this.kind&&at.aa(t).uri===this.uri}toString(){return super.toString().replace(/\(\*?\)/,"Q{"+this.uri+"}*)")}}class po extends De{constructor(t){super(9),this.j=t,fe(this,"ND e["+t.ga()+"]"),this.g={p:"ND",e:t.V()}}ha(){return t=>at.U(t)&&(t.nodeType===9||t.nodeType===11)&&this.j.ha()(t.firstChild)}toString(){return"document-node("+this.j.toString()+")"}}class Ee extends ae{constructor(t){super(),this.Oc=t,fe(this,t.code),this.g={p:t.code}}ha(){return t=>this.Oc.matches(t)}toString(){return"xs:"+this.Oc.name}}class go extends ae{constructor(){super(),fe(this,"A m[AO,AD,AF]"),this.g={p:"A",m:[{p:"AO"},{p:"AD"},{p:"AF"}]}}ha(){return t=>/^A[ODF]/.test(t.code)}toString(){return"xs:numeric"}}var An;class Wr extends ae{ga(){return"E"}V(){return{p:"E"}}ha(){return()=>!1}toString(){return"xs:error"}}var qn;class Qe extends ae{constructor(){super(),this.j=[],this.resultType=null}Fb(t){if(!(t instanceof Qe))return Ot.Xb;if(t instanceof Ao||t instanceof Fo)return Ot.Jb;if(!(t instanceof Ve||t instanceof gr||t instanceof Ar))return Ot.kc;if(this.j.length!==t.j.length)return Ot.Xb;let i=function(v,a,u){return v.map((l,A)=>u(l,a[A]))}(this.j,t.j,Ot.wh),f=Ot.wh(this.resultType,t.resultType);return i.every(v=>v===Ot.sb)&&f===Ot.sb?Ot.sb:i.every(v=>[Ot.sb,Ot.kc].includes(v)&&[Ot.sb,Ot.Jb].includes(f))?Ot.Jb:i.every(v=>[Ot.sb,Ot.Jb].includes(v)&&[Ot.sb,Ot.kc].includes(f))?Ot.kc:Ot.tg}We(){return Et.ya}}class Hr extends Qe{constructor(){super(),fe(this,"F"),this.g={p:"F"}}ha(){return t=>t instanceof Ut.XdmFunction||t instanceof qt||t instanceof It||t instanceof ee}Fb(t){return t instanceof Hr?Ot.sb:/^F/.test(t.V().p)?Ot.Jb:Ot.Xb}toString(){return"function(*)"}}var Bn;function Au(e,t){let i=[];return t.forEach(f=>{i.push(e.j[f])}),new Ve(i,e.resultType)}class Ve extends Qe{constructor(t,i){super(),Z.assert(i instanceof Vt),Z.assert(t.every(f=>f instanceof Vt)),this.j=t,this.resultType=i,fe(this,"F a["+t.map(f=>f.ga()).join(",")+"] r["+i.ga()+"]"),du(this,{p:"F",a:t.map(f=>f.V()),r:i.V()})}ha(){let t=this;return function(i){return i instanceof qt?t.j.length===1&&t.j[0].cardinality===2&&i.conforms(t.j[0].itemType.ha(),t.resultType.itemType.ha(),qi(t.resultType.cardinality)):i instanceof It?t.j.length===1&&t.j[0].cardinality===2&&t.j[0].itemType instanceof Ee&&i.conforms(()=>!0,t.resultType.itemType.ha(),qi(t.resultType.cardinality)):i instanceof Ut.XdmFunction?(i=t.Fb(i.Ve()),[Ot.sb,Ot.Jb].includes(i)):!1}}yc(){return this.j}We(){return this.resultType}toString(){return"(function("+this.j.map(t=>t.toString()).join(",")+") as "+this.resultType.toString()+")"}}class Ao extends Qe{constructor(){super(),fe(this,"FM"),this.g={p:"FM"}}yc(){return[Je(this.B())]}B(){return wr}K(){return Et.ya}ha(){return t=>t instanceof It||t instanceof ee}toString(){return"map(*)"}}var ti;class gr extends Qe{constructor(t,i){super(),Z.assert(t instanceof ae),Z.assert(i instanceof Vt),this.R=t,this.valueType=i,fe(this,"FM k["+t.ga()+"] v["+i.ga()+"]"),this.g={p:"FM",k:t.V(),v:i.V()}}ha(){return t=>t instanceof It&&t.conforms(this.R.ha(),this.valueType.itemType.ha(),qi(this.valueType.cardinality))}toString(){return"map("+this.R.toString()+","+this.valueType.toString()+")"}yc(){return[Je(this.B())]}B(){return this.R}K(){return this.valueType}We(){return this.valueType}}class Fo extends Qe{constructor(){super(),fe(this,"FA"),this.g={p:"FA"}}ha(){return t=>t instanceof qt}toString(){return"array(*)"}yc(){return[Et.tc]}J(){return Et.ya}}var ei;class Ar extends Qe{constructor(t){super(),Z.assert(t instanceof Vt),this.R=t,fe(this,"FA v["+t.ga()+"]"),this.g={p:"FA",v:t.V()}}ha(){return t=>t instanceof qt&&t.value.every(i=>this.R.matches(i))}toString(){return"array("+this.R.toString()+")"}yc(){return[Et.tc]}J(){return this.R}We(){return this.R}}class Fr extends ae{constructor(t,i){super(),this.j=t,this.R=i;var f=t.V();let v=i.V();f=Zs(f.p,v.p),fe(this,f+" u["+t.ga()+","+i.ga()+"]"),this.g={p:f,u:[t.V(),i.V()]}}ha(){let t=this.j.ha(),i=this.R.ha();return f=>t(f)||i(f)}B(){let t=this.j.B(),i=this.R.B();return new Fr(t,i)}J(){let t=this.j.J(),i=this.R.J(),f=t.cardinality;return f===i.cardinality?new Vt(new Fr(t.itemType,i.itemType),f):Et.ya}}class Fu extends ae{constructor(t,i){super(),this.j=t,this.R=i;var f=t.V();let v=i.V();f=f.p.startsWith(v.p)?f.p:v.p.startsWith(f.p)?v.p:f.p.charAt(0)===v.p.charAt(0)?f.p.charAt(0):"",fe(this,f+" i["+t.ga()+","+i.ga()+"]"),this.g={p:f,i:[t.V(),i.V()]}}ha(){let t=this.j.ha(),i=this.R.ha();return f=>t(f)&&i(f)}}class Eu extends ae{constructor(t,i){super(),this.j=t,this.R=i;var f=t.V();let v=i.V();f=f.p.startsWith(v.p)?f.p:v.p.startsWith(f.p)?v.p:f.p.charAt(0)===v.p.charAt(0)?f.p.charAt(0):"",fe(this,f+" d["+t.ga()+","+i.ga()+"]"),this.g={p:f,d:[t.V(),i.V()]}}ha(){let t=this.j.ha(),i=this.R.ha();return f=>t(f)&&!i(f)}}let Eo={};function Ie(e){var t=Eo[e];return t||(t=Le(e),t=Xe(t),Eo[e]=t)}function Xe(e){var t=e.p;if(t==="")return Tn;if(e.u)return t=Xe(e.u[0]),e.u.slice(1).reduce((i,f)=>new Fr(i,Xe(f)),t);if(e.i)return t=Xe(e.i[0]),e.i.slice(1).reduce((i,f)=>new Fu(i,Xe(f)),t);if(e.d)return new Eu(Xe(e.d[0]),Xe(e.d[1]));switch(t.charAt(0)){case"A":if(e.n==="Q{http://www.w3.org/2001/XMLSchema}numeric")return An;if(e.m){if(e=e.m,e.length===3&&e.some(i=>i.p==="AO")&&e.some(i=>i.p==="AD")&&e.some(i=>i.p==="AF"))return An;Z.ka("Unhandled atomic union type")}else return new Ee(ot.codes[t]);break;case"F":switch(t){case"FA":return e.v?new Ar(Be(e.v)):ei;case"FM":return e.k&&e.v?new gr(Xe(e.k),Be(e.v)):ti;default:return e.a?(t=e.a.map(Be),e=e.r?Be(e.r):Et.ya,new Ve(t,e)):Bn}case"N":return t==="N"?Vn:(t={ND:9,NE:1,NA:2,NT:3,NC:8,NP:7,NN:13}[t],e.n?(e=e.n,/\}\*$/.test(e)?new Gr(t,e.substring(2,e.length-2)):/^\*:/.test(e)?new dr(t,e.substring(2)):new an(t,ot.XS.QName.fromEQName(e))):e.e?(e=Xe(e.e),new po(e)):new De(t));case"E":return qn}}let wo={IDREFS:"ASNTNCR",ENTITIES:"ASNTNCE",NMTOKENS:"ASNTK"},Er={};var wr,Fn,Ji,$i,xr,Qi,xo;let Ot=function(){function e(l,A){Z.assert(l instanceof ae),Z.assert(A instanceof ae);let S=l.ga()+"<>"+A.ga(),O=u[S];return O||(l=v(l,A),u[S]=l)}function t(l,A){switch(Z.assert(l instanceof ae),Z.assert(A instanceof ae),e(l,A)){case 0:case 1:return l;case 2:return A;case 3:case 4:return l=l.V(),A=A.V(),Xe({p:Zs(l.p,A.p),u:[l,A]})}}function i(l,A){switch(Z.assert(l instanceof ae),Z.assert(A instanceof ae),e(l,A)){case 0:case 1:return A;case 2:return l;case 3:return l=l.V(),A=A.V(),Xe({p:l.p.startsWith(A.p)?l.p:A.p.startsWith(l.p)?A.p:l.p.charAt(0)===A.p.charAt(0)?l.p.charAt(0):"",i:[l,A]});case 4:return qn}}function f(l,A){return l===0&&A===0?0:l!==0&&l!==1||A!==0&&A!==1?l!==0&&l!==2||A!==0&&A!==2?l===4||A===4?4:3:2:1}function v(l,A){function S(C,n){return(C||"")===(n||"")?0:C&&!n?2:n&&!C?1:4}function O(C){return C===1?2:C===2?1:C}function M(C){return C.n||C.e||C.u||C.i||C.d}var d=l.V();let o=A.V(),E=l.ga(),T=A.ga();return d.p==="F"?l instanceof Qe&&A instanceof Qe?(Z.assert(l.Fb),l.Fb(A)):3:E===T?0:l instanceof Wr?2:A instanceof Wr?1:gn(l)?gn(A)?0:/^A[ODF]/.test(o.p)?1:o.p==="A"||o.p===""?2:4:gn(A)?O(v(A,l)):d.p===o.p?Qn(l)?d.u&&o.u?3:d.e&&o.e?S(d.e,o.e):d.n&&o.n?S(d.n,o.n):M(d)&&M(o)?4:M(d)&&!M(o)?2:M(o)&&!M(d)?1:0:l.la()?0:d.p==="FA"?(l=l.J?l.J():Et.ya,A=A.J?A.J():Et.ya,a(l,A)):d.p==="FM"?(d=e(l.B(),A.B()),A=a(l.K(),A.K()),f(d,A)):l instanceof Qe&&A instanceof Qe?(Z.assert(l.Fb),l.Fb(A)):3:d.p.startsWith(o.p)?d.u?3:2:o.p.startsWith(d.p)?d.u?3:1:4}function a(l,A){Z.assert(l instanceof Vt),Z.assert(A instanceof Vt);var S=l.cardinality,O=A.cardinality;return S=S===O?Ot.sb:(S|O)===S?Ot.Jb:(S|O)===O?Ot.kc:S|O?Ot.tg:Ot.Xb,l=e(l.itemType,A.itemType),f(S,l)}let u={};return{sb:0,Jb:1,kc:2,tg:3,Xb:4,Fb:e,Xi:function(l,A){return Z.assert(l instanceof ae),Z.assert(A instanceof ae),l=e(l,A),l===0||l===2},Rj:t,Gd:function(l){return Z.assert(0<l.length),l.slice(1).reduce((A,S)=>t(A,S),l[0])},Ji:function(l){return Z.assert(0<l.length),l.slice(1).reduce((A,S)=>i(A,S),l[0])},wh:a}}();function qe(e){return(e&4)!==0}function je(e){return(e&1)!==0}function wu(e){let t=0;return e.forEach(i=>t|=i),t===5&&(t=7),t}function Vi(e){return{0:1,1:2,"?":3,"+":6,"*":7}[e]}function xu(e,t){return(je(e)&&je(t)?1:0)+(e!==1||t!==1?2:0)+(e===1&&!qe(t)||t===1&&!qe(e)?0:4)}function yu(e){switch(e){case"1":return t=>t===1;case"0":return t=>t===0;case"?":return t=>2>t;case"+":return t=>0<t;case"*":return()=>!0}}function qi(e){switch(e){case 1:return t=>t===0;case 2:return t=>t===1;case 4:return t=>1<t;case 3:return t=>2>t;case 6:return t=>0<t;default:return()=>!0}}function Kn(e){switch(e){case 3:return"?";case 2:return"";case 7:return"*";case 6:return"+";case 4:return"+";case 1:return"0";default:return"*"}}function Nn(e,t,i){e=e.expand(),t=t.expand(),e=wt(e),t=wt(t);let f,v;for(;;){if(f=e.next(),v=t.next(),f===null)return v===null;if(v===null||!Ki(f,v,i))return!1}}function Ki(e,t,i){var f=at.Ha;if(e===t)return!0;if(at.U(e)){if(!at.U(t)||!at.Wi(e.nodeType,t.nodeType))return!1;switch(e.nodeType){case 9:case 11:return Nn(f.Ia(e),f.Ia(t));case 1:if(!at.aa(e).equals(at.aa(t)))return!1;let v=f.Ga(e).expand();if(v.length!==f.Ga(t).count())return!1;for(let a=0;a<v.length;a++){let u=v[a],l=at.aa(u),A=l.uri?l.uri:null;if(!t.hasAttributeNS(A,l.local)||t.getAttributeNS(A,l.local)!==u.value)return!1}return Nn(f.Ia(e),f.Ia(t),i);case 2:return at.aa(e).equals(at.aa(t))&&e.value===t.value;case 13:return e.prefix===t.prefix&&e.uri===t.uri;case 7:return e.target===t.target&&(i?i(e.textContent,t.textContent):e.textContent===t.textContent);case 3:case 4:case 8:return i?i(e.textContent,t.textContent):e.textContent===t.textContent;default:throw new F("Unknown node type "+e.nodeType,"SXJS0003")}}else{if(e instanceof qt){if(!(t instanceof qt&&t.value.length===e.value.length))return!1;for(f=0;f<e.value.length;f++)if(!Nn(wt(e.value[f]),wt(t.value[f]),i))return!1;return!0}if(e instanceof It)return t instanceof It?(i=e.keys(),f=t.keys(),i.length!==f.length?!1:wt(i).every(function(v){return t.containsKey(v)&&Nn(wt(e.get(v)),wt(t.get(v)))})):!1;if(e instanceof Ut.XdmFunction||t instanceof Ut.XdmFunction)throw new F("Function types, other than map(*) or array(*) cannot be tested for equality","FOTY0015");if(Bt.pc(e)&&Bt.pc(t))return!0;if(i&&e.isStringLike()&&t.isStringLike())return i(e.value,t.value);try{return e.equals(t)}catch{return!1}}}function ni(e,t,i){let f=e.next(),v=t.next();for(;;){if(f===null)return v===null?0:-1;if(v===null)return 1;if(i)if(Ki(f,v,i.equals))f=e.next(),v=t.next();else return Bt.pc(f)?-1:/^AS/.test(f.code)&&/^AS/.test(v.code)?i.compare(f.value,v.value):f.compareTo(v);else if(Ki(f,v))f=e.next(),v=t.next();else return Bt.pc(f)?-1:f.compareTo(v)}}let Bt=function(){function e(g,x){return g.equals(x)}function t(g,x){return g.compareTo(x)}function i(g){return g===null}function f(g){return(w.double.matches(g)||w.float.matches(g))&&isNaN(g.toNumber())}function v(g,x){return function(I,L){return x(I)||x(L)?x(I)?x(L):!1:g(I,L)}}function a(g,x){return function(I,L){return x(I)||x(L)?x(I)?x(L)?0:-1:1:g(I,L)}}function u(g,x){return g===null?NaN:w.numeric.matches(g)?g.toNumber():x?w.double.fromString(g.toString()).toNumber():w.double.ie(g.toString()).toNumber()}function l(g){return function(x,I){return x=u(x,g),I=u(I,g),isNaN(x)?isNaN(I)?0:-1:isNaN(I)?1:x-I}}function A(g){return function(x,I){return x=u(x,g),I=u(I,g),isNaN(x)?isNaN(I):isNaN(I)?!1:x-I===0}}function S(g,x){return function(I,L){I=I.toString(),L=L.toString();var _=g(I.toLowerCase(),L.toLowerCase());if(_===0){for(_=0;_<I.length;_++)if(I.charAt(_)!==L.charAt(_))return x===(I.charAt(_)===I.charAt(_).toLowerCase())?-1:1;return 0}return _}}function O(g){return function(x,I){return x.isStringLike()&&I.isStringLike()?g(x.value,I.value):x.equals(I)}}function M(g){return function(x,I){return x.isStringLike()&&I.isStringLike()?g(x.value,I.value):x.compareTo(I)}}function d(g,x){let I=g.split("|");if(I[0]==="DESC"){let q=d(g.slice(5),x);return{equals:q.equals,compare:function($,rt){return q.compare(rt,$)}}}let L={equals:null,compare:null},_;switch(I[0]){case"NC":return L.equals=A(!1),L.compare=l(!1),L;case"QUNC":return L.equals=A(!0),L.compare=l(!0),L;case"DblSC":return L.equals=v(e,f),L.compare=a(a(t,f),i),L;case"CCC":return L.equals=O(H().equals),L.compare=a(M(H().compare),i),L;case"TEXT":return g=I[1]||"http://www.w3.org/2005/xpath-functions/collation/codepoint",_=c(g,x),Q(_,g),L.equals=v(function(q,$){return _.equals(q.toString(),$.toString())},i),L.compare=a(function(q,$){return M(_.compare)(w.string.cast(q),w.string.cast($))},i),L;case"CAVC":case"DecSC":case"GAC":case"AtSC":case"CalVC":return{equals:v(e,i),compare:a(a(t,f),i)};case"EQC":return L.equals=v(e,i),L.compare=function(q,$){return L.equals(q,$)?0:1},L;case"CAC":return g=I[1]||"http://www.w3.org/2005/xpath-functions/collation/codepoint",_=c(g,x),Q(_,g),L.equals=function(q,$){return _.equals(q.toString(),$.toString())},L.compare=function(q,$){return _.compare(q.toString(),$.toString())},L;default:throw new F("Unknown comparer "+g,"SXJS0003")}}function o(g,x){let I=x.fixed.fa,L=null;g.comp&&(L=g.comp,L=L.replace(/^DESC\|/,""));let _=I.mc(I.ba(g,"collation"),x).next(),q=I.mc(I.ba(g,"order"),x).next(),$=I.mc(I.ba(g,"lang"),x).next(),rt=I.mc(I.ba(g,"caseOrder"),x).next();g=I.mc(I.ba(g,"dataType"),x).next(),rt=_===null&&rt!==null?rt.toString():"#default";try{$=_===null&&$!==null&&$.toString()!==""?w.language.fromString($.toString()):null}catch(st){throw new F("@lang: "+st.message,"XTDE0030")}return L==="CalVC"&&(g=null),q=q===null?"ascending":q.toString(),g=g===null?null:g.toString(),_=_===null?$===null?"http://www.w3.org/2005/xpath-functions/collation/codepoint":"http://www.w3.org/2013/collation/UCA?lang="+$.toString():_.toString(),{Ad:L,collation:_,order:q,lang:$,Ke:rt,dataType:g}}function E(g,x){return T(o(g,x),x)}function T(g,x){function I(_){return g.order==="descending"?function(q,$){return _($,q)}:_}x=c(g.collation,x),Q(x,g.collation),x=x.compare;let L=g.Ke!=="#default"?S(x,g.Ke==="lower-first"):M(x);if(g.dataType==="number")return I(l(!1));if(g.dataType==="text")return I(a(function(_,q){return L(w.string.cast(_),w.string.cast(q))},i));if(g.Ad){if(x=g.Ad,x==="DblSC")return I(a(a(t,f),i));if(x==="CalVC"||x==="DecSC")return I(a(t,i));if(x==="CCC")return I(a(L,i))}return I(L)}function C(g,x){switch(g){case"=":case"eq":return x===0;case"<":case"lt":return 0>x;case">":case"gt":return 0<x;case">=":case"ge":return 0<=x;case"<=":case"le":return 0>=x;case"!=":case"ne":return x!==0;default:throw new F("Unknown operator "+g,"SXJS0003")}}function n(g,x){return g.map(function(I){var L=x.fixed.fa;return I=L.ba(I,"dataType"),L=I===null?null:L.evaluate(I,x).next(),L==="number"?function(_){return _===null?null:w.double.ie(_.toString())}:L==="text"?function(_){return _===null?null:w.string.cast(_)}:function(_){return _}})}function r(g,x){return g.substring(0,x.length)===x}function h(g,x){return g.substring(g.length-x.length)===x}function m(g,x){return x&&(x=x.next())?x.toString():g.collation||ut.Vf(g,"defaultCollation")}function c(g,x){if(x=g?r(g,"http://www.w3.org/2013/collation/UCA")&&36<g.length?P(g,g.substring(37),x):r(g,"http://saxon.sf.net/collation")&&29<g.length?P(g,g.substring(30),x):x.fixed.options.uc[g]:H(),!x)throw new F("Unrecognized collation "+g,"FOCH0002");return x}function P(g,x){if(x==="")x=H();else if(x==="strength=secondary"||x==="strength=2")x=B();else{let I={};if(x.split(";").forEach(function(_){_=_.split("="),I[_[0]]=_[1]}),x={},I.fallback==="no")throw new F("Unsupported collation "+g,"FOCH0002");if(I.strength&&(I.strength==="primary"||I.strength==="1"?x.sensitivity="base":I.strength==="secondary"||I.strength==="2"?x.sensitivity="accent":I.strength==="tertiary"||I.strength==="3"?x.sensitivity="variant":(I.strength==="quaternary"||I.strength==="4"||I.strength==="identical"||I.strength==="5")&&(x.sensitivity="variant",x.ignorePunctuation=!1)),I.caseFirst){let _=I.caseFirst;["upper","lower","false"].includes(_)||(_="false"),x.caseFirst=_}I.numeric==="yes"&&(x.numeric=!0),I.alternate==="blanked"&&(x.ignorePunctuation=!0);let L=new Intl.Collator(I.lang,x);x={equals:function(_,q){return L.compare(_,q)===0},compare:function(_,q){return L.compare(_,q)},startsWith:function(_,q){return _.length<q.length?!1:L.compare(_.substring(0,q.length),q)===0},endsWith:function(_,q){return _.length<q.length?!1:L.compare(_.substring(_.length-q.length),q)===0},indexOf:function(_,q){if(_.length<q.length)return-1;for(let $=0;$<=_.length-q.length;$++)if(L.compare(_.substring($,$+q.length),q)===0)return $;return-1},contains:function(_,q){if(_.length<q.length)return!1;for(let $=0;$<=_.length-q.length;$++)if(L.compare(_.substring($,$+q.length),q)===0)return!0;return!1},collationKey:function(_){return _}}}if(!x)throw new F("Unrecognized collation "+g,"FOCH0002");return x}function Q(g,x){if(!g.hasOwnProperty("compare")||!g.hasOwnProperty("equals"))throw new F("Collation "+x+" cannot be used for sorting","XTDE1035")}function H(){return{equals:function(g,x){return g===x},compare:function(g,x){return Ct.ce(g,x)},contains:function(g,x){return g.indexOf(x)!==-1},startsWith:function(g,x){return r(g,x)},endsWith:function(g,x){return h(g,x)},indexOf:function(g,x){return g.indexOf(x)},collationKey:function(g){return g}}}function B(){function g(x){return x?(x+"").toUpperCase():""}return{equals:function(x,I){return g(x)===g(I)},compare:function(x,I){return Ct.ce(g(x),g(I))},contains:function(x,I){return g(x).indexOf(g(I))!==-1},startsWith:function(x,I){return r(g(x),g(I))},endsWith:function(x,I){return h(g(x),g(I))},indexOf:function(x,I){return g(x).indexOf(g(I))},collationKey:function(x){return g(x)}}}function y(g){return{equals:function(x,I){return g(x)===g(I)},compare:function(x,I){return Ct.ce(g(x),g(I))},contains:function(x,I){return g(x).indexOf(g(I))!==-1},startsWith:function(x,I){return r(g(x),g(I))},endsWith:function(x,I){return h(g(x),g(I))},indexOf:function(x,I){return g(x).indexOf(g(I))},collationKey:function(x){return g(x)}}}let w=ot.XS;return{$d:d,Wh:E,Ag:function(){function g(x){return x.toUpperCase()}return y(function(x){return x?(x+"").replace(/[a-z]/g,g):""})},Le:B,bi:M,Gg:H,Vc:"http://www.w3.org/2005/xpath-functions/collation/codepoint",di:T,li:O,Wg:"http://www.w3.org/2010/09/qt-fots-catalog/collation/caseblind",gc:function(g,x,I,L,_,q=!1){Z.assert(L.equals&&L.compare);let $=w.numeric.matches,rt=w.untypedAtomic.matches,st=(X,U)=>rt(X)?q&&$(U)?w.numeric.Id(X):rt(U)?w.string.cast(X):$(U)?w.double.cast(X):U.code==="AQ"?ot.XS.QName.cast(X,ut.Sd(_,!1)):ot.codes[U.code].cast(X):X,ht=I==="="?L.equals:I==="!="?(X,U)=>!L.equals(X,U):(X,U)=>C(I,L.compare(X,U)),tt;for(var Y;(tt=g.next())!==null;){let X=wt(x);for(;(Y=X.next())!==null;){let U=st(tt,Y);if(Y=st(Y,tt),!($(U)&&isNaN(U.value)||$(Y)&&isNaN(Y.value))&&ht(U,Y))return Pt(!0)}}return Pt(!1)},Ai:function(g){return{equals:function(x,I){let L=w.numeric.matches;return L(x)||L(I)?w.numeric.Id(x).toNumber()===w.numeric.Id(I).toNumber():g.equals(x,I)},compare:g.compare}},Te:function(g,x,I){return c(m(g,x),I)},Sf:c,Ob:function(g,x,I,L){if(x=m(g,x),L=c(x,L)[I],!L)throw new F("Collation "+x+" has no "+I+" method","FOCH0002",g);return L},Ci:n,Xf:"http://www.w3.org/2005/xpath-functions/collation/html-ascii-case-insensitive",pc:f,Cj:o,Dj:function(g){let x=ut.Pa(g),I=ut.Ba(g,"sortKey");return L=>{let _=Lt(x(L)),q=[],$=I.map(Y=>E(Y,L)),rt=I.map(ut.Pa),st=n(I,L),ht=L.X(!1);ht.pa="sort key",ht.focus=_;let tt=0;return _.forEachItem(function(Y){let X=I.map(function(U,nt){return st[nt](rt[nt](ht).next())});q.push({item:Y,keys:X,Jd:tt++})}),q.sort(function(Y,X){for(let nt=0;nt<$.length;nt++){var U=Y.keys[nt];let W=X.keys[nt];if(U!==null||W!==null){if(U===null||W===null)return U===null?-1:1;if(U=$[nt](U,W),U!==0)return U}}return Y.Jd>X.Jd?1:Y.Jd===X.Jd?0:-1}),wt(q.map(Y=>Y.item))}},jf:C,Dh:function(g,x){switch(g){case"=":case"eq":return x;case"!=":case"ne":return!x;case"<":case"lt":case">":case"gt":case">=":case"ge":case"<=":case"le":throw new F("Operator "+g+" not allowed for unordered types","SXJS0003");default:throw new F("Unknown operator "+g,"SXJS0003")}},kf:function(g,x=null){function I(rt){return rt.isStringLike()?_(rt.matchKey()):rt.matchKey()}let L=new It,_=g.collationKey;if(!_)throw new F("Collation is unsuitable for keys and grouping","XTDE1110");let q={Kc:function(rt,st){return Nn(wt(rt),wt(st),g.equals)},hash:function(rt){return rt.map(I).join()}},$={Kc:function(rt,st){return I(rt)===I(st)},hash:function(rt){return I(rt)}};return L.options=x?q:$,L},Fj:"http://www.w3.org/2013/collation/UCA",Kh:"http://www.w3.org/xslts/collation/caseblind"}}(),bu=function(){function e(a,u,l){function A(d,o){function E(T){return T instanceof cn?"a namespace":"an attribute"}if(o)throw new F("Cannot create "+E(d)+" node on element '"+f.aa(a)+"' after creating children","XTDE0410");if(a.nodeType===11||a.nodeType===9)throw new F("Cannot add "+E(d)+" to a document node","XTDE0420")}function S(d,o){var E=o._saxonIsLocal?o._saxonIsLocal:!1;if(o instanceof qt)o.value.forEach(function(C){C.forEach(function(n){S(d,n)})});else{if(o instanceof It)throw new F("A map can't be a child of an XML node",l.fixed.options.language==="XSLT"?"XTDE0450":"XPTY0004");if(o instanceof Ut.XdmFunction)throw new F("A function can't be a child of an XML node",l.fixed.options.language==="XSLT"?"XTDE0450":"XPTY0004");if(f.U(o)?M=!1:(o=f.Ac(l.da).createTextNode((M?" ":"")+o.toString()),M=!0),d.nodeType===1||d.nodeType===11){if(o.nodeType!==10)if(f.Ed(o))if(J.Qb(d))d.appendChild(d.ownerDocument.importNode(o,!0));else if(A(o,O),o.prefix===""){if(d.namespaceURI==="")throw new F("Cannot add a default namespace to a no-namespace element","XTDE0440");if(d.hasAttributeNS("","xmlns")){if(d.getAttributeNS("","xmlns")!==o.uri)throw new F("Cannot have two different default namespaces","XTDE0430")}else J.Qb(d)||d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",o.uri)}else{E="xmlns:"+o.prefix;var T=o.uri;if(o.uri==="~"&&Ft.withPrefix[o.prefix]!==null&&(T=Ft.withPrefix[o.prefix]),d.hasAttributeNS("http://www.w3.org/2000/xmlns/",o.prefix)&&d.getAttributeNS("http://www.w3.org/2000/xmlns/",o.prefix)!==T)throw new F("Cannot have two namespaces with the same prefix '"+o.prefix+"'","XTDE0430");d.setAttributeNS("http://www.w3.org/2000/xmlns/",E,T)}else if(o.nodeType===2){if(A(o,O),o.namespaceURI!==""&&(E=o.name.split(":"),E.length!==2||d.lookupNamespaceURI(E[0])!==o.namespaceURI))if(E.length===2&&d.lookupNamespaceURI(E[0])===null)d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+E[0],o.namespaceURI);else for(T=E.length===2?E[0]:"ns";;)if(d.lookupNamespaceURI(T)===null){d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+T,o.namespaceURI),o.name=T+":"+E[E.length-1];break}else T+="_1";d.setAttributeNS(o.namespaceURI===""?null:o.namespaceURI,o.name,o.value)}else if(o.nodeType===3||o.nodeType===4)o.nodeValue&&o.nodeValue!==""&&(E=d.lastChild,!E||E.nodeType!==3&&E.nodeType!==4?d.appendChild(i(o,l,"")):E.nodeValue+=o.nodeValue),O=!0;else if(o.nodeType===9||o.nodeType===11)v.Ia(o).forEachItem(function(C){S(d,C)});else{if(O=!0,!(J.ra()&&l.da===window.document||o.nodeType!==1||J.Qb(o))){T=o.prefix||"";let C=o.lookupNamespaceURI(T)||"",n=o.namespaceURI||"";C!==n&&f.Re(o,T,n),!o.lookupNamespaceURI(null)&&d.lookupNamespaceURI(null)&&f.Re(o,"","")}E&&J.Qb(d)===J.Qb(o)||(o=i(o,l,"c")),d.appendChild(o),o._saxonIsLocal=!1}}else if(d.nodeType===9)o!==null&&(d.documentElement=o);else throw new F("Unknown parent node type "+d.nodeType,"SXJS0003")}}l||Z.ka("No context in makeComplexContent for "+Z.showValue(a));let O=!1,M=!1;u.forEachItem(function(d){S(a,d)})}function t(a,u){return u&&0<=u.indexOf("l")&&(a._saxonIsLocal=!0),a}function i(a,u,l){var A=l&&0<=l.indexOf("c");if(f.U(a)){let S,O,M=function(d,o){l&&0<=l.indexOf("m")&&(o._saxonOriginal=d)};switch(a.nodeType){case 9:case 11:return A=f.dc(u.da.createDocumentFragment()),A._saxonBaseUri=a._saxonBaseUri,A._saxonDocUri=a._saxonDocUri,e(A,v.Ia(a).mapOneToOne(function(d){return i(d,u,l)}),u),M(a,A),t(A,l);case 13:return new cn(a.prefix,a.uri);case 1:return O=f.aa(a),S=u.createElement(O.uri,O.toString()),!A||J.ra()&&J.Qb(S)&&u.da===window.document||f.Dc(a).forEach(function(d){f.Re(S,d.prefix,d.uri)}),v.Ga(a).forEachItem(function(d){S.setAttributeNS(d.namespaceURI===""?null:d.namespaceURI,d.name,d.value)}),v.Ia(a).forEachItem(function(d){d=i(d,u,l),d.nodeType===1&&f.aa(d).uri===""&&O.uri!==""&&f.Re(d,"",""),S.appendChild(d)}),S._saxonBaseUri=f.baseURI(a),M(a,S),t(S,l);case 10:return null;case 2:return new vn(f.aa(a),a.value,null);default:return S=J.ra()?window.document.importNode(a,!0):a.cloneNode(u.da,a,!0),M(a,S),t(S,l)}}else return a}let f=at,v=f.Ha;return{cj:e}}(),Re=function(){function e(t){let i=at.Ha,f={"p.any":function(){return function(){return!0}},"p.never":function(){return function(){return!1}},"p.booleanExp":function(v){let a=ut.Pa(v);return function(u,l){return l=l.X(),l.focus=me(u),ut.Bd(a(l))}},"p.genNode":function(v){let a=ut.Pa(v),u;if(v.C[0].N==="slash"){v=ut.gi(v.C[0]);let l=v.C[0];for(;["filter","subscript"].includes(l.N);)l=l.C[0];l.N==="axis"&&l.name==="child"&&(l.name="self",u=ut.cb(v))}return function(l,A){if(!at.U(l))return!1;let S=at.Ha.Sa(l),O;for(var M;;){if(O=S.next(),O==null)return!at.Ye(M)&&u?(A=A.X(!1),A.focus=me(M),A.Eb=[],u(A).some(d=>at.isSameNode(d,l))):!1;if(M=A.X(!1),M.focus=me(O),M.Eb=[],a(M).some(d=>at.isSameNode(d,l)))return!0;M=O}}},"p.genPos":function(v){let a=Ie(v.test).ha(),u=ut.Pa(v);return function(l,A){if(!a(l))return!1;let S=A.fixed.fa;A=A.X(!1);var O=i.Ia(at.Va(l)).filter(a);for(A.focus=Lt(O),A.Eb=[];(O=A.focus.next())!=null;)if(O===l&&S.Bd(u(A)))return!0;return!1}},"p.nodeSet":function(v){let a=ut.Pa(v);return function(u,l){return a(l).some(A=>A===u)}},"p.nodeTest":function(v){return Ie(v.test).ha()},"p.simPos":function(v){let a=Ie(v.test).ha(),u=parseInt(v.pos,10);return function(l){return a(l)&&i.Ic(l).filter(a).count()===u-1}},"p.venn":function(v){let a=v.C,u=e(a[0]),l=e(a[1]);switch(v=v.op,v){case"union":return function(A,S){return u(A,S)||l(A,S)};case"intersect":return function(A,S){return u(A,S)&&l(A,S)};case"except":return function(A,S){return u(A,S)&&!l(A,S)};default:throw new F("unknown op "+v,"SXJS0003")}},"p.withCurrent":function(v){let a=e(v.C[0]);return function(u,l){return l=l.X(!0),l.ma[0]=[u],a(u,l)}},"p.withPredicate":function(v){v=v.C;let a=e(v[0]),u=ut.cb(v[1]);return function(l,A){return a(l,A)?(A=A.X(!1),A.focus=me(l),A.Eb=[],ut.Bd(u(A))):!1}},"p.withUpper":function(v){let a=v.C,u=e(a[0]),l=e(a[1]),A=v.axis;return A==="parent"?v.upFirst==="true"?function(S,O){let M=at.Va(S);return M&&l(M,O)&&u(S,O)}:function(S,O){let M=at.Va(S);return M&&u(S,O)&&l(M,O)}:function(S,O){if(!u(S,O))return!1;S=at.Bg[A](S);let M;for(;(M=S.next())!==null;)if(l(M,O))return!0;return!1}}}[t.N];if(f)return f(t);throw new F("Unimplemented pattern "+t.N,"SXJS0002")}return{kd:e,matches:function(t,i,f){return f.nb.push(null),t=t(i,f),f.nb.pop(),t}}}(),yo=function(){function e(f,v,a,u){function l(h){let m=[];for(let c=h.length-1;0<=c;c--)m.push({Kd:h[c],action:h[c].C[1],pattern:Re.kd(h[c].C[0])});return m}function A(h){h._saxonAccumulators||(h._saxonAccumulators={}),h._saxonAccumulators[a]={};let m=S(T,h);m&&(r=M(m,h)),h._saxonAccumulators[a].pre=r,i.Ia(h).forEachItem(A),(m=S(C,h))&&(r=M(m,h)),h._saxonAccumulators[a].post=r}function S(h,m){for(let c=0,P=h.length;c<P;c++)if(Re.matches(h[c].pattern,m,n))return h[c];return null}function O(h){return{visibility:"PRIVATE",Oa:h,actor:h,Je:h.binds.split(" ").map(function(m){return parseInt(m,10)})}}function M(h,m){let c=u.X(!0);return c.focus=me(m),c.ma=[r],c.oa=O(v),c.pa="accumulator",d.evaluate(h.action,c).expand()}let d=u.fixed.fa,o=d.Ba(v,"pre")[0],E=d.Ba(v,"post")[0],T=l(d.Ba(o,"accRule")),C=l(d.Ba(E,"accRule")),n=u.X(!0);n.focus=me(f),n.ma=[],n.oa=O(v);let r=d.evaluate(d.ba(v,"init"),n).expand();A(f)}function t(f,v,a,u,l){let A=u.fixed.fa.fe(f,u).yb[v];if(!A)throw new F("Unknown accumulator "+v,"XTDE3340");if(u.ze&&!u.ze.some(function(S){return S===v}))throw new F("Inapplicable accumulator "+v,"XTDE3362");if(!at.U(a))throw new F("Cannot evaluate accumulator: context item is not a node","XTTE3360");if(a.nodeType===2||a.nodeType===13)throw new F("Accumulators are not available on attribute or namespace nodes","XTTE3360");if(a._saxonOriginal)return t(f,v,a._saxonOriginal,u,l);if(f=A.lg,!a._saxonAccumulators||!a._saxonAccumulators.hasOwnProperty(f)){let S=at.nc(a);if(S._saxonAccumulators||(S._saxonAccumulators={}),S._saxonAccumulators[f]||(S._saxonAccumulators[f]={}),S._saxonAccumulators[f]["under construction"])throw new F("Circular definition of accumulator "+f,"XTDE3400");S._saxonAccumulators[f]["under construction"]=1,e(S,A.Uh,f,u),delete S._saxonAccumulators[f]["under construction"]}return a._saxonAccumulators[f][l]}let i=at.Ha;return{Th:function(f,v,a,u){return t(f,v,a,u,"pre")},Sh:function(f,v,a,u){return t(f,v,a,u,"post")}}}(),ln=function(){function e(O,M,d,o,E=null){let T=A.string.fromString(M);if(O&&O.containsKey(T)){if(O=O.get(T),d==="function"){if(M=new Ve([Et.Zb],Et.Zb),O.length===1&&M.ha()(O[0]))return O[0];throw new F("Option "+T+" must be a function(xs:string) as xs:string","XPTY0004")}if(O.length===1&&ot.type[d].matches(O[0])){if(E&&0>E.indexOf(O[0].value))throw new F("Invalid value "+T+"="+O[0],"FOJS0005");return O[0].value}throw new F("Invalid option: "+M+": must be "+d,"XPTY0004")}return o}function t(O,M){function d(c){throw new F(c,"FOJS0001")}function o(){return m=E()}function E(){for(m="";;){if(h>=O.length)return["eof"];var c=O.charAt(h++);if(!/[ \n\r\t]/.test(c))break}switch(c){case"[":case"{":case"]":case"}":case":":case",":return[c];case'"':for(c=!1;;){let P=O.charAt(h++);if(P!=='"'||c)m+=P,c=P==="\\"&&!c;else return["string",m];h>=O.length&&d("Unclosed quotes in string literal")}case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(m+=c;h<O.length;)if(c=O.charAt(h++),/[0-9\-+.eE]/.test(c))m+=c;else{h--;break}return["number",/^-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?[0-9]+)?$/.test(m)?m:d("Invalid JSON number "+m)];case"t":case"f":case"n":for(m+=c;c=O.charAt(h),"a"<=c&&"z">=c;)if(m+=c,++h>=O.length)break;if(["true","false","null"].includes(m))return[m];d("Unknown constant "+m);break;default:return d("Unexpected character '"+c+"' ("+Ct.La(c)+") at position "+h),-1}}function T(c){m[0]!==c&&d("Expected "+c+", found "+m[0])}function C(c){return m[0]===c?(o(),!0):!1}function n(c){return m[0]===c?(o(),!0):m[0]===","?(o(),!1):d("Expected ',' or '"+c+"', found '"+m[0]+"'")}function r(){switch(m[0]){case"[":if(o(),M.Bh(),!C("]"))do r();while(!n("]"));M.Qg();break;case"{":if(o(),M.Ch(),!C("}"))do T("string"),M.Mg(m[1]),o(),T(":"),o(),r();while(!n("}"));M.Rg();break;case"string":M.Pg(m[1]),o();break;case"number":M.Og(m[1]),o();break;case"true":case"false":M.Lg(m[0]),o();break;case"null":M.Ng(),o();break;default:d("Unexpected token "+m[0])}}O=O.replace(/^[\uFEFF]/,"");let h=0,m=null;return m=o(),r(),T("eof"),M.result()}function i(O){try{return JSON.parse('"'+O+'"')}catch(M){throw new F(M.toString(),"FOJS0001")}}function f(O,M){let d=M.ub,o=M.yd,E;return E=o?T=>o.evaluate([[ot.XS.string.fromString(v(T))]],d).next().toString():()=>"\uFFFD",O=O.replace(/[\x00-\x08\x0B\x0C\x0E-\x0F\x80-\x9F\uFFFF]/g,E),O=O.replace(/[\uD800-\uDFFF]+/g,T=>{let C="";for(let n=0;n<T.length;n++){let r=T.charAt(n);C+=n%2===1=="\uDC00">r||n===T.length-1&&"\uDC00">r?E(r):r}return C})}function v(O){for(O=O.charCodeAt(0).toString(16);4>O.length;)O="0"+O;return"\\u"+O.toUpperCase()}function a(O,M){if(this.g=[],this.J=[],this.ub=M,e(O,"liberal","boolean",!1),this.yd=e(O,"fallback","function",null),this.B=e(O,"escape","boolean",!1),this.K=e(O,"duplicates","string","use-first",["reject","use-first","use-last"]),this.B&&this.yd)throw new F("parse-json: cannot use fallback with escape:true()","FOJS0005")}function u(O,M){if(this.g=[],this.K=[],this.J=[],this.ub=M,e(O,"liberal","boolean",!1),e(O,"validate","boolean",!1))throw new F("json-to-xml: validate option not supported in a non-schema-aware processor","FOJS0004");if(this.yd=e(O,"fallback","function",null),this.B=e(O,"escape","boolean",!1),this.R=e(O,"duplicates","string","use-first",["reject","use-first","retain"]),this.B&&this.yd)throw new F("json-to-xml: cannot use fallback with escape:true()","FOJS0005")}let l=Ft.Ma,A=ot.XS,S=at.Ha;return a.prototype={g:[],J:[],ub:null,B:!1,yd:null,K:"use-first",R:function(O){return this.B?JSON.stringify(O).replace(/^"|"$/g,"").replace(/\\"/g,'"').replace(/[\uD800-\uDFFF]/g,v):f(O,this)},peek:function(){return this.g[this.g.length-1]},j:function(O){if(this.g.length===0)this.g.push(O);else if(this.peek()instanceof qt)this.peek().value.push(O);else{let M=this.peek(),d=A.string.fromString(this.J.pop());if(M.containsKey(d))switch(this.K){case"reject":throw new F("json-to-xml: duplicate key '"+d.toString()+"'","FOJS0003");case"use-first":return}M.inSituPut(d,O)}},Ng:function(){this.j([])},Lg:function(O){this.j([A.boolean.fromString(O)])},Og:function(O){this.j([A.double.fromNumber(parseFloat(O))])},Pg:function(O){this.j([A.string.fromString(this.R(i(O)))])},Mg:function(O){this.J.push(this.R(i(O)))},Bh:function(){this.g.push(new qt([]))},Qg:function(){this.j([this.g.pop()])},Ch:function(){this.g.push(new It)},Rg:function(){this.j([this.g.pop()])},result:function(){return this.peek()[0]!==void 0?this.peek()[0]:null}},u.prototype={g:[],K:[{}],J:[],ub:null,yd:null,B:!1,R:"use-first",$:function(O){return this.B?JSON.stringify(O).replace(/^"|"$/g,"").replace(/\\"/g,'"').replace(/[\uD800-\uDFFF]/g,v):f(O,this)},peek:function(){return this.g[this.g.length-1]},j:function(O){if(this.g.length===0)O.setAttribute("xmlns",l),this.g.push(O);else{let M=this.peek();if(M.tagName==="map"){let d=this.K.pop(),o=this.J[this.J.length-1];if(d in o)switch(this.R){case"reject":throw new F("parse-json: duplicate key '"+d.toString()+"'","FOJS0003");case"use-first":return}o[d]=O,O.setAttribute("key",d),this.B&&/\\/.test(d.toString())&&O.setAttribute("escaped-key","true")}M.appendChild(O)}},Ng:function(){let O=this.ub.da.createElementNS(l,"null");this.j(O)},Lg:function(O){let M=this.ub.da.createElementNS(l,"boolean");M.appendChild(this.ub.da.createTextNode(O.toString())),this.j(M)},Og:function(O){let M=this.ub.da.createElementNS(l,"number");M.appendChild(this.ub.da.createTextNode(O.toString())),this.j(M)},Pg:function(O){let M=this.ub.da.createElementNS(l,"string");if(O!==""){O=this.$(i(O));let d=this.ub.da.createTextNode(O);this.B&&/\\/.test(O)&&M.setAttribute("escaped","true"),M.appendChild(d)}this.j(M)},Mg:function(O){this.K.push(this.$(i(O)))},Bh:function(){let O=this.ub.da.createElementNS(l,"array");this.g.push(O)},Qg:function(){this.j(this.g.pop())},Ch:function(){let O=this.ub.da.createElementNS(l,"map");this.g.push(O),this.J.push({})},Rg:function(){this.J.pop(),this.j(this.g.pop())},result:function(){return this.peek()}},{od:function(O,M,d){return t(O,new a(M,d))},nj:function(O,M,d){return t(O,new u(M,d))},Jj:function(O,M){function d(c){throw new F("Invalid input to xml-to-json(): "+c,"FOJS0006")}function o(c){r.ad(c).length!==0&&d("node "+c.tagName+" must have no element children")}function E(c){S.Ia(c).filter(function(P){return(P.nodeType===3||P.nodeType===4)&&P.nodeValue&&Rt.trim(P.nodeValue)!==""}).next()&&d("node "+c.tagName+" must have no text content")}function T(c){try{return A.boolean.fromString(c).toBoolean()}catch{d("invalid boolean: '"+c+"'")}}function C(c){try{JSON.parse('"'+c+'"')}catch(P){throw new F("invalid escape sequence: "+P.toString(),"FOJS0007")}}function n(c,P=0){let Q=P===0,H=h?" ".repeat(3*P):"";if(c.nodeType===9||c.nodeType===11){var B=r.ad(c);return B.length!==1&&d("document node has "+B.length+" element children"),n(B[0],P)}if(c.nodeType===1){let y=!1;if(c.namespaceURI===l){let w=r.Va(c)!==null&&r.Va(c).localName==="map";switch(S.Ga(c).forEachItem(function(g){(0>g.name.indexOf(":")||g.namespaceURI===l)&&(g.name==="key"||g.name==="escaped-key"?g.name==="escaped-key"?(w||Q||d("@escaped-key is allowed only on children of map, or on root element"),T(g.value)&&C(c.getAttribute("key"))):w||Q||d("@key is allowed only on children of map, or on root element"):g.name==="escaped"?(c.localName!=="string"&&d("@escaped is allowed only on string"),y=T(g.value)):d("invalid attribute "+g.name))}),c.localName){case"null":return S.Ia(c).filter(function(q){return q.nodeType!==8&&q.nodeType!==7}).next()&&d("null element must have no content"),"null";case"string":if(o(c),B=c.textContent,y)m&&(B=B.replace(/^\//g,"\\/")),B=B.replace(/^"/g,'\\"').replace(/^[\b]/g,"\\b").replace(/^\f/g,"\\f").replace(/^\n/g,"\\n").replace(/^\r/g,"\\r").replace(/^\t/g,"\\t").replace(/([^\\])"/g,'$1\\"').replace(/([^\\])[\b]/g,"$1\\b").replace(/([^\\])\f/g,"$1\\f").replace(/([^\\])\n/g,"$1\\n").replace(/([^\\])\r/g,"$1\\r").replace(/([^\\])\t/g,"$1\\t").replace(/([^\\])\//g,"$1\\/").replace(/[\u0001-\u001F\u007F-\u009F]/g,v),C(B);else return m?JSON.stringify(B).replace(/\//g,"\\/"):JSON.stringify(B);return'"'+B+'"';case"number":o(c);try{B=A.double.fromString(c.textContent)}catch{d("invalid number")}return isFinite(B.toNumber())||d("NaN and INF not allowed"),B.toString();case"boolean":return o(c),T(c.textContent),A.boolean.fromString(c.textContent).toString();case"array":E(c);let g=h?`[
`:"[",x=h?H:"";return r.ad(c).forEach(function(q){g+=x+n(q,P+1),x=h?`,
${H}`:","}),g+"]";case"map":E(c);let I=h?`{
`:"{",L=h?H:"",_={};return r.ad(c).forEach(function(q){q.hasAttribute("key")||d("child element of map must have a key");let $=r.getAttribute(q,"key"),rt=$,st=r.getAttribute(q,"escaped-key"),ht=!1;st&&T(st)&&(ht=!0,rt=i($)),_[rt]&&d("duplicate key '"+$+"'"),_[rt]=!0,I+=L+(ht?'"'+$+'"':JSON.stringify($).replace(/\//g,"\\/"))+":"+n(q,P+1),L=h?`,
${H}`:","}),h?(B=0<P?" ".repeat(3*(P-1)):"",I+`
${B}}`):I+"}";default:d("unknown local name "+c.localName)}}else d("wrong namespace "+c.namespaceURI)}else r.U(c)||d("not a node"),Error.g&&Error.g(),d("wrong node kind "+c.nodeType)}let r=at,h=e(M,"indent","boolean",!1),m=e(M,"escape-solidus","boolean",!0);return n(O)}}}();function ue(e){return En(e)?null:e.focus.current}function He(e,t,i,f=null){if(En(e))throw new F("Focus for "+i+" is absent",t,f)}function Yn(e){e.Wc=null,e.Xc=null,e.vb=null}function En(e){return!e.focus||!e.focus.current}class In{constructor(){this.depth=0,this.masterDocument=this.j=this.da=this.oa=this.focus=null,this.pa=!1,this.nb=[],this.fixed={Ta:{},kb:{},ud:null,hc:[],Ka:null},this.Fc=new It,this.tunnelParams=new It,this.Wa=null,this.ab={},this.vb=this.Xc=this.Wc=this.de=this.Oe=null,this.Eb=[],this.ze=null,this.ma=[],this.qc={},this.g=null}toString(){let t="{";return this.Fc.forAllPairs(i=>t+=i.k+":("+i.v+"),"),t+="}","context: "+ue(this)+" localParams: "+t}X(t){let i=new In;return i.depth=this.depth+1,i.focus=this.focus,i.oa=this.oa,i.da=this.da,i.masterDocument=this.masterDocument,i.ab=this.ab,i.Wa=this.Wa,i.Oe=this.Oe,i.Wc=this.Wc,i.Eb=this.Eb,i.Xc=this.Xc,i.fixed=this.fixed,i.pa=this.pa,i.nb=this.nb,i.de=this.de,i.ze=this.ze,i.qc=this.qc,i.g=this,t?(i.Fc=new It,i.tunnelParams=new It,i.ma=[],i.vb=null):(i.Fc=this.Fc,i.tunnelParams=this.tunnelParams,i.ma=this.ma,i.vb=this.vb),i}createElement(t,i){let f=at.Ac(this.da),v=f.documentElement;return t===""&&v&&J.Qb(v)?i=f.createElement(i):t==="http://www.w3.org/1999/xhtml"&&v&&J.Qb(v)?(t=i.indexOf(":"),i=f.createElement(t===-1?i:i.substring(t+1))):i=f.createElementNS(t,i),i}getStackTrace(){let t="";En(this)||(t="    Processing "+Z.showValue(this.focus.current)+`
`);try{let i=this.oa.actor,f;i.N==="mode"?(f="template rule",i=this.Wa.action):f=i.N+" "+i.name,t+="    at "+f+" in "+ut.Vf(i,"module")+"#"+ut.Vf(i,"line")}catch{t=""}return this.g&&(t+=`
`+this.g.getStackTrace()),t}}let Gt=function(){function e(o){if(o){var E=o.PUSH;if(!E)if(E=d[o.N])o.PUSH=E=E(o);else{let T=ut.cb(o);o.PUSH=E=function(C,n){T(C).forEachItem(r=>n.append(r))}}return E}}function t(o){let E=o.N;return o.parentNode&&(E=t(o.parentNode)+"/"+E),E}function i(o){if(o.C){let E=o.C.map(e);return function(T,C){E.forEach(n=>n(T,C))}}return()=>{}}function f(o,E,T,C,n,r){if(at.U(o))switch(o.nodeType){case 9:case 11:T.lb=at.baseURI(o),a(o,T,n,r);break;case 1:if(o.hasAttribute("xml:base")){let h=o.getAttribute("xml:base");T.lb=at.fd(h)?h:J.pb(h.toString(),ut.Ea(C,E)).toString()}else T.lb=at.baseURI(o);a(o,T,n,r);break;case 3:case 4:T.text(o.nodeValue);break;case 7:T.sa(o.target,o.data);break;case 8:T.ta(o.textContent);break;default:T.append(o)}else T.append(o)}function v(o,E,T){switch(o.nodeType){case 9:case 11:for(E.Da(T?{BASE_URI:T}:{}),o=o.childNodes,T=0;T<o.length;++T)v(o[T],E,null);E.wa();break;case 1:let C={};at.Ha.jb(o).forEachItem(function(r){r.prefix!=="xml"&&(C[r.prefix]=r.uri)});let n=new Xn;for(at.Ha.Ga(o).forEachItem(function(r){n.set(r.qname,{value:r.value,fb:0})}),E.ja(at.aa(o),n,C,{}),o=o.childNodes,T=0;T<o.length;++T)v(o[T],E,null);E.endElement();break;case 3:case 4:E.text(o.nodeValue,0);break;case 7:E.sa(o.target,o.data,0);break;case 8:E.ta(o.textContent,0)}}function a(o,E,T,C=!1){switch(o.nodeType){case 9:case 11:C&&(E.Hc=o),E.Da(),o=o.childNodes;for(var n=0;n<o.length;++n)a(o[n],E,T,C);E.wa();break;case 1:for(C&&(E.Hc=o),E.ja(at.aa(o)),at.Ha.Ga(o).forEachItem(function(r){let h=at.aa(r);E.Ga(h,r.value)}),T&&at.Ha.jb(o).forEachItem(function(r){E.jb(r.prefix,r.uri)}),o=o.childNodes,n=0;n<o.length;++n)a(o[n],E,T,C);E.endElement();break;case 3:case 4:C&&(E.Hc=o),E.text(o.nodeValue);break;case 7:C&&(E.Hc=o),E.sa(o.target,o.data);break;case 8:C&&(E.Hc=o),E.ta(o.textContent)}}function u(o){return(o=o.next())?o.toString():""}function l(o,E,T,C,n){if(E=T&&0<=T.indexOf("c"),at.U(o))switch(o.nodeType){case 9:case 11:n.lb=at.baseURI(o),n.Da(),C(),n.wa();break;case 1:T=at.aa(o),n.lb=at.baseURI(o),n.ja(T),E&&at.Dc(o).forEach(function(r){n.jb(r.prefix,r.uri)}),C(),n.Hc=null,n.endElement();break;case 2:C=at.aa(o),n.Ga(C,o.value);break;case 3:case 4:n.text(o.textContent);break;case 8:n.ta(o.textContent);break;case 7:n.sa(o.target,o.data);break;case 13:n.jb(o.prefix,o.uri);break;default:throw new F("Unknown node kind "+o.nodeType,"SXJS0003")}else n.append(o)}function A(o,E,T,C,n){let r=ot.XS.string.fromString;if(T=Rt.ng(T),E=Rt.ue(E,T+"g",o),!C&&E.test(""))throw new F("Regular expression matches zero-length string","FORX0003");C=[];let h=0,m=0;for(;(T=E.exec(o))!==null;)if((T.index>h||T.index===h&&n)&&C.push({Gc:!1,string:r(o.substring(h,T.index))}),C.push({Gc:!0,groups:T,string:r(T[0])}),h=E.lastIndex,T[0].length===0&&E.lastIndex++,m++>10*o.length)throw new F("analyze-string looping???","SXJS0004");return o.length>h&&C.push({Gc:!1,string:r(o.substring(h,o.length))}),C}function S(o){let E=o.N==="compAtt",T=ut.cb(ut.ba(o,"name")),C=ut.cb(ut.ba(o,"namespace"));return n=>{function r(){throw new F((E?"Attribute":"Element")+" name '"+h+"' is not a lexical QName",E?"XTDE0850":"XTDE0820",o)}let h=Rt.trim(T(n).next().toString());if(C){if(n=(n=C(n).next())?n.value:"",!ut.Hj(n))throw new F((E?"Attribute":"Element")+" namespace '"+n+"' is invalid",E?"XTDE0865":"XTDE0835",o);var m=ot.XS.QName;if(n===""&&h.includes(":"))m=m.fromParts("","",h.replace(/^.*:/,""));else if(h.includes(":")){let c=h.split(":");c[0]!==""&&c[1]!==""||r(),m=m.fromParts(c[0],n,c[1])}else m=n===""?m.fromParts("","",h):m.fromParts(E?"ns0":"",n,h)}else{if(E&&h==="xmlns")throw new F("Attribute must not be named xmlns","XTDE0855",o);try{m=ut.jg(o,h,!E)}catch(c){if(c instanceof F){if(c.code==="XTDE0290")throw new F((E?"Attribute":"Element")+" name '"+h+"' has an unbound prefix",E?"XTDE0860":"XTDE0830",o);c.code==="FORG0001"&&r()}throw c}}if(m.uri==="http://www.w3.org/2000/xmlns/")throw new F("Disallowed namespace "+m.uri,E?"XTDE0865":"XTDE0835",o);return m}}class O{constructor(){}Da(){}wa(){}ja(){}Ga(){}jb(){}endElement(){}text(){}ta(){}sa(){}append(){}close(){}}class M extends O{constructor(E){super(),this.j=E,this.$=[],this.tb=[],this.lb=null,this.g=0,this.Za=this.J=null,this.K={},this.Aa=null,this.B=this.na=!1,this.ua={},this.Hc=null}qa(E,T,C){var n=this.K[E];if(n&&n!==T)if(C==="ns"){if(this.ua[E])throw new F("Two conflicting bindings for prefix '"+E+"'","XTDE0430");if(this.J.prefix===E){for(n=E+"_9";this.K[n];)n+="9";this.J=ot.XS.QName.fromParts(n,this.J.uri,this.J.local),this.K[n]=this.J.uri}this.K[E]=T}else return E===""&&(E="NULL"),this.qa(E+"0",T,C);if(C==="ns"&&(this.ua[E]=T),C==="elem"&&T===""){for(n=this.$.length-1;0<=n;n--)if(this.$[n][0]===""){this.K[""]="";break}}if(E!==""||T!==""){n=!1;for(let r=this.$.length-1;0<=r;r--){let h=this.$[r];if(h[0]===E){h[1]===T&&(n=!0);break}}if(!n){if(this.ua[E]&&this.ua[E]!==T)return this.qa(E+"0",T,C);this.K[E]=T}}return E}Da(){this.g===0&&(this.j.Da({BASE_URI:this.lb,ORIGINAL_NODE:this.Hc}),this.$=[]),this.R(),this.g++,this.B=this.na=!1}wa(){this.g--,this.g===0&&this.j.wa(),this.B=!1}ja(E){this.R(),this.g++,this.na=!0,this.J=E,this.Za=new Xn,this.K={},this.ua={},this.qa(E.prefix,E.uri,"elem"),this.Aa=this.Hc,this.B=!1}Ga(E,T){if(this.g===0)this.j.append(new vn(E,T,null));else{if(!this.na)throw this.J?new F("Cannot write attribute ("+E.toEQName()+"="+T+") after writing child nodes (level="+this.g+", start tag = "+this.J+")","XTDE0410"):new F("Cannot attach an attribute ("+E.toEQName()+"="+T+") to a document node","XTDE0420");if(E.uri!==""){["","xmlns"].includes(E.prefix)&&(E=E.withPrefix("ns_"));let C=this.qa(E.prefix,E.uri,"att");C!==E.prefix&&(E=E.withPrefix(C))}this.Za.set(E,{value:T,fb:0})}}jb(E,T){if(this.g===0)this.j.append(new cn(E,T));else{if(!this.na)throw new F("Cannot write namespace after writing child nodes","XTDE0410");if(E===""&&this.J.uri==="")throw new F("Cannot add default namespace declaration to a no-namespace element","XTDE0440");this.qa(E,T,"ns")}}endElement(){this.R(),this.j.endElement(),this.g--;let E=this.tb.pop();for(;0<E--;)this.$.pop();this.B=!1}text(E,T){(0<E.length||this.g===0)&&(this.R(),this.j.text(E,T||{})),this.B=!1}ta(E){this.R(),this.j.ta(E),this.B=!1}sa(E,T){this.R(),this.j.sa(E,T),this.B=!1}append(E){if(at.U(E)){if(this.g===0)this.j.append(E,{});else switch(E.nodeType){case 2:this.Ga(at.aa(E),E.value);break;case 13:this.jb(E.prefix,E.uri);break;case 9:case 11:this.g===0?v(E,this.j,this.lb):at.Ha.Ia(E).forEachItem(T=>this.append(T));break;default:this.R(),a(E,this,!0,!1)}this.B=!1}else if(this.g===0)this.j.append(E,{}),this.B=!1;else if(ot.la(E))this.R(),this.text((this.B?" ":"")+E.toString(),{}),this.B=!0;else if(ut.isArray(E)){E=E.value;for(let T=0;T<E.length;T++){let C=E[T];for(let n=0;n<C.length;n++)this.append(C[n])}}else{if(ut.gd(E))throw new F("Cannot attach a "+(ut.isMap(E)?"map":"function")+" to an XDM tree","XTDE0450");Z.ka("Cannot add item to tree "+Z.showValue(E))}}close(){this.j.close()}R(){if(this.na){var E={};this.lb&&(E.BASE_URI=this.lb),this.Aa&&(E.ORIGINAL_NODE=this.Aa,this.Aa=null),this.j.ja(this.J,this.Za,this.K,E),this.na=!1,E=0;for(let[T,C]of Object.entries(this.K))this.$.push([T,C]),E++;this.tb.push(E)}}}let d={analyzeString:function(o){let E=ut.cb(ut.ba(o,"select")),T=ut.cb(ut.ba(o,"regex")),C=ut.cb(ut.ba(o,"flags")),n=e(ut.ba(o,"matching")),r=e(ut.ba(o,"nonMatching"));return(h,m)=>{try{let c=E(h).next();if(c===null)return bt;c=c.toString();let P=T(h).next().toString(),Q=C(h).next().toString(),H=A(c,P,Q,!0,!1),B=h.X(!1),y=H.map(w=>w.string);B.focus=Lt(wt(y)),B.focus.forEachItem(()=>{let w=H[B.focus.position-1];w.Gc?n&&(B.Eb=w.groups,n(B,m)):r&&(B.Eb=[],r(B,m))})}catch(c){throw c instanceof F&&c.code==="FORX0002"?new F(c.message,"XTDE1140"):c instanceof F&&c.code==="FORX0001"?new F(c.message,"XTDE1145"):c}}},applyImports:function(o){return function(E,T){let C=E.ab.mode;if(!C)throw new F("applyImports: no current mode","XTDE0560",o);He(E,"XTDE0560","xsl:apply-imports",o);let n=E.X(!0);return n.oa=E.ab,ut.Ie(o,E,n),n.focus=E.focus,C.Xh(n,T)}},applyT:function(o){let E=ut.Pa(o),T=ut.cb(ut.ba(o,"separator"));return function(C,n){let r,h=C.X(!0);if(ut.ib(o,"c"))r=C.ab.mode,["function","globalVariable","globalParam"].includes(C.oa.actor.N)&&(r=ut.fe(o,C).Fh),h.oa=C.ab;else{var m=ut.Wf(o,C,"mode");if(r=m.mode,r.mh)throw new F("Mode "+r.Fe.name+" only handles typed nodes","XTTE3100",o);h.oa=m}ut.Ie(o,C,h),m=T?T(C).next():null,h.focus=Lt(E(C)),h.focus.Eb=C.focus?C.focus.Eb:null,r.zb(h,n,m)}},att:function(o){let E=o.name,T=E.split(":"),C;C=o.nsuri?T.length===2?ot.XS.QName.fromParts(T[0],o.nsuri,T[1]):ot.XS.QName.fromParts("",o.nsuri,E):ot.XS.QName.fromString(E,ut.Sd(o,!1));let n=ut.Pa(o);return function(r,h){r=u(n(r)),h.Ga(C,r)}},break:function(o){let E=i(o);return function(T,C){E(T,C),T.focus.position=-999}},callT:function(o){return function(E,T){let C=ut.Wf(o,E,"template"),n=E.X(!0);n.vb=null,n.oa=C,ut.Ff(C.actor,n),ut.Ie(o,E,n),E=C.actor,E.C&&i(E)(n,T)}},choose:function(o){o=o.C;let E=[],T=[];for(let C=0;C<o.length;C+=2)E.push(ut.cb(o[C])),T.push(e(o[C+1]));return function(C,n){for(let r=0;r<E.length;r++)if(ut.Bd(E[r](C))){T[r](C,n);break}}},comment:function(o){let E=ut.Pa(o);return function(T,C){T=u(E(T)).replace(/--/g,"- -").replace(/-$/,"- "),C.ta(T)}},compAtt:function(o){let E=ut.cb(ut.ba(o,"select")),T=S(o);return function(C,n){let r=T(C);C=u(E(C)),n.Ga(r,C)}},compElem:function(o){let E=e(ut.ba(o,"content")),T=S(o);return function(C,n){o.baseUri&&(n.lb=o.baseUri);let r=T(C);n.ja(r),E(C,n),n.endElement()}},copy:function(o){let E=i(o);return function(T,C){He(T,"XTTE0945","xsl:copy",o),l(ue(T),T,o.flags,()=>E(T,C),C)}},copyOf:function(o){let E=ut.ib(o,"c"),T=ut.ib(o,"m"),C=ut.Pa(o);return i(o),function(n,r){C(n).forEachItem(h=>f(h,n,r,o,E,T))}},doc:function(o){let E=i(o);return function(T,C){C.lb=ut.Ea(o,T),C.Da(),E(T,C),C.wa()}},elem:function(o){let E=o.name,T=E.split(":"),C=i(o),n;return n=typeof o.nsuri<"u"?T.length===2?ot.XS.QName.fromParts(T[0],o.nsuri,T[1]):ot.XS.QName.fromParts("",o.nsuri,E):ot.XS.QName.fromString(E,ut.Sd(o,!0)),function(r,h){if(o.baseUri&&(h.lb=o.baseUri),h.ja(n),o.namespaces){let c=o.namespaces.toString().split(" ");for(let P=0;P<c.length;P++){var m=c[P];let Q=m.indexOf("="),H=Q===-1?m:m.substring(0,Q);m=Q===-1?"":m.substring(Q+1),H==="#"&&(H=""),H!=="xml"&&(m=m!==""?m:ut.Sd(o,!0)(H),h.jb(H,m))}}C(r,h),h.endElement()}},empty:function(){return function(){}},forEach:function(o){let E=ut.Pa(o),T=e(o.C[1]),C=ut.cb(ut.ba(o,"separator"));return function(n,r){let h=n.X(!1);if(h.focus=Lt(E(n)),h.Wa=null,C){let m=!0,c=C(n).next();h.focus.forEachItem(()=>{m?m=!1:r.text(c.value,{}),T(h,r)})}else h.focus.forEachItem(()=>T(h,r))}},forEachGroup:function(o){let E=ut.cb(ut.ba(o,"select")),T=Gt.ji(ut.ba(o,"content"));return(C,n)=>{function r(B){let y=[];return h.forEachItem(function(w){B(y,w)}),y}let h=Lt(E(C)),m=C.X(!1);m.focus=h;var c={starting:function(){let B=Re.kd(ut.ba(o,"match"));return r(function(y,w){h.position===1||Re.matches(B,w,m)?y.push({group:[w]}):y[y.length-1].group.push(w)})},ending:function(){let B=Re.kd(ut.ba(o,"match")),y=!1;return r(function(w,g){h.position===1||y?w.push({group:[g]}):w[w.length-1].group.push(g),y=Re.matches(B,g,m)})},adjacent:function(){var B=ut.ba(o,"collation");B=B?ut.evaluate(B,C).next().toString():Bt.Vc;let y=Bt.Sf(B,C),w=ut.ba(o,"key"),g=null;return r(function(x,I){let L=ut.evaluate(w,m).expand();h.position!==1&&Nn(wt(L),wt(g),y.equals)?x[x.length-1].group.push(I):(x.push({group:[I],key:L}),g=L)})},by:function(){var B=ut.ba(o,"collation");B=B?ut.evaluate(B,C).next().toString():Bt.Vc,B=Bt.Sf(B,C);let y=Bt.kf(B,!1),w=ut.ba(o,"key");return r(function(g,x){let I,L=[];ut.evaluate(w,m).forEachItem(function(_){y.containsKey(_)?(I=y.get(_),0>L.findIndex(function(q){return q===I})&&(g[I].group.push(x),L.push(I))):(I=g.length,g.push({group:[x],key:[_]}),y.inSituPut(_,I),L.push(I))})})},by_c:function(){var B=ut.ba(o,"collation");B=B?ut.evaluate(B,C).next().toString():Bt.Vc,B=Bt.Sf(B,C);let y=ut.ba(o,"key"),w=Bt.kf(B,!0);return r(function(g,x){let I,L=ut.evaluate(y,m).expand();w.containsKey(L)?(I=w.get(L),g[I].group.push(x)):(I=g.length,g.push({group:[x],key:L}),w.inSituPut(L,I))})}};c.adjacent_c=c.adjacent;var P=o.algorithm+(ut.ib(o,"c")?"_c":"");let Q;try{Q=c[P]()}catch(B){throw B instanceof F&&B.code==="FOCH0002"?new F("Unknown collation:"+B.message,"XTDE1110"):B}let H=ut.Ba(o,"sortKey");if(0<H.length){c=Lt(wt(Q));let B=C.X(!1);B.focus=c;let y=H.map(function(w){return Bt.Wh(w,C)});c.forEachItem(function(w,g){w.zh=H.map(function(x){let I=B.focus;return I.current=w.group[0],I.position=g+1,B.Wc=w.group,B.Xc=w.key,ut.Pa(x)(B).next()})}),Q.sort(function(w,g){for(let x=0;x<y.length;x++){let I=y[x](w.zh[x],g.zh[x]);if(0>I)return-1;if(0<I)return 1}return 0})}for(c=C.X(!1),c.focus=Lt(wt(Q)),P=0;c.focus.next()!==null;){let B=Q[P++],y=c.focus;y.current=B.group[0],y.position=P,c.Wc=B.group,c.Xc=B.key,T(c,n)}}},iterate:function(o){let E=(o.C[1].C||[]).map(ut.cb),T=ut.Pa(o),C=e(ut.ba(o,"action")),n=e(ut.ba(o,"on-completion"));return function(r,h){E.map(P=>P(r));var m=r.X(!1);m.focus=Lt(T(r)),m.Wa=null;let c=!1;for(;m.focus.next()!==null;)if(C(m,h),m.focus.position===-999){c=!0;break}!c&&n&&(m=r.X(!1),m.focus=null,n(m,h))}},let:function(o){let E=ut.Pa(o),T=e(o.C[1]),C=parseInt(o.slot,10);return function(n,r){let h=n.pa;n.pa="variable";let m=E(n).expand();n.pa=h,n.ma[C]=m,T(n,r)}},nextIteration:function(o){let E=ut.Ba(o,"withParam").map(T=>({select:ut.Pa(T),slot:parseInt(T.slot,10)}));return function(T){E.forEach(C=>C.value=C.select(T).expand()),E.forEach(C=>T.ma[C.slot]=C.value)}},nextMatch:function(o){return function(E,T){let C=E.ab.mode;if(!C)throw new F("next-match: no current mode","XTDE0560",o);if(!E.Wa)throw new F("next-match: no current template","XTDE0560",o);if(En(E))throw new F("next-match: no context item","XTDE0560",o);let n=E.X(!0);return n.oa=E.ab,ut.Ie(o,E,n),C.ij(n,T)}},procInst:function(o){let E=ut.Pa(o),T=ut.Kg(o);return function(C,n){let r=E(C).next().toString();if(!Rt.Db(r))throw new F("The name of a processing-instruction must be a valid NCName; supplied value: "+r.toString(),"XTDE0890",o);if(/^[Xx][Mm][Ll]$/.test(r))throw new F("The name of a processing-instruction must not be 'xml'","XTDE0890",o);C=T(C),C=u(C).replace(/\?>/g,"? >").replace(/^\s+/,""),n.sa(r,C)}},sequence:i,sourceDoc:function(o){let E=ut.cb(ut.ba(o,"href")),T=e(o.C[1]);return function(C,n){let r=C.X(!1);var h=E===null?"":E(C).next().toString();h=J.pb(h,ut.Ea(o,C)),h=Jt.xc(h,C),C=C.fixed.ye,C!==null&&(h=C(h)),r.focus=me(h),r.Wa=null,T(r,n)}},useAS:function(o){return function(E,T){let C=ut.Wf(o,E,"attributeSet"),n=C.actor;E=E.X(!0),E.pa="attribute set",E.oa=C,n.C&&i(n)(E,T)}},valueOf:function(o){let E=ut.Pa(o),T={};return ut.ib(o,"d")&&(T.DISABLE_ESCAPING=!0),function(C,n){C=u(E(C)),n.text(C,T)}}};return{Bf:A,ji:e,Ik:function(o){return new ii(o)},zc:function(o){return new M(o)},push:function(o,E,T){if(typeof T>"u")throw Z.xa(Error().stack,1,E.fixed.Ka),new F("No output for "+t(o));if(d[o.N]){var C=e(o);try{C(E,T)}catch(n){throw n instanceof F&&!n.xsltLineNr&&n.setExpr(o),n}}else{C=ut.cb(o);try{let n=C(E),r;for(;(r=n.next())!=null;)T.append(r)}catch(n){throw n instanceof F&&!n.xsltLineNr&&n.setExpr(o),n}}},rh:v,df:f,hg:l}}();class Yi{Da(){}wa(){}ja(){}endElement(){}text(){}ta(){}sa(){}append(){}close(){}}function On(e,t){return e.g=t,e}class tn extends Yi{constructor(){super(),this.g=null}Da(t={}){this.g.Da(t)}wa(){this.g.wa()}ja(t,i,f,v={}){this.g.ja(t,i,f,v)}endElement(){this.g.endElement()}text(t,i={}){this.g.text(t,i)}ta(t,i={}){this.g.ta(t,i)}sa(t,i,f={}){this.g.sa(t,i,f)}append(t,i={}){this.g.append(t,i)}close(){this.g.close()}}function ri(e,t){e.j===0?e.Gb.push(t):e.lc.appendChild(t)}class ii extends Yi{constructor(t){super(),this.$c=(this.na=t)?at.Ac(t.da):J.createDocument(),this.Gb=[],this.lc=null,this.j=0,this.J=null}Da(t={}){if(this.j++===0){let i=this.lc=this.$c.createDocumentFragment();t.BASE_URI&&(i._saxonBaseUri=t.BASE_URI),this.Gb.push(i)}else throw new F("Builder.startDoc() not at top level")}wa(){--this.j===0&&(this.lc=null)}ja(t,i,f,v={}){let a=this.$c.createElementNS(t.uri,t.toString());v.BASE_URI&&(a._saxonBaseUri=v.BASE_URI),v.ORIGINAL_NODE&&(a._saxonOriginal=v.ORIGINAL_NODE),v.CALLBACK&&v.CALLBACK(a),ri(this,a),this.lc=a,this.j++,this.J=null,i.forEach((u,l)=>{a.setAttributeNS(l.uri,l.toString(),u.value)});for(let u in f)f.hasOwnProperty(u)&&(t=f[u],u===""?a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",t):a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+u,t))}endElement(){--this.j===0?this.lc=null:this.lc=this.lc.parentNode,this.J=null}text(t){this.J?this.J.appendData(t):(t=this.$c.createTextNode(t),ri(this,t),0<this.j&&(this.J=t))}ta(t){ri(this,this.$c.createComment(t)),this.J=null}sa(t,i){ri(this,this.$c.createProcessingInstruction(t,i)),this.J=null}append(t){if(this.j!==0)throw new F("Builder.append() not at top level");this.Gb.push(t)}result(){return this.Gb}close(){super.close()}}function yr(e){if(e.done)throw new F("Cannot write to the principal output destination as it has already been closed","XTDE1490");if(e.mg)throw new F("Cannot write to the principal output destination as it has already been used by xsl:result-document","XTDE1490");e.Hh=!0}class Du extends tn{constructor(t){super(),this.done=this.mg=this.Hh=!1,this.g=t}Da(t={}){super.Da(t)}wa(){super.wa()}ja(t,i,f,v={}){yr(this),super.ja(t,i,f,v)}endElement(){super.endElement()}text(t,i={}){yr(this),super.text(t,i)}ta(t,i={}){yr(this),super.ta(t,i)}sa(t,i,f={}){yr(this),super.sa(t,i,f)}append(t,i={}){yr(this),super.append(t,i)}close(){this.done=!0,this.g&&super.close()}}function un(e){return new ii(e)}class Su{constructor(t){this.gb=t}createDocumentFragment(){return this.gb.createDocumentFragment()}createElementNS(t,i){let f=this.gb.documentElement;return t===""&&f&&J.Qb(f)?i=this.gb.createElement(i):t==="http://www.w3.org/1999/xhtml"&&f&&J.Qb(f)?(t=i.indexOf(":"),i=this.gb.createElement(t===-1?i:i.substring(t+1))):i=this.gb.createElementNS(t,i),i}createTextNode(t){return this.gb.createTextNode(t)}createComment(t){return this.gb.createComment(t)}createProcessingInstruction(t,i){return this.gb.createProcessingInstruction(t,i)}}function Zn(e,t={}){e.J||(e.j=!1,e.g.Da(t),e.J=!0,e.B=!0)}function bo(e,t){if(t!=null)if(ot.la(t))e.j&&e.text(" ",{}),e.text(t.toString(),{}),e.j=!0;else if(t instanceof qt)t.flatten(i=>bo(e,i));else{if(t instanceof Ut.XdmFunction)throw new F("Cannot add a function item to an XDM node tree","SENR0001");if(t instanceof It)throw new F("Cannot add a map to an XDM node tree","SENR0001");Gt.rh(t,e),e.j=!1}}class br extends tn{constructor(t){super(),this.g=t,this.j=this.J=this.B=!1}Da(t={}){Zn(this,t),this.B=!1}wa(){this.j=!1,this.g.wa()}ja(t,i,f,v={}){Zn(this,v),this.g.ja(t,i,f,v)}endElement(){this.g.endElement(),this.j=!1}text(t,i={}){Zn(this,i),super.text(t,i),this.j=!1}ta(t,i={}){Zn(this,i),super.ta(t,i),this.j=!1}sa(t,i,f={}){Zn(this,f),super.sa(t,i,f),this.j=!1}append(t,i={}){Zn(this,i),bo(this,t)}close(){this.B&&this.wa(),super.close()}}function Pn(e,t={}){e.J||(e.g.Da(t),e.J=!0,e.j=!0),e.B||e.g.append(e.K,{}),e.B=!1}class Cu extends tn{constructor(t,i){super(),this.g=t,this.J=this.j=!1,this.B=!0,this.K=ot.XS.string.fromString(i)}Da(t={}){Pn(this,t),this.j=!1}wa(){this.g.wa()}ja(t,i,f,v={}){Pn(this,v),this.g.ja(t,i,f,v)}endElement(){this.g.endElement()}text(t,i={}){Pn(this,i),super.text(t,i)}ta(t,i={}){Pn(this,i),super.ta(t,i)}sa(t,i,f={}){Pn(this,f),super.sa(t,i,f)}append(t,i={}){if(ut.isArray(t))t.flatten(f=>this.append(f,i));else{if(t instanceof Ut.XdmFunction)throw new F("Cannot add a function item to an XDM node tree","SENR0001");if(t instanceof It)throw new F("Cannot add a map to an XDM node tree","SENR0001");ot.la(t)?(Pn(this,i),this.g.append(t,i)):(Pn(this,i),Gt.rh(t,this))}}close(){this.j&&this.wa(),super.close()}}function Do(e,t){return e.g.findIndex(i=>i.equals(t))}class Xn{constructor(){this.g=[],this.j=[]}get(t){return t=Do(this,t),0>t?void 0:this.j[t]}set(t,i){let f=Do(this,t);0<=f?this.j[f]=i:(this.g.push(t),this.j.push(i))}forEach(t){for(let i=0;i<this.g.length;i++)t(this.j[i],this.g[i])}}let Ht=function(){function e(Y,X,U){function nt(W,G){function b(N){return D=>N[D]}let s={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&#34;","\n":"&#10;","\r":"&#13;","	":"&#9;"},p={"<":"&lt;",">":"&gt;","&":"&amp;"};return G?W.replace(/&|<|>|"|\n|\r|\t/g,b(s)):W.replace(/&|<|>/g,b(p))}if(U){U="",Y=Y.split("\0");for(let W=0;W<Y.length;W++)U+=W%2===1?Y[W]:nt(Y[W],X);return U}return nt(Y,X)}function t(Y,X){return X.toUpperCase()==="ISO-8859-1"?255>=Y:X.toUpperCase()==="US-ASCII"?127>=Y:!0}function i(Y,X){return function(U){for(var nt=!0,W=0;W<U.length;W++){var G=U.charCodeAt(W);if(G>=Y.min&&G<=Y.max){nt=!1;break}}if(nt)return U;for(nt="",W=!1,G=0;G<U.length;G++){let b=U.charAt(G),s=U.charCodeAt(G),p=55296<=s&&56320>=s;p&&(s=U.codePointAt(G)),Y.va[s]?(X&&!W&&(nt+="\0",W=!0),nt+=Y.va[s],p&&G++):(X&&W&&(nt+="\0",W=!1),nt+=b)}return nt}}function f(Y){return Y.uri===""||Y.uri==="http://www.w3.org/1999/xhtml"}function v(Y){return["http://www.w3.org/1999/xhtml","http://www.w3.org/2000/svg","http://www.w3.org/1998/Math/MathML"].includes(Y)}function a(Y,X){return(X={action:["form"],archive:["object"],background:["body"],cite:["blockquote","del","ins","q"],classid:["object"],codebase:["applet","object"],data:["object"],datasrc:"button div input object select span table textarea".split(" "),for:["script"],formaction:["button","input"],href:["a","area","base","link"],icon:["command"],longdesc:["frame","iframe","img"],manifest:["html"],name:["a"],poster:["video"],profile:["head"],src:"audio embed frame iframe img input script source track video".split(" "),usemap:["img","input","object"]}[X.local])&&X.includes(Y.local)}function u(Y,X,U=null){switch(Y.method){case"xml":if(X=new P(Y,X),Y.version&&Y.version!=="1.0")throw new F("Serializer does not support the requested XML version: "+Y.version,"SESU0013");if(n(Y),Y["undeclare-prefixes"])throw new F("Cannot undeclare prefixes with XML 1.0 serializer","SEPM0010");return Y.indent&&(X=d(Y,X)),X=o(Y,X),X=E(Y,X),X=T(Y,X),M(Y,X);case"html":return r(Y,X);case"text":return n(Y),X=new ht(Y,X),X=o(Y,X),X=E(Y,X),M(Y,X);case"xhtml":return r(Y,X);case"json":return n(Y),Y.indent?new $(Y,X,U):new q(Y,X,U);case"adaptive":return new rt(Y,X,U);default:return new st(Y,X)}}function l(Y,X,U){function nt(N,D){if(D=D.trim(),["yes","true","1"].includes(D))return!0;if(["no","false","0"].includes(D))return!1;throw new F("Value of "+N+" must be yes(=true, 1) or no(=false, 0)","SEPM0016")}function W(N){return function(D,k){return k=k.trim(),k.split(/\s+/).map(function(j){return/^Q\{/.test(j)||/:/.test(j)||(j="Q{}"+j),/^Q\{/.test(j)?j:m.QName.fromString(j,N).toEQName()})}}function G(N){return function(D,k){if(k=k.trim(),N.includes(k))return k;throw new F("Value of "+D+"("+k+"): must be one of "+N.join("|"),"SEPM0016")}}function b(N){return function(D,k){if(N.test(k))return k;throw new F("Invalid value for "+D+": must match the pattern "+N,"SEPM0016")}}function s(N,D){return D}function p(N,D){if(D=D.trim(),/[0-9]+/.test(D))return 1*D;throw new F("Value of "+N+" must be an integer (Actual value is "+Z.showValue(D)+")","SEPM0016")}if(U={"allow-duplicate-names":nt,"build-tree":nt,"byte-order-mark":nt,"cdata-section-elements":W(U),"doctype-public":b(/[\sa-zA-Z0-9\-'()+,.:=?;!*#@$_%\/]*/),"doctype-system":b(/[^']*|[^"]*/),encoding:b(/[\x21-\x7e]+/),"escape-uri-attributes":nt,"html-version":function(N,D){if(/[0-9]+(\.[0-9]+)?/.test(D))return 1*D;throw new F("Value of "+N+" must be a decimal number","SEPM0016")},"include-content-type":nt,indent:nt,"item-separator":s,"json-node-output-method":G(["xml","xhtml","html","text"]),"media-type":s,method:function(N,D){return function(k,j){if(j=j.trim(),!/^Q\{/.test(j)&&/:/.test(j)&&(j=m.QName.fromString(j,D).toEQName()),N.includes(j))return j;throw new F("Value of "+k+"("+j+"): must be one of "+N.join("|"),"SEPM0016")}}("xml xhtml html text json adaptive Q{http://saxonica.com/ns/interactiveXSLT}append-content Q{http://saxonica.com/ns/interactiveXSLT}insert-before Q{http://saxonica.com/ns/interactiveXSLT}insert-after Q{http://saxonica.com/ns/interactiveXSLT}replace-content Q{http://saxonica.com/ns/interactiveXSLT}replace-element".split(" "),U),"normalization-form":G("NFC NFD NFKC NFKD fully-normalized none".split(" ")),"omit-xml-declaration":nt,standalone:function(N,D){return D.trim()==="omit"?null:nt(N,D)},"suppress-indentation":W(U),"undeclare-prefixes":nt,"use-character-maps":W(U),version:s,"Q{http://saxon.sf.net/}indent-spaces":p,"Q{http://saxon.sf.net/}line-length":p,"Q{http://saxon.sf.net/}stylesheet-version":p},/^\{/.test(Y)&&(Y="Q"+Y),typeof X!="string")throw new F("Value of "+Y+" must be supplied as a string","SEPM0016");if(U[Y])return U[Y](Y,X);if(!/^Q\{/.test(Y))throw new F("Unknown serialization parameter "+Y,"SEPM0017")}function A(Y,X,U){function nt(s,p,N){if(!Array.isArray(p))throw new F("Value of "+s+" must be an array","SEPM0016");return(N||[]).concat(p)}function W(s,p){if(typeof p!="boolean")throw new F("Value of "+s+" must be boolean","SEPM0016");return p}function G(s,p){if(typeof p!="number")throw new F("Value of "+s+" must be an integer (actual value is "+Z.showValue(p)+")","SEPM0016");return p}let b={"allow-duplicate-names":W,"build-tree":W,"byte-order-mark":W,"cdata-section-elements":nt,"escape-uri-attributes":W,"html-version":function(s,p){if(typeof p!="number")throw new F("Value of "+s+" must be a decimal number","SEPM0016");return p},"include-content-type":W,indent:W,"omit-xml-declaration":W,standalone:function(s,p){return p===null?null:W(s,p)},"suppress-indentation":nt,"undeclare-prefixes":W,"use-character-maps":function(s,p,N){if(N&&Array.isArray(N)&&Z.ka("Problem with existing character map supplied to overrideParam"),typeof p!="object")throw new F("Value of "+s+" must be an object","SEPM0016");if(p.va===void 0)throw new F("Value of "+s+" must be a character map object","SEPM0016");return(s=N)?S(s,p):s=p,s},"Q{http://saxon.sf.net/}indent-spaces":G,"Q{http://saxon.sf.net/}line-length":G,"Q{http://saxon.sf.net/}stylesheet-version":G};return/^{/.test(Y)&&(Y="Q"+Y),b[Y]?b[Y](Y,X,U):l(Y,X.toString())}function S(Y,X){X.min<Y.min&&(Y.min=X.min),X.max>Y.max&&(Y.max=X.max);for(let U in X.va)X.va.hasOwnProperty(U)&&(Y.va[U]=X.va[U])}function O(Y,X){let U={};return Y.forEach(function(nt,W){let G=X.Cg[nt];if(!G)throw new F("Unknown character map "+nt,"SEPM0016");W===0?U=G:S(U,G)}),U}function M(Y,X){return Y["item-separator"]&&Y["item-separator"]!=="#absent"?new Cu(X,Y["item-separator"]):new br(X)}function d(Y,X){let U=Y["Q{http://saxon.sf.net/}indent-spaces"],nt=Y["suppress-indentation"];return On(Y.method==="xml"?new Q(U,nt):new g(U,nt),X)}function o(Y,X){return Y["normalization-form"]&&Y["normalization-form"]!=="none"&&(X=On(new H(Y["normalization-form"]),X)),X}function E(Y,X){return Y["use-character-maps"]&&(X=On(new B(Y["use-character-maps"]),X)),X}function T(Y,X){return Y["cdata-section-elements"]&&(X=On(new y(Y["cdata-section-elements"],Y.encoding||"UTF-8",Y["normalization-form"]&&Y["normalization-form"]!=="none"?Y["normalization-form"]:null),X)),X}function C(Y,X){return Y[X]===void 0||Y[X]}function n(Y){if(Y.encoding&&!["UTF-8","UTF-16","ISO-646","ISO-8859-1","US-ASCII"].includes(Y.encoding.toUpperCase()))throw new F("Serializer does not support the requested encoding: "+Y.encoding,"SESU0007")}function r(Y,X){var U=Y.method==="xhtml";if(X=U?new I(Y,X):new w(Y,X),U&&Y.version&&Y.version!=="1.0")throw new F("Serializer does not support the requested XML version: "+Y.version,"SESU0013");if((U=U?Y["html-version"]:Y["html-version"]||Y.version)&&1*U!==5)throw new F("Serializer does not support the requested HTML version: "+U,"SESU0013");return n(Y),C(Y,"indent")&&(X=d(Y,X)),X=o(Y,X),X=E(Y,X),X=T(Y,X),X=On(new x,X),C(Y,"escape-uri-attributes")&&(X=On(new L,X)),C(Y,"include-content-type")&&(X=On(new _(Y),X)),M(Y,X)}function h(Y,X=null,U=null,nt=null){function W(p,N){switch(p.nodeType){case 9:case 11:N.Da(s),p=p.childNodes;for(var D=0;D<p.length;++D)W(p[D],N);N.wa();break;case 1:let k={};at.Ha.jb(p).forEachItem(function(V){k[V.prefix]=V.uri});let j=new Xn;for(at.Ha.Ga(p).forEachItem(function(V){j.set(V.qname,{value:V.value,fb:{}})}),N.ja(at.aa(p),j,k,s),p=p.childNodes,D=0;D<p.length;++D)W(p[D],N);N.endElement();break;case 2:if(N instanceof rt)N.text(at.aa(p)+'="'+p.value+'"',s);else throw new F("Cannot serialize free-standing attribute node","SENR0001");break;case 13:if(N instanceof rt)D=p.prefix,N.text(D?"xmlns:"+D:'xmlns="'+p.uri+'"',s);else throw new F("Cannot serialize free-standing namespace node","SENR0001");break;case 3:case 4:N.text(p.nodeValue,s);break;case 7:N.sa(p.target,p.nodeValue,s);break;case 8:N.ta(p.nodeValue,s)}}function G(p,N){Array.isArray(p)?p.forEach(D=>{G(D,N)}):at.U(p)?W(p,N):N.append(p,s)}let b;U||(b="",U={write:function(p){b+=p}}),U.write||Z.ka("writer supplied to Serialize.serialize() is not a writeable stream"),X||={},X=u(X,U,nt);let s={};return Y&&G(Y,X),X.close(),b}let m=ot.XS;class c extends Yi{constructor(X,U){super(),this.g=U||null,this.Na=X}close(){this.g.end&&!this.g.isTTY&&this.g.end()}}class P extends c{constructor(X,U){super(X,U),this.B=this.J=this.ua=this.na=this.tb=!1,this.Za=[],this.K=[],this.Yd=0,this.Tc=X.encoding||"UTF-8"}Da(){}wa(){}close(){this.J||this.R(),super.close()}ja(X,U,nt){function W(b){throw new F("When "+b+" is specified, there must only be one top-level element node","SEPM0004")}this.J||(this.R(),this.Aa(X),this.na&&!this.ua&&this.Na.indent===!0&&this.g.write(`
`),this.J=!0),this.K.length===0&&(0<this.Yd++&&this.Na.standalone!==void 0&&this.Na.standalone!==null&&W("standalone"),1<this.Yd&&this.Na["doctype-system"]&&W("doctype-system"));let G=this.K.length===0?{}:this.K[this.K.length-1];this.Za.push(X),this.K.push(nt),this.B&&this.$(),this.g.write("<"+this.j(X.toString(),!1)),this.yi(nt,G),this.be(X,U),this.B=!0}endElement(){let X=this.Za.pop();this.K.pop(),this.B?(this.g.write("/>"),this.B=!1):this.g.write("</"+X.toString()+">")}text(X,U={}){this.J||this.R(),this.B&&this.$(),this.g.write(U.DISABLE_ESCAPING?this.j(X,!1):this.j(e(X,!1,!1),!0))}ta(X){this.J||this.R(),this.B&&this.$(),this.g.write("<!--"+this.j(X,!1)+"-->")}sa(X,U){this.J||this.R(),this.B&&this.$(),this.g.write("<?"+this.j(X,!1)+(0<U.length?" "+this.j(U,!1):"")+"?>")}append(X,U={}){this.text(X.toString(),U)}R(){this.tb||this.ti()}$(){this.g.write(">"),this.B=!1}yi(X,U){let nt=[];for(let W in X)if(U[W]!==X[W]){let G="";W!=="xml"&&(G=W===""?' xmlns="'+e(X[W],!0,!1)+'"':" xmlns:"+W+'="'+e(X[W],!0,!1)+'"'),G!==""&&nt.push(G)}nt.sort(),nt.forEach(W=>this.g.write(W))}be(X,U){if(U){let nt=this;U.forEach((W,G)=>{nt.ae(G,W)})}}ae(X,U){let nt=U.fb.USE_NULL_MARKERS===!0;U=U.fb.DISABLE_ESCAPING?this.j(U.value,!1):this.j(e(U.value,!0,nt),!0),this.g.write(" "+this.j(X.toString(),!1)+'="'+U+'"')}ti(){var X=this.Tc.toUpperCase();this.Na["byte-order-mark"]&&X==="UTF-8"&&this.g.write("\uFEFF"),this.tb=!0,X=this.Na["omit-xml-declaration"]===!0&&X==="UTF-8",this.na=!X;let U=this.Na.standalone;if(X&&U!==void 0&&U!==null)throw new F("Serializer values of 'standalone' and 'omit-xml-declaration' conflict","SEPM0009");X||this.g.write('<?xml version="1.0" encoding="'+this.Tc+'"'+(U!=null?' standalone="'+(U?"yes":"no")+'"':"")+"?>")}Aa(X){let U=this.Na["doctype-system"]||null,nt=this.Na["doctype-public"]||null;U!==null&&(this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+this.j(X.toString(),!1)+`
`),X=U.includes('"')?"'"+U+"'":'"'+U+'"',nt===null?this.g.write(" SYSTEM "+this.j(X,!1)+`>
`):this.g.write(' PUBLIC "'+this.j(nt,!1)+'" '+this.j(X,!1)+`>
`),this.ua=!0)}j(X,U){function nt(G){if(U)return"&#"+G+";";throw new F("Character "+String.fromCodePoint(G)+" (decimal "+G+") is not available in the chosen encoding","SERE0008")}let W=this.Tc;return function(G){let b="";var s=0;let p=G.length;if(p===0)return"";for(;s<p;){let D=s;for(;D<p;){var N=G.charCodeAt(D);if(N===9||N===10)D++;else{if(32>N)break;if(127>N)D++;else{if(160>N||N===8232||55296<=N&&56320>=N||!t(N,W))break;D++}}}if(D>=p)return s===0?G:b+G.substring(s,D);if(D>s&&(b+=G.substring(s,D)),N=G.charCodeAt(D),s=G.charAt(D),N===0)throw new F("Null marker","ZZZZ9999");if(160>N||N===8232?b+=U?nt(N):s:55296<=N&&56320>=N?(N=G.codePointAt(D++),b+=t(N,W)?s+G.charAt(D):nt(N)):t(N,W)||(b+=nt(N)),s=++D,s>=p)return b}}(X)}}class Q extends tn{constructor(X,U){super(),this.J=0,this.Yd=X||3,this.Aa=`
               `,this.B=this.K=this.$=!1,this.Za=U||null,this.j=-1,this.ua=null,this.tb={}}ja(X,U,nt,W={}){if(this.K||this.B?this.na():this.R(),0>this.j){let G=U.get(m.QName.fromParts("",Ft.xml,"space"));G&&G.value==="preserve"&&(this.j=this.J)}this.J++,this.Za&&this.j===-1&&0<=this.Za.indexOf(X.toEQName())&&(this.j=this.J),this.g.ja(X,U,nt,W),this.K=this.$=!0,this.B=!1}endElement(){this.J--,this.B&&!this.$?this.na():this.K&&!this.B?this.ua=null:this.R(),this.g.endElement(),this.$=!1,this.B=!0,this.K=!1,this.J===this.j-1&&(this.j=-1)}text(X,U={}){let nt=!this.$||0<=X.indexOf(`
`);0>this.j&&Rt.trim(X)===""&&nt?(this.ua=X,this.tb=U):(this.R(),0<=X.indexOf(`
`)&&(this.$=!1),this.g.text(X,U),this.B=this.K=!1)}ta(X,U={}){this.B?this.na():this.R(),this.g.ta(X,U),this.B=this.K=!1}sa(X,U,nt={}){this.B?this.na():this.R(),this.g.sa(X,U,nt),this.B=this.K=!1}na(){0<=this.j?this.R():this.be()}be(){this.ua=null;let X=this.J*this.Yd;if(X+1>this.Aa.length){let U=5*this.Yd;X+1>this.Aa.length+U&&(U+=X+1);for(let nt=0;nt<U;nt++)this.Aa+=" "}this.g.text(this.Aa.substring(0,X+1),{DISABLE_ESCAPING:!0}),this.$=!1}R(){this.ua&&(this.g.text(this.ua,this.tb),this.ua=null,this.tb={})}}class H extends tn{constructor(X){if(super(),this.j=X,!String.prototype.normalize)throw new F("normalization-form: not supported on this JavaScript platform","SESU0011");if(X==="fully-normalized")throw new F("Serializer does not support the requested normalization-form: fully-normalized","SESU0011")}ja(X,U,nt,W={}){let G=new Xn,b=this.j;U.forEach(function(s,p){let N="";if(s.fb.USE_NULL_MARKERS){let D=s.value.split("\0");for(let k=0;k<D.length;k++)N+=k%2===1?D[k]:D[k].normalize(b),N+="\0"}else N=s.fb.NO_NORMALIZATION?s.value:s.value.normalize(b);G.set(p,{value:N,fb:s.fb})}),this.g.ja(X,G,nt,W)}text(X,U={}){this.g.text(U.NO_NORMALIZATION?X:X.normalize(this.j),U)}}class B extends tn{constructor(X){super(),this.va=X||null}ja(X,U,nt,W={}){let G=i(this.va,!0),b=new Xn;U.forEach(function(s,p){var N=b.set;{var D=s.value;let k=s.fb;k.DISABLE_ESCAPING||k.NO_CHARACTER_MAP?s={value:D,fb:k}:(s=G(D),s!==D?(D=Object.assign({},k),D.USE_NULL_MARKERS=!0,s={value:s,fb:D}):s={value:s,fb:k})}N.call(b,p,s)}),this.g.ja(X,b,nt,W)}text(X,U={}){if(U.DISABLE_ESCAPING||U.NO_CHARACTER_MAP)this.g.text(X,U);else{let s=this.va,p="";for(var nt=!1,W=!0,G=0;G<X.length;G++){var b=X.charCodeAt(G);if(b>=s.min&&b<=s.max){W=!1;break}}if(W)p=X;else for(W=0;W<X.length;W++){G=X.charAt(W),b=X.charCodeAt(W);let N=55296<=b&&56320>=b;N&&(b=X.codePointAt(W)),s.va[b]?(nt||(p!==""&&(this.g.text(p,U),p=""),nt=!0),p+=s.va[b],N&&W++):(nt&&(nt=Object.assign({},U),nt.DISABLE_ESCAPING=!0,nt.NO_NORMALIZATION=!0,this.g.text(p,nt),p="",nt=!1),p+=G)}nt?(X=Object.assign({},U),X.DISABLE_ESCAPING=!0,X.NO_NORMALIZATION=!0,this.g.text(p,X)):this.g.text(p,U)}}}class y extends tn{constructor(X,U,nt){if(super(),this.na=X||null,this.R=U,this.K=nt,this.B=[],this.j="",this.J={},nt==="fully-normalized")throw new F("Serializer does not support the requested normalization-form: fully-normalized","SESU0011")}ja(X,U,nt,W={}){this.flush(),this.B.push(X.toEQName()),this.g.ja(X,U,nt,W)}endElement(){this.flush(),this.B.pop(),this.g.endElement()}text(X,U={}){0<=this.na.indexOf(this.B.length===0?null:this.B[this.B.length-1])?U.DISABLE_ESCAPING?(this.flush(),this.g.text(X,U)):(this.j+=X,this.J=U):this.g.text(X,U)}ta(X,U={}){this.flush(),this.g.ta(X,U)}sa(X,U,nt={}){this.flush(),this.g.sa(X,U,nt)}flush(){if(this.j!==""){let U=this.K?this.j.normalize(this.K):this.j,nt=U.length;for(var X=0;X<nt;){let W=X;for(;W<nt&&t(U.charCodeAt(W),this.R);)W++;W>X&&this.$(U.substring(X,W)),W<nt&&(X=Object.assign({},this.J),X.DISABLE_ESCAPING=!1,X.NO_CHARACTER_MAP=!0,X.NO_NORMALIZATION=!0,this.g.text(U.charAt(W),X)),X=++W}this.j="",this.J={}}}$(X){let U=Object.assign({},this.J);U.DISABLE_ESCAPING=!0,U.NO_CHARACTER_MAP=!0,U.NO_NORMALIZATION=!0,this.g.text("<![CDATA[",U);let nt=0,W=X.length;for(;nt<W;){let G=X.substring(nt,W).indexOf("]]>");0<=G?(this.g.text(X.substring(nt,G+2)+"]]><![CDATA[",U),nt=G+2):(this.g.text(X.substring(nt,W)+"]]>",U),nt=W)}}}class w extends P{constructor(X,U){super(X,U),this.qa=-1e6,this.If="area base br col embed hr img input link meta param source track wbr".split(" "),this.vd={"*":["hidden","autofocus","itemscope"],audio:["autoplay","controls","loop","muted"],button:["disabled","formnovalidate"],details:["open"],dialog:["open"],fieldset:["disabled"],form:["novalidate"],img:["ismap"],input:"checked disabled multiple readonly required formnovalidate".split(" "),iframe:["allowfullscreen","allowpaymentrequest"],ol:["reversed"],optgroup:["disabled"],option:["selected","disabled"],script:["defer","async","nomodule"],select:["multiple","disabled","required"],textarea:["disabled","readonly","required"],track:["default"],video:["autoplay","controls","loop","muted","playsinline"]}}ja(X,U,nt,W={}){super.ja(X,U,nt,W),X.dd("")&&["script","style"].includes(X.local.toLowerCase())&&(this.qa=0),this.qa++}endElement(){let X=this.Za.pop();this.qa--,this.qa===0&&(this.qa=-1e6),this.K.pop(),this.B&&(this.g.write(">"),this.B=!1),this.If.includes(X.local.toLowerCase())&&f(X)||this.g.write("</"+X.toString()+">")}text(X,U={}){0<this.qa&&!U.DISABLE_ESCAPING?(U=Object.assign({},U),U.DISABLE_ESCAPING=!0,super.text(X,U)):super.text(X,U)}sa(X,U){if(this.J||this.R(),this.B&&this.$(),0<=U.indexOf(">"))throw new F("A processing instruction in HTML must not contain a > character","SERE0015");this.g.write("<?"+this.j(X,!1)+" "+this.j(U,!1)+">")}R(){this.tb||(this.Na["byte-order-mark"]&&this.Na.encoding==="UTF-8"&&this.g.write("\uFEFF"),this.tb=!0)}be(X,U){if(U){let nt=this;U.forEach((W,G)=>{X.dd("")&&this.ii(X,G,W.value)?nt.g.write(" "+G.toString()):nt.ae(G,W)})}}Aa(X){let U=this.Na["doctype-system"]||null,nt=this.Na["doctype-public"]||null;U===null&&nt===null?f(X)&&X.local.toLowerCase()==="html"&&(this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+X.toString()+`>
`),this.ua=!0):U===null?(X=f(X)&&X.local.toLowerCase()==="html"?X.toString():"html",this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+X+`
`),this.g.write('  PUBLIC "'+nt+`">
`),this.ua=!0):super.Aa(X.local.toLowerCase()==="html"?X:m.QName.fromParts("","","html"))}ii(X,U,nt){return U=U.local.toLowerCase(),X=X.local.toLowerCase(),U===nt.toLowerCase()&&(this.vd[X]&&this.vd[X].includes(U)||this.vd["*"].includes(U))}}class g extends Q{constructor(X,U){super(X,U),this.If="pre script style textarea title xmp".split(" "),this.ae="a abbr acronym applet area audio b basefont bdi bdo big br button canvas cite code data datalist del dfn em embed font i iframe img input ins kbd label map mark math meter noscript object output picture progress q ruby s samp script select small span strike strong sub sup svg template textarea time tt u var video wbr".split(" "),this.qa=this.Tc=!1,this.vd=[]}ja(X,U,nt,W={}){this.Tc=this.ae.includes(X.local.toLowerCase())&&f(X),this.K||this.B?this.na():this.R(),this.J++,0>this.j&&this.If.includes(X.local.toLowerCase())&&f(X)&&(this.j=this.J),this.Za&&this.j===-1&&0<=this.Za.indexOf(X.toEQName())&&(this.j=this.J),this.g.ja(X,U,nt,W),this.K=this.$=!0,this.Tc=this.qa=this.B=!1,this.vd.push(X)}endElement(){let X=this.vd.pop();this.J--,this.B&&!this.$?this.na():this.R(),this.g.endElement(),this.$=!1,this.B=!0,this.K=!1,this.qa=this.ae.includes(X.local.toLowerCase())&&f(X),this.J===this.j-1&&(this.j=-1)}text(X,U={}){super.text(X,U),0>this.j&&Rt.trim(X)===""||(this.qa=!1)}ta(X,U={}){super.ta(X,U),this.qa=!1}sa(X,U,nt={}){super.sa(X,U,nt),this.qa=!1}na(){0<=this.j||this.Tc||this.qa?this.R():this.be()}}class x extends tn{ja(X,U,nt,W={}){for(let G in nt)v(nt[G])&&delete nt[G];v(X.uri)&&(X.prefix!==""&&(X=m.QName.fromParts("",X.uri,X.local)),nt[""]=X.uri),U.forEach((G,b)=>{v(b.uri)&&(nt[b.prefix]=b.uri)}),super.ja(X,U,nt,W)}}class I extends P{constructor(X,U){super(X,U),this.qa="area base br col embed hr img input link meta param source track wbr".split(" ")}endElement(){this.K.pop();let X=this.Za.pop();this.B&&this.qa.includes(X.local)&&f(X)?(this.g.write(" />"),this.B=!1):(this.B&&super.$(),this.g.write("</"+X.toString()+">"))}text(X,U={}){(this.J||Rt.trim(X)!=="")&&super.text(X,U)}Aa(X){let U=this.Na["doctype-system"]||null;U===null&&f(X)&&X.local.toLowerCase()==="html"?(this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+X.toString()+`>
`),this.ua=!0):U!==null&&super.Aa(X)}}class L extends tn{ja(X,U,nt,W){let G=!1;if(U.forEach((b,s)=>G=G||a(X,s)),G){let b=new Xn;U.forEach((s,p)=>{if(a(X,p)){let N=ut.escape(s.value.normalize("NFC"),D=>32>D||126<D);s=Object.assign({},s.fb),s.DISABLE_ESCAPING=!1,s.NO_CHARACTER_MAP=!0,s.NO_NORMALIZATION=!0,b.set(p,{value:N,fb:s})}else b.set(p,s)}),super.ja(X,b,nt,W)}else super.ja(X,U,nt,W)}}class _ extends tn{constructor(X){super(),this.B=X,this.j=!1}ja(X,U,nt,W={}){if(X.local.toLowerCase()==="meta"&&f(X)){let G=this.j;U.forEach(function(b,s){s.toString().toLowerCase()==="http-equiv"&&b.value.trim().toLowerCase()==="content-type"&&(G=!0)}),this.j=G}this.j||(super.ja(X,U,nt,W),X.local.toLowerCase()==="head"&&f(X)&&(U=new Xn,U.set(m.QName.fromParts("","","http-equiv"),{value:"Content-Type",fb:{}}),U.set(m.QName.fromParts("","","content"),{value:(this.B["media-type"]||"text/html")+"; charset="+(this.B.encoding||"UTF-8"),fb:{}}),this.g.ja(m.QName.fromParts("",X.uri,"meta"),U,{},{}),this.g.endElement()))}endElement(){this.j?this.j=!1:this.g.endElement()}}class q extends ii{constructor(X,U,nt){super(nt),this.B=X,this.g=U,this.va=X["use-character-maps"]||null}close(){this.tb(this.result()),this.g.end&&this.g.end(),super.close()}Aa(X){this.B["normalization-form"]&&this.B["normalization-form"]!=="none"&&(X=X.normalize(this.B["normalization-form"]));let U=this.B.encoding||"UTF-8",nt="escape-solidus"in this.B?this.B["escape-solidus"]:!0,W="";for(let G=0;G<X.length;G++){let b=X.charCodeAt(G),s=X.charAt(G);switch(s){case'"':W+='\\"';break;case"\b":W+="\\b";break;case"\f":W+="\\f";break;case`
`:W+="\\n";break;case"\r":W+="\\r";break;case"	":W+="\\t";break;case"\\":W+="\\\\";break;case"/":W=nt?W+"\\/":W+"/";break;default:W=31>=b||127<=b&&159>=b||!t(b,U)?W+("\\u"+("0000"+b.toString(16).toUpperCase()).slice(-4)):W+s}}return W}qa(X){let U='"';if(this.va){let b=this.va,s="",p=!1;for(var nt=!0,W=0;W<X.length;W++){var G=X.charCodeAt(W);if(G>=b.min&&G<=b.max){nt=!1;break}}if(nt)s=X;else for(nt=0;nt<X.length;nt++){W=X.charAt(nt),G=X.charCodeAt(nt);let N=55296<=G&&56320>=G;N&&(G=X.codePointAt(nt)),b.va[G]?(p||(s!==""&&(U+=this.Aa(s),s=""),p=!0),s+=b.va[G],N&&nt++):(p&&(U+=s,s="",p=!1),s+=W)}U=p?U+s:U+this.Aa(s)}else U+=this.Aa(X);return U+'"'}tb(X){function U(G){switch(G.length){case 0:W.g.write("null");break;case 1:nt(G[0]);break;default:throw new F("Cannot output a sequence of length "+G.length+" as JSON","SERE0023")}}function nt(G){var b=ot.XS;if(ot.la(G))if(b.boolean.matches(G))W.g.write(G.toString());else if(b.numeric.matches(G)){if(G=G.toString(),["NaN","INF","-INF"].includes(G))throw new F("Cannot output INF or NaN as JSON","SERE0020");W.g.write(G)}else W.g.write(W.qa(G.toString()));else if(at.U(G)){b=Object.assign({},W.B),b.method=b["json-node-output-method"]||"xml",b["item-separator"]=null,b["omit-xml-declaration"]=!0,b.encoding="UTF-8";let s=new tt;h(G,b,s,W.na),W.g.write(W.qa(s.toString()))}else if(ut.isArray(G))if(G=G.value,G.length===0)W.g.write("[]");else{for(W.$("["),U(G[0]),b=1;b<G.length;b++)W.R(),U(G[b]);W.K("]")}else if(G instanceof It){let s=!0;W.$("{");let p={};G.forAllPairs(N=>{s?s=!1:W.R();let D=W.qa(N.k.toString());if(!W.B["allow-duplicate-names"]){if(p[D])throw new F("Duplicate key '"+D+"' in serialized JSON map","SERE0022");p[D]=!0}W.g.write(D),W.Za(),U(N.v)}),W.K("}")}else throw new F("Cannot output as JSON: "+Z.showValue(G),"SERE0021")}let W=this;U(X)}$(X){this.g.write(X)}K(X){this.g.write(X)}R(){this.g.write(",")}Za(){this.g.write(":")}}class $ extends q{constructor(X,U,nt){super(X,U,nt),this.j=0,this.ua=X["Q{http://saxon.sf.net/}indent-spaces"]||3}$(X){super.$(X),this.j++,this.g.write(`
`.padEnd(this.j*this.ua+1," "))}K(X){this.j--,this.g.write(`
`.padEnd(this.j*this.ua+1," ")),super.K(X)}R(){super.R(),this.g.write(`
`.padEnd(this.j*this.ua+1," "))}Za(){this.g.write(": ")}}class rt extends ii{constructor(X,U,nt){super(nt),this.B=X,this.g=U,this.na=nt,this.va=X["use-character-maps"]||null}close(){function X(p,N){for(let D in["fn","math","map","array","xs"])if(Ft.withPrefix[D]===p)return D+":"+N;return"Q{"+p+"}"+N}function U(p){return G.va?i(G.va,!1)(p):p}function nt(p,N){if(p.length===1)W(p[0],N);else{N.write("(");let D=!0;for(let k=0;k<p.length;k++)D?D=!1:N.write(","),W(p[k],N);N.write(")")}}function W(p,N){if(at.U(p))switch(p.nodeType){case 9:case 11:case 1:case 7:case 8:case 3:case 4:var D=Object.assign({},G.B);D.method="xml",D["item-separator"]=null,D.encoding="UTF-8";var k=new tt;u(D,k,G.na).append(p),N.write(k.toString());break;case 2:N.write(at.aa(p)+'="'+p.value+'"',{});break;case 13:N.write("*** Namespace Node ****",{})}else if(ot.la(p))D=p.code,D==="AB"?N.write(p.toBoolean()?"true()":"false()"):p.isStringLike()?(D=p.toString(),/"/.test(D)?N.write("'"+U(D.replace(/'/g,"''"))+"'"):N.write('"'+U(p.toString().replace(/"/g,'""'))+'"')):/^AD/.test(D)||/^A[OF]/.test(D)?N.write(p.toString()):N.write(`${ot.ld(D)} ("${p.toString()}")`);else if(p instanceof qt){for(p=p.value,N.write("["),D=!0,k=0;k<p.length;k++)D?D=!1:N.write(","),nt(p[k],N);N.write("]")}else if(p instanceof It){N.write("map{");let j=!0;p.forAllPairs(V=>{j?j=!1:N.write(","),W(V.k,N),N.write(":"),nt(V.v,N)}),N.write("}")}else p instanceof Ut.XdmFunction?p.local?N.write(X(p.uri,p.local)+"#"+p.arity):N.write("(anonymous function)#"+p.arity):N.write("JS: "+Z.showValue(p))}let G=this,b=this.result(),s=!0;for(let p=0;p<b.length;p++){let N=b[p];s?s=!1:this.g.write(this.B["item-separator"]||" "),W(N,this.g)}this.g.end&&this.g.end(),super.close()}}class st extends tn{constructor(X,U){super(),this.j=X,this.J=U,this.pending=[],this.B=!1}Da(X={}){this.pending.push(function(U){U.Da(X)})}ja(X,U,nt,W={}){if(!this.B){let G=this.j["Q{http://saxon.sf.net/}stylesheet-version"],b="xml";X.local==="html"&&X.uri==="http://www.w3.org/1999/xhtml"?b=G===10?"xml":"xhtml":X.local.toLowerCase()==="html"&&X.uri===""&&(b="html"),this.j=Object.assign({},this.j),this.j.method=b,this.g=u(this.j,this.J),this.g instanceof st&&Z.ka("cannot create committed serializer: "+JSON.stringify(this.j)),this.pending.forEach(s=>s(this.g)),this.B=!0,this.pending=[]}super.ja(X,U,nt,W)}text(X,U={}){this.B?super.text(X,U):this.pending.push(function(nt){nt.text(X,U)})}ta(X,U={}){this.B?super.ta(X,U):this.pending.push(function(nt){nt.ta(X,U)})}sa(X,U,nt={}){this.B?super.sa(X,U,nt):this.pending.push(function(W){W.sa(X,U,nt)})}append(X,U={}){this.B?super.append(X,U):this.pending.push(function(nt){nt.append(X,U)})}wa(){this.B?super.wa():this.pending.push(function(X){X.wa()})}close(){this.B||(this.j.method="xml",this.g=u(this.j,this.J),this.pending.forEach(X=>X(this.g))),super.close()}}class ht extends c{constructor(X,U){super(X,U),this.j=!1}text(X){this.j||this.B(),this.g.write(X)}append(X){this.j||this.B(),this.g.write(X.toString())}B(){this.Na["byte-order-mark"]&&this.Na.encoding==="UTF-8"&&this.g.write("\uFEFF"),this.j=!0}}class tt{constructor(){this.ia=""}write(X){this.ia+=X}toString(){return this.ia}}return{serialize:h,bh:u,xf:tt,cf:function(Y,X,U=null){function nt(s,p="SEPM0017"){throw new F("Serialization params: "+s,p)}function W(s,p=[]){let N=at.aa(s);at.Ha.Ga(s).forEachItem(function(D){D=at.aa(D),D.uri!==""||p.includes(D.local)||nt("attribute @"+D.local+" must not appear on element "+N.toString())})}function G(s,p){let N=at.getAttribute(s,p,null);return N===null&&nt("attribute @"+p+" is missing on element "+at.aa(s).toString()),N}at.aa(Y).local!=="serialization-parameters"&&nt("root element name must be 'serialization-parameters'",U||"SEPM0017"),at.aa(Y).uri!=="http://www.w3.org/2010/xslt-xquery-serialization"&&nt("root element namespace must be http://www.w3.org/2010/xslt-xquery-serialization",U||"SEPM0017"),W(Y);let b=[];at.ad(Y).forEach(function(s){if(at.dd(s,"http://www.w3.org/2010/xslt-xquery-serialization")){var p=at.aa(s).local;let N;b.includes(p)&&nt("duplicated parameter "+p,"SEPM0019"),b.push(p),p==="use-character-maps"?(W(s),N={min:0,max:0,va:{}},at.ad(s).forEach(function(D){if(at.dd(D,"http://www.w3.org/2010/xslt-xquery-serialization")&&at.aa(D).local==="character-map"){W(D,["character","map-string"]);let k=G(D,"character");1<k.length&&nt("keys in a character map must all be one-character strings. Found "+k);let j=k.codePointAt(0);D=G(D,"map-string"),N.va[j]!==void 0?nt("character map contains two entries for the character "+k,"SEPM0019"):(N.va[j]=D,(N.min===0||j<N.min)&&(N.min=j),j>N.max&&(N.max=j))}else nt("invalid child of use-character-maps: "+at.aa(D).toString())}),55296<N.min&&(N.min=55296)):(W(s,["value"]),N=G(s,"value"),N=l(p,N,function(D){return s.lookupNamespaceURI(D)})),typeof N<"u"&&(X[p]=A(p,N,X[p]))}else at.dd(s,"")&&nt("element in no namespace: "+at.aa(s).local),p=at.aa(s).toEQName(),b.includes(p)&&nt("duplicated parameter "+p,"SEPM0019"),b.push(p)})},bf:A,mf:l,lf:function(Y,X,U){return Y=l(Y,X),O(Y,U)},mj:O,bj:function(Y){function X(G,b="SEPM0017"){throw new F("Serialization params: "+G,b)}let U=0,nt=0,W={};for(let[G,b]of Object.entries(Y)){Y=G,1<Y.length&&X("keys in a character map must all be one-character strings. Found "+Y);let s=Y.codePointAt(0);W[s]!==void 0&&X("character map contains two entries for the character "+Y,"SEPM0019"),W[s]=b,(U===0||s<U)&&(U=s),s>nt&&(nt=s),55296<U&&(U=55296)}return{min:U,max:nt,va:W}}}}(),Jt=function(){function e(o,E,T,C){let n=new AbortController;if(T!==0){let r=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>n.abort(r),T)}if(T=J.newURL(o),T.protocol!=="file:"||J.ra()){T=new Headers,T.append("Accept","application/xml, text/xml;q=0.9, application/xhtml+xml;q=0.8, */*;q=0.7");let r;E=fetch(o,{method:"GET",headers:T,signal:n.signal}).catch(()=>{throw n.signal.aborted?n.signal.reason.name==="TimeoutError"?new F("Document fetch timeout: "+o,"SXJS0008"):new F("Document fetch aborted: "+o,"SXJS0008"):new F("Document fetch failed: "+o,"SXJS0009")}).then(h=>{let m=h.headers;return m.has("Content-Type")&&(r=m.get("Content-Type")),h.arrayBuffer()}).then(h=>({contentType:r,arrayBuffer:h})).then(E,E)}else E=J.sj(T,{signal:n.signal}).then(r=>({buffer:r})).catch(r=>{throw new F("Failed to read file "+o+" ("+r.message+")","SXJS0009")}).then(E,E);return C.fixed.hc.push(E),n}function t(o,E,T,C,n){function r(h){Z.xa("Add to response pool "+o,2,n.fixed.Ka),T[o]=h,E(T)}return!T[o]||T[o]instanceof F?e(o,r,C,n):(Z.xa("Doc already in pool "+o,2,n.fixed.Ka),E(T),null)}function i(o,E,T,C,n){T=T==="xml"?E.fixed.Ta:E.fixed.kb,E=E.fixed.Tb;var r=T[o];if(!r||r instanceof F){if(r=E[o],!r){try{r=C()}catch(h){r=h}E[o]=r}r=n(r),T[o]=r}if(r instanceof F)throw r;return r}function f(o){let E;return o[0]===255&&o[1]===254?E="utf-16le":o[0]===254&&o[1]===255?E="utf-16be":o[0]===239&&o[1]===187&&o[2]===191&&(E="utf-8"),E}function v(o){let E;return o.includes("encoding=")&&(o=o.slice(o.indexOf("encoding=")).toLowerCase(),o.includes("iso-8859-1")||o.includes("us-ascii")?E="iso-8859-1":o.includes("utf-16")?E="utf-16le":o.includes("utf-8")&&(E="utf-8")),E}function a(o,E,T,C){let n,r;try{if(C&&C.includes("charset=")){let m=C.split(/\s*(?:;|$)\s*/);for(let c of m)c.includes("charset=")&&(n=c.substring(8))}if(!n){let m=new Uint8Array(o.slice(0,4));n=f(m)}if(!n){let m=o.slice(0,80),c=new TextDecoder().decode(m);c.startsWith("<?xml ")&&c.includes("?>")&&(n=v(c.slice(0,c.indexOf("?>"))))}let h=n||O(E)||"utf-8";r=new TextDecoder(h,{fatal:!0}).decode(o||void 0)}catch(h){throw new F("Failed to decode "+T+" ("+h.message+")","FOUT1190")}return r}function u(o,E){let T;try{T=new TextDecoder("utf-8",{fatal:!0}).decode(o)}catch(C){throw new F("Failed to decode "+E+" ("+C.message+")","FOUT1190")}return T}function l(o){if(0<=o.indexOf("\0"))throw new F("External file contains non-XML characters","FOUT1190");return o}function A(o){return o.charAt(0)==="\uFEFF"&&(o=o.substring(1)),o}function S(o,E,T){if((o=o[0].next())&&at.fd(o.toString()))return o.toString();if(E=E.fixed.fa.Ea(T,E),E===null||E==="#UNDEFINED")throw new F("No base URI for relative resolution","FODC0002",T);return o===null?null:J.pb(o.toString(),E)}function O(o){return o&&({binary:"iso-8859-1",utf16le:"utf-16le",ucs2:"utf-16le","ucs-2":"utf-16le"}[o.toLowerCase()]||o)}function M(o){function E(n){if(n.nodeType===11){let r=J.createDocument();n=r.importNode(n,!0),r.appendChild(n),n=r}return n}function T(n){throw new F(n+" in HTTP request to: "+o.href,"SXJS0006")}if(!o.href)throw new F("'href' must be specified in HTTP request","SXJS0006");o.method||T("'method' must be specified"),o.method=o.method.toUpperCase(),"status-only"in o&&typeof o["status-only"]!="boolean"&&T("'status-only' parameter must be of type xs:boolean"),"pool"in o&&o.pool!=="xml"&&o.pool!=="text"&&T("'pool' parameter must be either 'xml' or 'text'"),"timeout"in o&&(typeof o.timeout!="number"||0>o.timeout)&&T("'timeout' parameter must be a positive integer"),o.allowedBody=o.method!=="GET"&&o.method!=="HEAD",o.hasData="body"in o||"multipart-bodies"in o,("multipart-bodies"in o||"multipart-headers"in o)&&T("Multipart requests not yet implemented"),!o.allowedBody&&o.hasData&&T("Body and multipart body content must be null for "+o.method+" request"),"headers"in o||(o.headers={});let C=o["media-type"]||o.headers["content-type"]||"";return o.hasData&&C===""&&T("No content type specified"),o.hasData&&"media-type"in o&&(o.headers["content-type"]=C),"multipart-bodies"in o&&!/$multipart\//.test(C)&&T("Content type must be multipart media type for multipart request"),("username"in o&&!("password"in o)||!("username"in o)&&"password"in o)&&T("Must set both (or neither) username and password"),o.body&&o.body.nodeType===11&&(o.body=E(o.body,C)),o.hasData&&(C==="text/xml"||C==="application/xml"||C==="text/xml-external-parsed-entity"||C==="application/xml-external-parsed-entity"||/\+xml$/.test(C)||C==="text/html")&&o.body.nodeType!==9&&T("HTTP request body must be a document node, supplied item is: "+Z.showValue(o.body)),o}function d(o,E,T,C=!1){var n=new Headers;for(var r in o.headers)o.headers.hasOwnProperty(r)&&n.append(r,o.headers[r]);"username"in o&&(r=J.ki(o.username+":"+o.password),n.append("Authorization","Basic "+r)),n={method:o.method,headers:n},E&&(n.signal=E.signal),o.body!==void 0&&(n.body=o.body.nodeType===9?Ht.serialize(o.body):o.body);let h=o.href,m,c;try{m=new Request(h,n),c=fetch(m)}catch(B){c=Promise.reject(B)}let P={},Q,H;return c.then(B=>{Q=B.ok,Z.xa("SaxonJS processing httpRequest response",2,T.fixed.Ka);let y=B.headers;y.has("Content-Type")&&(H=y.get("Content-Type"));let w={};return y.forEach((g,x)=>{w[x]=g}),P.headers=w,P.status=B.status,P.message=B.statusText,B.arrayBuffer()}).then(B=>{if(!o["status-only"]&&o.method!=="HEAD"){let w=H||"";var y=w.split(/;/)[0];let g=o["override-media-type"]||y;switch(P["media-type"]=g,y=J.Sb,g){case"text/xml":case"application/xml":case"text/xml-external-parsed-entity":case"application/xml-external-parsed-entity":B=a(B,null,h,w),B=A(l(B)),P.body=y(B),P.body._saxonBaseUri=h,P.body._saxonDocUri=h;break;case"text/html":B=u(B,h),P.body=y(B,!1,g),P.body._saxonBaseUri=h,P.body._saxonDocUri=h;break;default:/\+xml$/.test(g)?(B=a(B,null,h,w),B=A(l(B)),P.body=y(B),P.body._saxonBaseUri=h,P.body._saxonDocUri=h):(/^text\//.test(g)?(y=a(B,null,h,w),B=A(l(y))):B=u(B,h),P.body=B)}if("pool"in o){if(!Q)throw new F("Cannot add to pool, unsuccessful HTTP response status: "+P.status,"SXJS0009");if(o.pool==="xml")if(P.body._saxonDocUri)T.fixed.Ta[h]=P.body;else throw new F("Only documents can be added to the documentPool, HTTP response is not a document","SXJS0009");else T.fixed.kb[h]=B}}return Ne(Yt(P))}).catch(B=>{throw E.signal&&E.signal.aborted&&E.signal.reason.name==="TimeoutError"?E.signal.reason:B}).catch(B=>{let y="HTTP request failed: "+h+" ("+B.message+")",w="SXJS0009";throw B.name==="AbortError"?(y="HTTP request aborted: "+h+" ("+B.name+": The user aborted a request)",w="SXJS0008"):B.name==="TimeoutError"&&(y="HTTP request timeout: "+h+" ("+B.name+": "+B.message+")",w="SXJS0008"),new F(y,w)}).catch(B=>{if(C)throw B;let y="error";E&&E.signal&&E.signal.aborted&&(y=E.signal.reason.name==="TimeoutError"?"timeout":"abort");var w=B.message;return B=B.code,P.status=0,P.message=w+": "+o.href,P.error=B,P.type=y,Ne(Yt(P))})}return{Zd:S,zd:function(o,E,T){try{return S(o,E,T)}catch(C){throw C instanceof F&&C.code==="XPTY0004"?C:new F(C.message,"FOUT1170",T)}},Vh:function(o,E,T,C,n){function r(c){0>=--h&&T(c)}let h=o.length,m={};for(let c=0;c<o.length;c++)o[c]?m[o[c]]=t(o[c],r,E,C,n):h--;return m},Ak:f,Bk:v,Ne:function(o){if(o==="")return null;if(!["utf-8","utf-16","utf-16be","iso-8859-1"].includes(o.toLowerCase()))throw new F("Unrecognized encoding "+o,"FOUT1190");return o},Eg:l,Fg:A,ei:function(o){let E={};return o.headers&&(E.headers=o.headers),(o=o.controller)&&(E.signal=o.signal),E},Fk:u,xc:function(o,E){if(0<=o.indexOf("#"))throw new F("Fragments not supported in external document URIs","FODC0002");return i(o,E,"xml",function(){let T;try{T=J.fg(o,!0)}catch(C){throw C instanceof F&&C.code==="FOUT1190"?new F(C.message,"FODC0002"):C}return T},function(T){if(T instanceof F)return T;let C;return T.buffer&&!J.ra()?C=J.Ig(T.buffer,null,o,null):T.arrayBuffer?C=a(T.arrayBuffer,null,o,T.contentType):T instanceof String?C=T:C=T.responseText,C=A(l(C)),T=at.dc(J.Sb(C)),T._saxonBaseUri=o,T._saxonDocUri=o,T})},ui:function(o,E){if(0<=o.indexOf("#"))throw new F("Fragments not supported in text document URIs","FOUT1170");return i(o,E,"text",function(){let T;try{T=J.fg(o,!0)}catch(C){throw C instanceof F?new F(C.message,"FOUT1170"):C}return T},function(T){if(T instanceof F)return T;let C,n=T.buffer||T.arrayBuffer;return n?C=u(n,o):T instanceof String?C=T:C=T.responseText,A(C)})},Lf:function(o,E,T,C){if(0<=o.indexOf("#"))throw new F("Fragments not supported in text document URIs","FOUT1170");return i(o,E,"text",function(){let n;try{n=J.fg(o,!0)}catch(r){throw r instanceof F&&r.code==="FOUT1190"?r:new F("Cannot retrieve unparsed-text "+o+" "+r.toString(),"FOUT1170",T)}return n},function(n){if(n instanceof F)return n;let r;return n.buffer&&!J.ra()?r=J.Ig(n.buffer,C,o,null):n.arrayBuffer?r=a(n.arrayBuffer,C,o,n.contentType):n instanceof String?r=n:r=n.responseText,A(l(r))})},Ki:function(o,E,T,C,n){let r;return fetch(o,E).then(h=>{if(n&&!h.ok)throw new F("Request failed with status code "+h.status+": "+h.statusText);let m=h.headers;return m.has("Content-Type")&&(r=m.get("Content-Type")),h.arrayBuffer()}).then(h=>T==="text"||T==="xml"?a(h,C,o,r):u(h,o)).catch(h=>{throw E.signal&&E.signal.aborted&&E.signal.reason.name==="TimeoutError"?E.signal.reason:h})},Li:d,dj:function(o,E,T,C){o=re(o,!0),M(o),Z.xa("HTTP request prepared",2,C.fixed.Ka);let n=new AbortController;if("timeout"in o&&T===0&&(T=o.timeout),T!==0){let r=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>n.abort(r),T)}return T=d(o,n,C,!1).then(r=>E(r)),C.fixed.hc.push(T),n},pj:M,rj:function(o,E,T,C){let n="Failed to read "+T+" ("+(/ENOENT/.test(o.message)?"no such file":o.message)+")";return["AbortError","TimeoutError"].includes(o.name)&&(n="Failed to read "+T+" ("+o.name+": "+(o.name==="TimeoutError"?o.message:"The user aborted a request")+")",C="SXJS0008"),new F(n,C,E.expr)},renameEncoding:O,renameEncodingForBuffer:function(o){return o&&({"iso-8859-1":"latin1","iso-646":"ascii","us-ascii":"ascii","utf-16":"utf16le"}[o.toLowerCase()]||o)},th:function(o){try{return o(),Pt(!0)}catch(E){if(E instanceof F&&E.code==="XPTY0004")throw E;return Pt(!1)}}}}(),Oe=function(){let e={};return{register:function(t,i){e[t]=i},find:function(t){return e[t]},al:e}}(),Se=function(){function e(B,y,w,g,x){function I(ht){return h.Va(ht)===null}function L(ht){return ht.nodeType===_.nodeType&&($===null?!0:h.aa(ht).equals($))}let _,q=x.fixed.fa;if(y){if(_=q.evaluate(y,x).next(),!_||!h.U(_))throw new F("xsl:number/@select must yield a single node","XTTE1000")}else He(x,"XTTE0990","xsl:number"),_=ue(x);let $=h.aa(_),rt=L;if(w!==null){let ht=Re.kd(w);rt=function(tt){return Re.matches(ht,tt,x)}}if(g===null)y=I;else{let ht=Re.kd(g);y=function(tt){return I(tt)||Re.matches(ht,tt,x)}}let st;switch(B){case"simple":return B=m.Ic(_).filter(L),he(B.count()+1);case"single":return B=m.Sa(_).filter(rt).next(),st=m.Sa(_).filter(y).next(),B=B===null?null:m.Sa(B).filter(function(tt){return h.isSameNode(tt,st)}).next()!==null?B:null,B===null?bt:(B=m.Ic(B).filter(rt),he(B.count()+1));case"multi":B=wt(m.Sa(_).filter(rt).expand().reverse()),st=m.Sa(_).filter(y).next(),B=B.filter(function(tt){return m.Sa(tt).filter(function(Y){return h.isSameNode(Y,st)}).next()!==null});let ht=c.integer.fromNumber;return B.mapOneToOne(tt=>ht(m.Ic(tt).filter(rt).count()+1));case"any":return w=function(tt,Y){return h.mb(Y,tt)},B=new Qr(m.dg(_).filter(rt),m.Sa(_).filter(rt),w),st=new Qr(m.dg(_).filter(y),m.Sa(_).filter(y),w).next(),st===null&&Z.ka("from pattern selected empty"),B=B.filter(function(tt){return 0<=h.mb(tt,st)}),B=B.count(),B===0?bt:he(B);default:return Z.ka("unknown xsl:number/@level "+B),bt}}function t(B,y,w,g,x,I,L){function _($){let rt;if($===""&&($="1"),/^[\x01-\x7f]*$/.test($))$=$.split(/\b/),rt=function(tt){return/\w+/.test(tt)};else{if($.length!==Ct.La($).length)throw new F("Cannot handle non-BMP characters in format-number picture","SXJS0002");let tt=Gt.Bf($,"[\\p{Nd}\\p{Nl}\\p{No}\\p{Lu}\\p{Ll}\\p{Lt}\\p{Lm}\\p{Lo}]+","",!0,!1);rt=function(Y,X){return tt[X].Gc},$=tt.map(function(Y){return Y.string.toString()})}let st={prefix:"",Zc:[],Td:""},ht=".";for(let tt=0;tt<$.length;tt++){let Y=$[tt];rt(Y,tt)?(st.Zc.push({Dg:Y,vh:ht}),ht="."):(tt===0&&(st.prefix=Y),tt===$.length-1?st.Td=Y:tt!==0&&(ht=Y))}return st.Zc.length===0&&(st.Zc.push({Dg:"1",vh:"."}),st.Td=st.prefix),st}let q=L.fixed.fa;if(I!==null)try{c.language.cast(I)}catch{throw new F("@lang="+I+": invalid language code","XTDE0030")}return function($){let rt=y===null?"1":q.evaluate(y,L).next().toString(),st=_(rt),ht=st.prefix;return $.forEach(function(tt,Y){let X=Y>=st.Zc.length?st.Zc[st.Zc.length-1]:st.Zc[Y];Y!==0&&(ht+=X.vh),Y=X.Dg,x&&(Y+=";o"),tt=Se.Of(tt.toNumber(),Y),w!==null&&g!==null&&(tt=Se.Af(tt,w,g)),ht+=tt}),ht+=st.Td,kt(ht)}(B.expand())}function i(B,y,w,g,x){let I=x.fixed.fa,L=[1];if(w!==null&&(L=I.evaluate(w,x).next().toString().split(/\s+/).map(function(_){if(!/^-?[0-9]+$/.test(_))throw new F("xsl:number/@start-at must be a sequence of integers. Offending value: "+_,"XTSE0020");return parseInt(_,10)})),y&&g){if(B=B.next(),B===null)return null;try{B=c.integer.cast(B.round(0))}catch{return null}B=wt([B])}return B.mapOneToOne(function(_,q){if(_=_.isNumeric()?_.toDouble():c.double.ie(_.toString()),0>_.toNumber())throw new F(`xsl:number/@value is less than zero (${_.toString()})`,"XTDE0980");try{_=c.integer.cast(_.round(0))}catch($){throw $.code="XTDE0980",$}return q=q>=L.length?L[L.length-1]:L[q],q!==1&&(_=c.integer.fromNumber(_.toNumber()+(q-1))),_})}function f(B){if(1>B||4999<B)return B.toString();let y="",w="m cm d cd c xc l xl x ix v iv i".split(" "),g=[1e3,900,500,400,100,90,50,40,10,9,5,4,1];for(let x=0;x<w.length;x++)for(;B>=g[x];)y+=w[x],B-=g[x];return y}function v(B,y){function w(x){return(x>g?w(Math.floor((x-1)/g)):"")+y.charAt((x-1)%g)}if(1>B)return B.toString();let g=y.length;return w(B)}function a(B,y){return B<y.length?y[B]:B.toString()}function u(B,y){var w=Math.abs(B);for(w=999999>w?w.toString():gt(w).toFixed();w.length<y;)w="0"+w;return 0>B&&(w="-"+w),w}function l(B,y="FODF1310"){let w=Ct.La(B),g={},x=!0;var I=0;let L,_=Rt.ue("\\p{Nd}",null);var q=B.search(_);if(0>q)x=!1;else{I=Rt.lj().Nd;for(let rt=0;rt<I.length&&(L=parseInt(I[rt][0],16),!(L<=w[q]&&w[q]<=L+10));rt++);for(q=0;q<w.length;q++)if(128<=w[q]){if(I=String.fromCharCode(w[q]),_.test(I)){if(L>w[q]||w[q]>L+10)throw new F("Picture string mixes digits from different digit families: "+B,y)}else if(Rt.ue("\\p{N}\\p{L}",null).test(I))throw new F("Picture string is invalid: "+B,y)}let $=[];I=L-48,w.forEach(function(rt){L<=rt&&rt<=L+10?$.push(48):$.push(rt)}),B=Ct.ac($)}return g.isDecimalDigitPattern=x,g.format=B,g.diff=I,g.zeroDigit=L,g}function A(B,y){let w=[];return Ct.La(B).forEach(function(g){48<=g&&57>=g?w.push(g+y):w.push(g)}),Ct.ac(w)}function S(B,y,w,g="",x=!1){let I=0;for(let L=0;L<B.length;L++)if(L===y[I]){let _=x?L+1:B.length-L;0<_&&(B=B.substring(0,_)+(w?w[x?I:w.length-I-1]:g)+B.substring(_)),I++}return B}function O(B,y,w="FODF1310"){let g=!0;var x=0;if(Ct.La(y).length!==y.length)throw new F("Cannot handle non-BMP characters in format-integer picture","SXJS0002");if(/^[\x01-\x7f]*$/.test(y)||(g=!1),g)var I=/[0-9]/.test(y);else x=l(y,w),y=x.format,I=x.isDecimalDigitPattern,x=x.diff;I||(y="1");var L=y;if(!/^(([0-9]|#|[^A-Za-z0-9])+?)$/.test(L))throw new F("The decimal digit pattern in the picture string is invalid: "+L,w);if(I=L,y=!0,/[^0-9A-Za-z#]/.test(I)){var _=I.match(/[^0-9A-Za-z#]/g);if(1<_.length){for(let q=1;q<_.length;q++)if(_[0]!==_[q]){y=!1;break}}I=I.replace(/[^0-9A-Za-z#]/g,",")}if(/^,|,,|,$/.test(I))throw new F("Grouping in picture string is invalid: "+L,w);if(/[0-9].*#/.test(I))throw new F("Picture string is invalid: "+L,w);if(w=I.replace(/[#,]/g,"").length,B=u(B,w),_){for(I=Ct.La(I).reverse(),w=[],L=0;L<I.length;L++)I[L]===44&&w.push(L);if(L=!0,I.length-w[w.length-1]-1>w[0]&&(L=!1),L){for(I=1;I<w.length;I++)if((w[I]+1)%(w[0]+1)!==0){L=!1;break}}B=L&&y?Se.Af(B,_[0],w[0]):S(B,w,_)}return _=B,g||(_=A(_,x)),_}function M(B){let y="Zero One Two Three Four Five Six Seven Eight Nine Ten Eleven Twelve Thirteen Fourteen Fifteen Sixteen Seventeen Eighteen Nineteen".split(" "),w="  Twenty Thirty Forty Fifty Sixty Seventy Eighty Ninety".split(" ");return 20>B?y[B]:100>B?w[Math.floor(B/10)]+(B%10===0?"":" "+y[B%10]):1e3>B?M(Math.floor(B/100))+" Hundred"+(B%100===0?"":" and "+M(B%100)):1e6>B?M(Math.floor(B/1e3))+" Thousand"+(B%1e3===0?"":(100>B%1e3?" and ":" ")+M(B%1e3)):1e9>B?M(Math.floor(B/1e6))+" Million"+(B%1e3===0?"":(100>B%1e3?" and ":" ")+M(B%1e6)):B.toString()}function d(B){let y="Zeroth First Second Third Fourth Fifth Sixth Seventh Eighth Ninth Tenth Eleventh Twelfth Thirteenth Fourteenth Fifteenth Sixteenth Seventeenth Eighteenth Nineteenth".split(" "),w="  Twent Thirt Fort Fift Sixt Sevent Eight Ninet".split(" ");return 20>B?y[B]:100>B?w[Math.floor(B/10)]+(B%10===0?"ieth":"y "+y[B%10]):1e3>B?M(Math.floor(B/100))+" Hundred"+(B%100===0?"th":" and "+d(B%100)):1e6>B?M(Math.floor(B/1e3))+" Thousand"+(B%1e3===0?"th":(100>B%1e3?" and ":" ")+d(B%1e3)):1e9>B?M(Math.floor(B/1e6))+" Million"+(B%1e3===0?"th":(100>B%1e3?" and ":" ")+d(B%1e6)):B.toString()}function o(B){return B%10===1&&B%100!==11?"st":B%10===2&&B%100!==12?"nd":B%10===3&&B%100!==13?"rd":"th"}function E(B,y,w="FODF1310"){function g(L,_){let q="";for(let $=L.charCodeAt(0),rt=0;rt<_;$++,rt++)q+=String.fromCharCode($);return q}var x;let I=null;if((x=y.lastIndexOf(";"))!==-1){if(I=y.substring(x+1),!/^([co](\(.+\))?)?[at]?$/.test(I))throw new F("Invalid format modifier in picture string: "+I,w);I=I.charAt(0),y=y.substring(0,x)}if(y==="")throw new F("In the picture string, the picture cannot be empty",w);if(x=0>B?"-":"",I==="o")switch(y.toString()){case"a":case"A":case"i":case"I":break;case"Ww":return x+d(Math.abs(B));case"W":return x+d(Math.abs(B)).toUpperCase();case"w":return x+d(Math.abs(B)).toLowerCase();default:return O(B,y,w)+o(Math.abs(B))}switch(y.toString()){case"a":return v(B,g("a",26));case"A":return v(B,g("A",26));case"\u03B1":return v(B,g("\u03B1",25));case"\u0391":return v(B,g("\u0391",25));case"i":return f(B);case"I":return f(B).toUpperCase();case"Ww":return x+M(Math.abs(B));case"W":return x+M(Math.abs(B)).toUpperCase();case"w":return x+M(Math.abs(B)).toLowerCase();case"\u2460":return a(B,"\u24EA"+g("\u2460",20)+g("\u3251",15)+g("\u32B1",15));case"\u2474":return a(B,"0"+g("\u2474",20));case"\u2488":return B===0?"\u{1F100}":a(B,"0"+g("\u2488",20));case"\u2776":return a(B,"\u24FF"+g("\u2776",10)+g("\u24EB",10));case"\u2780":return B===0?"\u{1F10B}":a(B,"0"+g("\u2780",10));case"\u278A":return B===0?"\u{1F10C}":a(B,"0"+g("\u278A",10));case"\u24F5":return a(B,"0"+g("\u24F5",10));case"\u3220":return a(B,"0"+g("\u3220",10));case"\u3280":return a(B,"0"+g("\u3280",10));default:return O(B,y,w)}}function T(B,y){return String.fromCharCode(parseInt(B[y]?B[y]:P[y],10))}function C(B,y){function w(s){throw[["$gs","grouping separator"],["$es","exponent separator"],["$ds","decimal separator"],["$pc","non-prefix passive character"],["$pp","percent|permille"],["$od","optional digit"],["$md","mandatory digit"],["$ip","integer part"],["$fp","fractional part"]].forEach(function(p){s=s.replace(p[0],p[1])}),new F("Invalid picture: "+s,"FODF1310")}let g={};var x=B.indexOf(y.Qe),I=0<=x;let L=y.Lh.charCodeAt(0),_=0,q=0,$=[],rt=[],st=[],ht=-1,tt=-1,Y=!1,X=!1;var U=-1;let nt=0;for(var W=I?x:B.length,G=0;G<W;G++){var b=B.charCodeAt(G);b>=L&&b<L+10?(0<tt&&w("digit follows $pc"),Y?nt++:(1>_&&0>ht&&(ht=G),_++,q++)):b===y.Jg.charCodeAt(0)?(0<tt&&w("digit follows $pc"),Y&&w("$od follows $es"),0<_&&w("$od follows $md in $ip"),0>ht&&(ht=G,X=!0),q++):b===y.je.charCodeAt(0)?(0<st.length&&w("$gs follows $pc"),Y&&w("$gs follows $es"),$.push(G)):b===y.pd.charCodeAt(0)||b===y.te.charCodeAt(0)?I?w("$pp before $ds"):(0>ht&&w("$pp before any digit"),0<tt&&w("$pp follows $pc"),Y&&w("$pp follows $es"),st.push(b),0>tt&&(tt=G),b===y.pd.charCodeAt(0)?g.pd=!0:g.te=!0):!I&&0<=ht&&b===y.wc.charCodeAt(0)&&0>tt?Y?(st.push(b),0<nt?0>tt&&(tt=G):(st.push(b),Y=!1,U=-1,0>tt&&(tt=G-1))):(Y=!0,U=G):0<=ht&&I?w("$pc before $ds"):Y&&nt===0?(Y=!1,U=-1,st.push(y.wc.charCodeAt(0)),st.push(b),0>tt&&(tt=G-1)):0<=ht?(st.push(b),0>tt&&(tt=G)):rt.push(b)}if(0<$.length){let s=I?x:Y?U:0<tt?tt:B.length;$=$.map(function(p){return s-p-1}).reverse()}if($.length!==0)for($[0]===0&&w("$gs at end of $ip"),U=0;U<$.length-1;U++)$[U]+1===$[U+1]&&w("consecutive $gs in $ip");if(G=W=0,b=[],I){I=-1,B=B.substring(x+1);for(let s=0;s<B.length;s++){let p=B.charCodeAt(s);p>=L&&p<L+10?Y&&0>tt?nt++:0<=I||0<=tt?w("$md follows $od or $pc in $fp"):(W++,G++):p===y.Jg.charCodeAt(0)?((0<=tt||Y)&&w("$od follows $pc or $es"),0>I&&(I=s),G++):p===y.je.charCodeAt(0)?((0<=tt||Y)&&w("$gs follows $pc or $es"),b.push(s-x+1)):p===y.Qe.charCodeAt(0)?w("more than one $ds"):p===y.pd.charCodeAt(0)||p===y.te.charCodeAt(0)?((0<=tt||Y)&&w("$pp follows $pc or $es"),st.push(p),tt=s,p===y.pd.charCodeAt(0)?g.pd=!0:g.te=!0):p===y.wc.charCodeAt(0)&&0>tt?Y?(st.push(p),0<nt?0>tt&&(tt=s):(st.push(p),Y=!1,U=-1,0>tt&&(tt=s-1))):(Y=!0,U=s):Y&&nt===0?(Y=!1,U=-1,st.push(y.wc.charCodeAt(0)),st.push(p),0>tt&&(tt=s-1)):(st.push(p),0>tt&&(tt=s))}}if(0>ht&&G===0&&w("mantissa contains no digits"),b.length!==0)for(b[0]===0&&w("$gs at beginning of $fp"),x=0;x<b.length-1;x++)b[x]+1===b[x+1]&&w("consecutive $gs in $fp");return _===0&&G===0&&(Y?G=W=1:_=1),Y&&_===0&&X&&(_=1),_===0&&W===0&&(W=1),g.Ze=_,g.prefix=rt,g.Pb=$,g.qh=X,g.oj=q,g.re=W,g.qe=G,g.Qf=b,g.Tg=nt,g.wc=y.wc?y.wc:"e",g.Td=st,g}function n(B){return Math.floor((B.getTime()-new Date(Date.UTC(B.getUTCFullYear(),0,1)).getTime())/864e5)+1}function r(B,y){let w=y?n(B):B.getUTCDate();B=new Date(Date.UTC(B.getUTCFullYear(),y?0:B.getUTCMonth(),1));let g=B.getUTCDay();return g===0&&(g=7),4<g&&8>=g+w?r(new Date(B.getTime()-864e5),y):Math.floor((w+g-2)/7)+(5>g?1:0)}let h=at,m=h.Ha,c=ot.XS,P={"decimal-separator":"46","grouping-separator":"44",digit:"35","minus-sign":"45",percent:"37","per-mille":"8240","zero-digit":"48","exponent-separator":"101","pattern-separator":"59",infinity:"Infinity",NaN:"NaN"},Q={Y:"getUTCFullYear",M:"getUTCMonth",D:"getUTCDate",F:"getUTCDay",H:"getUTCHours",m:"getUTCMinutes",s:"getUTCSeconds",f:"getUTCMilliseconds"},H={d:n,W:function(B){return r(B,!0)},w:function(B){return r(B,!1)},h:function(B){return 13>B.getUTCHours()?B.getUTCHours()===0?12:B.getUTCHours():B.getUTCHours()-12},P:function(B){return 12>B.getUTCHours()?"Am":"Pm"},E:function(B){return 0>B.getUTCFullYear()?"BC":"AD"}};return{jj:function(B,y){let w=y.fixed.fa,g=B.level,x=w.ba(B,"select"),I=w.ba(B,"count");return B=w.ba(B,"from"),e(g,x,I,B,y)},kj:function(B,y){var w=y.fixed.fa;let g=w.ba(B,"value"),x=w.ba(B,"format"),I=w.mc(w.ba(B,"gpSep"),y).next(),L=w.mc(w.ba(B,"gpSize"),y).next();var _=w.mc(w.ba(B,"ordinal"),y).next();let q=w.mc(w.ba(B,"lang"),y).next();var $=B.flags||"";return B=w.ba(B,"startAt"),$=/1/.test($),w=w.evaluate(g,y),w=i(w,$,B,!0,y),_=_?ut.Zi(_.toString()):!1,w===null?kt("NaN"):t(w,x,I,L,_,q,y)},Of:E,Af:function(B,y,w){let g="";for(let x=0;x<B.length;x++)g+=B.charAt(x),(w===1||(B.length-x)%w===1)&&x<B.length-1&&(g+=y);return g},wi:function(B,y,w){let g=0>B?!0:B===0?0>1/B:!1;if(w={Qe:T(w,"decimal-separator"),je:T(w,"grouping-separator"),Jg:T(w,"digit"),gj:T(w,"minus-sign"),pd:T(w,"percent"),te:T(w,"per-mille"),Lh:T(w,"zero-digit"),wc:T(w,"exponent-separator"),ph:T(w,"pattern-separator"),Mi:w.infinity||P.infinity,hj:w.NaN||P.NaN},isNaN(B))return w.hj;if(y=y.includes(w.ph)?y.split(w.ph):[y],2<y.length)throw new F("Invalid picture: multiple pattern separators","FODF1310");let x=C(1<y.length&&0>B?y[1]:y[0],w);if(isFinite(B)){if(0<x.Tg){var I=x.Ze,L=x.re,_=x.qe,q=x.wc,$=I===1&&x.qh;$&&(I=0,L===0&&(L=1,_===0&&(_=1)));var rt=x.Tg;B=gt(B);let tt=B.c;var st=I!==0?I+_:_,ht=B.e;for(tt.length>st&&(B=gt(B.toPrecision(st))),(st=ht!==B.e)&&(I+=1),1<I?B=B.Nb(gt(10).pow(I-1)):I===0&&(B=B.Vb(gt(10))),L=I!==0?I+L:L,tt=B.c;tt.length<L;)tt.push(0);if(L="",0<tt.length){if(I===0&&x.qh)L+="0";else for(ht=0;ht<I;ht++)L+=tt[ht];!(0<_&&tt.length>I)||$&&st||(L+="."+tt.join("").slice(I))}else throw new F("Empty mantissa","SXJS0004");I=L+q+u(B.e,rt)}else{if(_=Math.abs(B),x.pd&&(_=Math.abs(100*B)),x.te&&(_=Math.abs(1e3*B)),_+""=="Infinity"?I=_+"":I=999999>_?_.toString():gt(_).toFixed(),_=I.indexOf("."),0>_&&(_=I.length,0<x.re&&(I+=".")),0<=x.qe&&I.substring(_)!=="."&&_!==I.length&&(0<x.qe?(I=gt(I).round(x.qe,1).toString(),0>I.indexOf(".")&&(I+=".0")):I=gt(I).round(0,1).toString()),q=I.length-1-_,0<x.re)for(;q<x.re;)I+="0",q++;for(;_<x.Ze;)I="0"+I,_++;0<q&&x.Ze===0&&I.substring(0,_)==="0"&&(I=I.substring(_)),I==="0"&&x.Ze===0&&x.re===0&&0<x.qe&&(I=".0")}for(_="",q=0;10>q;q++)_+=String.fromCharCode(w.Lh.charCodeAt(0)+q);for(_+=w.Qe,q="",$=0;$<I.length;$++)rt=I.charAt($),B="0123456789.".indexOf(rt),0>B?q+=rt:B<_.length&&(q+=_.charAt(B));if(_=q,0<x.Pb.length||0<x.Qf.length){if(q=_.indexOf(w.Qe),0>q&&(q=_.length),I=_.substring(0,q),_=_.substring(q),0<x.Pb.length){for(q=!0,$=1;$<x.Pb.length;$++)if((x.Pb[$]+1)%(x.Pb[0]+1)!==0){q=!1;break}q&&x.oj+x.Pb.length-x.Pb[x.Pb.length-1]-1>x.Pb[0]&&(q=!1),I=q?Se.Af(I,w.je,x.Pb[0]):S(I,x.Pb,null,w.je)}0<x.Qf.length&&(_=S(_,x.Qf,null,w.je,!0)),_=I+_}}else _=w.Mi;return 0<x.prefix.length&&(_=Ct.ac(x.prefix)+_),0<x.Td.length&&(_+=Ct.ac(x.Td)),g&&y.length===1&&(_=w.gj+_),_},Dd:function(B,y,w,g,x){if(/\[/g.test(w)&&!/\[(\[|[^\]]*\])|\]\]/g.test(w))throw new F("Date format picture '"+w+"' doesn't match required syntax","FOFD1340");let I="";return typeof g<"u"&&g!==null&&g.toString()!=="en"&&(I+="[Language: en]"),typeof x>"u"||x===null||x.toString()==="AD"||/(Q\{\})?ISO/.test(x.toString())||(I+="[Calendar: AD]"),I+w.replace(/\[(\[|[^\]]*\])|\]\]/g,function(L){if(L==="[[")var _="[";else if(L==="]]")_="]";else{var q=L.substring(1,L.length-1).replace(/\s+/g,"");if(L=q.match(/^([YMDdWwFHhmsfZzPCE])(.*)$/),L===null)throw new F("Date/time component ["+q+"] not recognised","FOFD1340");var $=L[1];if(L=L[2]||"",B==="date"&&/[HhPmsf]/.test($)||B==="time"&&/[YMDdFWwCE]/.test($))throw new F("Date/time component ["+q+"] not available in "+B,"FOFD1350");if((q=L.lastIndexOf(","))!==-1){var rt=L.substring(q+1).split("-");L=L.substring(0,q);var st=rt[0];if(rt=rt[1]||"*",st!=="*"&&1>st||rt!=="*"&&1>rt||st!=="*"&&rt!=="*"&&st>rt)throw new F("Invalid width modifier in date/time formatting picture","FOFD1340")}var ht=null;if(1<L.length&&/[atco]/.test(L.charAt(L.length-1))?(q=L.substring(0,L.length-1),ht=L.charAt(L.length-1)):q=L,L=!0,!/^[\x01-\x7f]*$/.test(q)){if(q.length!==Ct.La(q).length)throw new F("Cannot handle non-BMP characters in date/time formatting picture","SXJS0002");L=!1}if(/[Zz]/.test($))if(rt=Mr(y)==="Z"?"+00:00":Mr(y),st=$,$=q,q=ht,rt==="")_=$==="Z"?"J":"";else if(st=st==="z"?"GMT":"",q==="t"&&rt==="+00:00"&&$!=="Z"&&$!=="N")_="Z";else if($==="")_=st+rt;else{if(q=rt.match(/^([+\-])([0-9])([0-9]):([0-9]{2})$/),$==="Z"||$==="N"){if($==="Z")_=parseInt(q[1]+q[2]+q[3],10),_=-12>_||12<_||q[4]!=="00"?rt:"YXWVUTSRQPONZABCDEFGHIKLM".charAt(_+12);else if($==="N")throw new F("Timezone names not implemented","SXJS0002")}else L&&!/[0-9]+/.test($)&&($="00:00"),rt=0,L||(_=l($,"FOFD1340"),$=_.format,rt=_.diff),/[^0-9A-Za-z]/.test($)?(_=$.match(/^([0-9]+)([^0-9A-Za-z])([0-9]+)$/),_=q[1]+(q[2]==="0"&&_[1].length===1?q[3]:q[2]+q[3])+_[2]+q[4]):(_=$.match(/^[0-9]+$/),_=_[0],_=q[1]+((q[2]!=="0"||_.length!==1&&_.length!==3?q[2]+q[3]:q[3])+(2<_.length?q[4]:q[4]!=="00"?":"+q[4]:""))),L||(_=A(_,rt));_=st+_}else{_=y.proxy();var tt=Q[$]?_[Q[$]]():H[$]?H[$](_):null;if(tt===null)throw new F("Component specifier not implemented: ["+$+"]","SXJS0002");if($==="M"?tt++:$==="F"&&tt===0&&(tt=7),q===""&&(q=/[FPCE]/.test($)?"n":/[ms]/.test($)?"01":"1"),$==="f"){for(ht=tt,$=q,_=st,st=rt,rt=L,L=0,rt||(L=l($,"FOFD1340"),$=L.format,L=L.diff),q=ht.toString();3>q.length;)q="0"+q;if(ht=Ct.La(q),q=parseInt(Ct.ac(ht.reverse()),10),!_&&!st&&/^[0-9]$/.test($))for(;ht.length>$.length;)$+="#";if(_&&_!=="*"){for(tt=/^([0-9]*)(#*)$/.exec($),$=tt[1]?tt[1]:"",tt=tt[2]?tt[2]:"";_>$.length;)$+="0",tt=tt.slice(0,-1);$+=tt}if(st)for(st==="*"&&(st=ht.length);$.length<st;)$+="#";for(st=Ct.ac(Ct.La($).reverse()),st=E(q,st,"FOFD1340"),st=Ct.ac(Ct.La(st).reverse());st.length>$.length;)st=st.slice(0,-1);_&&_!=="*"||parseInt(st,10)!==0||(st="0"),rt||(st=A(st,L)),_=st}else{if(/[nN]/.test(q))_="January February March April May June July August September October November December".split(" "),L="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ht=$==="M"?_[tt-1]:$==="F"?L[tt-1]:tt,$==="F"&&rt&&rt!=="*"&&6>rt&&(ht=ht.replace(/(ur)?day$/,""),ht=ht.replace(/nes$/,"s")),q==="n"?ht=ht.toLowerCase():q==="N"&&(ht=ht.toUpperCase()),rt&&rt!=="*"&&(ht=ht.substring(0,rt));else{if(_=/;/.test(q)?q+";":q,ht&&(_+=(_.charAt(_.length-1)===";"?"":";")+ht),ht=E(tt,_,"FOFD1340"),$==="Y"&&ht.charAt(0)==="-"&&(ht=ht.substring(1)),$==="Y"&&/[^iIwWnN]/.test(q.charAt(q.length-1))&&(!st&&q.length===2||rt==2))for(;2<ht.length;)ht=ht.substring(1);if(st&&(rt=st==="*"?0:parseInt(st,10),0<rt&&ht.length<rt))if(/[YMDdWwHhms]/.test($)&&/[^iIwWnN]/.test(q.charAt(q.length-1)))for($="0",L||($=String.fromCharCode(l(_,"FOFD1340").zeroDigit));ht.length<rt;)ht=$+ht;else if($==="Y"&&/[iIwWnN]/.test(q.charAt(q.length-1)))for(;ht.length<rt;)ht+=" ";else throw new F("Not implemented min width modification with specifier "+$+" and format "+q,"SXJS0002")}_=ht}}}return _})}}}(),Dr="\u03A3",Sr=Dr+"2";function So(e){function t(u,l){l<<=8;for(let A=0;A<u.length;A++)l=(l<<1)+u.charCodeAt(A);return l}function i(u,l,A){return t(u,A)^t(l,A)}function f(u){v^=i(u.N,"http://ns.saxonica.com/xslt/export",a++);for(let l in u)!u.hasOwnProperty(l)||l==="N"||l==="C"||l==="ELAB"||l==="PUSH"||l==="parentNode"||u.N==="catch"&&l==="test"||l===Dr||l===Sr||(v^=i(l,"",a),v^=t(u[l],a));u.C&&u.C.forEach(function(l){f(l)}),v^=1}let v=0,a=0;return f(e),v}function Co(e){let t=e[Dr]||"unspecified";if(t==="unspecified")throw new F("No checksum found in SEF","SXJS0006");if(e=So(e),(0>e?4294967295+e+1:e).toString(16)!==t)throw new F("Invalid checksum in SEF: "+t,"SXJS0006")}function vu(e){function t(a,u,l){return f+=l.toString(),f+=a,f+=l.toString(),f+=u,0}function i(a){t(a.N,"http://ns.saxonica.com/xslt/export",v++);let u=[];for(let l in a)!a.hasOwnProperty(l)||l==="N"||l==="C"||l==="ELAB"||l==="PUSH"||l==="parentNode"||a.N==="catch"&&l==="test"||l===Dr||l===Sr||l==="PRIMED"||u.push(l);u.sort(),u.forEach(l=>{t(l,"",v),l=a[l],f+=v.toString(),f+=l}),a.C&&a.C.forEach(function(l){i(l)})}let f="",v=0;return i(e),f}let Tu=function(){function e(l,A){return l.ob===A.ob?l.Jc===A.Jc?l.Md===A.Md?A.sh-l.sh:l.Md-A.Md:l.Jc-A.Jc:l.ob-A.ob}function t(l,A){return l.ob===A.ob?l.Jc===A.Jc?0:l.Jc-A.Jc:l.ob-A.ob}function i(l,A){function S(O){return O.n?[O.n.replace(/^(\*:|Q\{.*\})/,"")]:O.u?S(O.u[0]).concat(S(O.u[1])):[]}this.Fe=l,this.nh=l.onNo,this.mh=A.ib(l,"t"),A.ib(l,"F")&&(this.Kf=!0),this.zg=(l.C||[]).filter(O=>O.role!=="eventOptions").map(O=>({Kd:O,ob:parseInt(O.prec,10),Jc:parseFloat(O.prio),Md:parseInt(O.seq,10),fj:parseInt(O.minImp,10),sh:parseInt(O.rank,10),pattern:Re.kd(A.ba(O,"match")),matches:Ie(O.matches||"1"),action:A.ba(O,"action")})).sort(e).reverse(),this.$b={},this.zg.forEach(O=>{let M=O.matches.V(),d,o=[];/^N[EAP]/.test(M.p)?(d=M.p,M.n&&!/}\*$/.test(M.n)?(d+=" "+M.n.replace(/^(\*:|Q\{.*\})/,""),o=[d]):o=M.u?[...new Set(S(M))].map(E=>d+" "+E):[d]):o=["."],o.forEach(E=>{let T=this.$b[E];T||(this.$b[E]=T=[]),T.push(O)})})}let f=ot.XS,v=at.Ha,a={TC:function(l,A,S,O){if(at.U(l))switch(l.nodeType){case 9:case 11:case 1:S=S.X(!1),S.focus=Lt(v.Ia(l)),A.zb(S,O);break;case 3:case 4:O.append(l);break;case 2:O.text(l.value)}else if(f.anyAtomicType.matches(l))O.text(l.toString());else if(ut.isArray(l)){let M=[];l.value.forEach(d=>{M=M.concat(d)}),l=S.X(!1),l.focus=Lt(wt(M)),A.zb(l,O)}},SC:function(l,A,S,O){return Gt.hg(l,S,"c",function(){let M=S.X(!1);M.focus=Lt(v.Ga(l)),A.zb(M,O),M.focus=Lt(v.Ia(l)),A.zb(M,O)},O)},DC:function(l,A,S,O){at.U(l)&&(O.lb=at.baseURI(l)),O.append(l)},DS:function(l,A,S,O){if(at.U(l))switch(l.nodeType){case 9:case 11:S=S.X(!1),S.focus=Lt(v.Ia(l)),A.zb(S,O)}},SS:function(l,A,S,O){if(at.U(l))switch(l.nodeType){case 9:case 11:case 1:S=S.X(!1),S.focus=Lt(v.Ga(l)),A.zb(S,O),S.focus=Lt(v.Ia(l)),A.zb(S,O)}else if(ut.isArray(l)){let M=[];l.value.forEach(d=>{M=M.concat(d)}),l=S.X(!1),l.focus=Lt(wt(M)),A.zb(l,O)}},bubble:function(l,A,S,O){at.U(l)?l.nodeType===1&&(S=S.X(!1),S.focus=Lt(v.parent(l)),A.zb(S,O)):O.append(l)}};a.TO=a.TC;let u={1:"NE",2:"NA",3:"NT",7:"NP",8:"NC",9:"ND",11:"ND",13:"NN"};return i.prototype={Fe:null,zg:null,nh:"TC",mh:!1,Kf:!1,zb:function(l,A,S){if(S){let O=!0;l.focus.forEachItem(M=>{O?O=!1:A.text(S.value,{}),this.Ge(M,l,A)})}else l.focus.forEachItem(O=>this.Ge(O,l,A))},Xh:function(l,A){let S=l.Wa;if(!S)throw new F("No current template rule","XTDE0560");return this.Ge(ue(l),l,A,function(O){return O.ob>=S.fj&&O.ob<S.ob})},ij:function(l,A){let S=l.Wa;if(!S)throw new F("No current template rule","XTDE0560");return this.Ge(ue(l),l,A,function(O){return 0>e(O,S)})},vi:function(l,A,S){let O=null,M=null,d=this.Kf;var o=[];if(at.U(l)){let T=u[l.nodeType];var E=at.aa(l);(E=E?E.local:null)&&(E=T+" "+E,this.$b[E]&&o.push(this.$b[E])),this.$b[T]&&o.push(this.$b[T]),this.$b.N&&o.push(this.$b.N)}if(this.$b["."]&&o.push(this.$b["."]),function(T){T.forEach(C=>{C.forEach(function(n){if((!S||S(n))&&(!O||0<e(n,O)||d&&0<=t(n,O))){let r=!1;try{r=Re.matches(n.pattern,l,A)}catch{}r&&(M=O,O=n)}})})}(o),this.Kf&&O&&M&&t(O,M)===0&&O.Md!==M.Md)throw o="Multiple templates matched item ("+Z.showValue(l)+"): ",o+=O.Kd.module+"#"+O.Kd.line,o+=" and "+M.Kd.module+"#"+M.Kd.line,new F(o,"XTDE0540");return O},eh:function(){let l=this.Fe.name;return l&&l.startsWith("Q{"+Ft.jd+"}")},Ge:function(l,A,S,O){var M=A.fixed.fa;if(O=this.vi(l,A,O),O!==null)M.Ff(O.Kd,A),A.Wa=O,A.ab=A.oa,O.action||Z.ka("Template rule without action child"),Gt.push(O.action,A,S);else{var d;if(this.eh()?d="bubble":d=this.nh.split("+")[0],M=a[d])M(l,this,A,S);else throw new F("No matching template rule for "+Z.showValue(l),"XTDE0555")}}},i}();class vo{constructor(t,i,f,v){this.principalResult=t,this.resultDocuments=i,this.stylesheetInternal=f,this.masterDocument=v}}class Cr{constructor(t,i){this.destination=t,this.save=i}}class Bu extends Cr{constructor(t,i){super(t,function(f,v){i[f.toString()]=v})}}let wn=function(){function e(r){function h(c){switch(c.nodeType){case 9:c.documentElement&&h(c.documentElement);break;case 11:case 1:var P=at.aa(c),Q=at.Ei(c,"xml:space");P=c.nodeType!==11&&m(P.uri,P.local)&&!(Q&&Q==="preserve"),Q=c.childNodes;let H=0;for(;H<Q.length;){let B=Q[H];if(B.nodeType===4){let y=at.nc(c).createTextNode(B.nodeValue);c.replaceChild(y,B),B=y}B.nodeType===3||B.nodeType===4?P&&Rt.trim(B.nodeValue)===""?c.removeChild(B):H++:(h(B),H++)}}}let m;if(r)if(r.N==="strip.all")m=()=>!0;else if(r.N==="strip.none")m=()=>!1;else{let c={},P={},Q={},H={},B={},y=function(g,x,I){g[x]?parseInt(I.ob,10)>parseInt(g[x].ob,10)&&(g[x]=I):g[x]=I};(r.C||[]).forEach(g=>{let x=Ie(g.test);x instanceof an?(g.PREC=parseInt(g.prec,10),g.PRIO=2,y(c,x.name.toEQName(),g)):x instanceof Gr?(g.PREC=parseInt(g.prec,10),g.PRIO=1,y(P,x.uri,g)):x instanceof dr?(g.PREC=parseInt(g.prec,10),g.PRIO=1,y(Q,x.localName,g)):x instanceof De?(g.PREC=parseInt(g.prec,10),g.PRIO=0,y(H,"*",g)):Z.ka("Unrecognised strip-space "+g.test)});let w=(g,x)=>{let I=[],L=c["Q{"+g+"}"+x];return L&&I.push(L),(g=P[g])&&I.push(g),(x=Q[x])&&I.push(x),H["*"]&&I.push(H["*"]),I.sort((_,q)=>{let $=_.PREC,rt=q.PREC;return $===rt?q.PRIO-_.PRIO:rt-$}),0<I.length?I[0].N==="s":!1};m=(g,x)=>{let I="Q{"+g+"}"+x,L=B[I];return L?L==="s":(g=w(g,x),B[I]=g?"s":"p",g)}}else m=()=>!1;return function(c){return h(c),c}}function t(r,h,m){function c(tt){return tt=new Du(tt),w.fixed.zi=tt,new Gt.zc(tt)}function P(){}function Q(){J.ra()&&!m.ag&&O(w)}var H=ut.Ba(r,"strip")[0]||ut.Ba(r,"strip.all")[0];let B=null;(H||J.ra())&&(B=e(H),h&&B&&(h=B(h))),m.Eh&&m.Eh(r),m.il=n;let y=m.async,w=M(r,h,m);w.fixed.pl=w.fixed.ud.Oa.version,d(w,function(tt){return tt.N==="globalParam"&&tt.flags&&tt.flags.indexOf("r")!==-1}).map(function(tt){return tt.name}).map(function(tt){if(!w.fixed.options.stylesheetParams.containsKey(ot.XS.QName.fromEQName(tt)))throw new F("No value has been provided for required stylesheet parameter '"+tt+"'","XTDE0050")}),w.fixed.ye=B,h&&(at.dc(h),w.fixed.Ta[h._saxonBaseUri]=h);let g=m.destination||"application",x=m.resultForm||"default";if(m.deliverResultDocument){let tt=m.deliverResultDocument("testURI");["document","serialized","raw"].includes(tt.destination)&&!tt.save&&(m.deliverResultDocument=function(){return new Bu(tt.destination,m.resultDocuments)})}m.deliverResultDocument||(J.ra()?m.deliverResultDocument=function(){return new Cr("html-page",function(tt,Y){m.resultDocuments[tt.toString()]=Y})}:m.deliverResultDocument=y?function(){return new Cr("file",function(tt,Y,X){Y=J.Ih(tt,Y,X),Z.xa("Promising to write to "+tt,2,w.fixed.Ka),w.fixed.hc.push(Y)})}:function(){return new Cr("file",function(tt,Y,X){Z.xa("Writing to "+tt,2,w.fixed.Ka),J.Jh(tt,Y,X)})});let I,L={};H=w.fixed.ud;var _=H.bg["#unnamed"];if(_){_=_.C;for(var q,$,rt=0;rt<_.length;rt++){let tt=_[rt].name;tt==="parameter-document"?q=_[rt].value:tt==="Q{http://saxon.sf.net/}parameter-document-base-uri"?$=_[rt].value:L[tt]=tt==="use-character-maps"?Ht.lf(tt,_[rt].value,H):Ht.mf(tt,_[rt].value)}q&&$&&(q=J.pb(q,$),q=Jt.xc(q,w),Ht.cf(q.documentElement,L))}if(m.Na)for(let[tt,Y]of Object.entries(m.Na))q=tt==="use-character-maps"?Array.isArray(Y)?Ht.mj(Y,H):Ht.bj(Y):Y,L[tt]=Ht.bf(tt,q,L[tt]);if(["appendToBody","prependToBody","replaceBody"].includes(g))if(J.ra()){w.da=window.document;let tt=un(w);P=function(){tt.$c=new Su(tt.$c);let Y=c(tt);return Y.Da(),Y},Q=function(){tt.wa(),tt.close();let Y=at.Ha.Ia(tt.result()[0]);if(Y){let X=window.document.body;if(g==="appendToBody")Y.forEachItem(function(U){X.appendChild(U)});else if(g==="prependToBody"){let U=X.firstChild;Y.forEachItem(function(nt){X.insertBefore(nt,U)})}else if(g==="replaceBody"){for(;0<X.childNodes.length;)X.removeChild(X.childNodes[0]);Y.forEachItem(function(U){X.appendChild(U)})}}else throw new F("No result from transformation","SXJS0006");J.ra()&&!m.ag&&O(w)}}else throw new F("Destination="+g+" is allowed only when running in the browser","SXJS0006");else if(["serialized","file","stdout"].includes(g)){let tt;if(g==="stdout")tt=J.Gi();else{let Y="",X=!1;tt={write:function(U){X=!0,Y+=U},end:g==="serialized"?function(){if(X){var U=kt(Y);U=$r(U,x)}else U=null;m.principalResult=U}:function(){var U=L.encoding||"utf-8";X&&(y?(U=J.Ih(new URL(m.Ab),Y,U),w.fixed.hc.push(U)):J.Jh(new URL(m.Ab),Y,U))}}}P=function(){return I=Ht.bh(L,tt,w),c(I)}}else if(["raw","document","application"].includes(g)){let tt=g==="document";g==="application"&&(typeof L["build-tree"]<"u"?tt=L["build-tree"]:tt=!0);let Y=un(w);P=function(){return I=Y,tt&&(I=new br(Y)),c(I)},Q=function(){if(Y.result().length===0)var X=null;else X=wt(Y.Gb),X=$r(X,x);m.principalResult=X,J.ra()&&!m.ag&&O(w,m.Zh)}}else throw new F("Invalid SaxonJS.transform() destination: "+g+" : "+typeof g,"SXJS0006");if(q=m.Qi,($=m.Ri)&&($=$.toString(),/^Q{/.test($)||($="Q{}"+$)),_=(_=m.Oi)?_.toString():r.defaultMode||"",_==="#unnamed"&&(_=""),_==="#default"&&(_=r.defaultMode||""),_!==""&&0>_.indexOf("Q{")&&(_="Q{}"+_),H=E(w,_),!H)throw new F("Unknown initial mode "+_,"XTDE0045");rt="Q{"+Ft.Qc+"}initial-template",h||q||$||T(w,rt)&&($=rt);let st=m.Ni;if(st){if(h=m.functionParams?m.functionParams:[],q=h.length,$=C(w,st.toString(),q),!$)throw new F("Unknown initial function "+st+"#"+q,"XTDE0041");if($.Oa.vis!=="PUBLIC"&&$.Oa.vis!=="FINAL")throw new F("Uninvocable initial function "+st+"#"+q+" with visibility "+$.Oa.vis,"XTDE0041");let tt=$.Oa.C[0];w.focus={},w.oa=$,Yn(w),w.pa="function",w.ab=H,w.Wa=null;let Y=0;w.ma=h.map(function(X){var U=tt.C[Y++].as;return U=on(U||"*"),ut.Gf(Yt(X),U,()=>"function parameter for "+st)}),h=P(),Gt.push(ut.ba(tt,"body"),w,h),h.close()}else if($){if(q=T(w,$),!q)throw new F("Unknown initial template "+$,"XTDE0040");$=q.actor,w.fixed.cd?w.focus=me(h):(w.focus=Lt(bt),w.focus.next()),ut.Ff($,w),w.oa=q,w.ab=H,i(m,w),h=P(),Gt.push($.C[0],w,h),h.close()}else{if(Array.isArray(q)&&B&&q.filter(at.U).map(function(tt){return at.Ye(tt)?tt:tt.ownerDocument}).map(function(tt){return B(tt)}),H.visibility==="PRIVATE"&&_!==r.defaultMode&&_!=="")throw new F("Uninvokable initial mode "+_+" with visibility "+H.Oa.vis,"XTDE0045");if(!h&&!q)throw new F("No source input supplied for apply-templates invocation","XTDE0044");$=H.mode,w.oa=H,w.focus=Lt(q?wt(Array.isArray(q)?q:[q]):At(h)),h=$.Fe.useAcc,h!=null&&h!=="#all"&&(w.ze=h.split(/\s+/)),i(m,w),h=P(),$.zb(w,h),h.close()}if(Q(),y){let tt=function(){let Y=w.fixed.hc;return w.fixed.hc=[],Promise.all(Y).then(()=>{if(0<w.fixed.hc.length)return tt()}).catch(X=>{throw X}).then(()=>Promise.resolve(new vo(m.principalResult,m.resultDocuments,r,m.masterDocument)))};var ht=tt;m.resultPromise=tt()}}function i(r,h){r.templateParams&&(Z.assert(r.templateParams instanceof It,"options?templateParams must be an instance of HashTrie. Supplied:"+r.templateParams),h.Fc=r.templateParams),r.tunnelParams&&(Z.assert(r.templateParams instanceof It,"options?tunnelParams must be an instance of HashTrie. Supplied:"+r.tunnelParams),h.tunnelParams=r.tunnelParams)}function f(r){let h="";for(let m in r)r.hasOwnProperty(m)&&r[m]&&(h+=m+"="+r[m].toString().substring(0,30)+"("+typeof m+"), ");return h}function v(r){let h=r.stylesheetInternal||null;if(!h){if(r.Hb)var m=J.ve(r.Hb);else if(r.stylesheetText)m=r.stylesheetText;else if(r.fc){if(J.ra())throw new F("Cannot supply stylesheetFileName in browser","SXJS0006");m=J.ve(r.fc)}else throw new F("No stylesheet supplied","SXJS0006");try{h=JSON.parse(m)}catch{throw new F("Supplied SEF is not in JSON format","SXJS0006")}}S(h,r),h.PRIMED||(Co(h),a(h),h.PRIMED=!0),h.relocatable==="true"&&(r.hd=!0),m=r.ff||null;let c;if(m&&(c=r.ff.baseURI||r.Qd)&&(m._saxonBaseUri=c),!m){let P;if(r.Nc)c=r.Nc,P=J.ve(c);else if(r.gf)c=r.Qd,P=r.gf;else if(r.Lc){if(J.ra())throw new F("Cannot supply sourceFileName in browser","SXJS0006");c=r.Lc,P=J.ve(c)}P&&(r.Ah==="json"?m=ln.od(P,null):(m=J.Sb(P),c&&(m._saxonBaseUri=m._saxonDocUri=c)))}return t(h,m,r),new vo(r.principalResult,r.resultDocuments,h,r.masterDocument)}function a(r){r.C&&r.C.forEach(function(h){h.parentNode=r,a(h)})}function u(r){if(r instanceof It)return r;let h=new It;return r&&Object.keys(r).forEach(m=>h.inSituPut(ot.XS.QName.fromEQName(m),Yt(r[m]))),h}function l(r){let h={};for(let[m,c]of Object.entries(r))h[m]=m==="use-character-maps"?c:Ht.bf(m,c,null);return h}function A(r){let h=(m,c)=>{let P=null;for(let Q of c)if(m[Q]){if(P)throw new F("The following transform options are mutually exclusive: "+c.toString(),"SXJS0006");P=Q}return P};return h(r,["stylesheetText","stylesheetInternal","stylesheetLocation","stylesheetFileName"]),h(r,["sourceNode","sourceText","sourceLocation","sourceFileName"]),{stylesheetText:r.stylesheetText,stylesheetInternal:r.stylesheetInternal,Hb:r.stylesheetLocation,fc:r.stylesheetFileName,Rd:r.stylesheetBaseURI,stylesheetParams:u(r.stylesheetParams),ff:r.sourceNode,gf:r.sourceText,Nc:r.sourceLocation,Lc:r.sourceFileName,Ah:r.sourceType||"xml",Qd:r.sourceBaseURI,masterDocument:r.masterDocument,Ri:r.initialTemplate,Ni:r.initialFunction,functionParams:r.functionParams,templateParams:u(r.templateParams),tunnelParams:u(r.tunnelParams),Oi:r.initialMode,Ta:r.documentPool,kb:r.textResourcePool,destination:r.destination,Ab:r.baseOutputURI||(r.masterDocument?r.masterDocument._saxonBaseUri:void 0),Na:r.outputProperties,principalResult:void 0,Jf:r.deliverMessage,deliverResultDocument:r.deliverResultDocument,uc:r.collations,Hg:r.collectionFinder,Ka:r.logLevel,Eh:r.traceInjector,cd:r.globalContextItem,Qi:r.initialSelection,oe:r.isDynamicStylesheet,hd:r.isRelocatableStylesheet,language:r.language,kh:r.messages,resultDocuments:{},resultForm:r.resultForm,Gk:r.extraOptions,ag:r.nonInteractive,Zh:r.attachEventsTo,async:r.async}}function S(r,h){if(r.N==="package"){let m=r.target||"not specified",c=r.targetVersion||"",P=r.saxonProduct;if(n=r.saxonVersion||"9.8.0.5",P&&!/Saxon/.test(n)&&(n=P+" "+n),Z.xa("SEF generated by "+n+" at "+(r.buildDateTime||"2000-01-01"),2,h.Ka),m!=="JS"||c!=="2"&&c!=="3")throw new F("Supplied SEF is not customized for use with SaxonJS. The option -target:JS should be set when generating the export. target is: "+m,"SXJS0006");if(n.charAt(0)==="9")throw new F("For use with SaxonJS 2+, SEF must be generated by SaxonJ-EE 10.0 or later. Supplied SEF is generated by SaxonJ-EE version "+n,"SXJS0006");if(r.expiry&&0>ot.XS.date.fromString(r.expiry).compareTo(ot.XS.date.fromDate(new Date,0)))throw new F("Development license for supplied stylesheet has expired","SXJS0006")}else throw new F("Supplied SEF does not have correct format","SXJS0006")}function O(r,h=null){function m(P,Q){let H={};var B=ut.ba(P.actor,"eventOptions");if(B){let w=r.X(!0);if(w.oa=P,B=ut.evaluate(B,w),B=re(B.next(),!0),B==null)throw new F("ixsl:event-options is null");if(typeof B!="object")throw new F("ixsl:event-options must be a map");for(let g in B)0<=["passive","once","signal"].indexOf(g)?H[g]=!!B[g]:g==="signal"?H[g]=B[g]:console.log("Ignoring invalid key in ixsl:event-options: "+g)}let y=P.mode;J.addEventListener(Q,function(w){let g=w.target;var x=r.X(!0);x.pa=!1,x.de=w,x.focus=Lt(At(Yt(g)[0])),x.oa=P,w=un(r),w=new Gt.zc(w),(x=y.zb(x,w))&&x.expand()},H,h)}let c=r.fixed.Ja;Object.keys(c).forEach(function(P){P=c[P],P.mode&&P.mode.eh()&&(P.name.split("}on")[1]?m(P,P.name.split("}on")[1]):console.log("Invalid event handler name:",P.name))})}function M(r,h,m){function c(w,g){P(r,w,g)}function P(w,g,x){w.N===g&&x(w),w.C&&w.C.forEach(function(I){P(I,g,x)})}function Q(w){return(w=w.name)?/^Q\{/.test(w)?w:"Q{}"+w:null}function H(w,g){function x(I){I=ut.Ba(I,"co");for(let L=0;L<I.length;L++)g(I[L])}x(w),w.C&&(w=w.C.filter(function(I){return I.N==="overridden"}),w[0]&&x(w[0]))}function B(w,g){let x=w.C?w.C[0]:null;return x===null?w.base?B(g.fixed.Ja[parseInt(w.base,10)].Oa,g):null:x}let y=new In;if(y.fixed={Ld:{},Ab:m.Ab||"",Ja:{},Bb:new Date,Ta:{},fa:ut,cd:m.cd||h,oe:m.oe,hd:m.hd,zf:0,options:m,nd:{},Tb:{},uh:{},staticBaseURI:"",kl:r,kb:{},ud:null,hc:[],gl:[],depth:0,Ka:m.Ka||Z.getLogLevel()},m.Ta){let w=m.Ta;Object.keys(w).forEach(g=>{let x=w[g];if(at.Ye(x))y.fixed.Ta[g]=x;else throw new F("Supplied value for "+g+" is not a document node")})}if(m.kb){let w=m.kb;Object.keys(w).forEach(g=>{y.fixed.kb[g]=w[g].toString()})}if(m.uc||(m.uc={}),m.uc[Bt.Vc]=Bt.Gg(),m.uc[Bt.Wg]=Bt.Le(),m.uc[Bt.Xf]=Bt.Ag(),m.uc[Bt.Kh]=Bt.Le(),c("package",function(w){let g={name:w.name,Oa:w,yb:{},Cg:{},bb:{},bg:{},keys:{},Fh:null};y.fixed.nd[g.name]=g,y.fixed.ud||(y.fixed.ud=g),H(w,function(x){let I=parseInt(x.id,10);y.fixed.Ja[I]={id:I,visibility:x.vis,Oa:x,oh:g,actor:null,Je:x.binds.split(" ").map(function(L){return parseInt(L,10)})}})}),c("package",function(w){let g=y.fixed.nd[w.name];if(H(w,function($){let rt=y.fixed.Ja[parseInt($.id,10)];$=rt.actor=B($,y),$!==null&&(rt.name=Q($),$.N==="globalVariable"||$.N==="globalParam"?rt.value=null:$.N==="mode"&&(rt.mode=new Tu($,ut),Q($)===null&&(g.Fh=rt.mode)),$.parentNode.vis==="ABSTRACT"&&(rt.visibility="ABSTRACT"))}),0<ut.Ba(w,"schema").length)throw new F("Package includes xsl:import-schema but SaxonJS is not schema-aware","XTSE1650");for(var x=ut.Ba(w,"decimalFormat"),I=0;I<x.length;I++){var L=x[I],_=Q(L);g.bb[_===null?"Q{}":_]=L}for(x=ut.Ba(w,"output"),I=0;I<x.length;I++)L=x[I],_=L.name?Q(L):"#unnamed",g.bg[_]=L;for(x=ut.Ba(w,"key"),I=Math.floor(1e8*Math.random()),L=0;L<x.length;L++){_=x[L];var q=Q(_);g.keys[q]?g.keys[q].Fd.push(_):g.keys[q]={lg:I+"k"+L,Fd:[_]}}for(x=ut.Ba(w,"accumulator"),I=Math.floor(1e8*Math.random()),L=0;L<x.length;L++)_=x[L],q=Q(_),g.yb[q]={lg:I+"a"+L,Uh:_};for(w=ut.Ba(w,"charMap"),x=0;x<w.length;x++){I=w[x],L=Q(I);let $={min:0,max:0,va:{}};I.C&&(I.C.forEach(function(rt){let st=Number(rt.c);($.min===0||st<$.min)&&($.min=st),st>$.max&&($.max=st),$.va[st]=rt.s}),55296<$.min&&($.min=55296)),g.Cg[L]=$}}),c("glob",function(w){let g=y.fixed.cd;if(w.use==="req"&&g==null)throw new F("The stylesheet requires a global context item","XTDE3086");if(w.use==="pro")y.fixed.cd=null;else{let x,I=w.cxt;if(I&&(x=Ie(I).ha()),g!==null&&x&&!x(g))throw new F("The global context item must be an instance of "+w.type,"XTTE0590")}}),y.nb=m.Ab?[m.Ab]:[],!m.oe&&m.hd&&(h="",m.Rd?h=m.Rd:m.Hb?h=m.Hb:m.fc?h=J.Mf(m.fc):J.ra()&&(h=J.Df()),y.fixed.staticBaseURI=h),m.oe&&m.hd&&m.Rd&&(y.fixed.staticBaseURI=m.Rd),J.ra()){if(y.masterDocument=m.masterDocument?m.masterDocument:window.document,m.Hb&&!at.fd(m.Hb))throw new F("stylesheetLocation should be absolute by now","SXJS0004")}else if(m.masterDocument){if(!at.U(m.masterDocument)||![9,11].includes(m.masterDocument.nodeType))throw new F("masterDocument must be a document node","SXJS0004");y.masterDocument=m.masterDocument}return y.masterDocument&&!y.masterDocument._saxonBaseUri&&y.masterDocument.baseURI&&(m=y.masterDocument.baseURI,h=m.indexOf("#"),y.masterDocument._saxonBaseUri=0<=h?m.substring(0,h):m),y.oa=null,y.da=J.createDocument(),y.j=y.da.createDocumentFragment(),y.ma=[],y.Fc=new It,y.tunnelParams=new It,y.qc={},y}function d(r,h){let m=[],c=ut.Ba(r.fixed.ud.Oa,"co");for(let P=0;P<c.length;P++){let Q=r.fixed.Ja[parseInt(c[P].id,10)],H=Q.actor;H&&h(H)&&m.push(Q)}return m}function o(r,h){let m=ut.Ba(r.fixed.ud.Oa,"co");for(let c=0;c<m.length;c++){let P=r.fixed.Ja[parseInt(m[c].id,10)],Q=P.actor;if(Q&&h(Q))return P}}function E(r,h){return o(r,function(m){return m.N==="mode"&&(m.name?m.name===h:h==="")})}function T(r,h){return o(r,function(m){return m.N==="template"&&m.name===h})}function C(r,h,m){return o(r,function(c){return c.N==="function"&&c.name===h&&ut.Ba(c,"arg").length===m})}let n=null;return{transform:function(r,h){function m(g){return g=J.pb(g.toString(),P),J.ra()?g:J.Mf(g)}h=!h||h==="sync",Z.xa((h?"Synchronous":"Asynchronous")+" transform with options: "+f(r),2,r.logLevel);let c;try{c=A(r),c.Na&&(c.outputProperties=l(c.Na))}catch(g){if(h)throw g;return Promise.reject(g)}let P=J.Df();if(c.Hb)var Q=c.Hb=m(c.Hb);else c.fc&&(Q=c.fc=m(c.fc));if(c.Rd=Q||c.Rd,c.Nc)var H=c.Nc=m(c.Nc);else c.Lc&&(H=c.Lc=m(c.Lc));if(c.Qd=H||c.Qd,h)return v(c);c.async=!0;let B,y,w;if(r=[],B=c.stylesheetInternal||null,!B)if(Q=c.stylesheetText)try{B=JSON.parse(Q)}catch(g){r.push(Promise.reject(new F("Error parsing supplied SEF: "+g,"SXJS0006")))}else c.fc?(Q=J.ec({file:c.fc,type:"json"}).then(g=>{B=JSON.parse(g)}).catch(g=>Promise.reject(new F("Failed to read JSON input "+c.fc+": "+g,"SXJS0006"))),r.push(Q)):c.Hb?(Q=J.ec({location:c.Hb,type:"json"}).then(g=>{B=JSON.parse(g)}).catch(g=>Promise.reject(new F("Failed to read JSON input "+c.Hb+": "+g,"SXJS0006"))),r.push(Q)):r.push(Promise.reject(new F("No stylesheet supplied","SXJS0006")));if(y=c.ff||null,w=c.Ah||"xml",y&&(Q=c.ff.baseURI||c.Qd)&&(y._saxonBaseUri=Q),!y){Q=(x,I)=>(x=J.Sb(x),I&&(x._saxonBaseUri=x._saxonDocUri=I),x),H=x=>ln.od(x,null);let g=w==="xml"?Q:H;c.gf?y=g(c.gf,c.Qd):c.Lc?(Q=J.ec({file:c.Lc,type:w}).then(x=>y=g(x,c.Lc)).catch(x=>Promise.reject(new F(`Failed to read ${w.toUpperCase()} source input (${x.message})`,"SXJS0006"))),r.push(Q)):c.Nc&&(Q=J.ec({location:c.Nc,type:w}).then(x=>{y=g(x,c.Nc)}).catch(x=>Promise.reject(new F(`Failed to read ${w.toUpperCase()} source input (${x.message})`,"SXJS0006"))),r.push(Q))}return Promise.all(r).then(()=>{let g="";return Sr in B&&(g=vu(B)),J.crypto(g)}).then(g=>{if(Sr in B){let x=B[Sr];if(Array.from(new Uint8Array(g)).map(I=>I.toString(16).padStart(2,"0")).join("")!==x)throw new F("Invalid hash in SEF: "+x,"SXJS0006")}}).then(()=>{var g=B,x=y,I=c;if(!g)throw new F("No stylesheet supplied","SXJS0006");try{S(g,I),g.PRIMED||(Co(g),a(g),g.PRIMED=!0),g.relocatable==="true"&&(I.hd=!0),t(g,x,I);var L=I.resultPromise}catch(_){throw console.log("Transformation failure: "+(_.getMessage?_.getMessage():_)),_}return L})},checkOptions:A,internalTransform:t}}();var St={},To={};St[0]="<eof>",St[1]="|",St[2]="/",St[3]="@",St[48]="~",St[4]="[",St[5]="(",St[6]="=",St[7]=",",St[8]="//",St[9]="or",St[10]="and",St[11]=">",St[12]="<",St[13]=">=",St[14]="<=",St[15]="+",St[16]="-",St[299]="-",St[17]="*",St[18]="div",St[19]="mod",St[20]="is",St[21]="$",St[22]="!=",St[40]="!",St[30]="||",St[23]="intersect",St[24]="except",St[25]="return",St[26]="then",St[27]="else",St[29]="to",St[31]="in",St[32]="some",St[33]="every",St[34]="satisfies",St[35]="<function>(",St[36]="<axis>",St[37]="if(",St[38]="<<",St[39]=">>",St[41]="::",St[42]=":*",St[44]="#",St[45]="instance of",St[46]="cast as",St[47]="treat as",St[50]="eq",St[51]="ne",St[52]="gt",St[54]="ge",St[53]="lt",St[55]="le",St[56]="idiv",St[57]="castable as",St[58]=":=",St[71]="as",St[75]=":",St[76]="=>",St[79]="otherwise",St[80]="andAlso",St[81]="orElse",St[201]="<name>",St[202]="<string-literal>",St[203]="]",St[204]=")",St[205]=".",St[206]="..",St[207]="*",St[208]="<prefix:*>",St[209]="<numeric-literal>",St[69]="<node-type>()",St[211]="for",St[70]="<*:local-name>",St[213]="?",St[59]="{",St[60]="<keyword> {",St[215]="}",St[216]="let",St[299]="-";function si(e,t){To[e]=t,St[t]=e}si("instance of",45),si("cast as",46),si("treat as",47),si("castable as",57);var oi={Hk:function(){return null}};for(let e in Ft)oi[e.toUpperCase()]=Ft[e];oi.kk=Ft.ic,oi.Ph=Ft.Qc;function ai(e){return e=e.charCodeAt(0),65<=e&&90>=e||97<=e&&122>=e}var Zi=Rt.Db;function Bo(e){let t=e.charCodeAt(0);return ai(e)||48<=t&&57>=t}function pe(e,t="XPST0003"){return new F(e,t)}function No(e="Illegal Argument"){return new F(e,"XPST0003")}function vr(e,t){e.ua=t,t===0?(e.$=-1,e.qa="",e.I=-1):t===jo&&(e.$=204,e.qa=")",e.I=204)}function Ce(e){for(e.$=e.j,e.qa=e.K,e.K=null,e.R=e.g;;){if(e.g>=e.J){e.j=0;break}var t=e.B.charAt(e.g++);switch(t){case"/":if(e.g<e.J&&e.B.charAt(e.g)==="/"){e.g++,e.j=8;return}e.j=2;return;case":":if(e.g<e.J){e.B.charAt(e.g)===":"?(e.g++,e.j=41):e.B.charAt(e.g)==="="?(e.j=58,e.g++):e.j=75;return}throw new pe("Unexpected colon at start of token");case"@":e.j=3;return;case"~":e.j=48;return;case"?":e.j=213;return;case"[":e.j=4;return;case"]":e.j=203;return;case"{":e.j=59;return;case"}":e.j=215;return;case"(":if(e.g<e.J&&e.B.charAt(e.g)===":"){for(e.g++,t=1;0<t&&e.g<e.J-1;)e.B.charAt(e.g)===`
`?zi(e):e.B.charAt(e.g)===":"&&e.B.charAt(e.g+1)===")"?(t--,e.g++):e.B.charAt(e.g)==="("&&e.B.charAt(e.g+1)===":"&&(t++,e.g++),e.g++;if(0<t)throw new pe("Unclosed XPath comment");Ce(e)}else e.j=5;return;case")":e.j=204;return;case"+":e.j=15;return;case"-":e.j=16;return;case"=":if(e.g<e.J&&e.B.charAt(e.g)===">"){e.g++,e.j=76;return}e.j=6;return;case"!":if(e.g<e.J&&e.B.charAt(e.g)==="="){e.g++,e.j=22;return}e.j=40;return;case"*":if((t=e.g<e.J&&e.B.charAt(e.g)===":"&&e.g+1<e.J)&&!(t=127<e.B.charAt(e.g+1))&&(t=e.B.charAt(e.g+1),t=ai(t)||t==="_"),t){e.g++,e.j=70;return}e.j=207;return;case",":e.j=7;return;case"$":e.j=21;return;case"|":if(e.g<e.J&&e.B.charAt(e.g)==="|"){e.g++,e.j=30;return}e.j=1;return;case"#":e.j=44;return;case"<":if(e.g<e.J&&e.B.charAt(e.g)==="="){e.g++,e.j=14;return}if(e.g<e.J&&e.B.charAt(e.g)==="<"){e.g++,e.j=38;return}e.j=12;return;case">":if(e.g<e.J&&e.B.charAt(e.g)==="="){e.g++,e.j=13;return}if(e.g<e.J&&e.B.charAt(e.g)===">"){e.g++,e.j=39;return}e.j=11;return;case".":if(e.g<e.J){var i=e.B.charAt(e.g);if(i==="."){e.g++,e.j=206;return}if(i==="{"){e.g++,e.K=".",e.j=60;return}}if(e.g===e.J||"0">e.B.charAt(e.g)||"9"<e.B.charAt(e.g)){e.j=205;return}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=!0;var f=!1,v=!0;t:for(;;){switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":f=!1;break;case".":if(v)f=v=!1;else{e.g--;break t}break;case"E":case"e":if(i)f=!0,i=!1;else{e.g--;break t}break;case"+":case"-":if(f)f=!1;else{e.g--;break t}break;default:if("a"<=t&&"z">=t||127<t)throw new pe("Separator needed after numeric literal"+Nu(e,e.g));e.g--;break t}if(e.g>=e.J)break;t=e.B.charAt(e.g++)}e.K=e.B.substring(e.R,e.g),e.j=209;return;case'"':case"'":for(e.K="";;){if(e.g=e.B.indexOf(t,e.g),0>e.g)throw e.g=e.R+1,new pe("Unmatched quote in expression");if(e.K+=e.B.substring(e.R+1,e.g++),e.g<e.J)if(e.B.charAt(e.g)===t)e.K+=t,e.R=e.g,e.g++;else break;else break}if(0<=e.K.indexOf(`
`))for(t=0;t<e.K.length;t++)e.K.charAt(t)===`
`&&zi(e,e.R+t+1);e.j=202;return;case`
`:zi(e,e.g);case" ":case"	":case"\r":e.R=e.g;break;case"\xB6":case"Q":if(e.g<e.J&&e.B.charAt(e.g)==="{"){if(i=e.B.indexOf("}",e.g++),i<e.g)throw new pe("Missing closing brace in EQName");if(t=e.B.substring(e.g,i),t=Rt.collapse(t),t.includes("{"))throw new pe("EQName must not contain opening brace");for(e.g=i+1,i=e.g,f=!1;e.g<e.J;)if(v=e.B.charAt(e.g),128<v||Bo(v)||v==="_"||v==="."||v==="-")e.g++;else{v==="*"&&i===e.g&&(e.g++,f=!0);break}e.K="Q{"+t+"}"+e.B.substring(i,e.g),e.j=f?208:201;return}default:if(128>t.charCodeAt(0)&&!ai(t))throw new pe("Invalid character '"+t+"' in expression");case"_":i=!1;t:for(;e.g<e.J;e.g++)switch(t=e.B.charAt(e.g),t){case":":if(i)break t;if(e.$===213||e.$===70){e.K=e.B.substring(e.R,e.g),e.j=201;return}if(e.g+1<e.J){if(t=e.B.charAt(e.g+1),t===":"){e.K=e.B.substring(e.R,e.g),e.j=36,e.g+=2;return}if(t==="*"){e.K=e.B.substring(e.R,e.g),e.j=208,e.g+=2;return}if(!(t==="_"||127<t||ai(t))){e.K=e.B.substring(e.R,e.g),e.j=201;return}}i=!0;break;case".":case"-":if(150<e.$&&e.$!==213&&e.$!==70&&zn(e.B.substring(e.R,e.g))!==-1&&(e.$!==201||zn(e.qa)===-1)){e.j=zn(e.B.substring(e.R,e.g));return}case"_":break;default:if(128>t.charCodeAt(0)&&!Bo(t))break t}e.K=e.B.substring(e.R,e.g),e.j=201;return}}}function Io(e,t){e.ua=0,e.j=0,e.K=null,e.R=0,e.g=0,e.B=t,e.lineNumber=0,e.Aa=0,e.J=t.length,Ce(e),e.next()}function zn(e){return e={or:9,is:20,to:29,in:31,eq:50,ne:51,le:55,lt:53,gt:52,ge:54,as:71,and:10,div:18,mod:19,idiv:56,then:26,else:27,case:67,where:28,union:1,except:24,return:25,otherwise:79,orElse:81,default:212,andAlso:80,intersect:23,satisfies:34}[e],[81,80].includes(e)?-1:e||-1}function zi(e,t=-1){e.lineNumber++,e.Aa++,e.na===null&&(e.na=[]),e.na.push(t===-1?e.g-1:t)}function Nu(e,t=null){var i=t||e.g;return" at line:"+Iu(e,t)+" col:"+Ou(e,t)+" near '"+e.B.slice(5>i?0:i-5,i+5)+"'"}function Oo(e){return e.g>e.J&&(e.g=e.J),34>e.g?e.B.substring(0,e.g):Rt.collapse("..."+e.B.substring(e.g-30,e.g)).toString()}function Po(e,t){if(e.na===null)return t;for(var i=e.na.length-1;0<=i;i--){var f=e.na[i];if(t>f)return i+1<<16|t-f}return t}function Iu(e,t=null){return t?Po(e,t)>>16:e.lineNumber}function Ou(e,t=null){return Po(e,t||e.ee)&32767}class Pu{constructor(){this.I=this.ua=0,this.T=null,this.j=this.ee=0,this.K=null,this.R=0,this.B=null,this.J=this.g=0,this.Aa=this.lineNumber=1,this.na=null,this.$=-1,this.qa=""}next(){switch(this.$=this.I,this.qa=this.T,this.I=this.j,this.T=this.K,this.T===null&&(this.T=""),this.ee=this.R,this.lineNumber=this.Aa,this.I){case 201:var t=zn(this.T);t===-1||150>=this.$||this.$===213||(this.I=t);break;case 207:150>=this.$||this.$===213||(this.I=17)}if(this.I!==215&&(t=this.$,Ce(this),this.I===201&&this.ua!==Gi&&t!==21))switch(this.j){case 5:var i=zn(this.T);i===-1||150>=t?(this.I=this.Ve(this.T),Ce(this)):this.I=i;break;case 59:this.ua!==Xo&&(this.I=60,Ce(this));break;case 41:Ce(this),this.I=36;break;case 44:Ce(this),this.I=43;break;case 42:Ce(this),this.I=208;break;case 21:this.T==="for"?this.I=211:this.T==="some"?this.I=32:this.T==="every"?this.I=33:this.T==="let"&&(this.I=216);break;case 201:t=this.T+" "+this.K,i=To[t],i!=null&&(this.I=i,this.T=t,Ce(this))}}Ve(t){let i={if:37,array:69,attribute:69,comment:69,"document-node":69,element:69,"empty-sequence":69,function:69,map:69,item:69,"namespace-node":69,node:69,"processing-instruction":69,"schema-attribute":69,"schema-element":69,switch:69,otherwise:79,text:69,tuple:69,typeswitch:69,union:69}[t];return i?["tuple","union"].includes(t)?35:i:35}}var Gi=1,Xo=2,jo=3,Xu=[!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!0,!1];function Wi(e){return"ancestor ancestor-or-self attribute child descendant descendant-or-self following following-sibling namespace parent preceding preceding-sibling self preceding-or-ancestor".split(" ")[e]}var ju=[1,1,2,1,1,1,1,1,13,1,1,1,1,1],Ru=[4,5,9,9,0,1,10,11,9,3,6,7,12];function _u(e){switch(e){case"self":return 12;case"child":return 3;case"parent":return 9;case"ancestor":return 0;case"attribute":return 2;case"following":return 6;case"namespace":return 8;case"preceding":return 10;case"descendant":return 4;case"ancestor-or-self":return 1;case"following-sibling":return 7;case"preceding-sibling":return 11;case"descendant-or-self":return 5}throw new pe("Unknown axis name: "+e)}function ui(e,t,i,f="XPTY0004"){this.kind=e,this.j=t,this.g=i,this.errorCode=f}ui.prototype={getErrorCode:function(){return this.errorCode},save:function(){let e=this.kind+"|"+this.g+"|";return e+=(this.errorCode==="XPTY0004"?"":this.errorCode)+"|",e+=this.j}};function we(e,t,i={}){e.start(t,i),t.end()}class $t{constructor(){this.l=Et.ya}start(t,i={}){t.start(this.O,i),this.role&&t.sd("role",this.role),this.Nf&&t.sd("sType",this.l.ga())}Rb(){return!qe(this.l.cardinality)}G(t){we(this,t)}}dt=$t.prototype,dt.O="Expression",dt.Rh=null,dt.kind=null,dt.role=null,dt.Nf=null,dt.Ca=function(e,t="XPTY0004"){return new ui(this.kind,this.O,e,t)},dt.Fa=function(){throw new pe(Z.Bj(this)+" is not a valid pattern","XTSE0340")},dt.Cd=function(){return this};class xn extends $t{constructor(t,i,f){super(),this.Qa=i,this.ca=t,this.ea=f,(this.ca.Ra||this.ea.Ra)&&(this.Ra=!0),this.ca.Cb&&this.ea.Cb&&(this.Cb=!0)}G(t){super.start(t,this.Qa?{op:St[this.Qa]}:{}),this.ca.G(t),this.ea.G(t),t.end()}}xn.prototype.kind=1;class Ke extends $t{constructor(t){super(),this.g=t,this.g.Ra&&(this.Ra=!0),this.g.Cb&&(this.Cb=!0)}G(t){super.start(t),this.g.G(t),t.end()}}Ke.prototype.kind=9;class Ye extends $t{constructor(){super(),this.l=Et.jc}Fa(){return this}G(t){we(this,t)}}class Ro extends Ye{}Ro.prototype.O="p.any";class Hi extends Ye{constructor(t){super(),this.message=t,this.role="match",this.l=Et.jc}G(t){we(this,t,{message:this.message})}}Hi.prototype.O="p.warning";class ts extends Ye{constructor(t){super(),this.g=t,this.l=Et.jc}G(t){super.start(t),this.g.G(t),t.end()}}ts.prototype.O="p.booleanExp";class es extends Ye{constructor(t){super(),Z.assert(t instanceof ae),this.test=t,this.l=new Vt(t,2)}G(t){we(this,t,{test:this.test.ga()})}}es.prototype.O="p.nodeTest";class ns extends Ye{constructor(t,i){super(),this.pattern=t,this.g=i,this.l=t.l,t.code&&(this.code=t.code)}G(t){super.start(t),this.code&&t.sd("code",this.code),this.pattern.G(t),this.g.G(t),t.end()}}ns.prototype.O="p.withPredicate";class rs extends Ye{constructor(t){super(),this.g=t,this.l=te(t.l,2)}G(t){super.start(t),this.g.G(t),t.end()}}rs.prototype.O="p.nodeSet";class yn extends Ye{constructor(t){super(),this.g=t,this.l=te(t.l,2)}G(t){super.start(t),this.g.G(t),t.end()}}yn.prototype.O="p.genNode";class _o extends Ye{constructor(t,i){super(),this.g=i,this.code=t.l.ga(),this.l=te(t.l,2)}G(t){super.start(t,{test:this.code}),this.g.G(t),t.end()}}_o.prototype.O="p.genPos";class is extends Ye{constructor(t,i){super(),this.code=t.ga(),this.Jd=i,this.l=te(t,2)}G(t){we(this,t,{test:this.code,pos:this.Jd})}}is.prototype.O="p.simPos";class ko extends Ye{constructor(t,i,f){super(),this.axis=Ru[t],this.gb=i,this.g=f,this.l=i.l}G(t){super.start(t,{axis:Wi(this.axis)}),this.gb.G(t),this.g.G(t),t.end()}}ko.prototype.O="p.withUpper";class ss extends Ye{constructor(t,i,f,v){super(),this.Qa=i,this.ca=t,this.ea=f,this.l=te(v,2)}G(t){super.start(t,{op:this.Qa===1?"union":St[this.Qa]}),this.ca.G(t),this.ea.G(t),t.end()}}ss.prototype.O="p.venn";function os(e){var t=[];return e.ca instanceof ci?t=os(e.ca):t.push(e.ca),e.ea instanceof ci?t=t.concat(os(e.ea)):t.push(e.ea),t}class ci extends ss{constructor(t,i,f){super(t,1,i,f)}}class Mo extends Ye{constructor(t){super(),this.g=t;for(var i of this.g)i.Nf=!0}G(t){super.start(t);for(var i of this.g)i.G(t);t.end()}}Mo.prototype.O="UnionExprP";function Gn(e){return e instanceof de&&e.value.length===1&&An.ha()(e.value[0])}function Ze(e,t){return new de(e,t)}function jn(){return new de([],Et.Be)}class de extends $t{constructor(t,i){super(),Array.isArray(t)||Z.ka("Literal value must be array"),i instanceof Vt&&i.itemType.ga||Z.ka("Literal type must be a SequenceType"),t&&(this.value=t,i&&(this.l=i)),this.role=null}toString(){return this.value.toString()}G(t){function i(f,v){let a=f.code,u={};switch(a){case"AB":break;case"AQ":u.pre=f.prefix,u.uri=f.uri,u.loc=f.local;break;default:u.val=f.toString()}switch(v&&(u.role=v),a){case"AS":t.start("str",u);break;case"AO":t.start("dbl",u);break;case"AB":t.start(f.value?"true":"false",u);break;case"AD":t.start("dec",u);break;case"ADI":t.start("int",u);break;case"AQ":t.start("qName",u);break;default:u.type=a,t.start("atomic",u)}t.end()}if(this.value.length===0)t.start("empty",this.role?{role:this.role}:{}),t.end();else if(this.value.length===1)i(this.value[0],this.role);else{let f={count:this.value.length};this.role&&(f.role=this.role),t.start("atomic",f);for(let v of this.value)i(v);t.end()}}}de.prototype.O="literal",de.prototype.Cb=!0;class ge extends de{constructor(t){super([ot.XS.string.fromString(t)],Et.Zb),this.l=Et.Zb}}function li(e,t,i,f,v){var a=le(e,Et.Yb,e.Ca(0,"XPTY0004"));if(a=new ku(a),/[lu]/.test(t))a.rd={flags:t+(v?"e":""),as:i.toEQName()};else{Z.assert(t==="a");try{if(e instanceof de&&e.value.length===1&&ot.la(e.value[0])&&f.V().p!=="AQ"){let u=f.Oc.cast(e.value[0]);return new de([u],new Vt(f,2))}}catch{}a.rd={flags:v?"ae":"a",as:f.ga()}}return a}class ku extends Ke{constructor(t){super(t),this.O="cast",this.kind=2,this.rd={}}G(t){super.start(t,this.rd),this.g.G(t),t.end()}}function Mu(e,t,i,f,v){var a=new Uu(e);if(a=le(a,Et.Yb,a.Ca(0,"XPTY0004")),/[lu]/.test(t))a.rd={flags:t+(v?"e":""),as:i.toEQName()};else{if(Z.assert(t==="a"),e instanceof de&&e.value.length===1&&ot.la(e.value[0])&&f.V().p!=="AQ")try{return f.Oc.cast(e.value[0]),new de([ot.XS.boolean.Rc],Et.Ya)}catch{return new de([ot.XS.boolean.Ud],Et.Ya)}a.rd={flags:v?"ae":"a",as:f.ga()}}return a}class Uu extends Ke{constructor(t){super(t),this.l=Et.Ya,this.O="castable",this.kind=2,this.rd={}}G(t){super.start(t,this.rd),this.g.G(t),t.end()}}class as extends Ke{constructor(t,i){super(t),this.j=i,this.l=Qn(t.l.itemType)?Et.yg:Et.wd}G(t){super.start(t,{diag:this.j}),this.g.G(t),t.end()}}as.prototype.O="data";class Uo extends as{constructor(t,i,f){super(t,i),this.B=f,Qn(t.l.itemType)?this.l=f?Et.uf:Et.xg:this.l=f?Et.Yb:Et.De}G(t){super.start(t,{diag:this.j}),this.B&&t.sd("card","?"),this.g.G(t),t.end()}}Uo.prototype.O="atomSing";class us extends $t{constructor(t){super(),this.name=t.itemType.name.toEQName(),this.l=Et.uf}G(t){we(this,t,{name:this.name})}}us.prototype.O="attVal";class cs extends Ke{constructor(t,i,f){super(t),this.code=i,this.j=f,this.l=Et.wd}G(t){super.start(t,{to:this.code,diag:this.j}),this.g.G(t),t.end()}}cs.prototype.O="cvUntyped";class fi extends Ke{constructor(t,i){super(t),this.type=i,this.flags="",this.l=new Vt(i.itemType,t.l.cardinality)}G(t){super.start(t,{to:this.type.ga().replace(/^[01?*+]/,""),flags:this.flags}),this.g.G(t),t.end()}}fi.prototype.O="convert";class Lo extends Ke{constructor(t,i,f){super(t),this.type=i,this.resultType=t.resultType,this.j=f,this.l=i}G(t){super.start(t,{to:this.type.ga().replace(/^[01?*+]/,""),diag:this.j}),this.g.G(t),t.end()}}Lo.prototype.O="fnCoercer";let Lu="array attribute comment document-node element empty-sequence function if item map namespace-node node processing-instruction schema-attribute schema-element switch text typeswitch".split(" ");class bn{constructor(t,i){if(t.prefix===""&&Lu.includes(t.local))throw new pe("The unprefixed function name '"+t.local+"' is reserved","XPST0003");this.name=t,this.arity=i}toEQName(){return this.name.toEQName()}toString(){return this.name.toEQName()+"#"+this.arity}}class Wn extends $t{constructor(t,i,f){super();let v=t.name.local;if(t.name.uri===Ft.ic){if(v==="NOTATION")throw new F("No constructor function exists for xs:NOTATION","XPST0017");let u=i[0].l;if(u.cardinality===2&&u.itemType.la()&&u.itemType.Oc&&v===u.itemType.Oc.name)t=i[0];else if(["NMTOKENS","ENTITIES","IDREFS"].includes(v))t=li(i[0],"l",t.name,null,!0);else{var a;v==="numeric"?a=li(i[0],"u",t.name,null,!0):a=li(i[0],"a",null,f.itemType,!0),t=a}return t}switch(this.name=t,this.g=i,this.l=f,v){case"exactly-one":this.l=te(i[0].l,2);break;case"head":this.l=te(i[0].l,je(i[0].l.cardinality)?3:2);break;case"tail":case"subsequence":this.l=te(i[0].l,7);break;case"ceiling":case"floor":case"reverse":case"snapshot":this.l=i[0].l;break;case"last":case"position":this.Ra=!0;break;case"string-length":case"normalize-space":i.length===0&&this.g.push(xe("string",new rn));break;case"fold-left":case"fold-right":this.l=i[2].resultType;break;case"for-each":this.l=te(i[1].l.itemType.We(),7);break;case"filter":this.l=te(i[0].l,7);break;case"current":this.Cb=!0;break;case"boolean":if(i[0].l.equals(Et.Ya))return i[0]}}Fa(){return new rs(this)}Rb(){if(this.name.uri===Ft.Ma)return"doc document element-with-id id innermost key outermost".split(" ").includes(this.name.local)?!0:"filter one-or-more subsequence remove tail trace unordered zero-or-more".split(" ").includes(this.name.local)?this.g[0].Rb():!1}G(t){super.start(t,{name:this.name.name.local});for(let i of this.g)i.G(t);t.end()}}Wn.prototype.O="fn";class Jo extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}Jo.prototype.O="ifCall";class ls extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f,(t=t.name.local==="merge")&&(t=i[0],t=!(t instanceof de&&t.value.length===0)),t&&(this.l=te(i[0].l,2))}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}ls.prototype.O="ifCall";class fs extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}fs.prototype.O="ifCall";class Ju extends Jo{}class Tr extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}Tr.prototype.O="ifCall";class hi extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}hi.prototype.O="ifCall";class $u extends hi{constructor(t,i,f){super(t,i,f);let v=new bn(ot.XS.QName.fromParts("ixsl",Ft.jd,"call"),3),a=new bn(ot.XS.QName.fromParts("ixsl",Ft.jd,"window"),0);this.name=v,this.g=[new hi(a,[],Et.jc),new ge(t.name.local),new nr(i)],this.l=f}}class hs extends $t{constructor(t,i,f,v,a){super(),this.name=t,this.Rh=i,this.g=f,this.l=v,this.j=a}G(t){super.start(t,{name:this.name.toEQName(),coId:this.j});for(let i of this.g)i.G(t);t.end()}}hs.prototype.O="ufCall";class mi extends $t{constructor(t){super(),this.name=t.name.name,this.rb=t.rb,this.arity=t.name.arity,this.l=t.l,this.resultType=t.resultType}G(t){we(this,t,{name:this.name.toEQName(),arity:this.arity,resultType:this.resultType.ga()})}}mi.prototype.O="fnRef";class ms extends mi{constructor(t){super(t),this.g=0}G(t){we(this,t,{name:this.name.toEQName(),arity:this.arity,resultType:this.resultType.ga(),bSlot:this.g})}}ms.prototype.O="ufRef";class Br extends $t{constructor(){super(),this.l=Et.ya}G(t){we(this,t,{asCode:"*"})}}Br.prototype.O="null";class Nr extends $t{}Nr.prototype.g={},Nr.prototype.B={},Nr.prototype.j={};class ps extends $t{constructor(){super(),this.l=Et.ya,this.slot=this.Ua=this.name=this.Wb=null}bd(){return this.name}toString(){return"$"+this.name+" as "+this.l.toString()}G(t){we(this,t,{name:this.name,asCode:this.l.ga(),slot:this.slot})}}ps.prototype.O="arg";class ds extends $t{constructor(t,i,f){super(),this.params=t,this.resultType=i;let v=[];t.forEach(a=>{v.push(a.l)}),f=le(f,i,this.Ca("body")),this.l=Je(new Ve(v,i)),this.arity=t.length,this.body=f,f.role="body"}G(t){super.start(t,{arity:this.arity,name:this.name,as:this.resultType.ga()});for(let i of this.params)i.G(t);this.body.G(t),t.end()}}dt=ds.prototype,dt.O="inlineFn",dt.kind=5,dt.Ca=function(e,t="XPTY0004"){return new ui(this.kind,"("+this.params.map(i=>i.toString()).join(",")+")"+(this.resultType?" as "+this.resultType.toString():""),e,t)},dt.name="inline",dt.Nf=!0;class pi extends $t{constructor(t,i,f){if(super(),t.l&&t.l.itemType instanceof Ve&&t.l.V().a.length!==i.length)throw new F("Partially-applied function requires "+t.arity+" arguments, but "+(i.length<t.arity?"only ":"")+i.length+" were supplied","XPTY0004");this.Ma=t;let v;t instanceof Os?(v=t.resultType,t.rb.hh?this.j=new ms({name:{name:t.name,arity:t.arity},rb:t.rb,l:t.l,resultType:v}):this.j=new mi({name:{name:t.name,arity:t.arity},rb:t.rb,l:t.l,resultType:v})):this.j=t,this.g=[];let a=0,u;if(t.rb){let l=t.rb.alphaTree,A=t.rb.variadic;i.forEach(S=>{var O=l.a[a];O=u||Be(O),S instanceof Br?S.l=O:S=le(S,O,this.Ca(a)),this.g.push(S),A&&(u=O),a++})}else i.forEach(l=>{this.g.push(l)});t.l.itemType instanceof Ve&&(this.l=Je(Au(t.l.itemType,f)))}G(t){super.start(t),this.j.G(t),this.g.forEach(i=>{i.G(t)}),t.end()}}pi.prototype.O="partialApply",pi.prototype.kind=5;class $o extends $t{constructor(t,i){super(),this.key=t,this.value=i,this.l=on("1FM")}toString(){return"map{"+this.key.toString+" : "+this.value.toString()+"}"}G(t){super.start(t),this.key.G(t),this.value.G(t),t.end()}}$o.prototype.O="map";class gs extends $t{constructor(t){super(),this.entries=t;let i=Ot.Gd(t.map(a=>a[0].l.itemType)),f=Ot.Gd(t.map(a=>a[1].l.itemType));t=t.map(a=>a[1].l.cardinality);let v=2;t.some(a=>je(a))&&(v+=1),t.some(a=>qe(a))&&(v+=4),this.l=Je(new gr(i,new Vt(f,v)))}toString(){let t="map{";return this.entries.forEach(i=>{t+=i[0].toString+" : "+i[1].toString()}),t+"}"}G(t){super.start(t),this.entries.forEach(i=>{i[0].G(t),i[1].G(t)}),t.end()}}gs.prototype.O="map";class ie extends $t{constructor(t,i){super(),Z.assert(!i||i instanceof ae),this.axis=t,this.O="axis",i=i||Vn,t===2&&i instanceof Kr?i=_i:t===3&&i instanceof Kr&&(i=ho),this.g=i,t===9&&i instanceof Kr?this.l=Et.Wd:i?this.l=new Vt(i,7):this.l=Et.Vd}wb(){return this.axis}Rb(){return[2,3,4,5,6,7,9,12].includes(this.axis)}Fa(){return new es(this.g)}G(t){we(this,t,{name:Wi(this.axis),nodeTest:this.l.ga()})}}class Hn extends xn{constructor(t,i){super(t,2,i),this.ca=t=le(t,Et.Vd,this.Ca(0,"XPTY0019")),this.l=Lr(i.l,t.l.cardinality)}Rb(){return!0}Fa(){if(this.ea instanceof Wn||this.ea instanceof de)throw new pe("Not an axis step for a pattern","XTSE0340");return this.Ra||!this.ea.wb||this.ea instanceof ua?new yn(this):new ko(this.ea.wb(),this.ea.Fa(),this.ca.Fa())}G(t){super.start(t,this.Qa?{op:St[this.Qa]}:{}),this.ca.G(t),this.ea.G(t),t.end()}}Hn.prototype.O="slash";class Ir extends $t{constructor(){super(),this.l=Et.Wd}Fa(){return new es(zr)}}Ir.prototype.O="root";let Qo={ADI:"i",ADIL:"c",ADILI:"i",ADILIS:"i",ADILISB:"i",ADIN:"c",ADINN:"c",ADIP:"c",ADIPP:"c",ADIPL:"c",ADIPLI:"i",ADIPLIS:"i",ADIPLISB:"i",AD:"c",AO:"d",AF:"f",A:"a",AZ:"a",AT:"t",AA:"t",AM:"t",AMP:"t",AH:"t",AI:"t",AJ:"t",AG:"t",AK:"t",ARD:"u",ARY:"u",E:"a"};var Qu={19:"%",18:"/",56:"~",15:"+",16:"-",299:"-",17:"*"};function Vo(e,t){return t=new cs(e,"AO",t.save()),t.l=e.l.cardinality===2?Et.Xd:Et.rg,t}class di extends xn{constructor(t,i,f,v){function a(r){return r instanceof Ee&&r.Oc.gb?new Ee(ot.qj(r.Oc)):r}function u(){throw new pe("Cannot evaluate "+S.toString()+" "+St[i]+" "+O.toString(),"XPTY0004")}super(t,i,f);let l=v.pe(),A=t.Ra||f.Ra;l&&(t=Fi(t),f=Fi(f)),t=le(t,Et.Yb,this.Ca(0)),f=le(f,Et.Yb,this.Ca(1));let S=a(t.l.itemType),O=a(f.l.itemType);var M=S.V().p,d=O.V().p;l||!/^AS/.test(M)&&!/^AS/.test(d)||u(),M!=="AZ"||l||(t=Vo(t,this.Ca(0,"FORG0001")),S=Fn,M="AO"),d!=="AZ"||l||(f=Vo(f,this.Ca(1,"FORG0001")),O=Fn,d="AO");var o=Qo[M];let E=Qo[d],T=S.isNumeric(),C=O.isNumeric();d=wr,M=je(t.l.cardinality)||je(t.l.cardinality),o||="a",E||="a";var n;if(l?(o=E="d",d=Fn):T&&C&&(o==="d"||E==="d"?(o=E="d",d=n=Fn):o==="f"||E==="f"?(o=E="f",d=n=Ji):o==="c"||E==="c"?(o=E="c",d=n=xr):o==="i"&&E==="i"&&i===18?(o=E="c",d=xr):o!=="i"||E!=="i"||i!==15&&i!==16&&i!==17&&i!==19?o==="i"&&E==="i"&&i===18&&(d=xr):d=Qi),i===56&&(d=Qi),d.isNumeric()&&n&&(n=new Vt(n,3),t=le(t instanceof xi?t.g:t,n,this.Ca(0)),f=le(f instanceof xi?f.g:f,n,this.Ca(1))),[o,E].includes("a")&&(o=E="a"),(S.la("ARY")&&O.la("AT")||O.la("ARY")&&S.la("AT"))&&u(),o==="t"&&E==="t"&&(i===16?d=xo:u()),o==="u"&&E==="t"&&(i===15?d=O:u()),o==="u"&&E==="u"&&(i===17&&u(),i===18?d=xr:d=S),T&&E==="u"&&i===18&&u(),o!=="t"||E!=="u"||i!==16&&i!==15?o==="i"&&E==="u"&&i===17?(o="n",d=O):o!=="u"||E!=="d"&&E!=="i"&&E!=="c"?E!=="u"||o!=="d"&&o!=="i"&&o!=="c"||(o="n",d=O):(d=S,E="n"):d=S,o=o+Qu[i]+E,!v.pe()&&d.V().p!=="AF"&&!v.Ec&&(!v.$h||v.$h===0)&&Gn(t)&&Gn(f)&&(v=t.value[0],n=f.value[0],i!==18||n.toNumber()!==0))return t=sn[o](v,n),Ze([t],new Vt(new Ee(ot.codes[t.code]),2));this.ca=t,this.ea=f,t.l.equals(f.l)&&(this.l=t.l),d&&(this.l=new Vt(d,M?3:2)),this.g=o,A&&(this.Ra=!0),l&&(this.O="arith10"),this.l||(this.l=Et.De)}Fa(){throw new pe("The arithmetic expression  "+St[this.Qa]+" is not a patternXTSE0340")}G(t){super.start(t,this.Qa?{op:St[this.Qa],calc:this.g}:{}),this.ca.G(t),this.ea.G(t),t.end()}}di.prototype.O="arith";let qo={6:50,22:51,11:52,12:53,13:54,14:55};function Ko(e,t){return e=e.V().p,t.V(),e==="AZ"&&t.isNumeric()?!1:(e==="A"&&t.la()||e===""&&t.la(),!0)}function gi(e){return/^A[BAMT2XQ]/.test(e)}class As extends xn{constructor(t,i,f,v){switch(super(t,i,f),t=v.Di(),i="GAC",t){case Bt.Xf:i="CAC"}t.startsWith(Bt.Fj)&&(i="CAC"),f.l===Et.wg&&(i="EQC"),this.Ad=i+"|"+t,this.l=Et.Ya}G(t){super.start(t,{op:St[this.Qa],comp:this.Ad}),this.ca.G(t),this.ea.G(t),t.end()}}class Yo extends As{G(t){super.start(t,{op:St[this.Qa],comp:this.Ad,card:"1:1"}),this.ca.G(t),this.ea.G(t),t.end()}}class Zo extends Yo{constructor(t,i,f,v){super(t,i,f,v),t=le(t,Et.wd,this.Ca(0)),f=le(f,Et.wd,this.Ca(1)),i=t.l.V(),v=f.l.V();var a=i.p,u=v.p;if(a===u||[a,u].includes("AZ")||[a,u].includes("A")?a=!0:(/^A[ODF]/.test(a)&&(a="AO"),/^A[ODF]/.test(u)&&(u="AO"),/^A[SU]/.test(a)&&(a="AS"),/^A[SU]/.test(u)&&(u="AS"),a=a==="E"||u==="E"?!0:a===u),!a)if(a="Cannot compare items of types "+t.l.itemType.toString()+" and "+f.l.itemType.toString(),/[*?]/.test(i.o)||/[*?]/.test(v.o))Z.xa(a+": the comparison can succeed only if one of the values is an empty sequence",1,null);else throw new pe(a,"XPTY0004");this.ca=t,this.ea=f}}Zo.prototype.O="gc";class zo extends Yo{}zo.prototype.O="gc10";class Or extends As{constructor(t,i,f,v,a=!0){super(t,i,f,v);var u=t.l.itemType,l=f.l.itemType;let A=u.V().p,S=l.V().p;if(!(A==="A"&&l.la()||S==="A"&&u.la()||A===""||S===""||u.V().p.startsWith("AM")&&l.V().p.startsWith("AM")||(gi(A)||gi(S)?A===S:Ko(u,l)||Ko(l,u))))throw new pe("Cannot compare "+t.l.toString()+" "+St[i]+" "+f.l.toString(),"XPTY0004");if(t=le(t,Et.Yb,this.Ca(0)),f=le(f,Et.Yb,this.Ca(1)),i!==51&&i!==50&&/^A[QGHIJK]/.test(t.l.itemType.V().p))throw new pe("Cannot order-compare "+t.l.toString()+" "+St[i]+" "+f.l.toString(),"XPTY0004");if(a){if(Gn(f)&&ot.XS.integer.matches(f.value[0])&&t.l.V().p==="ADI")return new Wo(t,i,f,v);if(f instanceof ge)return new Ho(t,i,f,v)}this.ca=t,this.ea=f}}Or.prototype.O="vc";class Go extends Or{constructor(t,i,f,v){super(t,i,f,v,!1)}G(t){super.start(t,{op:St[this.Qa],val:this.ea.value[0]}),this.ca.G(t),t.end()}}class Wo extends Go{}Wo.prototype.O="compareToInt";class Ho extends Go{G(t){super.start(t,{op:St[this.Qa],val:this.ea.value[0].toString(),comp:this.Ad}),this.ca.G(t),t.end()}}Ho.prototype.O="compareToString";class Vu extends As{constructor(t,i,f,v){super(t,i,f,v),t=le(t,Et.Wd,this.Ca(0)),f=le(f,Et.Wd,this.Ca(0)),this.ca=t,this.ea=f,this.O=i===38?"precedes":i===39?"follows":"is"}G(t){super.start(t),this.ca.G(t),this.ea.G(t),t.end()}}function Fs(e,t){return e instanceof Wn&&e.name.name.uri===Ft.Ma&&e.name.name.local===t}function ta(e,t){return e instanceof Or&&e.Qa===t&&Fs(e.ca,"position")&&Fs(e.ea,"last")}class Pr extends $t{constructor(t,i){if(super(),i){let v=Fs(i,"last")||ta(i,50);if(v)return new ea(t);v=v||ta(i,53);var f=i.Ra||i instanceof di;let a=i.Cb;if(!f&&a&&i.l.equals(Et.tc))return new Ai(t,i);f||(f=i.l.itemType.V().p,f=f==="AB"||f.startsWith("N")?!1:f==="A"||/^A[ODF]/.test(f)),this.g=t,this.l=t.l,i instanceof bs?this.l=te(i.type,this.l.cardinality):i instanceof de&&i.value.length===1&&An.ha()(i.value[0])&&(this.l=te(this.l,3)),f&&(this.Ra=!0),a&&(this.Cb=!0),this.j=v?new Es(i.Qa===50?"1":"0"):i}}wb(){return this.g.wb()}Rb(){return super.Rb()||this.g.Rb()}Fa(){if(!Qn(this.l.itemType)){let t=xe("exists",this);return new ts(t)}return this.Ra&&this.g instanceof ie&&!(this.j instanceof Es)?new _o(this.g,this.j):this.Ra?new yn(this.Cd()):new ns(this.g.Fa(),this.j)}Cd(){return this.g instanceof rn?this.j:(this.g=this.g instanceof ie?en(new rn,this.g):this.g.Cd(),this)}G(t){super.start(t);let i="";this.Cb&&(i+="i"),this.Ra&&(i+="p"),i!==""&&t.sd("flags",i),this.g.G(t),this.j.G(t),t.end()}}Pr.prototype.O="filter";class Ai extends Pr{constructor(t,i){if(super(t,null),Gn(i)&&ot.XS.integer.matches(i.value[0])&&i.value[0].value===1)return new tr(t);this.g=t,this.l=te(t.l,3),this.j=i,this.Ra=!0}Fa(){return this.g instanceof rn?new Hi("Numeric predicates other than 1 in PredicatePatterns never match. Value provided:"+this.j.value.value):this.g instanceof ie?new is(this.g.l,this.j.value[0].value):new yn(this.Cd())}}Ai.prototype.O="subscript";class tr extends Ai{constructor(t){super(t,null),this.g=t,this.Ra=!0,this.l=te(t.l,3)}Fa(){return Qn(this.l.itemType)?this.g instanceof ie?new yn(new tr(en(new rn,this.g))):new yn(this.Cd()):new ts(this)}G(t){super.start(t),this.g.G(t),t.end()}}tr.prototype.O="first";class ea extends Ai{constructor(t){super(t,null),this.g=t,this.Ra=!0,this.l=te(t.l,3)}Fa(){if(!(this.g instanceof ie))return new yn(this.Cd());if(this.g.axis===3){var t=new ie(7,this.g.g);return new ns(this.g.Fa(),xe("empty",[t]))}return new is(this.g.l,1)}G(t){super.start(t),this.g.G(t),t.end()}}ea.prototype.O="lastOf";class Es extends $t{constructor(t="1"){super(),this.test=t,this.l=Et.Ya}G(t){we(this,t,{test:this.test})}}Es.prototype.O="isLast";function na(e,t){if(e instanceof Ir&&t instanceof ie&&t.wb()===9)return jn();if(e instanceof Hn&&e.ca instanceof Ir&&e.ea.axis===5&&t instanceof ie&&t.axis===3)return na(e.ca,new ie(4,t.g));if(t instanceof Hn||t instanceof Rn&&t.g instanceof Hn){let i=ia(t);er(i.ca)instanceof ie&&er(i.ea)instanceof ie&&(e=en(e,i.ca),t=i.ea)}return e=new Hn(e,t),ra(e)?e:Qn(e.ea.l.itemType)?(e.ca=oa(e.ca),e.ea=oa(e.ea),new Rn(e)):e}function ra(e){if(!qe(e.ca.l.cardinality))return e.ea.Rb();let t=er(e.ca);return!!(t instanceof ie&&t.axis===3&&(e=er(e.ea),e instanceof Rn&&(e=e.g),e instanceof ie&&[3,2,4,5,8].includes(e.axis)||e instanceof Hn&&ra(e)))}function ia(e){return e instanceof Rn?e.g:e}function er(e){return e instanceof Pr||e instanceof Rn?er(e.g):e}var en=na;function sa(e){return e.Rb()?e:new Rn(e)}var oa=ia;function nn(e,t,i,f,v={}){Z.assert(t),Z.assert(t instanceof Vt),Z.assert(e.l),Z.assert(e.l instanceof Vt);var a=t.V(),u=e,l;let A=t.itemType,S=t.cardinality,O=qe(S);var M=null,d=-1;let o=S===7;if(o||(d=e.l.cardinality,o=(S|d)===S),a=a.p==="",S===1&&(a=!0),a||(M=e.l.itemType,d=e.l.cardinality,a=Ot.Fb(A,M),a===Ot.Xb&&(a=M===Tn?Ot.kc:A===Tn?Ot.Jb:a),a=a===Ot.sb||a===Ot.Jb),a&&o)return u;if(v.Lb&&!O&&(qe(d)&&(u=l=new tr(u),d=3,o=(S|d)===S),!a)){if(A.la("AS")){try{l=nn(u,Et.tf,i,f)}catch(E){throw E}u=xe("string",l),M=$i,d=2,u.l=Et.Zb,o=(S|d)===S,a=!0}if(gn(A)||A.la("AO")){try{l=nn(u,Et.tf,i,f)}catch(E){throw E}u=xe("number",l),M=Fn,d=2,u.l=Et.Xd,o=(S|d)===S,a=!0}}if(!a)if(A.la()){if(!M.la()&&d!==1){if(!M.Si)throw t=new F("An atomic value is required for the "+i.getMessage()+", but the supplied value (type "+M.toString()+") cannot be atomized",M.name==="error()"?"FOER0000":"FOTY0013",e),t;M=!qe(d),d=!qe(S),M?(l=je(S),u=u instanceof ie&&u.axis===2&&u.l.itemType instanceof an?new us(u.l):new Uo(u,f,l)):u=u instanceof ie&&u.axis===2&&u.l.itemType instanceof an?new us(u.l):new as(u,f),l=u,d&&!M&&(l=Ds(l,S,f)),u=l,M=u.l.itemType,d=u.l.cardinality,o=(S|d)===S}M.la("AZ")&&(gn(A)||!A.la("AZ")&&A.V().p!=="A")&&(u=l=aa(u,A,f),a=!0,M=A),M.ga()!=="A"||["A","AZ"].includes(A.ga())||(u=l=aa(u,A,f),M=u.l.itemType),A.la()&&(A.la("AO")&&Ot.Fb(M,An)!==Ot.Xb?(u=l=new fi(u,Et.Xd),M=Fn,d=-1):A.la("AF")&&Ot.Fb(M,An)!==Ot.Xb&&!Ot.Xi(M,Fn)&&(u=l=new fi(u,Et.vg),M=Ji,d=-1),A.la("AS")&&M.la("AU")&&(a=!0,u=l=new fi(u,Et.Zb),M=$i))}else A.gd()&&A.V().p==="F"&&(M.gd()||(u=new Ss(u,Bn,f),M=Bn),A instanceof Hr||(a=M.V(),(a.p==="FM"||a.p==="FA")&&A.yc().length===1)||(u=new Lo(u,Je(A),f)),a=!0);if(a&&o||(d===-1&&(d=u.l.cardinality,o||=(S|d)===S),o&&d===1))return u;if(d===1&&!je(S))throw t=new F("An empty sequence is not allowed as the "+i.getMessage(),i.getErrorCode()),t;if(a=a?Ot.kc:Ot.Fb(M,A),a===Ot.Xb&&(a=M===Tn?Ot.Jb:A===Tn?Ot.kc:a),S===1&&(a=Ot.sb),a===Ot.Xb)if(je(d)&&je(S))d!==1&&(l=i.Hf(A,M),Z.xa(l+". The expression can succeed only if the supplied value is an empty sequence.",1,null));else throw l=i.Hf(A,M),t=new F(l,M.name==="error()"?"FOER0000":i.getErrorCode()),t;if(a!==Ot.sb&&a!==Ot.kc){if(u.Ti){if(f=ot.XS.string.fromString(u.getAttribute("val")),A.la()&&t.matches(f))return u;throw l=i.Hf(A,M),t=new F(l,i.getErrorCode()),t}u=l=da(u,new Vt(A,S),f),o=!0}if(!o){if(u.Ti)throw t=new F("Required cardinality of "+i.getMessage()+" is "+Kn(S)+"; supplied value has cardinality "+Kn(d),i.getErrorCode()),t;u=l=Ds(u,S,f)}return u}function aa(e,t,i){return t=gn(t)?"AO":t.V().p,new cs(e,t,i)}function xe(e,t){return e=new ot.XS.QName.fromParts("fn",Ft.Ma,e),t=Array.isArray(t)?t:[t],e=new bn(e,t.length),new Wn(e,t,Et.ya)}function le(e,t,i){let f=Dn(i.errorCode?i.errorCode:"XPTY0004",i.save());return nn(e,t,f,i.save())}function Fi(e){return qe(e.l.cardinality)?new tr(e):e}class ws extends $t{constructor(t){super(),this.value=t,t.length===0?this.l=Et.Be:this.l=new Vt(Ot.Gd(t.map(f=>f.l.itemType)),7);let i=!0;t.forEach(f=>{i=i&&f instanceof de}),i&&(this.g=!0)}G(t){super.start(t),this.g&&t.sd("literal",!0);for(let i of this.value)i.G(t);t.end()}}ws.prototype.O="sequence";class nr extends $t{constructor(t){if(super(),this.value=t,t.length===0)this.l=Je(ei);else{let i=Ot.Gd(t.map(v=>v.l.itemType)),f=0;t.forEach(v=>f|=v.l.cardinality),this.l=Je(new Ar(new Vt(i,f)))}}G(t){super.start(t);for(let i of this.value)i.G(t);t.end()}}nr.prototype.O="arrayBlock";class qu extends $t{constructor(t,i){super(),this.Qa=t,this.O=St[t],this.Ua=i,this.action=this.Gb=void 0,this.slot=0,this.Wb=this.value=null,this.l=Et.Ya}bd(){return this.Ua}G(t){super.start(t,{var:this.Ua.toEQName(),slot:this.slot}),this.value.G(t),this.action.G(t),t.end()}}class ua extends xn{constructor(t,i,f,v=!1){switch(super(t,i,f),this.O=i===1?"union":St[i],v=v?"XTSE0340":"XPTY0004",t=le(t,Et.Vd,this.Ca(0,v)),f=le(f,Et.Vd,this.Ca(1,v)),t=sa(t),f=sa(f),this.ca=t,this.ea=f,Z.assert(t.l),Z.assert(f.l),i){case 24:this.l=t.l;break;case 23:i=t.l.cardinality&f.l.cardinality|3,this.l=new Vt(Ot.Ji([t,f].map(a=>a.l.itemType)),i);break;case 1:this.l=new Vt(Ot.Gd([t,f].map(a=>a.l.itemType)),xu(t.l.cardinality,f.l.cardinality))}}Rb(){return!0}wb(){return this.ca.wb&&this.ea.wb&&this.ca.wb()===this.ea.wb()?this.ca.wb():-1}Fa(){if(this.Qa===1)return new ci(this.ca.Fa(),this.ea.Fa(),this.l);let t=this.wb();return t===3||t===2||this.ca.Cb||this.ea.Cb?new ss(this.ca.Fa(),this.Qa,this.ea.Fa(),this.l):new yn(this)}}class rn extends $t{constructor(t=Et.jc){super(),this.l=t}G(t){we(this,t)}Fa(){return new Ro}}rn.prototype.O="dot";function xs(e){return e.l.V().p===""?new ca(e):e}class ca extends Ke{constructor(t){super(t),this.l=t.l}}ca.prototype.O="homCheck";function Xr(e){return e.global?new fa(e):new la(e)}class Ei extends $t{constructor(){super(),this.g=null,this.l=Et.ya}}Ei.prototype.O="varRef",Ei.prototype.Cb=!0;class la extends Ei{constructor(t){super(),this.g=t,this.l=t.Wb||Et.ya}bd(){return this.g.Ua}G(t){we(this,t,{name:this.g.Ua.toEQName(),slot:this.g.slot})}}la.prototype.O="varRef";class fa extends Ei{constructor(t){super(),this.g=t,this.l=t.Wb}bd(){return this.g.Ua}Fa(){return new rs(this)}G(t){we(this,t,{name:this.g.Ua.toEQName(),bSlot:"?"})}}fa.prototype.O="gVarRef";class wi extends xn{constructor(t,i){super(t,213,i),this.ca=t=le(t,Et.pf,this.Ca(0)),t.l&&t.l.itemType&&t.l.itemType.resultType&&(this.l=t.l.itemType.resultType)}}wi.prototype.O="lookup";class ha extends $t{constructor(t){super(),this.ca=t=le(t,Et.pf,this.Ca(0))}G(t){super.start(t),this.ca.G(t),t.end()}}ha.prototype.O="lookupAll";class ma extends $t{constructor(){super(),this.l=Et.ya}}ma.prototype.O="currentGroup";class pa extends $t{constructor(){super(),this.l=Et.wd}}pa.prototype.O="currentGroupingKey";class Rn extends Ke{constructor(t){super(t),this.l=t.l}Rb(){return!0}Fa(){return this.g.Fa()}}Rn.prototype.O="docOrder";class ys extends Ke{constructor(t){super(t),this.l=t.l}G(t){super.start(t,{flags:this.flags}),this.g.G(t),t.end()}}ys.prototype.O="copyOf",ys.prototype.flags="cm";class bs extends $t{constructor(t,i){super(),Z.assert(i instanceof Vt),this.ca=t,this.type=i,this.l=Et.Ya}G(t){super.start(t,{of:this.type.ga()}),this.ca.G(t),t.end()}}bs.prototype.O="instance";function da(e,t,i=null){return i||(i=new ui(2,"treat as",0),i.errorCode="XPDY0050",i=i.save()),new Ss(Ds(e,t.cardinality,i),t.itemType,i)}class xi extends Ke{constructor(t,i,f){super(t),this.l=new Vt(t.l.itemType,i),this.j=i,this.B=f}G(t){super.start(t,{card:this.j===2?"1":Kn(this.j),diag:this.B}),this.g.G(t),t.end()}}xi.prototype.O="check";function Ds(e,t,i){return t===7||e instanceof de&&(t|2)===t?e:new xi(e,t,i)}class Ss extends Ke{constructor(t,i,f){super(t),this.l=t.l,this.B=i,this.j=f}G(t){super.start(t,{as:this.B.ga(),diag:this.j}),this.g.G(t),t.end()}}Ss.prototype.O="treat";function Cs(e,t,i){return e=[e,Ze([ot.XS.boolean.Rc],Et.Ya)],new vs(e,[t,i])}class vs extends $t{constructor(t,i){super(),this.g=t,this.actions=i,this.Ra=i.some(f=>f.Ra),t=Ot.Gd(i.map(f=>f.l.itemType)),i=wu(i.map(f=>f.l.cardinality)),this.l=new Vt(t,i)}G(t){super.start(t);let i=0;for(let f of this.g)f.G(t),this.actions[i++].G(t);t.end()}}vs.prototype.O="choose";class ga extends $t{constructor(){super(),this.action=this.value=this.Wb=this.Ua=null,this.slot=0}bd(){return this.Ua}g(t){this.action=t,this.l=t.l}j(t){this.value=t,this.Wb=t.l}G(t){super.start(t,{name:this.Ua.toEQName(),slot:this.slot}),this.value.G(t),this.action.G(t),t.end()}}class Ts extends ga{j(t){this.value=t,this.Wb=te(t.l,2),this.action&&(this.l=Lr(this.action.l,t.l.cardinality))}g(t){this.action=t,this.value&&(this.l=Lr(t.l,this.value.l.cardinality))}}Ts.prototype.O="for";class Bs extends ga{}Bs.prototype.O="let";class Aa extends xn{constructor(t,i){super(t,null,i),this.l=Et.Ya}}class Fa extends Aa{}Fa.prototype.O="and";class Ea extends Aa{}Ea.prototype.O="or";function wa(e){return Gn(e)&&ot.XS.integer.matches(e.value[0])&&1e7>e.value[0].value}class xa extends xn{constructor(t,i,f=!1){super(t,null,i),f&&(t=Fi(t),i=Fi(i)),this.ca=le(t,Et.sf,this.Ca(0)),this.ea=le(i,Et.sf,this.Ca(1)),this.l=Et.Ce}}xa.prototype.O="to";class ya extends $t{constructor(t,i){super(),this.g=t,this.j=i,this.l=Et.Ce}G(t){we(this,t,{from:this.g.value,to:this.j.value})}}ya.prototype.O="range";class yi extends $t{constructor(t,i){super(),this.g=t,this.next=i,this.l=Lr(i.l,t.l.cardinality)}G(t){super.start(t),this.g.G(t),this.next.G(t),t.end()}}yi.prototype.O="forEach";var Ns={array:"http://www.w3.org/2005/xpath-functions/array",fn:"http://www.w3.org/2005/xpath-functions",ixsl:"http://saxonica.com/ns/interactiveXSLT",map:"http://www.w3.org/2005/xpath-functions/map",math:"http://www.w3.org/2005/xpath-functions/math",saxon:"http://saxon.sf.net/",xml:"http://www.w3.org/XML/1998/namespace",xs:"http://www.w3.org/2001/XMLSchema",xsl:"http://www.w3.org/1999/XSL/Transform"},ba={},Is;for(Is in Ns)ba[Ns[Is]]=Is;function rr(e,t){var i=new bn(e.name,e.arity),f=Et.ya;switch(e.uri){case Ft.map:switch(f=Et.wf,e.name.local){case"get":f=t[0].l.valueType;break;case"merge":f=Et.wf;break;case"entry":f=Je(new gr(t[0].l,t[1].l))}return new ls(i,t,f);case Ft.He:switch(e.name.local){case"_from-sequence":f=Je(new Ar(t[0].l))}return new fs(i,t,f);case Ft.qb:switch(e.name.local){case"apply":e=t[0].l,e=e.itemType?e.itemType:e,f=e.resultType?e.resultType:Et.ya}return new Tr(i,t,f)}}class ir extends $t{constructor(t,i,f){var v=Et.ya;super(),this.name=ot.XS.QName.fromParts(ba[f],f,t),this.arity=i,this.uri=f,this.l=Et.Ee,this.resultType=v}}ir.prototype.O="function";class bi{}bi.prototype.uri=Ft.Ma;class Da extends bi{constructor(){super()}}Da.prototype.uri=Ft.map;var Sa=new Da;class Ca extends bi{constructor(){super()}}Ca.prototype.uri=Ft.He;var va=new Ca;class Ta extends bi{constructor(){super()}}Ta.prototype.uri=Ft.qb;class Ku extends Ta{}var Yu=new Ku;let Zu={FUNCTION:0,Nj:1,sk:2,xk:3,Zj:4,Uj:5,gk:6,rk:7,jk:8,uk:9,vk:10,Yj:11,EVALUATE_RESULT:12,Pj:13,Lj:14,fk:15,Oj:16,Qj:17},zu=["doc","id","element-with-id","key","root"];function _n(e,t,i,f){return Zu[e]+"|"+t+"|"+i+"|"+f}function Gu(e,t,i,f){return{getMessage:function(){return t},Hf:f,getErrorCode:function(){return e},save:function(){return i}}}function Dn(e,t){let i=ut.wj(t).required;return Gu(e,i,t,function(f,v){return"Required type of "+i+" is "+f.toString()+": actual type is "+v.toString()})}class Os{constructor(t,i){var f=null;if(this.name=t,this.arity=t.arity,i){this.rb=i,f=i.alphaTree;let v=[],a;for(i.variadic&&(a=Be(f.a[0])),i=0;i<t.arity;i++){let u=a||Be(f.a[i]);v.push(u)}f=f.r?Be(f.r):Et.ya,this.l=Je(new Ve(v,f))}f?this.resultType=f:this.resultType=Et.ya,this.l||(this.l=Et.Ee)}}Os.prototype.resultType=Et.ya;function Ba(){function e(){z=new Pu,Nt=[],Tt=[],ye=0}function t(R){let K=Mt[R];return K||v("No namespace binding for prefix '"+R+"'","XPST0081"),K}function i(R,K=t,et=()=>""){return ot.XS.QName.fromString(R,it=>it===""?et():K(it))}function f(){let R=St[z.I];return z.I===201?'name "'+z.T+'"':z.I===-1?"(unknown token)":z.T&&z.T!==St[z.I]?`${R} ("${z.T}")`:/^[a-z]+$/.test(R)?`"${R}"`:R}function v(R,K="XPST0003"){throw Oo(z),new pe(R,K)}function a(R){let K=Oo(z);console.log((R.startsWith("...")?"near":"in")+" "+K+`:
    `+R)}function u(){try{z.next()}catch(R){v(R.message)}}function l(R){z.I!==R&&v('expected "'+St[R]+'", found '+f())}function A(R=!1){R=S(R);let K=null;for(;z.I===7;){K==null&&(K=[],K.push(R)),u();let et=S();K.push(et)}return K!=null&&(R=new ws(K)),R}function S(R=!1){switch(z.I){case 0:if(R)return jn();v("Expected an expression, but reached the end of the input");break;case 211:case 216:R=0;var K=z.I,et=null,it=null;do{u(),l(21),u(),l(201);var yt=z.T,vt=void 0;K===211?vt=new Ts:vt=new Bs,R++;var jt=vt;yt=k(yt,""),jt.Ua=yt,u(),l(K===216?58:31),u(),Tt.push(null),vt.j(S()),Tt.pop(),p(vt),it==null?et=vt:it.g(vt),it=vt}while(z.I===7);for(l(25),u(),it.g(S()),vt=0;vt<R;vt++)Tt.pop();return et;case 32:case 33:R=0,vt=z.I,jt=et=null;do u(),l(21),u(),l(201),K=z.T,R++,yt=new qu(vt,k(K,"")),u(),l(31),u(),K=yt,it=S(),K.value=it,K.Wb=te(it.l,2),p(yt),jt!=null?jt.action=yt:et=yt,jt=yt;while(z.I===7);for(l(34),u(),vt=jt,jt=S(),vt.action=jt,vt=0;vt<R;vt++)Tt.pop();return et;case 37:return u(),vt=A(),l(204),u(),l(26),u(),R=S(),l(27),u(),et=S(),Cs(vt,R,et);default:return d(E(),4)}}function O(){return M(z.I)}function M(R){switch(R){case 9:case 81:return 4;case 10:case 80:return 5;case 50:case 51:case 55:case 53:case 54:case 52:case 6:case 22:case 14:case 12:case 13:case 11:case 20:case 38:case 39:return 6;case 30:return 7;case 29:return 8;case 15:case 16:return 9;case 17:case 18:case 56:case 19:return 10;case 79:return 11;case 1:return 12;case 23:case 24:return 13;case 45:return 14;case 47:return 15;case 57:return 16;case 46:return 17;case 76:return 18;case 40:return 20;default:return-1}}function d(R,K){for(;O()>=K;){let zt=z.I;var et=O();switch(zt){case 45:case 47:u();var it=c();t:switch(zt){case 45:R=new bs(R,it);break t;case 47:R=da(R,it);break t;default:throw new No(St[zt])}O()>=et&&v("Left operand of '"+St[z.I]+"' needs parentheses");break;case 46:case 57:u();var yt=void 0;if(z.I===69&&z.T==="union")throw new F("Saxon union types not supported");if(l(201),z.T)t:{try{var vt=i(z.T,Dt.xb,Dt.bc);break t}catch(Wt){v(Wt.message,Wt.code)}vt=void 0}else vt=v("Parser tokenization error NAME");it=vt,it.uri!==Ft.ic&&v("Unknown simple type "+z.T+" in cast (SaxonJS is not schema-aware)"),u();var jt=z.I===213;jt&&(z.I=204,u());let ve={numeric:"u",ENTITIES:"l",NMTOKENS:"l",IDREFS:"l"}[it.local]||"a";if(ve==="a"){if(["anyType","anyAtomicType","NOTATION"].includes(it.local)&&v("Casting to xs:"+it.local+" is not possible (it's an abstract type)","XPST0080"),yt=ot.type[it.local],!yt)throw new F("Cannot find type "+it.toEQName());yt=new Ee(yt)}R=(zt===57?Mu:li)(R,ve,it,yt,jt),O()>=et&&v("Left operand of '"+St[z.I]+"' needs parentheses");break;case 76:R=B(R);break;default:for(jt=zt===40,u(),jt&&Nt.push(te(R.l,2)),it=E(),jt&&Nt.pop();O()>et;)it=d(it,O());if(!(et=O()!==et))t:switch(z.I){case 50:case 51:case 55:case 53:case 54:case 52:case 6:case 22:case 14:case 12:case 13:case 11:case 20:case 38:case 39:case 29:et=!1;break t;default:et=!0}et||v("Left operand of '"+St[z.I]+"' needs parentheses"),R=o(R,zt,it)}}return R}function o(R,K,et){switch(K){case 9:return new Ea(R,et);case 10:return new Fa(R,et);case 50:case 51:case 55:case 53:case 54:case 52:return new Or(R,K,et,Dt);case 6:case 22:case 14:case 12:case 13:case 11:if(Dt.pe())K=new zo(R,K,et,Dt);else{var it=Dt;if(et=new Zo(R,K,et,it),R=et.ca.l.cardinality===2&&et.ea.l.cardinality===2&&qo[K]){R=et.ca.l.itemType;var yt=et.ea.l.itemType;let vt=R.V().p,jt=yt.V().p;R=gi(vt)||gi(jt)?vt===jt:R.isNumeric()&&yt.isNumeric()?!0:/^A[SZU]/.test(vt)&&/^A[SZU]/.test(jt)}K=R?new Or(et.ca,qo[K],et.ea,it):et}return K;case 20:case 38:case 39:return new Vu(R,K,et,Dt);case 29:return it=new xa(R,et,Dt.pe()),wa(it.ca)&&wa(it.ea)?(K=it.ca.value[0],it=it.ea.value[0],K=K.value>it.value?jn():K.value===it.value?new de([K],Et.Ce):new ya(K,it)):K=it,K;case 30:if(K=[],R instanceof Wn&&R.name.name.local==="concat"&&R.name.name.uri===Ft.Ma)for(it of R.g)K.push(it);else it=_n("BINARY_OP",0,"","concat"),yt=Dn("FOTY0013",it),R=nn(R,Et.Yb,yt,it,Dt),K.push(R);return it=_n("BINARY_OP",1,"","concat"),yt=Dn("FOTY0013",it),et=nn(et,Et.Yb,yt,it,Dt),K.push(et),K=xe("concat",K),K.l=Et.Zb,K;case 15:case 16:case 17:case 18:case 56:case 19:return new di(R,K,et,Dt);case 79:return K=et,et=ot.XS.QName.fromParts("vv",Ft.og,"otherwise"),it=new Bs,it.Ua=et,it.j(R),p(it),et=Xr(it),R=[xe("exists",[et]),Ze([ot.XS.boolean.Rc],Et.Ya)],it.g(new vs(R,[et,K])),it;case 1:case 23:case 24:return new ua(R,K,et,Qt===1);case 81:return et=xe("boolean",et),Cs(R,Ze([ot.XS.boolean.Rc],Et.Ya),et);case 80:return et=xe("boolean",et),Cs(R,et,Ze([ot.XS.boolean.Ud],Et.Ya));default:throw new No(St[K])}}function E(){switch(z.I){case 16:u();var R=E();R=T(299,R);break;case 15:u(),R=E(),R=T(15,R);break;default:for(R=n();z.I===40;){u(),Nt.push(te(R.l,2));let K=n();Nt.pop(),R=new yi(R,K)}}return R}function T(R,K){if(Gn(K)){let et=K.value[0];return R===299?Ze([et.af()],K.l):K}return new di(Ze([ot.XS.integer.fromNumber(0)],Et.tc),R,K,Dt)}function C(){switch(z.I){case 36:case 3:case 201:case 208:case 70:case 207:case 69:case 205:case 206:case 35:case 202:case 209:case 5:case 21:case 43:case 4:return!0;case 60:return["ordered","unordered","map","array"].includes(z.T);default:return!1}}function n(){var R=z.ee;switch(z.I){case 2:return u(),R=new Ir,C()?r(R):R;case 8:u(),R=new Ir;var K=new ie(5,null);return R=en(R,K),r(R);default:for(z.I===201&&["true","false"].includes(z.T)&&a("The expression is looking for a child element named '"+z.T+"' - perhaps "+z.T+"() was intended? To avoid this warning, use child::"+z.T+" or ./"+z.T+"."),z.I===201&&zn(z.T)!==-1&&Qt!==1&&(0<R||z.j!==0)&&(R=z.T,a("The keyword '"+R+"' in this context means 'child::"+R+"'. If this was intended, use 'child::"+R+"' or './"+R+"' to avoid this warning.")),R=h(Qt===1&&ye===0);[2,8].includes(z.I);){Nt.push(te(R.l,2));var et=z.I;u(),K=h(!1),et===2?R=en(R,K):K instanceof ie&&K.axis===3?(K=new ie(4,K.g),R=en(R,K)):(et=new ie(5,null),R=en(R,et),R=en(R,K)),R=xs(R),Nt.pop()}return R}}function r(R){let K=R;var et=2;for(Nt.push(te(R.l,2));R=h(!1),Nt.pop(),Nt.push(te(R.l,2)),et===2?(K=en(K,R),K=xs(K)):et===8?(et=new ie(5,null),et=en(et,R),K=en(K,et),K=xs(K)):K=new yi(K,R),et=z.I,!(et!==2&&et!==8&&et!==40);)u();return Nt.pop(),K}function h(R){R=y(R);let K=R instanceof ie&&!Xu[R.wb()];for(;;)if(z.I===4)Nt.push(te(R.l,2)),R=m(R),Nt.pop();else if(z.I===5)R=_(R,null);else if(z.I===213)R=q(R);else break;return K&&(R=xe("reverse",R),R.cl=!0),R}function m(R=null){if(!R)return A(null);u(),ye++;let K=m();return ye--,l(203),u(),R=new Pr(R,K)}function c(){var R=z.T==="empty-sequence";let K=P();if(R)return Et.Be;switch(z.I){case 207:case 17:R=7,z.I=204,u();break;case 15:R=6,z.I=204,u();break;case 213:R=3,z.I=204,u();break;default:R=2}return new Vt(K,R)}function P(){if(z.I===5){u();var R=P();l(204),u()}else if(z.I===201){R=null;try{R=i(z.T,Dt.xb,Dt.bc)}catch(et){v(et.message,et.code)}{var K=R;let et=K.uri;et===""&&(et=Dt.bc());let it=K.local;R=K.toString(),et===Ft.ic?it==="numeric"?R=An:((K=ot.type[it])||v("Unknown atomic type "+R,"XPST0051"),R=new Ee(K)):(v(`Unknown atomic type ${K.toEQName()} (SaxonJS is not schema-aware)`,"XPST0051"),R=void 0)}u()}else if(z.I===69)switch(z.T){case"item":u(),l(204),u(),R=Tn;break;case"function":R=Q();break;case"map":R=H();break;case"array":R=z,u(),[207,17].includes(R.I)?(u(),l(204),u(),R=ei):(R=c(),l(204),u(),R=new Ar(R));break;case"empty-sequence":u(),l(204),u(),R=qn;break;case"switch":case"typeswitch":v(z.T+"() is reserved in XPath; it is available only in XQuery");break;default:R=tt()}else return Qt===4&&z.I===208?(R=z.T,u(),j(1,R)):Qt===4&&z.I===70?(u(),l(201),R=z.T,u(),V(1,R)):Qt===4&&z.I===3?(u(),z.I===208?(R=z.T,u(),j(2,R)):z.I===70?(u(),l(201),R=z.T,u(),V(2,R)):(v("Expected NodeTest after '@'"),wr)):(v("Expected type name in SequenceType, found "+St[z.I]),wr);return R}function Q(){u();let R=[];if([207,17].includes(z.I))return u(),l(204),u(),Bn;for(;z.I!==204;){var K=c();if(R.push(K),z.I===204)break;z.I===7?u():v("Expected ',' or ')' after function argument type, found '"+St[z.I]+"'")}return u(),z.I===71?(u(),K=c(),new Ve(R,K)):(0<R.length?v("Result type must be given if an argument type is given: expected 'as (type)'"):v("function() is not allowed for a general function type: must be function(*)"),null)}function H(){var R=z;if(u(),[207,17].includes(R.I))return u(),l(204),u(),ti;R=P(),l(7),u();let K=c();return l(204),u(),R instanceof Ee?new gr(R,K):(v("Key type of a map must be atomic"),null)}function B(R){u();var K=z.I;return[201,35].includes(K)?nt(R):K===21?(K=L(),l(5),_(K,R)):K===5?(K=w(),l(5),_(K,R)):(v("Unexpected "+St[K]+" after '=>'"),null)}function y(R){function K(it){return it instanceof rn||it instanceof Pr&&K(it.g)}switch(z.I){case 21:return L();case 5:var et=w();return R&&K(et)&&v("Predicate pattern cannot be parenthesized","XTSE0340"),et;case 4:return X();case 202:return I(!0);case 209:return g(!0);case 35:return et=z.T,ye===0&&Qt===1&&(Dt.cg=!0,R?zu.includes(et)||et.includes(":")||v("Function "+et+"() is not permitted at first position in pattern","XTSE0340"):v("Function call not at first position in pattern","XTSE0340")),et=nt(null),Dt.cg=!1,et;case 213:return q(new rn);case 205:return u(),new rn(Nt[Nt.length-1]);case 206:return u(),new ie(9,null);case 69:if(z.T==="function")return rt();case 201:case 208:case 70:case 207:return et=3,z.I===69&&["attribute","schema-attribute"].includes(z.T)?et=2:z.I===69&&z.T==="namespace-node"?et=8:R&&z.I===69&&z.T==="document-node"&&(et=12),R=ht(1),new ie(et,R);case 3:switch(u(),z.I){case 201:case 208:case 70:case 207:case 69:return et=ht(2),new ie(2,et);default:v("@ must be followed by a NodeTest")}break;case 36:try{et=_u(z.T)}catch(it){v(it.message),et=3}switch(R=ju[et],u(),z.I){case 201:case 208:case 70:case 207:case 69:R=ht(R);let it=null;if(et===2){let yt=Ot.Fb(R,new De(2));yt===Ot.Xb?it="attribute axis can never yield nodes of type "+R:yt===Ot.Jb&&(R=new De(2))}return et===3&&R.kind===9&&(it=R.name+" nodes can never be children"),R.kind!==2||[2,12].includes(et)||(it="axis "+Wi(et)+" can never yield attribute nodes"),it?Qt===1?new Hi(it):(a(it),jn()):new ie(et,R);default:v("Unexpected token "+f()+" after axis name")}break;case 60:switch(z.T){case"map":return Y();case"array":return U();case".":return st();case"_":v("Underscore functions not yet implemented")}break;case 43:return s();default:v("Unexpected token "+f()+" at start of expression")}}function w(){if(u(),z.I===204)return u(),jn();let R=A();return l(204),u(),R}function g(){let R=z.T?x(z.T):v("Parser tokenization error NUMBER");return isNaN(R)&&v("Invalid numeric literal ("+z.T+")"),u(),Ze([R],R.code==="AO"?Et.Xd:R.code==="AD"?Et.ug:Et.tc)}function x(R){try{return 0<=R.indexOf("e")||0<=R.indexOf("E")?ot.XS.double.fromString(R):0<=R.indexOf(".")?ot.XS.decimal.fromString(R):ot.XS.integer.fromString(R)}catch{return NaN}}function I(){var R=new ge(z.T);return u(),R}function L(){u(),l(201);var R=z.T;u();let K=k(R,"");if(R=N(K),R!=null)var et=Xr(R);else if(K.uri===Ft.mi&&0<Zt){if(R=K.local,"code description value module line-number column-number".split(" ").includes(R))return et=new bn(k("dynamic-error-info",Ft.qb),1),et=new Tr(et,[Ze([ot.XS.string.fromString(R)],Et.Zb)],Et.ya);v("Unknown error variable "+K.toEQName(),"XPST0008")}else Dt.Rf?(et={Ua:K,bd:function(){return K}},p(et),et=Xr(et)):v("No binding for variable "+K.toEQName(),"XPST0008");return et}function _(R,K){var et=[];if(K!=null&&et.push(K),K=null,u(),z.I!==204){for(;;){var it=b();if((it==null||it instanceof Br)&&(K==null&&(K=[]),K.push(et.length)),et.push(it),z.I===7)u();else break}l(204)}if(u(),K==null){var yt=et;R instanceof nr?(K=_n("FUNCTION",1,"XPTY0004","array:get"),it=Dn("XPTY0004",K),yt=nn(yt[0],Et.tc,it,K,Dt),et=new ir("get",2,va.uri),R=rr(et,[R,yt])):(yt=new nr(yt),et=new ir("apply",2,Yu.uri),K=_n("FUNCTION",0,"XPTY0004","apply"),it=Dn("XPTY0004",K),R=nn(R,Et.Ee,it,K,Dt),R=rr(et,[R,yt]))}else R=new pi(R,et,K);return R}function q(R){var K=z;vr(K,Gi),K.I=5,u();let et=K.I;if(vr(K,jo),et===201)K=K.T,Zi(K)||v("The name following '?' must be a valid NCName"),u(),R=new wi(R,new ge(K));else if(et===209)K=K.T?x(K.T):v("Parser tokenization error NUMBER"),(isNaN(K)||K.code!=="ADI")&&v("Number following '?' must be an integer"),u(),R=$(this,R,Ze([K],Et.tc));else if([17,207].includes(et))u(),R=new ha(R);else if(et===5)R=$(this,R,w());else return v("Unexpected "+St[et]+" after '?'"),null;return R}function $(R,K,et){if(qe(K.l.cardinality)){R=new Ts,R.Wb=te(K.l,2);let it=k("zibble",""),yt=Xr(R);return R.Ua=it,R.j(K),p(R),R.g(new wi(yt,et)),Tt.pop(),R}return new wi(K,et)}function rt(){var R=z;let K=new Nr;K.g=[];for(var et of Tt)K.g.push(et);K.B=[],K.j=[],_t.push(K),u();var it=[];et=[];let yt=0;for(;R.I!==204;){l(21),u(),l(201);var vt=k(R.T,"");for(var jt of it)jt.equals(vt)&&v("Duplicate parameter name $"+vt.toString(),"XQST0039");it.push(vt);var zt=Et.ya;u(),R.I===71&&(u(),zt=c());let ce=new ps;var ve=ce;if(ve.l=zt,ve.Wb=zt,ce.name=vt,ce.Ua=vt,ve=ce,vt=yt++,ve.slot=vt,et.push(ce),p(ce),R.I===204)break;R.I===7?u():v("Expected ',' or ')' after function argument, found '"+St[R.I]+"'")}if(vr(R,Gi),u(),R.I===71){vr(R,Xo),u();var Wt=c()}for(l(59),vr(R,0),u(),R.I===215?(Ce(R),u(),jt=jn()):(jt=A(),l(215),Ce(R),u(),Wt||(Wt=jt.l)),Wt||(Wt=Et.ya),R=it.length,it=0;it<R;it++)Tt.pop();return Wt=new ds(et,Wt,jt),Tt=K.g,_t.pop(),Wt}function st(){var R=z;let K=new Nr;K.g=[];for(var et of Tt)K.g.push(et);K.B=[],K.j=[],_t.push(K),u(),et=[];var it=ot.XS.QName.fromParts("saxon",Ft.qb,"dot");let yt=new ps;var vt=Et.jc;return yt.l=vt,yt.Wb=vt,yt.name=it,yt.Ua=it,yt.slot=0,et.push(yt),it=new yi(Xr(yt),A()),l(215),Ce(R),u(),R=new ds(et,it.l,it),Tt=K.g,_t.pop(),R}function ht(R){var K=z.T;switch(z.I){case 201:u();var et=K;return K=k(et,R===1?Dt.bc():""),R===1&&K.getURI()===""&&Dt.ke?(et=k(et,"http://www.w3.org/1999/xhtml"),R=new Fr(new an(R,K),new an(R,et))):R=new an(R,K),R;case 208:return u(),j(R,K);case 70:return u(),K=z.T,l(201),u(),V(R,K);case 207:return u(),Yr(R);case 69:return tt();default:throw v("Unrecognized node test"),new pe("")}}function tt(){function R(){et||v("No arguments are allowed in "+K+"()","XPST0003")}let K=z.T,et=!1;switch(u(),z.I===204&&(et=!0,u()),K){case"item":case"switch":case"typeswitch":return v(K+"() is not allowed in a path expression"),null;case"node":return R(),Vn;case"text":return R(),Mi;case"comment":return R(),ki;case"namespace-node":return et?Li:Qt===4&&z.I===201?(u(),l(204),u(),new dr(13,"")):(v("No arguments are allowed in namespace-node()"),null);case"document-node":if(et)return zr;if(z.T!=="element")return v("Argument to document-node() must be an element type"),null;var it=tt();return l(204),u(),new po(Je(it));case"processing-instruction":return et?Ui:(z.I===202?it=z.T?Rt.trim(unescape(z.T)):v("Parser tokenization error STRING_LIITERAL"):z.I===201?it=z.T:v("Processing instruction name must be an NCName or a string literal"),Zi(it)||v("Processing instruction name must be a valid NCName: '"+it+"' is not"),/^[Xx][Mm][Ll]$/.test(it)&&v("Processing instruction name must not be 'xml'"),u(),l(204),u(),new an(7,ot.XS.QName.fromParts("","",it)));case"attribute":case"element":it=K==="element"?1:2;let vt="";var yt=!1;if(et)return Yr(it);if([207,17].includes(z.I)?vt="*":z.I===201?vt=z.T:z.I===70?(u(),yt=!0,vt=z.T):(v("Unexpected "+St[z.I]+" after '(' in SequenceType"),vt="*"),u(),z.I===204)return u(),vt==="*"?Yr(it):yt?new dr(it,vt):new an(it,i(vt,Dt.xb,it===1?Dt.bc:()=>""));if(z.I===7){u(),l(201),yt=!1;let jt=i(z.T,Dt.xb,Dt.bc);return jt.uri===Ft.ic?it===1?["untyped","anyType"].includes(jt.local)||(["untypedAtomic","anyAtomicType"].includes(jt.local)?yt=!0:v("Unsupported type annotation "+z.T+" (SaxonJS is not schema-aware, so all nodes are untyped)")):["untypedAtomic","anyAtomicType"].includes(jt.local)||v("Unsupported type annotation "+z.T+" (SaxonJS is not schema-aware, so all nodes are untyped)"):v("Unsupported type annotation "+z.T+" (SaxonJS is not schema-aware, so only built-in types are recognized)"),u(),z.I===213&&u(),l(204),u(),yt?qn:vt==="*"?Yr(it):(vt=i(vt,Dt.xb,it===1?Dt.bc:()=>""),new an(it,vt))}return v("Expected ')' or ',' in SequenceType"),null;case"schema-attribute":case"schema-element":return v("Type "+K+"() not allowed: SaxonJS is not schema-aware"),null;default:return v("Unknown node kind "+K),null}}function Y(){var R=[];u();var K=[];let et=!0;if(z.I!==215)for(;;){var it=S();l(75),u();let yt=S(),vt=_n("FUNCTION",0,"","map:entry"),jt=Dn("XPTY0004",vt);if(it=nn(it,Et.De,jt,vt,Dt),(!et||it instanceof de)&&K.indexOf(it)===-1?K.push(it):et=!1,it=new $o(it,yt),R.push(it),z.I===215)break;l(7),u()}if(Ce(z),u(),R.length===0)return rr(new ir("_new",1,Sa.uri),[]);if(R.length===1)return R[0];if(et){let yt=[];return R.forEach(vt=>{yt.push([vt.key,vt.value])}),new gs(yt)}return R=new ws(R),K=[],K=new gs([[new ge("duplicates"),new ge("reject")],[new ge("duplicates-error-code"),new ge("XQDY0137")]]),rr(new ir("merge",2,Sa.uri),[R,K])}function X(){let R=[];if(u(),z.I===203)return u(),new nr(R);for(;;){let K=S();if(R.push(K),z.I===7)u();else{if(z.I===203){u();break}v("Expected ',' or ']', found "+St[z.I])}}return new nr(R)}function U(){u();let R=new ir("_from-sequence",1,va.uri);if(z.I===215)return Ce(z),u(),rr(R,[jn()]);let K=A();return l(215),Ce(z),u(),rr(R,[K])}function nt(R){function K(){if(z.I===209)return g(!0);if(z.I===202)return I(z.T);if(z.I===21)return L();v("The arguments to a function call in a pattern must be literals or variable references","XTSE0340")}var et=z.T,it=z.ee;let yt=[];if(R!=null&&yt.push(R),R=G(et),et=null,Qt===1&&R.uri===Ft.Ma&&["current-group","current-grouping-key","current-merge-group","current-merge-key"].includes(R.local)&&v(R.local+"() is not permitted in a pattern","XTSE1060"),u(),z.I!==204){for(;;){var vt=Dt.cg?K():b();if((vt==null||vt instanceof Br)&&(et==null&&(et=[]),et.push(yt.length)),yt.push(vt),z.I===7)u();else break}l(204)}return u(),vt=new bn(R,yt.length),et!=null?(it=Dt.Ue().Uf(vt,Dt),it==null&&v("No function "+R.toString()+"#"+yt.length+" is known for partial application","XPST0017"),new pi(it,yt,et)):(et=[],vt=Dt.Ue().bind(vt,yt,Dt,et),vt??W(Dt,it,R,yt,et))}function W(R,K,et,it,yt){let vt="Cannot find a "+it.length+"-argument function named "+et.toEQName()+"()";for(var jt of yt)vt+=". "+jt;for(yt=!1,jt=0;jt<it.length+5;jt++)if(jt!==it.length){let zt=new bn(et,jt);if(R.Ue().Uf(zt,R)){yt=!0;break}}if(yt?vt+=". The namespace URI and local name are recognized, but the number of arguments is wrong":(it=et.uri,et=it===Ft.Qc?et.local==="original"?"Function name xsl:original is only available within an overriding function":"There are no functions defined in the XSLT namespace":it===Ft.qb?"Most Saxon extension functions are not available under SaxonJS":it.startsWith("java:")?"Calls to Java methods are not available under SaxonJS":it.startsWith("clitype:")?"Calls to .NET methods are not available under SaxonJS":null,et!=null&&(vt+=et)),R.pe())return xe("error",[xe("QName",[new ge(""),new ge("XTDE1425")]),new ge(vt)]);v(vt,"XPST0017",K)}function G(R){let K=null;try{K=i(R,Dt.xb,Dt.Zg)}catch(et){v(et.message,et.code)}return K}function b(){return z.I===213&&[7,204].includes(z.j)?(u(),new Br):S()}function s(){var R=z,K=R.T;let et=R.ee;var it=Dt;u(),l(209),R=R.T?x(R.T):v("Parser tokenization error NUMBER"),isNaN(R)||R.code!=="ADI"?v("Number following '#' is invalid"):(0>R.value||R.value>Number.MAX_SAFE_INTEGER)&&v("Number following '#' is out of range","FOAR0002"),R=R.value,u();let yt=null;try{yt=i(K,it.xb,it.Zg)}catch(jt){v(jt.message,jt.code)}K=it.Ue();let vt=new bn(yt,R);return it=K.Uf(vt,it),it==null&&v("Function "+yt.toEQName()+"#"+R+" not found","XPST0017",et),it.rb.hh&&!yt.dd(oi.Ph)?new ms(it):new mi(it)}function p(R){R.slot=Tt.length,Tt.push(R)}function N(R){for(let K=Tt.length-1;0<=K;K--){let et=Tt[K];if(et&&et.bd().equals(R))return et}}function D(R,K){return i(R,Dt.xb,()=>K)}function k(R,K){try{return D(R,K)}catch(et){v(et.message,et.code)}}function j(R,K){if(K.startsWith("Q{"))return new Gr(R,K.substring(2,K.length-2));try{let et=i(K+":dummy",Dt.xb,()=>"");return new Gr(R,et.getURI())}catch(et){return v(et.message,et.code),null}}function V(R,K){return Zi(K)||v("Local name ["+K+"] contains invalid characters"),new dr(R,K)}function ct(R,K,et,it=!1){this.global=it,this.Ua=this.name=R,this.Wb=K,this.slot=et}let z,xt,Dt={},Tt=[],Nt=[],Qt=0,Zt=0,ye=0,_t=[],Xt={Uf:function(R,K){return K=K.getContext(),(K=or.getFnSignature(R.name,R.arity,K))?new Os(R,K):null},bind:function(R,K,et){var it=et.getContext(),yt=or.getFnSignature(R.name,R.arity,it);if(yt){if(R.name.uri===Ft.Ma)switch(R.name.local){case"false":return Ze([ot.XS.boolean.Ud],Et.Ya);case"true":return Ze([ot.XS.boolean.Rc],Et.Ya);case"normalize-unicode":K.length===1&&K.push(new ge("NFC"));break;case"copy-of":return new ys(K[0]?K[0]:new rn(Nt[Nt.length-1]));case"current-group":return new ma;case"current-grouping-key":return new pa;default:yt.defaultToDot&&R.arity===0&&yt.arity.includes(0)&&(K.push(new rn(Nt[Nt.length-1])),R.arity++)}else if(yt.isIdempotent&&K.length===1)return K[0];it=[];var vt;let zt=yt.alphaTree;zt&&zt.p==="F"&&!zt.r&&(zt.r={p:"",o:"*"}),zt&&zt.p==="F"&&zt.a&&zt.r||Z.ka("Bad function signature for "+R.name.local),yt.variadic&&(vt=zt.a[0]);let ve=yt.collation||-1;for(let Wt=0;Wt<K.length;Wt++){var jt=vt||zt.a[Wt];let ce=_n("FUNCTION",Wt,"",R.name.toString()),Fe=Dn("XPTY0004",ce);Wt===ve?(jt=nn(K[Wt],jt.o==="?"?Et.sg:Et.Zb,Fe,ce,et),jt=xe("resolve-uri",[jt,xe("static-base-uri",[])]),jt.l=Et.qg,it.push(jt)):it.push(nn(K[Wt],Be(jt),Fe,ce,et))}if(ve>K.length-1&&it.push(new ge(et.Mb)),K=Be(zt.r),yt.isUserFunction)return new hs(R,yt.abstract,it,K,yt.componentBinding);switch(R.name.uri){case Ft.Ma:case Ft.ic:switch(R.name.local){case"current":Nt[0]&&(K=Nt[0]);break;case"accumulator-before":case"accumulator-after":if(it[0]instanceof ge){if(yt=i(it[0].value[0].value,et.xb,()=>"").toEQName(),et=et.yb[yt],!et)throw new F("Unknown accumulator "+yt,"XTDE3340");K=on(et),it[0]=new ge(yt)}}return new Wn(R,it,K);case Ft.map:return new ls(R,it,K);case Ft.He:return new fs(R,it,K);case Ft.jh:return new Ju(R,it,K);case Ft.qb:return new Tr(R,it,K);case Ft.jd:return new hi(R,it,K);case Ft.ih:return new $u(R,it,K);default:return yt.hh?new hs(R,yt.abstract,it,K,yt.Dk):new Tr(R,it,K)}}else{if((yt=or.getFnSignature(R.name,null,it))&&(yt&&!yt.alphaTree&&(yt.alphaTree=Le(yt.sig)),it=K.length,vt=yt.alphaTree.a.length,it!==vt&&(yt.variadic?K.length<vt:!(yt.arity||[]).includes(it))))throw new F("Wrong argument arity "+K.length+" for function "+R.name.local+"()","XPST0017");if(et.Lb)return xe("error",[xe("QName",[new ge(""),new ge("XTDE1425")]),new ge("Unknown function "+R.toString())]);throw new F("Unknown function "+R.toEQName()+"()","XPST0017")}}};Dt={bc:()=>"",Mb:"http://www.w3.org/2005/xpath-functions/collation/codepoint",ke:!1,$a:{},yb:{},Xa:!1,Ec:!1,Rf:!1,Lb:!1,xj:function(){Dt.bc=()=>"",Dt.Mb="http://www.w3.org/2005/xpath-functions/collation/codepoint",Dt.$a={},Dt.yb={},Dt.Xa=!1,Dt.Ec=!1,Dt.Rf=!1,Dt.Lb=!1},getContext:function(){return{Xa:Dt.Xa,Tk:Qt===1,$a:Dt.$a}},Di:function(){return Dt.Mb},Zg:function(){return Ft.Ma},Ue:function(){return Xt},Kk:function(){return null},Qk:function(){return!1},pe:function(){return Dt.Lb},Zk:function(){return null}};let Mt={};return ct.prototype.bd=function(){return this.name},{process:function(R,K,et,it,yt=!1,vt=!1,jt=!1){if(e(),xt=R,Qt=K?1:0,R=[],Mt={},Dt.xj(),Dt.xb=t,K&&(Dt.Xa=!0),jt&&(Dt.Rf=!0),it){Zt=it.Xe?1:0,it.Ec&&(Dt.Ec=!0);for(var zt in it.namespaces)Mt[zt]=it.namespaces[zt];for(var ve in it.Bc){zt=i(ve,Dt.xb,()=>"");let Fe=it.Bc[ve],rc=on(Fe.getAttribute("sType"));R.push(new ct(zt,rc,Fe,!0))}for(var Wt in it.Ub)ve=i(Wt,Dt.xb,()=>""),R.push(new ct(ve,it.td[Wt],it.Ub[Wt]));Tt=R,Dt.yb=it.yb,it.ke&&(Dt.ke=it.ke),it.Mb&&(Dt.Mb=it.Mb),it.$a&&(Dt.$a=it.$a),it.Xa&&(Dt.Xa=it.Xa),it.Lb&&(Dt.Lb=it.Lb),it.se&&(Nt=[te(it.se,2)]),it.xpathDefaultNamespace&&(Dt.bc=()=>it.xpathDefaultNamespace),Dt.Ea=it.Ea?it.Ea:null}Wt="";for(let Fe in Mt)R=Mt[Fe],R=R===Ft.withPrefix[Fe]?"~":R,Wt+=Fe+"="+R+" ";Io(z,xt);let ce;try{ce=A(vt)}catch(Fe){throw Fe instanceof F&&it&&it.Ej&&(Fe.code=it.Ej,Fe.message="Invalid XPath expression supplied to xsl:evaluate {"+xt+"}: "+Fe.message),Fe}return z.I!==0&&v("Found "+f()+" beyond end of expression"),K?(ce=ce.Fa(),ce instanceof ci&&et&&(ce=new Mo(os(ce)))):it&&it.we&&(K=_n("EVALUATE_RESULT",0,"",null),et=Dn("XPTY0004",K),ce=nn(ce,it.we,et,K)),K=yt?new Ia:new Na,ce.G(K),K=K.current,yt?(K=K.documentElement,ce.l&&K.setAttribute("sType",ce.l.ga()),Wt!==""&&K.setAttribute("ns",Wt),it&&it.Ea&&K.setAttribute("baseUri",it.Ea)):(K=K.C[0],Wt!==""&&(K.el=Wt),it&&it.Ea&&(K.lb=it.Ea),jt&&0<Tt.length&&(K.xi=Tt.map(Fe=>Fe.Ua.toEQName()))),K},parseSequenceType:function(R,K,et){return e(),Dt.xb=K,Dt.bc=et,Qt=0,Mt={},Io(z,R),R=c(),z.I!==0&&v("Unexpected "+f()+" after SequenceType"),R},getTokenizer:function(){return z}}}let Ps=Ba();function Na(){this.g=[],this.current={C:[]}}Na.prototype={start:function(e,t={}){e={N:e,C:[]};for(let i in t)e[i]=t[i];this.current.C.push(e),this.g.push(this.current),this.current=e},sd:function(e,t){this.current[e]=t},end:function(){this.current=this.g.pop()}};function Ia(){this.j=Oe.find("SaxonJS").internals.getPlatform().createDocument(),this.g=[],this.current=this.j}Ia.prototype={start:function(e,t={}){e=this.j.createElement(e);for(let i in t)e.setAttribute(i,t[i]);this.current.appendChild(e),this.g.push(this.current),this.current=e},sd:function(e,t){this.current.setAttribute(e,t)},end:function(){this.current=this.g.pop()}};let Wu={ml:{QuantifiedExpr:"1AB",OrExpr:"1AB",AndExpr:"1AB",ComparisonExpr:"1AB",StringConcatExpr:"1AS",RangeExpr:"*ADI",AdditiveExpr:"?A",MultiplicativeExpr:"?A",IntersectExceptExpr:"*N",InstanceOfExpr:"1AB",CastableExpr:"1AB",UnaryExpr:"?A m[UO,UD,UF]",StringLiteral:"1AS",IntegerLiteral:"1ADI",DecimalLiteral:"1AD",DoubleLiteral:"1AO",NamedFunctionRef:"1F",InlineFunctionExpr:"1F",MapExpr:"1FM",Root:"1ND"},Kj:{"http://www.w3.org/2005/xpath-functions":{QName:{sig:"1F r[1AQ] a[?AS,1AS]"},abs:{sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF]]"},"accumulator-after":{XSLTonly:!0,sig:"1F a[1AS] r[*]"},"accumulator-before":{XSLTonly:!0,sig:"1F a[1AS] r[*]"},"adjust-date-to-timezone":{arity:[1,2],sig:"1F r[?AA] a[?AA,?ARD]"},"adjust-dateTime-to-timezone":{arity:[1,2],sig:"1F r[?AM] a[?AM,?ARD]"},"adjust-time-to-timezone":{arity:[1,2],sig:"1F r[?AT] a[?AT,?ARD]"},"analyze-string":{arity:[2,3],sig:"1F r[1NE nQ{http://www.w3.org/2005/xpath-functions}analyze-string-result] a[?AS,1AS,1AS]"},apply:{sig:"1F a[1F,1FA] r[*]"},"available-environment-variables":{sig:"1F r[*AS] a[]"},"available-system-properties":{XSLTonly:!0,sig:"1F r[*AQ] a[]"},avg:{sig:"1F r[?A] a[*A]"},"base-uri":{defaultToDot:!0,arity:[0,1],sig:"1F r[?AU] a[?N]"},boolean:{sig:"1F r[1AB] a[*]"},ceiling:{sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF]]"},"codepoint-equal":{sig:"1F r[?AB] a[?AS,?AS]"},"codepoints-to-string":{sig:"1F r[1AS] a[*ADI]"},"collation-key":{arity:[1,2],collation:1,sig:"1F r[1A2] a[1AS,1AS]"},collection:{arity:[0,1],sig:"1F a[?AS] r[*]"},compare:{arity:[2,3],collation:2,sig:"1F r[?ADI] a[?AS,?AS,1AS]"},concat:{arity:[2,1/0],sig:"1F r[1AS] a[?A,?A]",variadic:!0},contains:{arity:[2,3],collation:2,sig:"1F r[1AB] a[?AS,?AS,1AS]"},"contains-token":{arity:[2,3],collation:2,sig:"1F r[1AB] a[*AS,1AS,1AS]"},"copy-of":{XSLTonly:!0,defaultToDot:!0,arity:[0,1],sig:"1F a[*] r[*]"},count:{sig:"1F r[1ADI] a[*]"},current:{XSLTonly:!0,sig:"1F r[1] a[]"},"current-date":{sig:"1F r[1AA] a[]"},"current-dateTime":{sig:"1F r[1AMP] a[]"},"current-group":{XSLTonly:!0,sig:"1F a[] r[*]"},"current-grouping-key":{XSLTonly:!0,sig:"1F r[*A] a[]"},"current-merge-group":{XSLTonly:!0,arity:[0,1],sig:"1F a[1AS] r[*]"},"current-merge-key":{XSLTonly:!0,sig:"1F r[*A] a[]"},"current-output-uri":{XSLTonly:!0,sig:"1F r[?AU] a[]"},"current-time":{sig:"1F r[1AT] a[]"},data:{defaultToDot:!0,arity:[0,1],sig:"1F r[*A] a[*]"},dateTime:{sig:"1F r[?AM] a[?AA,?AT]"},"day-from-date":{sig:"1F r[?ADI] a[?AA]"},"day-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"days-from-duration":{sig:"1F r[?ADI] a[?AR]"},"deep-equal":{arity:[2,3],collation:2,sig:"1F r[1AB] a[*,*,1AS]"},"default-collation":{sig:"1F r[1AS] a[]"},"default-language":{sig:"1F r[1ASNTL] a[]"},"distinct-values":{arity:[1,2],collation:1,sig:"1F r[*A] a[*A,1AS]"},doc:{sig:"1F r[?ND] a[?AS]"},"doc-available":{sig:"1F r[1AB] a[?AS]"},document:{XSLTonly:!0,arity:[1,2],sig:"1F r[*N] a[*,1N]"},"document-uri":{defaultToDot:!0,arity:[0,1],sig:"1F r[?AU] a[?N]"},"element-available":{XSLTonly:!0,sig:"1F r[1AB] a[1AS]"},"element-with-id":{defaultToDot:!0,arity:[1,2],sig:"1F r[*NE] a[*AS,1N]"},empty:{sig:"1F r[1AB] a[*]"},"encode-for-uri":{sig:"1F r[1AS] a[?AS]"},"ends-with":{arity:[2,3],collation:2,sig:"1F r[1AB] a[?AS,?AS,1AS]"},"environment-variable":{sig:"1F r[?AS] a[1AS]"},error:{arity:[0,1,2,3],sig:"1F r[0E] a[?AQ,1AS,*]"},"escape-html-uri":{sig:"1F r[1AS] a[?AS]"},"exactly-one":{sig:"1F r[1] a[*]"},exists:{sig:"1F r[1AB] a[*]"},false:{sig:"1F r[1AB] a[]"},filter:{sig:"1F r[*] a[*,1F r[1AB] a[1]]"},floor:{sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF]]"},"fold-left":{sig:"1F a[*,*,1F a[*,1] r[*]] r[*]"},"fold-right":{sig:"1F a[*,*,1F a[1,*] r[*]] r[*]"},"for-each":{sig:"1F a[*,1F a[1] r[*]] r[*]"},"for-each-pair":{sig:"1F a[*,*,1F a[1,1] r[*]] r[*]"},"format-date":{arity:[2,5],sig:"1F r[?AS] a[?AA,1AS,?AS,?AS,?AS]"},"format-dateTime":{arity:[2,5],sig:"1F r[?AS] a[?AM,1AS,?AS,?AS,?AS]"},"format-integer":{arity:[2,3],sig:"1F r[1AS] a[?ADI,1AS,?AS]"},"format-number":{arity:[2,3],sig:"1F r[1AS] a[?A m[AO,AD,AF],1AS,?AS]"},"format-time":{arity:[2,5],sig:"1F r[?AS] a[?AT,1AS,?AS,?AS,?AS]"},"function-arity":{sig:"1F r[1ADI] a[1F]"},"function-available":{XSLTonly:!0,arity:[1,2],sig:"1F r[1AB] a[1AS,1ADI]"},"function-lookup":{sig:"1F r[?F] a[1AQ,1ADI]"},"function-name":{sig:"1F r[?AQ] a[1F]"},"generate-id":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?N]"},"has-children":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AB] a[?N]"},head:{sig:"1F r[?] a[*]"},"hours-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"hours-from-duration":{sig:"1F r[?ADI] a[?AR]"},"hours-from-time":{sig:"1F r[?ADI] a[?AT]"},id:{defaultToDot:!0,arity:[1,2],sig:"1F r[*NE] a[*AS,1N]"},idref:{defaultToDot:!0,arity:[1,2],sig:"1F r[*N] a[*AS,1N]"},"implicit-timezone":{sig:"1F r[1ARD] a[]"},"in-scope-prefixes":{sig:"1F r[*AS] a[1NE]"},"index-of":{arity:[2,3],collation:2,sig:"1F r[*ADI] a[*A,1A,1AS]"},innermost:{sig:"1F r[*N] a[*N]"},"insert-before":{sig:"1F a[*,1ADI,*] r[*]"},"iri-to-uri":{sig:"1F r[1AS] a[?AS]"},"json-doc":{arity:[1,2],sig:"1F r[?] a[?AS,1FM]"},"json-to-xml":{arity:[1,2],sig:"1F r[?ND] a[?AS,1FM]"},key:{XSLTonly:!0,arity:[2,3],sig:"1F r[*N] a[1AS,*A,1N]"},lang:{defaultToDot:!0,arity:[1,2],sig:"1F r[1AB] a[?AS,1N]"},last:{sig:"1F r[1ADI] a[]"},"load-xquery-module":{arity:[1,2],sig:"1F r[1FM] a[1AS,1FM]"},"local-name":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?N]"},"local-name-from-QName":{sig:"1F r[?ASNTNC] a[?AQ]"},"lower-case":{sig:"1F r[1AS] a[?AS]"},matches:{arity:[2,3],sig:"1F r[1AB] a[?AS,1AS,1AS]"},max:{arity:[1,2],collation:1,sig:"1F r[?A] a[*A,1AS]"},min:{arity:[1,2],collation:1,sig:"1F r[?A] a[*A,1AS]"},"minutes-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"minutes-from-duration":{sig:"1F r[?ADI] a[?AR]"},"minutes-from-time":{sig:"1F r[?ADI] a[?AT]"},"month-from-date":{sig:"1F r[?ADI] a[?AA]"},"month-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"months-from-duration":{sig:"1F r[?ADI] a[?AR]"},name:{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?N]"},"namespace-uri":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AU] a[?N]"},"namespace-uri-for-prefix":{sig:"1F r[?AU] a[?AS,1NE]"},"namespace-uri-from-QName":{sig:"1F r[?AU] a[?AQ]"},nilled:{defaultToDot:!0,arity:[0,1],sig:"1F r[?AB] a[?N]"},"node-name":{defaultToDot:!0,arity:[0,1],sig:"1F r[?AQ] a[?N]"},"normalize-space":{arity:[0,1],sig:"1F r[1AS] a[?AS]"},"normalize-unicode":{arity:[1,2],sig:"1F r[1AS] a[?AS,1AS]"},not:{sig:"1F r[1AB] a[*]"},number:{defaultToDot:!0,arity:[0,1],sig:"1F r[1AO] a[?A]"},"one-or-more":{sig:"1F r[+] a[*]"},outermost:{sig:"1F r[*N] a[*N]"},"parse-ietf-date":{sig:"1F r[?AM] a[?AS]"},"parse-json":{arity:[1,2],sig:"1F r[?] a[?AS,1FM]"},"parse-xml":{sig:"1F r[?ND e[NE]] a[?AS]"},"parse-xml-fragment":{sig:"1F r[?ND] a[?AS]"},path:{defaultToDot:!0,arity:[0,1],sig:"1F r[?AS] a[?N]"},position:{sig:"1F r[1ADI] a[]"},"prefix-from-QName":{sig:"1F r[?ASNTNC] a[?AQ]"},"random-number-generator":{arity:[0,1],sig:"1F r[1FM k[AS] v[1]] a[?A]"},"regex-group":{XSLTonly:!0,sig:"1F r[1AS] a[1ADI]"},remove:{sig:"1F r[*] a[*,1ADI]"},replace:{arity:[3,4],sig:"1F r[1AS] a[?AS,1AS,1AS,1AS]"},"resolve-QName":{sig:"1F r[?AQ] a[?AS,1NE]"},"resolve-uri":{arity:[1,2],sig:"1F r[?AU] a[?AS,1AS]"},reverse:{sig:"1F a[*] r[*]"},root:{defaultToDot:!0,arity:[0,1],sig:"1F r[?N] a[?N]"},round:{arity:[1,2],sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF],1ADI]"},"round-half-to-even":{arity:[1,2],sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF],1ADI]"},"seconds-from-dateTime":{sig:"1F r[?AD] a[?AM]"},"seconds-from-duration":{sig:"1F r[?AD] a[?AR]"},"seconds-from-time":{sig:"1F r[?AD] a[?AT]"},serialize:{arity:[1,2],sig:"1F r[1AS] a[*,?]"},snapshot:{XSLTonly:!0,defaultToDot:!0,arity:[0,1],sig:"1F a[*] r[*]"},sort:{arity:[1,2,3],collation:1,sig:"1F r[*] a[*,?AS,1F r[*A] a[1]]"},"starts-with":{arity:[2,3],collation:2,sig:"1F r[1AB] a[?AS,?AS,1AS]"},"static-base-uri":{sig:"1F r[?AU] a[]"},"stream-available":{XSLTonly:!0,sig:"1F r[1AB] a[?AS]"},string:{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?]"},"string-join":{arity:[1,2],sig:"1F r[1AS] a[*A,1AS]"},"string-length":{arity:[0,1],sig:"1F r[1ADI] a[?AS]"},"string-to-codepoints":{sig:"1F r[*ADI] a[?AS]"},subsequence:{arity:[2,3],sig:"1F a[*,1AO,1AO] r[*]"},substring:{arity:[2,3],sig:"1F r[1AS] a[?AS,1AO,1AO]"},"substring-after":{arity:[2,3],collation:2,sig:"1F r[1AS] a[?AS,?AS,1AS]"},"substring-before":{arity:[2,3],collation:2,sig:"1F r[1AS] a[?AS,?AS,1AS]"},sum:{arity:[1,2],sig:"1F r[?A] a[*A,?A]"},"system-property":{XSLTonly:!0,sig:"1F r[1AS] a[1AS]"},tail:{sig:"1F a[*] r[*]"},"timezone-from-date":{sig:"1F r[?ARD] a[?AA]"},"timezone-from-dateTime":{sig:"1F r[?ARD] a[?AM]"},"timezone-from-time":{sig:"1F r[?ARD] a[?AT]"},tokenize:{arity:[1,2,3],sig:"1F r[*AS] a[?AS,1AS,1AS]"},trace:{arity:[1,2],sig:"1F a[*,1AS] r[*]"},transform:{sig:"1F r[1FM] a[1FM]"},translate:{sig:"1F r[1AS] a[?AS,1AS,1AS]"},true:{sig:"1F r[1AB] a[]"},"type-available":{XSLTonly:!0,sig:"1F r[1AB] a[1AS]"},unordered:{sig:"1F r[*] a[*]"},"unparsed-entity-public-id":{XSLTonly:!0,arity:[1,2],sig:"1F r[1AS] a[1AS,1N]"},"unparsed-entity-uri":{XSLTonly:!0,arity:[1,2],sig:"1F r[1AU] a[1AS,1N]"},"unparsed-text":{arity:[1,2],sig:"1F r[?AS] a[?AS,1AS]"},"unparsed-text-available":{arity:[1,2],sig:"1F r[1AB] a[?AS,1AS]"},"unparsed-text-lines":{arity:[1,2],sig:"1F r[*AS] a[?AS,1AS]"},"upper-case":{sig:"1F r[1AS] a[?AS]"},"uri-collection":{arity:[0,1],sig:"1F r[*AU] a[?AS]"},"xml-to-json":{arity:[1,2],sig:"1F r[?AS] a[?N,1FM]"},"year-from-date":{sig:"1F r[?ADI] a[?AA]"},"year-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"years-from-duration":{sig:"1F r[?ADI] a[?AR]"},"zero-or-one":{sig:"1F r[?] a[*]"}},"http://www.w3.org/2005/xpath-functions/array":{append:{sig:"1F r[1FA] a[1FA,*]"},filter:{sig:"1F r[1FA] a[1FA,1F r[1AB] a[*]]"},flatten:{sig:"1F a[*] r[*]"},"fold-left":{sig:"1F a[1FA,*,1F a[*,*]] r[*]"},"fold-right":{sig:"1F a[1FA,*,1F a[*,*]] r[*]"},"for-each":{sig:"1F r[1FA] a[1FA,1F a[*]]"},"for-each-pair":{sig:"1F r[1FA] a[1FA,1FA,1F a[*,*]]"},get:{sig:"1F a[1FA,1ADI] r[*]"},head:{sig:"1F a[1FA] r[*]"},"insert-before":{sig:"1F r[1FA] a[1FA,1ADI,*]"},join:{sig:"1F r[1FA] a[*FA]"},put:{sig:"1F r[1FA] a[1FA,1ADI,*]"},remove:{sig:"1F r[1FA] a[1FA,*ADI]"},reverse:{sig:"1F r[1FA] a[1FA]"},size:{sig:"1F r[1ADI] a[1FA]"},sort:{arity:[1,2,3],collation:1,sig:"1F r[1FA] a[1FA,?AS,1F r[*A] a[*]]"},subarray:{arity:[2,3],sig:"1F r[1FA] a[1FA,1ADI,1ADI]"},tail:{sig:"1F r[1FA] a[1FA]"}},"http://www.w3.org/2005/xpath-functions/map":{contains:{sig:"1F r[1AB] a[1FM,1A]"},entry:{sig:"1F r[1FM] a[1A,*]"},find:{sig:"1F r[1FA] a[*,1A]"},"for-each":{sig:"1F r[*] a[1FM,1F a[1A,*]]"},get:{sig:"1F a[1FM,1A] r[*]"},keys:{sig:"1F r[*A] a[1FM]"},merge:{arity:[1,2],sig:"1F r[1FM] a[*FM,1FM]"},put:{sig:"1F r[1FM] a[1FM,1A,*]"},remove:{sig:"1F r[1FM] a[1FM,*A]"},size:{sig:"1F r[1ADI] a[1FM]"}},"http://www.w3.org/2005/xpath-functions/math":{acos:{sig:"1F r[?AO] a[?AO]"},asin:{sig:"1F r[?AO] a[?AO]"},atan:{sig:"1F r[?AO] a[?AO]"},atan2:{sig:"1F r[1AO] a[1AO,1AO]"},cos:{sig:"1F r[?AO] a[?AO]"},exp:{sig:"1F r[?AO] a[?AO]"},exp10:{sig:"1F r[?AO] a[?AO]"},log:{sig:"1F r[?AO] a[?AO]"},log10:{sig:"1F r[?AO] a[?AO]"},pi:{sig:"1F r[1AO] a[]"},pow:{sig:"1F r[?AO] a[?AO,1A m[AO,AD,AF]]"},sin:{sig:"1F r[?AO] a[?AO]"},sqrt:{sig:"1F r[?AO] a[?AO]"},tan:{sig:"1F r[?AO] a[?AO]"}}}};class Hu{constructor(){this.g=Ba()}compile(t){let i={xs:"http://www.w3.org/2001/XMLSchema",array:"http://www.w3.org/2005/xpath-functions/array",map:"http://www.w3.org/2005/xpath-functions/map",fn:""};return this.g.parseSequenceType(t,f=>i[f],f=>i[f])}}let sr={},Xs=null;function Oa(e){Xs==null&&(Xs={1:"0",2:"1",3:"?",6:"+",4:"+",7:"*"});let t=Xs[e];return t===void 0?(console.log("Unexpected cardinality:",e),"*"):t}function tc(e,t){if(!(e in sr&&t in sr[e]))return null;e=sr[e][t];let i=e.sig;if(!i&&(e.as||e.param)){let f=new Hu;if(i="1F ",e.as?(t=f.compile(e.as),i+="r["+Oa(t.cardinality)+(t.itemType._alphaCode===null?"":t.itemType._alphaCode)+"] "):i+="* ",e.param){let v=0;i+="a[",e.param.forEach(a=>{0<v&&(i+=","),a=f.compile(a),i+=Oa(a.cardinality)+a.itemType._alphaCode,v++}),i+="]"}else i+="a[]";e.sig=i}return i&&!e.alphaTree&&(e.alphaTree=Le(i)),e}class Di{addLibrary(t,i){let f=sr[t];f||(f={},sr[t]=f);for(let v in i)v in f||(f[v]={}),i[v]instanceof Function?(f[v].impl=i[v],f[v].api="legacy"):Object.assign(f[v],i[v])}getLibrary(t){return sr[t]}getSignature(t,i){return tc(t,i)}}(function(){let e=new Di;return e.addLibrary(Ft.qb,{apply:{sig:"1F r[*] a[1F,1FA]",api:"legacy"},"column-number":{arity:[0,1],sig:"1F r[1ADI] a[1N]",api:"legacy"},"compile-XPath":{arity:[1,2,3],sig:"1F r[1ND] a[1AS,?,?]",api:"legacy"},"compile-GlobalContext":{sig:"1F r[1] a[1FM,1FM,1FM]",api:"legacy"},"discard-document":{sig:"1F r[1ND] a[1ND]",api:"legacy"},"has-uniform-namespaces":{sig:"1F r[1AB] a[1N]",api:"legacy"},"line-number":{arity:[0,1],sig:"1F r[1ADI] a[1N]",api:"legacy"},"marshal-type":{sig:"1F r[1FM] a[1AS]",api:"legacy"},"message-count":{sig:"1F r[1ADI] a[?AQ]",api:"legacy"},"parse-sequence-type":{arity:[2,3],sig:"1F r[1FM] a[1AS,1NE,?AS]",api:"legacy"},"parse-XPath":{arity:[1,2,3],sig:"1F r[1ND] a[1AS,?AS,?]",api:"legacy"},permute:{sig:"1F r[*] a[*]",api:"legacy"},"system-id":{sig:"1F r[*AU] a[]",api:"legacy"},timestamp:{sig:"1F r[1AMP] a[]",api:"legacy"}}),e.addLibrary(Ft.jd,{"abort-controller":{arity:[0,1],sig:"1F r[1] a[?ADI]",api:"legacy"},all:{sig:"1F r[1] a[1FA]",api:"legacy"},"all-settled":{sig:"1F r[1] a[1FA]",api:"legacy"},any:{sig:"1F r[1] a[1FA]",api:"legacy"},apply:{arity:[2,3],sig:"1F r[*] a[1F,1FA,?FM]",api:"legacy"},call:{arity:[3,4],sig:"1F r[*] a[1,1AS,1FA,?FM]",api:"legacy"},catch:{sig:"1F r[1] a[1,1F]",api:"legacy"},contains:{sig:"1F r[1AB] a[1,1AS]",api:"legacy"},doc:{arity:[1,2],sig:"1F r[1] a[?AS,?]",api:"legacy"},"doc-fetched":{sig:"1F r[1AB] a[?AS]",api:"legacy"},eval:{arity:[1,2],sig:"1F r[*] a[1AS,?FM]",api:"legacy"},event:{sig:"1F r[?] a[]",api:"legacy"},finally:{sig:"1F r[1] a[1,1F]",api:"legacy"},get:{arity:[2,3],sig:"1F r[*] a[1,1AS,?FM]",api:"legacy"},"http-request":{arity:[1,2],sig:"1F r[1] a[1FM,?]",api:"legacy"},"js-function":{sig:"1F r[*] a[1F]",api:"legacy"},"json-doc":{arity:[1,2,3],sig:"1F r[1] a[?AS,?FM,?]",api:"legacy"},"json-parse":{arity:[1,2],sig:"1F r[1] a[1AS,?FM]",api:"legacy"},location:{sig:"1F r[1AS] a[]",api:"legacy"},new:{arity:[2,3],sig:"1F r[1] a[1AS,1FA,?FM]",api:"legacy"},page:{sig:"1F r[1N] a[]",api:"legacy"},"query-params":{sig:"1F r[1FM] a[]",api:"legacy"},race:{sig:"1F r[1] a[1FA]",api:"legacy"},resolve:{sig:"1F r[1] a[*]",api:"legacy"},sleep:{sig:"1F r[1] a[1ADI]",api:"legacy"},source:{sig:"1F r[?N] a[]",api:"legacy"},style:{sig:"1F r[1FM] a[?N]",api:"legacy"},then:{sig:"1F r[1] a[1,1F]",api:"legacy"},"unparsed-text":{arity:[1,2,3],sig:"1F r[1] a[?AS,?AS,?]",api:"legacy"},"unparsed-text-fetched":{sig:"1F r[1AB] a[?AS]",api:"legacy"},window:{sig:"1F r[1] a[]",api:"legacy"}}),e.addLibrary("http://exslt.org/common",{"node-set":{sig:"1F r[?N] a[?N]",isIdempotent:!0}}),{getLibrary:function(t){return e.getLibrary(t)},addLibrary:function(t){return e.addLibrary(t.namespace,t.signatures)}}})();var _e=function(){function e(C){var n,r={};for(n in C){var h=C[n];r[n]=h}return r}function t(){}function i(C){let n={};if(C){C=C.split(" ");for(let h=0;h<C.length;h++){var r=C[h];let m=r.indexOf("="),c=m===-1?r:r.substring(0,m);r=m===-1?"":r.substring(m+1),n[c]=r==="~"?Ft.withPrefix[c]:r}}return n}function f(C){let n=[];return(C.C||[]).forEach(function(r){r.N==="arg"&&n.push(r)}),n}function v(C,n,r){let h;if(n.globalContext)h=n.globalContext.value.X();else{h=new t,h.j();var m=n.globals;m&&(h.Bc=m),(m=n.accumulators)&&(h.yb=m)}m=n.language,T&&T.language&&(m=T.language);var c=n.staticContext;c&&c.language&&(m=c.language),c=n.html5Mode,h.ke=c||!1,h.Xa=m?m==="XSLT":!1,h.Ec=n.inTry,h.Xe=n.inCatch,h.Lb=n.backwardCompatibility;let P,Q;if(m=n.slotMap){c=-1;let H;for(P in m)H=m[P],h.Ub[P]=H,c=H>c?H:c;h.md=c+1}if(h.yj(C),C=n.slotTypes)for(P in C)h.td[P]=Be(C[P]);for(Q in r)h.namespaces[Q]=r[Q];return h.namespaces[""]="",(r=n.staticTyping)&&(h.hf=r),(r=n.xpathDefaultNamespace)&&(h.xpathDefaultNamespace=r),(r=n.defaultCollation)&&(h.Mb=r),(r=n.staticBaseURI)&&(h.staticBaseURI=r),(r=n.contextType)?h.type=new Vt(Xe(r),2):h.type=h.Xa?null:Et.jc,h.se=h.type,(n=n.requiredType)&&(h.we=on(n)),h}function a(C){let n=new t;n.type=Et.jc,n.R(C.params,C.inputConvert),"fn xs map array math saxon ixsl".split(" ").forEach(m=>n.namespaces[m]=Ns[m]);for(var r in C.namespaceContext)n.namespaces[r]=C.namespaceContext[r];C.xpathDefaultNamespace&&(n.xpathDefaultNamespace=C.xpathDefaultNamespace);let h;if(C=C.slotMap){r=-1;let m;for(h in C)m=C[h],n.Ub[h]=m,r=m>r?m:r;n.md=r+1}return n}function u(C,n,r){return C=Ps.process(C,n.type==="pattern",n.splitPattern,r,n.language==="XSLT",n.allowEmpty,n.freeVariables),At(C)}function l(C,n=!1){let r={function:{},globalVariable:{},globalParam:{}};for(let m in C){if(C[m].visibility==="PRIVATE")continue;var h=C[m].actor;let c=at.U(h)?h.nodeName:h.N,P=at.U(h)?h.getAttribute("name"):h.name;switch(c){case"function":if(n&&C[m].visibility!=="PUBLIC"&&C[m].visibility!=="FINAL")break;h=(at.U(h)?at.ad(h,"arg"):f(h)).length,r[c][P+"#"+h]=C[m];break;case"globalVariable":case"globalParam":r[c][P]=C[m]}}return r}function A(C,n=!0){let r={N:C.nodeName};var h=C.attributes,m;for(m=0;m<h.length;m++){var c=h[m].name;(c.substring(0,5)!=="xmlns"||c.length!==5&&c.charAt(5)!==":")&&(r[c]=h[m].value)}if(C=C.childNodes||[],C.length!==0){for(h=[],m=0;m<C.length;m++)c=A(C[m],n),n&&(c.parentNode=r),h.push(c);r.C=h}return r}function S(C){C.C&&C.C.forEach(function(n){n.parentNode=C,S(n)})}function O(C,n,r){return C={N:"co",id:C,binds:r,Je:r.split(/\s+/).map(h=>parseInt(h,10)),actor:n,C:[n]},n.parentNode=C}function M(C){if(!at.U(C))return[];let n=[];return C.childNodes.forEach(r=>n=n.concat(M(r))),n}function d(C,n){C.nodeName==="ufRef"?C.setAttribute("bSlot",n[C.getAttribute("name")]):C.hasChildNodes()&&C.childNodes.forEach(r=>d(r,n))}function o(C,n,r){var h=J.ra();if(r||={},r.params||(r.params={}),C.freeV){let w=r.params,g={};C.freeV.forEach(x=>{let I=x.startsWith("Q{}")?w[x.substring(3)]:w[x];if(!I)throw new F("A value for parameter "+x+" is required","SXJS9999");g[x]=I}),r.params=g}var m=r.inputConvert||"strong";let c=a(r),P=C.C[0];P.parentNode=C;let Q={name:"evaluate",Oa:C,bb:{}};C=new In,C.da=J.createDocument(),C.fixed={Ld:{},Ta:{},kb:{},Tb:{},zf:0,Bb:new Date,bb:{"Q{}":C.da.createElement("decimal-format")},nd:{evaluate:Q},staticBaseURI:h?window.location.href:null,fa:ut},r.staticBaseURI&&(C.fixed.staticBaseURI=r.staticBaseURI);let H,B,y;if(r.namedDecimalFormats)for(let w in r.namedDecimalFormats){h=r.namedDecimalFormats[w],H=C.da.createElement("decimal-format");for(B in h)y=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?y:Ct.La(y)[0]);Q.bb[/^Q\{/.test(w)?w:"Q{}"+w]=A(H)}if(r.defaultDecimalFormat){h=r.defaultDecimalFormat,H=C.da.createElement("decimal-format");for(B in h)y=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?y:Ct.La(y)[0]);Q.bb["Q{}"]=A(H)}if(C.ma=c.rc,n)if(n instanceof ft)C.focus=n;else{if(Array.isArray(n)&&1<n.length)throw new F("Context item is a sequence of more than one item","XTTE3210");n=Yt(n),m==="strong"&&(n=Ne(n)),C.focus=n!=null?me(n[0]):Lt(bt)}else C.focus=Lt(bt);return m=ut.evaluate(P,C),$r(m,r.resultForm||"default")}let E=Bt.Vc,T=null;return t.prototype={type:void 0,we:void 0,se:void 0,J:[],K:void 0,md:0,B:1,Ub:{},td:{},g:{},rc:[],Bc:{},yb:{},hf:!1,Xa:!1,Ec:!1,Xe:!1,cg:!1,Lb:!1,namespaces:{},xpathDefaultNamespace:"",Mb:E,j:function(){this.B=this.md=0,this.rc=[],this.Ub={},this.td={},this.hf=!1,this.g={},this.Bc={},this.namespaces={"":"",xml:Ft.xml},this.Mb=E},toString:function(){var C=0,n;for(n in this.Bc)C++;return`CompileContext:
	`+(C+" global variables/params")},yj:function(C){if(C!==void 0&&(C=C.next(),C!=null))for(var n=wt(C.keys()),r;(r=n.next())!=null;){var h=ot.XS.QName.matches(r)?r.toEQName():r.toString();/^Q{/.test(h)||(h="Q{}"+h);let m=this.Ub.hasOwnProperty(h)?this.Ub[h]:this.md++;this.Ub[h]=m,r=C.get(r),this.rc[m]=r,this.td[h]=Et.ya}},R:function(C,n){if(this.j(),C!==void 0)for(let h in C){let m=h.toString();/^Q{/.test(m)||(m="Q{}"+m);var r=this.md++;this.Ub[m]=r;let c=Yt(C[h]);n==="strong"&&(c=Ne(c)),(this.rc[r]=c)&&(r=c.code,this.td[m]=r?new Vt(ot.codes[r],2):Et.ya)}},X:function(){let C=new t;return C.type=this.type,C.we=this.we,C.se=this.se,C.J=this.J,C.K=this.K,C.md=this.md,C.B=this.B,C.Ub=e(this.Ub),C.td=e(this.td),C.hf=this.hf,C.Xa=this.Xa,C.Ec=this.Ec,C.Xe=this.Xe,C.Lb=this.Lb,C.g=e(this.g),C.rc=e(this.rc),C.Bc=this.Bc,C.yb=this.yb,C.namespaces=e(this.namespaces),C.xpathDefaultNamespace=this.xpathDefaultNamespace,C.Mb=this.Mb,C.$a=this.$a,C}},{compile:function(C,n,r,h,m){if(h=i(n.nsAttribute),r=v(r,n,h),!n.globalContext&&(r.$a=l(m.fixed.Ja),m=n.globalFunctions)){h={};let P=0;for(let Q in m){var c=m[Q];let H=at.U(c);c=H?c.parentNode:c.parent;let B=H?c.parentNode:c.parent;h[P++]={actor:c,Oa:B,id:parseInt(H?B.getAttribute("id"):B.id,10)}}r.$a=l(h)}return u(C,n,r)},compileOnly:function(C,n,r=!1){n||={},n.params||(n.params={}),n.freeVariables=!0;var h=a(n);let m=u(C,n,h).next();if(h=m.xi){let P=Object.assign({},n);P.freeVariables=!1,P.params={},h.forEach(Q=>{P.params[Q]="dummy"}),n=a(P),m=u(C,P,n).next()}let c={N:"package",name:"evaluate",C:[m]};return h&&(c.freeV=h),r?c:function(P,Q={}){return o(c,P,{params:Q})}},evaluateOnly:o,compileGlobalContext:function(C,n,r){var h=new t;h.j(),h.Bc=C,h.$=n,h.yb=r,C={},r=0;for(let c in n){var m=n[c];let P=at.U(m);m=P?m.parentNode:m.parent;let Q=P?m.parentNode:m.parent;C[r++]={actor:m,Oa:Q,id:parseInt(P?Q.getAttribute("id"):Q.id,10)}}return h.$a=l(C),At(h)},evaluateXDM:function(C,n,r,h){function m(q=""){return P[q]}var c;let P,Q=v(h.params,h,h.namespaces);Q.Ja=r.fixed.Ja,Q.staticBaseURI||(Q.staticBaseURI=r.fixed.staticBaseURI);let H=r.fixed.Ja;Q.$a=l(r.fixed.Ja,h.dynamicEval),C=u(C,h,Q).next();let B={N:"package",name:"evaluate"};var y={name:"evaluate",Oa:B,bb:{}};C.parentNode=B;let w=!1;var g=M(C);if(0<g.length){w=!0;for(var x=[],I=0;I<g.length;I++)x.push(1001+I);let q=1001;var L=0;let $=[],rt={};g.forEach(st=>{let ht=O(q,A(st),"");st=st.getAttribute("name")+"#"+st.getAttribute("arity"),ht.parentNode=B,Q.$a.function[st]={actor:ht,Oa:null,id:q},rt[st]=L++,H[q]=ht,q++,$.push(ht)}),d(C,rt),C=A(C),x=O(1e3,C,x.join(" ")),x.parentNode=B,H[1e3]=x,$.unshift(x),B.C=$}else at.U(C)?C=A(C):S(C),B.C=[O(1e3,C,"")],C.parentNode=B;I=ut.fe(r.oa.actor,r);for(c in I.bb)y.bb[c]=I.bb[c];if(g=new In,g.fixed={Ld:{},Ta:{},Tb:{},kb:{},zf:0,Bb:new Date,bb:{},Ja:r.fixed.Ja,fa:ut,options:r.fixed.options,Ab:r.fixed.Ab,staticBaseURI:r.fixed.staticBaseURI,ye:null,nd:{evaluate:y}},g.fixed.nd[I.name]=I,h.staticBaseURI&&(g.fixed.staticBaseURI=h.staticBaseURI),I=h.staticContext){var _=I.decimalFormats;if(_)for(c in _)y.bb[c]=A(_[c]);if(y=I.resources)for(c in y)if(_=y[c],_.hasOwnProperty("err")){let q=_.err;q=q.replace(/Q{http:\/\/www\.w3\.org\/2005\/xqt-errors\}/,""),g.fixed.kb[c]=g.fixed.Tb[c]=new F(q+" "+_.description,q)}else g.fixed.kb[c]=_;if(y=I.sources){for(c in y)if(c!==".")try{let q=y[c],$;if(typeof q=="string"){let rt=J.ve(q);rt=Jt.Fg(Jt.Eg(rt)),$=at.dc(J.Sb(rt)),$._saxonBaseUri=q,$._saxonDocUri=q}else $=q;g.fixed.Ta[c]=$}catch(q){g.fixed.Ta[c]=g.fixed.Tb[c]=q}}(c=I.collectionFinder)&&(P=c,g.fixed.options.Hg=m),c=I.staticBaseURI,typeof c<"u"&&(g.fixed.staticBaseURI=c==="#UNDEFINED"?null:c)}if(h.staticBaseURI&&(g.fixed.staticBaseURI=h.staticBaseURI),g.masterDocument=r.masterDocument,g.da=J.createDocument(),n!=null){if(h=n.next(),n.next()!=null)throw new F("Context item is a sequence of more than one item","XTTE3210");for(g.ma=[],n=0;n<Q.rc.length;n++)g.ma[n]=Q.rc[n];return g.oa=w?x:r.oa,h!=null?(h=me(h),g.focus=h):g.focus=Lt(bt),ut.evaluate(C,g)}return bt},evaluate:function(C,n,r){var h=J.ra();r||={},r.params||(r.params={});var m=r.inputConvert||"strong";let c=a(r);C=u(C,r,c).next();var P={N:"package",name:"evaluate",C:[C]};C.parentNode=P;let Q={name:"evaluate",Oa:P,bb:{}};P=new In,P.da=J.createDocument();var H={};H[Bt.Vc]=Bt.Gg(),H[Bt.Wg]=Bt.Le(),H[Bt.Xf]=Bt.Ag(),H[Bt.Kh]=Bt.Le(),P.fixed={Ld:{},options:{uc:H},Ta:{},kb:{},Tb:{},zf:0,Bb:new Date,bb:{"Q{}":P.da.createElement("decimal-format")},nd:{evaluate:Q},staticBaseURI:h?window.location.href:null,fa:ut},r.staticBaseURI&&(P.fixed.staticBaseURI=r.staticBaseURI);let B,y;if(r.namedDecimalFormats)for(let w in r.namedDecimalFormats){h=r.namedDecimalFormats[w],H=P.da.createElement("decimal-format");for(B in h)y=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?y:Ct.La(y)[0]);Q.bb[/^Q\{/.test(w)?w:"Q{}"+w]=A(H)}if(r.defaultDecimalFormat){h=r.defaultDecimalFormat,H=P.da.createElement("decimal-format");for(B in h)y=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?y:Ct.La(y)[0]);Q.bb["Q{}"]=A(H)}if(P.ma=c.rc,n)if(n instanceof ft)P.focus=n;else{if(Array.isArray(n)&&1<n.length)throw new F("Context item is a sequence of more than one item","XTTE3210");n=Yt(n),m==="strong"&&(n=Ne(n)),P.focus=n!=null?me(n[0]):Lt(bt)}else P.focus=Lt(bt);return m=ut.evaluate(C,P),$r(m,r.resultForm||"default")},forceBaseURI:function(C,n){return C._saxonBaseUri=n,C._saxonDocUri=n,C},getFnSignature:function(C,n,r){function h(Q){return Q.sig||(Q.sig="F a["+ut.Ba(Q,"arg").map(H=>H.as).join(",")+"] r["+Q.as+"]"),Q.sig}var m=null,c=Wu.Kj[C.uri];if(c&&(m=c[C.local]),m&&!r.Xa&&m.XSLTonly)return null;if(m||C.uri!==Ft.ic||(ot.type[C.local]?m={sig:"1F a[?A] r[?"+ot.type[C.local].code+"]"}:wo[C.local]&&(m={sig:"1F a[1AS] r[*"+wo[C.local]+"]"})),!m&&r.$a&&r.$a.function){var P=C.toEQName();(r=r.$a.function[P+"#"+n])&&(C=P,m=r.actor,m=at.U(m)?{sig:m.getAttribute("sig"),abstract:r.Oa.getAttribute("vis")==="ABSTRACT"}:{sig:h(m),abstract:!1},m.isUserFunction=!0,m.componentBinding=r.id)}else if(!m&&r.fixed&&r.fixed.Ja)if(c=`{${C.uri}}${C.local}#${n}`,c in r.fixed.Ld)m=r.fixed.Ld[c];else{let Q=C.toEQName();for(P in r.fixed.Ja){let H=r.fixed.Ja[P].actor;if(H.N==="function"&&H.name===Q&&f(H).length===n){m={sig:h(H),isUserFunction:!0,componentBinding:P},r.fixed.Ld[c]=m;break}}}if(!m)if(C.uri===Ft.ih){for(C=0<n?"*":"",m=1;m<n;m++)C+=",*";m={sig:"1F a["+C+"] r[*]",variadic:!0},m.alphaTree=Le(m.sig)}else m=Oe.find("ExternalFunctionManager").getSignature(C.uri,C.local);return m&&!m.alphaTree&&(m.alphaTree=Le(m.sig)),m&&(C=m.alphaTree.a.length,n!=null&&n!==C&&(m.variadic?n<C:!(m.arity||[]).includes(n)))?null:m},parseNsAttribute:i,sefToJSON:A,setStaticContext:function(C){T=re(C.value,!0),C={};let n=T.resources;for(let r in n){let h=n[r];if(h.hasOwnProperty("err")){let m=h.err;m=m.replace(/Q{http:\/\/www\.w3\.org\/2005\/xqt-errors\}/,""),C[r]=new F(m+" "+h.description,m)}else C[r]=h}return T.resources=C,null},resetStaticContext:function(){return T=null},resetNameBase:function(){}}}(),or={evaluateXDM:_e.evaluateXDM,evaluate:_e.evaluate,compileToXML:_e.compile,compile:_e.compileOnly,evaluateOnly:_e.evaluateOnly,compileGlobalContext:_e.compileGlobalContext,forceBaseURI:_e.forceBaseURI,getFnSignature:_e.getFnSignature,sefToJSON:_e.sefToJSON,setStaticContext:_e.setStaticContext,resetStaticContext:_e.resetStaticContext,resetNameBase:_e.resetNameBase};let ke=function(){function e(f,v={},a=!1){var u=J.xe("compiler");return v=Object.assign({},v),v.destination="application",v.initialMode="compile-complete",v.templateParams={"Q{}options":{traceProgress:!1,justStatic:!1}},v.stylesheetInternal=u,v.sourceNode=f,f=wn.transform(v,"sync").principalResult,a||(a=f=or.sefToJSON(f.firstChild,!1),u=So(a),a[Dr]=(0>u?4294967295+u+1:u).toString(16)),f}function t(f,v){if(J.Ij())return f;throw new F(`The ${v} feature requires a license`,"SXJS0006")}let i={autoResetIndexes:!0};return{atom:function(f,v){if(typeof f=="boolean")f=ot.XS.boolean.fromBoolean(f);else if(typeof f=="number")f=ot.XS.double.fromNumber(f);else if(typeof f=="string")f=ot.XS.string.fromString(f);else if(f instanceof Uint8Array)f=ot.XS.base64Binary.fromUint8Array(f);else throw new F("Value must be boolean, number, string, or Uint8Array","SXJS0006");if(v){let a=ot.type[v];if(a)return a.cast(f);throw new F("Unknown type "+v,"SXJS0006")}return f},Ck:t,compile:function(f,v={},a=!1){if(J.ra())throw new F("SaxonJS.compile is not available","SXJS0006");return t(e,"SaxonJS.compile")(f,v,a)},getResource:function(f){let v=f.type||"text",a;if(f.file){var u=J.ec(f);a=J.Mf(f.file)}else if(f.location)if(u=f.location,u instanceof URL||(u=J.newURL(u,J.Df()),f.location=u.toString()),a=u.href,u.protocol==="file:")u=J.ec(f);else if(["http:","https:"].includes(u.protocol))u=J.ec(f);else return Promise.reject(new F("Unsupported URL protocol "+u.protocol,"SXJS0006"));else if(f.text)u=Promise.resolve(f.text),f.baseURI&&(a=f.baseURI);else return Promise.reject(new F("No resource supplied","SXJS0006"));return v==="xml"?u=u.then(l=>{try{let A=at.dc(J.Sb(l));return A._saxonBaseUri=A._saxonDocUri=a,Promise.resolve(A)}catch(A){return Promise.reject(new F("Failed parsing XML in "+a+": "+A.message,A.code))}}):v==="json"&&(u=u.then(l=>{try{return Promise.resolve(ln.od(l,new It,new In))}catch(A){return Promise.reject(new F("Failed parsing JSON in "+a+": "+A.message,A.code))}})),u},serialize:function(f,v){return f=Ht.serialize(f,v),v&&v.encoding?J.aj(f,v.encoding):f},getProcessorInfo:function(){return{version:3,vendor:"Saxonica",vendorURL:"https://www.saxonica.com/",productName:"SaxonJS",productVersion:"3.0.0-beta1",isSchemaAware:!1,supportsSerialization:!0,supportsBackwardsCompatibility:!0,supportsNamespaceAxis:!0,supportsStreaming:!1,supportsDynamicEvaluation:!0,supportsHigherOrderFunctions:!0,xPathVersion:3.1,xsdVersion:1.1,releaseDate:"2024-12-18",platform:J.$g(),productEdition:J.ah()}},ll:function(){return{version:"3.0",vendor:"Saxonica","vendor-url":"https://www.saxonica.com/","product-name":"SaxonJS","product-version":"3.0.0-beta1","is-schema-aware":"no","supports-serialization":"yes","supports-backwards-compatibility":"yes","supports-namespace-axis":"yes","supports-streaming":"no","supports-dynamic-evaluation":"yes","supports-higher-order-functions":"yes","xpath-version":"3.1","xsd-version":"1.1"}},si:function(){return{"release-date":"2024-12-18",platform:J.$g(),"product-edition":J.ah()}},getConfigurationProperties:function(){let f={};return Object.keys(i).forEach(v=>{f[v]=i[v]}),f},getConfigurationProperty:function(f){if(f in i)return i[f]},setConfigurationProperties:function(f){let v={};return Object.keys(i).forEach(a=>{v[a]=i[a]}),Object.keys(f).forEach(a=>{a==="autoResetIndexes"||a==="nativeGetElementById"?i[a]=!!f[a]:Z.xa("The configuration property "+a+" is unrecognized")}),v},setConfigurationProperty:function(f,v){if(f==="autoResetIndexes"||f==="nativeGetElementById"){let a=i[f];return i[f]=!!v,a}Z.xa("The configuration property "+f+" is unrecognized")},resetIndexes:function(f){return J.ra()&&!f&&(f=window.document),f&&"_saxonIndexes"in f?(delete f._saxonIndexes,delete f._saxonIndexesBC,delete f._saxonXmlIdIndex,!0):!1}}}(),ar=function(){function e(n,r,h,m,c=null){if(r=r.fixed.fa,n=n.next()){if(n=Rt.trim(n.toString()),c&&Rt.Db(n))return c==="##local"&&(c=r.Dc(h)[""]||""),"Q{"+c+"}"+n;try{let P=T.QName.fromString(n,r.Sd(h,!1));if(P===null)throw new F("Invalid QName "+n,m,h);return"Q{"+P.uri+"}"+P.local}catch(P){throw P instanceof F&&["FORG0001","XTDE0290"].includes(P.code)?new F(P.message,m):P}}else return null}function t(n){return(n=n.next())?n.value:""}function i(n){function r(c){return c.replace(/[^A-Za-z]/g,P=>"0"+P.codePointAt(0))}let h=at.Ha;n=h.Sa(n).expand().reverse();let m="";for(let c=0;c<n.length;c++)if(n[c]instanceof cn)m+="N"+r(n[c].prefix);else if(n[c].nodeType===2)m+="A"+r(at.aa(n[c]).toEQName());else{let P=h.Ic(n[c]).count()+1;m+=Se.Of(P,c%2===0?"a":"A")}return"d"+at.hi(n[0])+m}function f(n,r,h){let m="";n[0].forEachItem(function(P){m+=P.value.trim()+" "});var c=m.trim().split(/\s+/);if(n=n[1]?n[1].next():E.nc(ue(r)),!E.U(n))throw new F("Context item is not a node for fn:"+h+"()","XPTY0004");if(n.nodeType!==9&&(n=E.nc(n)),h=[],r=ke.getConfigurationProperty,J.ra()&&n.nodeType===9&&r("nativeGetElementById")){for(let P of c)(c=n.getElementById(P))&&h.push(c);return E.ed(wt(h))}"_saxonXmlIdIndex"in n&&n._saxonXmlIdIndex!==null||(n._saxonXmlIdIndex={},v(n));for(let P of c)P in n._saxonXmlIdIndex&&h.push(...n._saxonXmlIdIndex[P]);return E.ed(wt(h))}function v(n){let r={},h=C.Se(n),m;for(;(m=h.next())!==null;)if(m.nodeType===1){var c=m.getAttributeNS(Ft.xml,"id");c&&(c=c.trim(),c in r?r[c].push(m):r[c]=[m]),(c=m.getAttribute("id"))&&(c=c.trim(),c in r?r[c].push(m):r[c]=[m])}n._saxonXmlIdIndex=r}function a(n,r,h){let m=r;return n.forEachItem(function(c){m=h(c,m)}),m}function u(n){function r(m){throw new F(m,"FORG0006")}let h=n==="max"?function(m){return 0<m}:function(m){return 0>m};return function(m,c,P){let Q=m[0];c.fixed.fa.ib(P,"i")&&(Q=Q.filter(function(st){return!Bt.pc(st)})),m=Bt.Ob(P,m[1],"compare",c);let H=Bt.bi(m),B=T.untypedAtomic.matches,y=T.numeric.matches,w=T.double.matches,g=T.float.matches,x=T.anyURI.matches,I=T.string.matches;m=T.duration.matches;let L=T.yearMonthDuration.matches,_=T.dayTimeDuration.matches;c=T.QName.matches;let q=T.double.cast,$=T.float.cast,rt=T.string.cast;return Q=Q.mapOneToOne(function(st){return B(st)?q(st):st}),P=Q.next(),P===null?bt:(c(P)&&r(n+"() not defined over QName"),!m(P)||L(P)||_(P)||r(n+"() not defined over mixed durations"),At(a(Q,P,function(st,ht){if((I(st)&&y(ht)||I(ht)&&y(st))&&r("Cannot compare string with numeric"),(L(st)&&!L(ht)||_(st)&&!_(ht))&&r("Cannot compare mixed durations"),Bt.pc(ht))return w(st)?q(ht):ht;if(Bt.pc(st))return w(ht)?q(st):st;w(ht)&&!I(st)?st=q(st):w(st)&&!I(ht)?ht=q(ht):g(ht)&&!I(st)?st=$(st):g(st)&&!I(ht)&&(ht=$(ht)),x(ht)&&I(st)?ht=rt(ht):x(st)&&I(ht)&&(st=rt(st));try{return h(H(st,ht))?st:ht}catch(tt){throw tt instanceof F&&tt.code==="XPTY0004"&&(tt.code="FORG0006"),tt}})))}}function l(n,r){if(r.length!==2&&r.length!==5)throw new F("Wrong number of arguments ("+r.length+") for  "+n,"XPST0017")}function A(n,r){return n=n[0].next(),n===null?bt:r==="timezone"?n.timezoneOffset===null?bt:At(T.dayTimeDuration.Xg(n.timezoneOffset)):r==="seconds"?(r=n.proxy(),qr(r.getUTCSeconds()+r.getUTCMilliseconds()/1e3)):(n=n.proxy()[r](),r==="getUTCMonth"&&n++,he(n))}function S(n,r){return n=n[0].next(),n===null?bt:r!==5?he(Ni(n)[r]*Ii(n)):qr(Ni(n)[r]*Ii(n))}function O(n,r,h){function m(Q,H){return At(ot.codes[r].fromDate(Q,H))}let c=n[0].next();if(!c)return bt;if(h=h.fixed.Bb.getTimezoneOffset(),n[1]){var P=n[1].next();if(n=P!==null?P.milliseconds/6e4:null,n!==null&&(-840>n||840<n))throw new F("timezone out of bounds "+P,"FODT0003")}else n=-h;if(P=c.timezoneOffset,P===null&&n===null)return At(c);if(P===null&&n!==null)return m(Bi(c,-h-n).UTCdate,n);if(P!==null&&n===null)return m(Bi(c,h+P).UTCdate,null);if(P!==null&&n!==null)return m(c.UTCdate,n)}function M(n,r,h,m){let c=n[1].expand(),P=n[2].expand()[0];return P instanceof Ut.XdmFunction||Z.ka("fold-"+(m?"left":"right")+"() function argument not instance of XdmFunction"),n=n[0].expand(),m||(n=n.reverse()),n.forEach(Q=>{c=P.evaluate(m?[c,[Q]]:[[Q],c],r,h).expand()}),wt(c)}let d=null,o=null,E=at,T=ot.XS,C=E.Ha;return{abs:function(n){return n=n[0].next(),n===null?bt:At(n.abs())},"accumulator-after":function(n,r,h){return n=e(n[0],r,h,"XTDE3340"),wt(yo.Sh(h,n,ue(r),r))},"accumulator-before":function(n,r,h){return n=e(n[0],r,h,"XTDE3340"),wt(yo.Th(h,n,ue(r),r))},"adjust-date-to-timezone":function(n,r){return O(n,"AA",r)},"adjust-dateTime-to-timezone":function(n,r){return O(n,"AM",r)},"adjust-time-to-timezone":function(n,r){return O(n,"AT",r)},"analyze-string":function(n,r){let h=t(n[0]);var m=r.da.createDocumentFragment();let c=Ft.Ma,P=r.da.createElementNS(c,"analyze-string-result");return m.appendChild(P),h===""||(m=n[1].next().toString(),n=n[2]?n[2].next().toString():"",Gt.Bf(h,m,n,!1,!1).forEach(function(Q){let H;if(Q.Gc){let y;Q=Q.groups,H=r.da.createElementNS(c,"match");var B=0;for(let w=1;w<Q.length;w++)Q[w]&&(y=Q[0].indexOf(Q[w],B),y>B&&(B=r.da.createTextNode(Q[0].substring(B,y)),H.appendChild(B)),B=r.da.createElementNS(c,"group"),B.setAttribute("nr",w),B.appendChild(r.da.createTextNode(Q[w])),H.appendChild(B),B=y+Q[w].length);B<Q[0].length&&(B=r.da.createTextNode(Q[0].substring(B,y)),H.appendChild(B))}else H=r.da.createElementNS(c,"non-match"),B=r.da.createTextNode(Q.string),H.appendChild(B);P.appendChild(H)})),At(P)},apply:function(n,r,h){let m=r.fixed.fa,c=n[0].next();if(n=n[1].next().value,c instanceof Ut.XdmFunction)return c.evaluate(n,r,h);if(c instanceof qt||c instanceof It||Z.ka("Target of apply() is neither map(*) nor array(*) nor function(*): actual value "+Z.showValue(c)),1<n.length)throw new F("Too many arguments supplied in dynamic function call to array or map","XPTY0004",h);if(n[0].length!==1)throw new F("Argument supplied in dynamic function call to array or map is not a single item: "+Z.showValue(n),"XPTY0004",h);return r=m.Kb(n[0][0]).next(),c instanceof qt&&(r=T.numeric.matches(r)?r.toNumber():T.double.cast(r).toNumber()),wt(c.get(r))},"available-environment-variables":function(){return bt},"available-system-properties":function(){let n=[],r={version:"3.0",vendor:"Saxonica","vendor-url":"https://www.saxonica.com/","product-name":"SaxonJS","product-version":"3.0.0-beta1","is-schema-aware":"no","supports-serialization":"yes","supports-backwards-compatibility":"yes","supports-namespace-axis":"yes","supports-streaming":"no","supports-dynamic-evaluation":"yes","supports-higher-order-functions":"yes","xpath-version":"3.1","xsd-version":"1.1"};for(let h in r)r.hasOwnProperty(h)&&n.push(T.QName.fromParts("xsl",Ft.Qc,h));return wt(n)},avg:function(n,r){if(n=n[0].mapOneToOne(r.fixed.fa.Gh),r=n.next(),r===null)return bt;r={kg:r,count:1};let h=sn["a+a"];try{let m=a(n,r,function(c,P){return{kg:h(P.kg,c),count:P.count+1}});return At(sn["a/a"](m.kg,T.integer.fromNumber(m.count)))}catch{throw new F("Input to avg() contains a mix of numeric and non-numeric values ","FORG0006")}},"base-uri":function(n){return n[0].mapOneToOne(function(r){if(r=E.baseURI(r)){let h=r.indexOf("#");0<=h&&(r=r.substring(0,h))}return r===null?null:T.anyURI.fromString(r)})},boolean:function(n,r){return Pt(r.fixed.fa.Bd(n[0]))},ceiling:function(n){return n=n[0].next(),At(n===null?null:n.Ef())},"codepoint-equal":function(n){let r=n[0].next();return n=n[1].next(),r===null||n===null?bt:Pt(r.toString()===n.toString())},"codepoints-to-string":function(n){return kt(Ct.ac(n[0].expand().map(r=>r.toNumber())))},"collation-key":function(n,r,h){let m=n[0].next();return n=Bt.Ob(h,n[1],"collationKey",r),At(T.base64Binary.fromUtf8EncodedString(n(m.value)))},collection:function(n,r,h){var m=r.fixed.fa;let c=r.fixed.options.Hg;if(c&&typeof c=="function"){let P=null;if(n[0]&&(n=n[0].next(),n!==null&&(P=J.pb(n.toString(),m.Ea(h,r)))),m=P?c(P):c(),typeof m>"u")throw new F("No available collection for supplied URI: "+P,"FODC0002",h);if(m=Yt(m),r=r.fixed.ye,r!==null)for(h=0;h<m.length;h++)m[h]=r(m[h]);return Array.isArray(m)?wt(m):At(m)}if(n[0])throw new F("Unknown collection (no collectionFinder supplied)","FODC0002",h);return bt},compare:function(n,r,h){let m=n[0].next(),c=n[1].next();return m===null||c===null?bt:(n=Bt.Ob(h,n[2],"compare",r),he(n(m.value,c.value)))},concat:function(n){return kt(n.map(function(r){return r=r.next(),r===null?"":T.string.cast(r)}).join(""))},contains:function(n,r,h){let m=t(n[0]),c=t(n[1]);return n=Bt.Ob(h,n[2],"contains",r),Pt(n(m,c))},"contains-token":function(n,r,h){function m(Q){return P(Q,c)}let c=t(n[1]);if(c=Rt.trim(c),c==="")return Pt(!1);let P=Bt.Ob(h,n[2],"equals",r);for(;(r=n[0].next())!==null;)if(0<=r.toString().split(/[ \n\r\t]+/).findIndex(m))return Pt(!0);return Pt(!1)},"copy-of":function(n,r,h){let m=un(r),c=Gt.zc(m);return n[0].forEachItem(P=>Gt.df(P,r,c,h,!0,!0)),c.close(),wt(m.Gb)},count:function(n){return he(n[0].count())},"current-date":function(n,r){return At(T.date.fromDate(r.fixed.Bb,-r.fixed.Bb.getTimezoneOffset()))},"current-dateTime":function(n,r){return At(T.dateTimeStamp.fromDate(r.fixed.Bb,-r.fixed.Bb.getTimezoneOffset()))},"current-group":function(){throw new F("The current-group() function cannot be invoked dynamically","XTDE1061")},"current-grouping-key":function(){throw new F("The current-grouping-key() function cannot be invoked dynamically","XTDE1071")},"current-merge-group":function(n,r){if(r.vb===null)throw new F("There is no current merge group","XTDE3480");if(n[0]){if(n=n[0].next().value,r=r.vb.groups[n])return wt(r);throw new F("Unknown merge source "+n,"XTDE3490")}return wt(r.vb.items)},"current-merge-key":function(n,r){if(r.vb===null)throw new F("There is no current merge group","XTDE3510");return wt(r.vb.keys)},"current-output-uri":function(n,r){return n=r.nb.length===0?null:r.nb[r.nb.length-1],n==null||r.pa==="function"?bt:At(n)},"current-time":function(n,r){return At(T.time.fromDate(r.fixed.Bb,-r.fixed.Bb.getTimezoneOffset()))},data:function(n,r){return n[0].mapOneToMany(r.fixed.fa.Kb)},dateTime:function(n){let r=n[0].next();if(n=n[1].next(),r===null||n===null)return bt;let h="";if(r.timezoneOffset!==null){if(n.timezoneOffset===null)h=Mr(r);else if(r.timezoneOffset!==n.timezoneOffset)throw new F("timezones are incompatible ","FORG0008")}return At(T.dateTime.fromString(r.toString().substring(0,10)+"T"+n.toString()+h))},"day-from-date":function(n){return A(n,"getUTCDate")},"day-from-dateTime":function(n){return A(n,"getUTCDate")},"days-from-duration":function(n){return S(n,2)},"deep-equal":function(n,r,h){return r=Bt.Ob(h,n[2],"equals",r),Pt(Nn(n[0],n[1],r))},"default-collation":function(){return kt(Bt.Vc)},"default-language":function(){return At(T.language.fromString("en"))},"distinct-values":function(n,r,h){r=Bt.Te(h,n[1],r);let m=Bt.kf(r);return n[0].filter(function(c){return m.containsKey(c)?!1:(m.inSituPut(c,!0),!0)})},doc:function(n,r,h){if(n=Jt.Zd(n,r,h),n===null)return bt;try{let m=Jt.xc(n,r),c=r.fixed.ye;return c&&(m=c(m)),At(m)}catch(m){throw m}},"doc-available":function(n,r,h){let m=Jt.Zd(n,r,h);return m===null?Pt(!1):Jt.th(function(){Jt.xc(m,r)})},document:function(n,r,h){let m=r.fixed.fa,c,P;if(n[1]&&(c=E.baseURI(n[1].next()),!c))throw new F("No base URI available for second argument of document()","XTDE1162");c||(P=m.Ea(h,r));let Q=r.fixed.ye;return E.ed(n[0].mapOneToMany(function(H){let B=c||(E.U(H)?E.baseURI(H):P);return m.Kb(H).mapOneToOne(function(y){if(B===null)throw new F("No base URI for document('"+y+"')","XTDE1162");return y=Jt.xc(J.pb(y.toString(),B),r),Q!==null&&(y=Q(y)),y})}))},"document-uri":function(n){return n=n[0].next(),n!==null&&n.nodeType===9&&n._saxonDocUri?At(T.anyURI.fromString(n._saxonDocUri)):bt},"element-available":function(n,r,h){return n=e(n[0],r,h,"XTDE1440","##local").split("}"),(r=n[0].substring(2)==="http://www.w3.org/1999/XSL/Transform")&&(o==null&&(o=J.xe("elements")),o[n[1]]||(r=!1)),Pt(r)},"element-with-id":function(n,r){return f(n,r,"element-with-id")},empty:function(n){return Pt(n[0].next()===null)},"encode-for-uri":function(n){return n=encodeURIComponent(t(n[0])).replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16).toUpperCase()}),kt(n)},"ends-with":function(n,r,h){let m=t(n[0]),c=t(n[1]);return n=Bt.Ob(h,n[2],"endsWith",r),Pt(n(m,c))},"environment-variable":function(){return bt},error:function(n){if(n[0]===void 0)throw new F("fn:error() invoked","FOER0000");var r=n[0].next();r=r?r.toEQName():"FOER0000";let h=n[1]?t(n[1]):"";throw r=new F(h,r),n[2]&&(r.errorObject=n[2].next()),r},"escape-html-uri":function(n){return kt(ut.escape(t(n[0]),function(r){return 32>r||126<r}))},"exactly-one":function(n){if(n=n[0].expand(),n.length!==1)throw new F("Required length 1, actual length "+n.length,"FORG0005");return At(n[0])},exists:function(n){return Pt(n[0].next()!==null)},false:function(){return Pt(!1)},filter:function(n,r,h){let m=n[1].expand()[0];return m.evaluate||Z.ka("filter() argument is not a function"),n[0].mapOneToOne(function(c){let P=m.evaluate([[c]],r,h).expand();if(Array.isArray(P)&&P.length!==1||!T.boolean.matches(P[0]))throw new F("Wrong type for function result in filter(). Expecting xs:boolean, supplied value is "+Z.showValue(P),"XPTY0004",h);if(P[0].toBoolean())return c})},floor:function(n){return n[0].mapOneToOne(function(r){return r.floor()})},"fold-left":function(n,r,h){return M(n,r,h,!0)},"fold-right":function(n,r,h){return M(n,r,h,!1)},"format-date":function(n){l("format-date",n);let r=n[0].next();return r===null?bt:n[2]?kt(Se.Dd("date",r,n[1].next().toString(),n[2].next(),n[3].next(),n[4].next())):kt(Se.Dd("date",r,n[1].next().toString()))},"format-dateTime":function(n){l("format-dateTime",n);let r=n[0].next();return r===null?bt:n[2]?kt(Se.Dd("dateTime",r,n[1].next().toString(),n[2].next(),n[3].next(),n[4].next())):kt(Se.Dd("dateTime",r,n[1].next().toString()))},"format-integer":function(n){let r=n[0].next();return kt(r===null?"":Se.Of(r,n[1].next().toString()))},"format-number":function(n,r,h){let m=r.fixed.fa;var c=n[2]?e(n[2],r,h,"FODF1280"):"Q{}";if(h=m.fe(h,r).bb[c!==null?c:"Q{}"],!h)throw new F("Unknown decimal format "+c,"FODF1280");return c=n[0].next(),c===null?c=Number.NaN:c=c.toDouble().value,kt(Se.wi(c,n[1].next().toString(),h,r))},"format-time":function(n){l("format-time",n);let r=n[0].next();return r===null?bt:n[2]?kt(Se.Dd("time",r,n[1].next().toString(),n[2].next(),n[3].next(),n[4].next())):kt(Se.Dd("time",r,n[1].next().toString()))},"for-each":function(n,r,h){let m=r.fixed.fa,c=n[1].expand()[0];if(c instanceof Ut.XdmFunction)return n[0].mapOneToMany(function(P){return c.evaluate([[P]],r,h)});if(c instanceof It)return n[0].mapOneToMany(P=>wt(c.get(m.Kb(P).next())));if(c instanceof qt)return n[0].mapOneToMany(function(P){return P=m.Kb(P).next(),P=T.numeric.matches(P)?P.toNumber():T.double.cast(P).toNumber(),wt(c.get(P))});Z.ka("for-each() function object not instance of XdmFunction | XdmArray | XdmMap")},"for-each-pair":function(n,r,h){let m=n[2].expand();if(m.length!==1)throw new F("for-each-pair() must have exactly one function item as the third argument. Supplied length "+m.length,"XPTY0004",h);m=m[0],m instanceof Ut.XdmFunction||Z.ka("Function object not instance of XdmFunction");let c=[],P=n[0];n=n[1];let Q=P.next(),H=n.next();for(;Q&&H;)c=c.concat(m.evaluate([[Q],[H]],r,h).expand()),Q=P.next(),H=n.next();return wt(c)},"function-arity":function(n){return n=n[0].next(),At(T.integer.fromNumber(n instanceof It||n instanceof qt?1:n.arity))},"function-available":function(n,r,h){let m=!1,c=e(n[0],r,h,"XTDE1400",Ft.Ma),P=n[1]?n[1].next().toNumber():-1,Q=r.fixed.Ja;return Object.keys(Q).forEach(function(H){H=Q[H],H.name===c&&H.actor&&H.actor.N==="function"&&(0>P?m=!0:(H=ut.Ba(H.actor,"arg").length,P===H&&(m=!0)))}),m||(n=T.QName.fromEQName(c),d==null&&(d=J.xe("functions")),m=(r=d[n.uri])&&r[n.local]?n.local==="concat"&&n.uri===Ft.Ma&&(P===-1||2<=P)?!0:0<=P?0<=r[n.local].indexOf(P):!0:!1),Pt(m)},"function-lookup":function(n,r,h){let m=n[0].next();n=n[1].next().toNumber();var c=Oe.find("SaxonJS").internals.XPath;let P=r.X(!0);return P.Xa=!0,c=c.getFnSignature(m,n,P),c?(r=c.isUserFunction?new Ut.rf(c,r):m.uri===Ft.ic?new Ut.nf(c,m,h):new Ut.Ae(c,m,n,h,r),At(r)):bt},"function-name":function(n){if(n=n[0].next(),!(n instanceof Ut.XdmFunction))throw new F("Input to function-name() is not an XdmFunction ","XXXX9999");return n.cc()&&n.cc().uri!==Ft.og?At(n.cc()):bt},"generate-id":function(n){return n=n[0].next(),kt(n?i(n):"")},"has-children":function(n){return Pt(C.Ia(n[0].next()).next()!==null)},head:function(n){return At(n[0].next())},"hours-from-dateTime":function(n){return A(n,"getUTCHours")},"hours-from-duration":function(n){return S(n,3)},"hours-from-time":function(n){return A(n,"getUTCHours")},id:function(n,r){return f(n,r,"id")},idref:function(){return bt},"implicit-timezone":function(n,r){return At(T.dayTimeDuration.Xg(-r.fixed.Bb.getTimezoneOffset()))},"index-of":function(n,r,h){let m=Lt(n[0]),c=n[1].next();n=Bt.Ob(h,n[2],"equals",r);let P=Bt.li(n);return m.mapOneToOne(function(Q){try{return P(Q,c)?T.integer.fromNumber(m.position):null}catch{return null}})},innermost:function(n,r,h){let m=r.fixed.fa.ib(h,"p")?n[0]:E.ed(n[0]);return new Vr(function*(){let c=null,P;for(;(P=m.next())!=null;)if(c)if(C.Uc(P).some(Q=>Q===c))c=P;else{let Q=c;c=P,yield Q}else c=P;c&&(yield c)}())},"in-scope-prefixes":function(n){return n=n[0].next(),wt(E.Dc(n).map(function(r){return T.string.fromString(r.prefix)}))},"insert-before":function(n){let r=n[1].next().value,h=n[2],m=Lt(n[0]);return 1>r?$e([h,m]):r>m.last()?$e([m,h]):m.mapOneToMany(function(c){return m.position===r?$e([n[2],At(c)]):At(c)})},"iri-to-uri":function(n){return kt(ut.escape(t(n[0]),function(r,h){return 32>=r||126<r||/[<>"{}|\\^`]/.test(h)}))},"json-doc":function(n,r,h){return h=Jt.zd(n,r,h),h?(h=Jt.ui(h,r),n=n[1]?n[1].next():null,At(ln.od(h,n,r))):bt},"json-to-xml":function(n,r,h){let m=r.fixed.fa;var c=n[0].next();return c===null?bt:(n=n[1]?n[1].next():null,c=ln.nj(c.toString(),n,r),n=r.da.createDocumentFragment(),n.appendChild(c),n._saxonBaseUri=m.Ea(h,r),At(n))},key:function(n,r,h){function m(ht){return ht=_?T.string.cast(ht):ht,L.containsKey(ht)?(ht=wt(L.get(ht)),x===g?ht:ht.filter(function(tt){return C.Sa(tt).filter(function(Y){return Y===g}).next()!==null})):bt}function c(ht){return{visibility:"PRIVATE",Oa:ht,oh:H,actor:ht,Je:ht.binds.split(" ").map(function(tt){return parseInt(tt,10)})}}let P=r.fixed.fa;var Q=e(n[0],r,h,"XTDE1260");let H=P.fe(h,r),B=H.keys[Q];if(!B)throw new F("Unknown key "+Q,"XTDE1260");let y=B.lg,w=P.ib(B.Fd[0],"c"),g,x;if(n[2])g=n[2].next(),E.U(g)&&(x=E.nc(g));else{var I=ue(r);E.U(I)&&(x=g=E.nc(I))}if(!x||x.nodeType!==9&&x.nodeType!==11)throw new F("No containing document for key()","XTDE1270",h);"_saxonIndexes"in x||(x._saxonIndexes={},x._saxonIndexesBC={}),h=x._saxonIndexes;let L=h[y];if(L==="under construction")throw new F("Definition of key "+Q+" is circular","XTDE0640");let _=!1;if(L)_=x._saxonIndexesBC[y];else{Q=Bt.Te(B.Fd[0],null,r),L=Bt.kf(Q,w),h[y]="under construction",Q=function(tt){return $e([C.self(tt),C.jb(tt),C.Ga(tt)])},I=function(tt){return $e([C.self(tt),C.Ga(tt)])};let ht=function(tt){return $e([C.self(tt),C.jb(tt)])};for(let tt=0;tt<B.Fd.length;tt++){var q=B.Fd[tt];let Y=/b/.test(q.flags);_=_||Y;var $=void 0;$=q.C[0];let X=r.X(!0);if(X.oa=c(q),X.focus=me(x),$.N==="p.nodeSet")$=P.evaluate($.C[0],X);else{let U=Re.kd($);$=C.he(x);var rt=P.ib(q,"a"),st=P.ib(q,"n");(rt||st)&&($=$.mapOneToMany(rt&&st?Q:rt?I:ht)),$=$.filter(function(nt){return X.focus=me(x),U(nt,X)})}for(rt=q.C[1],st=r.X(!0),st.oa=c(q),st.pa="key";(q=$.next())!==null;){st.focus=me(q);let U=P.evaluate(rt,st),nt=function(W,G){L.containsKey(W)?0>L.get(W).indexOf(G)&&(L.get(W).push(G),1<B.Fd.length&&L.get(W).sort(E.mb)):L.inSituPut(W,[G])};if(w)nt(U.expand(),q);else{let W;for(;(W=U.next())!==null;)Bt.pc(W)||(Y&&(W=T.string.cast(W)),nt(W,q))}}}h[y]=L,x._saxonIndexesBC[y]=_}return n=n[1],w?m(n.expand()):n.mapOneToMany(m)},lang:function(n,r){if(r=n[1]?n[1].next():ue(r),!r)throw new F("No context item for lang()","XPDY0002");if(!E.U(r))throw new F("Context item is not a node in lang()","XPTY0004");return n=t(n[0]).toLowerCase(),r=C.Sa(r).filter(function(h){return h.nodeType===1&&h.hasAttribute("xml:lang")}).next(),r?(r=r.getAttribute("xml:lang").toLowerCase(),Pt(n===r||r.length>n.length+1&&r.substring(0,n.length)===n&&r.charAt(n.length)==="-")):Pt(!1)},last:function(n,r){return He(r,"XPDY0002","last()"),he(r.focus.last())},"load-xquery-module":function(){throw new F("No XQuery processor available","FOQM0006")},"local-name":function(n){return n=E.aa(n[0].next()),kt(n?n.local:"")},"local-name-from-QName":function(n){return n=n[0].next(),n===null?bt:At(ot.type.NCName.fromString(n.local))},"lower-case":function(n){return kt(t(n[0]).toLowerCase())},matches:function(n){let r=t(n[0]);var h=n[1].next().toString();return n=Rt.ng(n[2]?n[2].next().toString():""),h=Rt.ue(h,n,r),Pt(0<=r.search(h))},max:u("max"),min:u("min"),"minutes-from-dateTime":function(n){return A(n,"getUTCMinutes")},"minutes-from-duration":function(n){return S(n,4)},"minutes-from-time":function(n){return A(n,"getUTCMinutes")},"month-from-date":function(n){return A(n,"getUTCMonth")},"month-from-dateTime":function(n){return A(n,"getUTCMonth")},"months-from-duration":function(n){return S(n,1)},name:function(n){return n=E.aa(n[0].next()),kt(n?n.toString():"")},"namespace-uri":function(n){return n=E.aa(n[0].next()),At(T.anyURI.fromString(n?n.uri:""))},"namespace-uri-for-prefix":function(n){var r=t(n[0]);return n=n[1].next(),r=r==="xml"?Ft.xml:n.lookupNamespaceURI(r===""?null:r),r!==null?At(T.anyURI.fromString(r)):bt},"namespace-uri-from-QName":function(n){return n=n[0].next(),n===null?bt:At(T.anyURI.fromString(n.uri))},nilled:function(n){return(n=n[0].next())&&n.nodeType===1?Pt(!1):bt},"node-name":function(n){return At(E.aa(n[0].next()))},"normalize-space":function(n){return n=t(n[0]),kt(Ct.Ib(n))},"normalize-unicode":function(n){if(String.prototype.normalize){let r=t(n[0]);if(n=n[1]?n[1].next().toString().toUpperCase().trim():"NFC",["NFC","NFD","NFKC","NFKD"].includes(n))return kt(r.normalize(n));if(n==="")return kt(r)}throw new F("normalize-unicode(): not supported on this Javascript platform","FOCH0003")},not:function(n,r){return Pt(!r.fixed.fa.Bd(n[0]))},number:function(n){return At(ot.XS.numeric.Id(n[0].next()))},"one-or-more":function(n){if(n=We(n[0]),n.peek()===null)throw new F("Required length >= 1, actual length zero","FORG0004");return n},outermost:function(n,r,h){r=r.fixed.fa.ib(h,"p"),n=n[0],r||(n=E.ed(n));let m=null;return n.filter(function(c){return m===null?(m=c,!0):C.Uc(c).some(P=>P===m)?!1:(m=c,!0)})},"parse-ietf-date":function(n){return n[0].mapOneToOne(function(r){function h(g){return g.length===1?"0"+g:g}function m(){throw new F("Invalid IETF date/time "+r.toString(),"FORG0010")}var c=r.toString().trim().toLowerCase();c=c.replace(/^(monday|tuesday|wednesday|thursday|friday|saturday|sunday|mon|tue|wed|thu|fri|sat|sun),?\s+/,"");let P,Q,H;if(/^[a-z]/.test(c))if(P=/^([a-z]{3})(?:\s*-\s*|\s+)(\d\d\d?\d?)\s+([\d:.]+)\s*([a-z]+|[+\-]\d\d?:?(?:\d\d)?(?:\s*\(\s*[a-z]+\s*\))?)?\s+(\d+)$/,c=P.exec(c),c!==null){var B=c[1],y=c[2];H=c[3];var w=c[4];Q=c[5]}else m();else P=/^(\d+)(?:\s*-\s*|\s+)([a-z]{3})(?:\s*-\s*|\s+)(\d\d\d?\d?)\s+([\d:.]+)\s*([a-z]+|[+\-]\d\d?:?(?:\d\d)?(?:\s*\(\s*[a-z]+\s*\))?)?$/,c=P.exec(c),c!==null?(y=c[1],B=c[2],Q=c[3],H=c[4],w=c[5]):m();Q.length===2&&(Q="19"+Q),B="jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec".indexOf(B||"*"),0>B&&m(),c={ut:"Z",utc:"Z",gmt:"Z",est:"-05:00",edt:"-04:00",cst:"-06:00",cdt:"-05:00",mst:"-07:00",mdt:"-06:00",pst:"-08:00",pdt:"-07:00"},/^[0-9]:/.test(H)&&(H="0"+H),H.length===5&&(H+=":00"),w&&(w=/([a-z]+)|([+\-]\d\d?:?(?:\d\d)?)(?:\s*\(\s*([a-z]+)\s*\))?$/.exec(w),(!w[3]||w[3]in c)&&(!w[1]||w[1]in c)||m(),w=w[1]?w[1]:w[2],/^[+\-][0-9]((:|$)|[0-9]{2}$)/.test(w)&&(w=w.charAt(0)+"0"+w.substring(1)),w in c?w=c[w]:w.length===3?w+=":00":w.length===4?w+="00":w.length===5&&(w=w.substring(0,3)+":"+w.substring(3))),y=Q+"-"+h((B/4+1).toString())+"-"+h(y)+"T"+H+(w||"Z");try{return T.dateTime.fromString(y)}catch{throw new F("''"+r.toString()+"'' is not a valid IETF date","FORG0010")}})},"parse-json":function(n,r){let h=n[0].next();return h===null?bt:(n=n[1]?n[1].next():null,At(ln.od(h.toString(),n,r)))},"parse-xml":function(n,r,h){if(n=n[0].next(),n===null)return bt;let m=r.fixed.fa;try{let c=J.Sb(n.toString());return c._saxonBaseUri=m.Ea(h,r),At(c)}catch(c){throw new F(c.message,"FODC0006")}},"parse-xml-fragment":function(n,r,h){let m=r.fixed.fa;return n[0].mapOneToOne(function(c){let P=/^<\?xml(?:\s+version\s*=\s*(['"])1.[0-9]+['"])?\s+encoding\s*=\s*(['"][A-Za-z](?:[A-Za-z0-9._\-])*)['"]\s*\?>/;if(c=c.toString(),/^<\?xml/.test(c)&&!P.test(c))throw new F("Invalid XML header for a text declaration","FODC0006");c=c.replace(P,"");let Q;try{Q=J.Sb("<z>"+c+"</z>")}catch(B){throw new F(B.message,"FODC0006")}let H=r.da.createDocumentFragment();return C.Ia(Q.documentElement).forEachItem(function(B){H.appendChild(B)}),H._saxonBaseUri=m.Ea(h,r),H})},path:function(n){return n[0].mapOneToOne(function(r){function h(m){return C.Ic(m).filter(function(c){return m.nodeType===c.nodeType})}return T.string.fromString(function(m){if([9,11].includes(m.nodeType))return"/";let c="",P=m;for(;P;){if(m=E.Va(P),!m)return[9,11].includes(P.nodeType)?c:"Q{http://www.w3.org/2005/xpath-functions}root()"+c;switch(P.nodeType){case 9:case 11:return c;case 1:let Q=E.aa(P);c=`/${Q.toEQName()}[${1+h(P).filter(H=>E.aa(H).equals(Q)).count()}]${c}`;break;case 3:case 4:c=`/text()[${1+h(P).count()}]`;break;case 8:c=`/comment()[${1+h(P).count()}]`;break;case 7:c=`/processing-instruction(${P.target})[${1+h(P).filter(H=>P.target===H.target).count()}]`;break;case 2:c=`/@${0>P.name.indexOf(":")?P.name:E.aa(P).toEQName()}`;break;default:c=`/namespace::${P.prefix!==""?P.prefix:"*[Q{"+Ft.Ma+'}local-name()=""]'}`}P=m}}(r))})},"prefix-from-QName":function(n){return n[0].mapOneToOne(function(r){return r.prefix===""?null:T.NCName.fromString(r.prefix)})},position:function(n,r){return He(r,"XPDY0002","position()"),he(r.focus.position)},QName:function(n){var r=n[1].next().value;let h=r.split(":"),m=h.length===2?h[0]:"";if(n=t(n[0]),m!==""&&n==="")throw new F("Prefix but no URI for QName()","FOCA0002");if(h.length===2&&m===""||m!==""&&!Rt.Db(m))throw new F(r+" not valid for QName()","FOCA0002");if(r=h.length===2?h[1]:h[0],!Rt.Db(r))throw new F(r+" not valid local name for QName()","FOCA0002");return At(T.QName.fromParts(m,n,r))},"random-number-generator":function(n,r){n=new It,n.inSituPut(T.string.fromString("number"),[T.double.fromNumber(Math.random())]);var h=T.QName.fromParts("fn",Ft.Ma,"random-number-generator"),m=Oe.find("SaxonJS").internals.XPath,c=m.getFnSignature(h,0,r);return h=new Ut.Ae(c,h,0,{},r),n.inSituPut(T.string.fromString("next"),[h]),h=T.QName.fromParts("saxon",Ft.qb,"permute"),c=r.X(),c.Xa=!0,m=m.getFnSignature(h,1,c),r=new Ut.Ae(m,h,1,{},r),n.inSituPut(T.string.fromString("permute"),[r]),At(n)},"regex-group":function(n,r){n=n[0].next().toNumber();try{return kt(r.Eb[n]||"")}catch{return kt("")}},remove:function(n){let r=n[1].next().toNumber(),h=Lt(n[0]);return h.filter(function(){return h.position!==r})},replace:function(n){let r=t(n[0]),h=Rt.ng(n[3]?t(n[3]):""),m=0,c=Rt.ue(n[1].next().toString(),h+"g",null,P=>{m=P});if(c.test(""))throw new F("Regular expression matches zero-length string","FORX0003");return n=Rt.fi(t(n[2]),h,m),kt(r.replace(c,n))},"resolve-QName":function(n){let r=n[1].next();return n[0].mapOneToOne(function(h){try{return E.vj(r,h.toString(),!0)}catch(m){throw m instanceof F&&m.code==="FORG0001"&&(m.code=Rt.fh(h)?"FONS0004":"FOCA0002"),m}})},"resolve-uri":function(n,r,h){let m=r.fixed.fa;if(n[1]){let c=n[1].next();r=c?c.toString():m.Ea(h,r)}else r=m.Ea(h,r);if(n=n[0].next(),n===null)return bt;if(n=n.toString(),h=E.fd(n),r!==null&&(r=r.replace(/^file:\/(?!\/)/,"file:///"),/#/.test(r)))throw new F("Base URI "+r+" contains a fragment identifier","FORG0002");if(!h&&r!==null&&!E.fd(r))throw new F("resolve-uri: invalid URI (base="+r+", relative="+n+")","FORG0002");return n=h?n:J.pb(n,r).toString(),At(T.anyURI.fromString(n))},reverse:function(n){return wt(n[0].expand().slice().reverse())},root:function(n){return n[0].mapOneToMany(r=>C.Sa(r)).filter(r=>!E.Va(r))},round:function(n){return n[0].mapOneToOne(r=>r.round(n[1]?Math.min(n[1].next().value,1e4):0))},"round-half-to-even":function(n){return n[0].mapOneToOne(r=>r.ef(n[1]?Math.min(n[1].next().value,1e4):0))},"seconds-from-dateTime":function(n){return A(n,"seconds")},"seconds-from-duration":function(n){return S(n,5)},"seconds-from-time":function(n){return A(n,"seconds")},serialize:function(n,r){function h(P){P.method="xml",P.indent=!1,P["escape-solidus"]=!0,P["omit-xml-declaration"]=!0}let m=new Ht.xf,c={};if(n[1]){let P=n[1].next();if(P===null)h(c);else if(at.U(P)){if(!at.$f(P))throw new F("Second argument supplied to serialize() is wrong kind of node","XPTY0004");Ht.cf(P,c,"XPTY0004")}else{if(!(P instanceof It))throw new F("Second argument supplied to serialize() does not match required type","XPTY0004");let Q=function(H,B,y,w,g=!1){let x=ot.XS.string.fromString(H);if(P.containsKey(x)){let I=P.get(x);if(0<I.length&&ut.isArray(I[0]))if(y){let L=[];I[0].flatten(_=>L.push(_)),I=L}else throw new F("fn:serialize(): supplied value of "+x+" is invalid","XPTY0004");if(I.length!==1&&!y&&!g||!I.every(L=>L.code==="AZ"||B.matches(L)))throw new F("fn:serialize(): supplied value of "+x+" is invalid","XPTY0004");c[H]=g&&I.length===0?null:w(y?I:I[0].code==="AZ"?B.cast(I[0]):I[0])}};"doctype-public doctype-system encoding item-separator json-node-output-method media-type method normalization-form version".split(" ").forEach(H=>Q(H,ot.XS.string,!1,B=>B.toString())),"allow-duplicate-names byte-order-mark escape-uri-attributes include-content-type indent escape-solidus omit-xml-declaration undeclare-prefixes".split(" ").forEach(H=>Q(H,ot.XS.boolean,!1,B=>B.toBoolean())),Q("standalone",ot.XS.boolean,!1,H=>H.toBoolean(),!0),Q("html-version",ot.XS.decimal,!1,H=>H.toNumber()),["cdata-section-elements","suppress-indentation"].forEach(H=>Q(H,ot.XS.QName,!0,B=>{let y="";for(let w=0;w<B.length;w++)y+=B[w].toEQName()+" ";return y})),c["omit-xml-declaration"]===void 0&&(c["omit-xml-declaration"]=!0),function(H){var B=ot.XS.string.fromString(H);if(P.containsKey(B)){var y=P.get(B);if(y.length!==1||!y.every(g=>g instanceof It))throw new F("fn:serialize(): supplied value of "+B+" is invalid","XPTY0004");y=y[0];var w=function(g){return T.string.matches(g)};if(!y.conforms(w,w,function(g){return g===1}))throw new F("fn:serialize(): supplied value of "+B+" is invalid","XPTY0004");B=re(y,!0),y={min:0,max:0,va:{}};for(let g in B)if(B.hasOwnProperty(g)){if(1<g.length)throw new F("fn:serialize(): Keys in a character map must all be one-character strings. Found "+g,"SEPM0016");w=g.codePointAt(0),(y.min===0||w<y.min)&&(y.min=w),w>y.max&&(y.max=w),y.va[w]=B[g]}c[H]=y}}("use-character-maps")}}else h(c);return Ht.serialize(n[0].expand(),c,m,r),kt(m.toString())},snapshot:function(n,r,h){return n[0].mapOneToOne(function(m){function c(I){if(0<I.length){let L=I.pop();Gt.hg(L,r,"cm",function(){C.Ga(L).forEachItem(_=>Q.append(_)),0<I.length?c(I):(w?Gt.hg(y,r,"",function(){C.Ga(y).forEachItem(_=>Q.append(_)),C.jb(y).forEachItem(_=>Q.append(_))},Q):Gt.df(m,r,Q,h,!0,!0),g=P.lc.lastChild)},Q)}}let P=un(r),Q=Gt.zc(P);if(!E.Va(m))return Gt.df(m,r,Q,h,!0,!0),Q.close(),wt(P.Gb).next();let H=m.nodeType,B=E.aa(m),y=m,w=[2,13].includes(H);w&&(y=E.Va(y)),Q.Da();let g,x=C.Uc(y).expand();switch(0<x.length?c(x):(Gt.df(m,r,Q,h,!0,!0),g=P.lc.lastChild),Q.wa(),g||Z.ka("snapshot: failed to find marked node"),H){case 2:return E.Ha.Ga(g).filter(I=>E.aa(I).equals(B)).next();case 13:return E.Ha.jb(g).filter(I=>E.aa(I).equals(B)).next();default:return g}})},sort:function(n,r,h){let m=Bt.Te(h,n[1],r),c=ut.Kb;if(n[2]){let P=n[2].next();c=function(Q){return P.evaluate([[Q]],r,h)}}return wt(n[0].expand().slice().sort(function(P,Q){return n[1]?ni(c(P),c(Q),m):ni(c(P),c(Q))}))},"starts-with":function(n,r,h){let m=t(n[0]),c=t(n[1]);return n=Bt.Ob(h,n[2],"startsWith",r),Pt(n(m,c))},"static-base-uri":function(n,r,h){return(n=r.fixed.fa.Ea(h,r))?At(T.anyURI.fromString(n)):bt},"stream-available":function(){return Pt(!1)},string:function(n,r){if(r=r.fixed.fa,n=n[0].next(),!n)return kt("");if(r.isArray(n)||r.isMap(n)||r.gd(n))throw new F("Input to string() is a function item ","FOTY0014");return r.Kb(n).mapOneToOne(function(h){return T.string.cast(h)})},"string-join":function(n){let r="",h=n[1]?n[1].next().value:"",m,c=!0;for(;(m=n[0].next())!==null;)c||(r+=h),r+=m.toString(),c=!1;return kt(r)},"string-length":function(n){return he(Ct.La(t(n[0])).length)},"string-to-codepoints":function(n){return wt(Ct.La(t(n[0])).map(T.integer.fromNumber))},subsequence:function(n){let r=Math.round(n[1].next().toNumber()),h=n[2]?r+Math.round(n[2].next().toNumber()):Number.POSITIVE_INFINITY;return new ji(n[0],r,h)},substring:function(n){var r=Math.round(n[1].next().toNumber());let h=n[2]?r+Math.round(n[2].next().toNumber()):Number.POSITIVE_INFINITY;return n=new Vr(t(n[0])[Symbol.iterator]()),r=new ji(n,r,h),kt(r.expand().join(""))},"substring-after":function(n,r,h){let m="",c=t(n[0]),P=t(n[1]),Q;return(Q=Bt.Ob(h,n[2],"indexOf",r)(c,P))!==-1&&(m=c.substring(Q+P.length)),kt(m)},"substring-before":function(n,r,h){let m="",c=t(n[0]),P=t(n[1]),Q;return(Q=Bt.Ob(h,n[2],"indexOf",r)(c,P))!==-1&&(m=c.substring(0,Q)),kt(m)},sum:function(n,r){r=n[0].mapOneToOne(r.fixed.fa.Gh);let h=r.next();if(h===null)return n.length===1?he(0):n[1];try{return sn["a+a"](h,h),At(a(r,h,sn["a+a"]))}catch(m){throw m instanceof F&&m.code==="XPTY0004"&&(m.code="FORG0006"),m}},"system-property":function(n,r,h){return n=T.QName.fromEQName(e(n[0],r,h,"XTDE1390")),r="",n.uri===Ft.Qc&&(r={version:"3.0",vendor:"Saxonica","vendor-url":"https://www.saxonica.com/","product-name":"SaxonJS","product-version":"3.0.0-beta1","is-schema-aware":"no","supports-serialization":"yes","supports-backwards-compatibility":"yes","supports-namespace-axis":"yes","supports-streaming":"no","supports-dynamic-evaluation":"yes","supports-higher-order-functions":"yes","xpath-version":"3.1","xsd-version":"1.1"}[n.local]),n.uri===Ft.qb&&(r=ke.si()[n.local]),r||="",kt(r)},tail:function(n){let r=Lt(n[0]);return r.filter(function(){return r.position!==1})},"timezone-from-date":function(n){return A(n,"timezone")},"timezone-from-dateTime":function(n){return A(n,"timezone")},"timezone-from-time":function(n){return A(n,"timezone")},tokenize:function(n){var r=t(n[0]);if(n[1]||(r=Ct.Ib(r)),r==="")return bt;var h=n[1]?n[1].next().toString():"[ \\n\\r\\t]+";h=Gt.Bf(r,h,n[2]?n[2].next().toString():"",!1,!0),r=n[1]&&h[0].Gc;let m=h[h.length-1];return n=n[1]&&m.Gc,h=h.filter(function(c){return!c.Gc}).map(function(c){return c.string}),r&&h.unshift(T.string.fromString("")),n&&h.push(T.string.fromString("")),wt(h)},trace:function(n,r){let h=n[0].expand();return n=n.length===2?t(n[1]):"",Z.xa("fn:trace: "+(n!==""?n+": ":"")+Z.showValue(h),1,r.fixed.Ka),wt(h)},transform:function(n,r,h){function m(j){return j=T.string.fromString(j),$.get(j)}function c(j,V="FOXT0002"){throw new F(j,V)}function P(j,V,ct=null){if("matches"in V&&"name"in V){if(V.matches(j))return j;throw new F(ct!==null?`The required item type of ${ct} is ${V.name}`:`The required item type is ${V.name}`,"XPTY0004")}return j}function Q(j,V){if(j.isStringLike())return j;throw new F(`The required item type of ${V} is string|unTypedAtomic|anyURI`,"XPTY0004")}function H(j,V,ct=z=>z){(j=m(j))&&(j=wt(j).peek())&&(rt[V]=ct(j))}function B(j){return function(V){if(V instanceof It||c("The value of the option "+j+" in fn:transform() must be of type map(xs:QName,item()*)","XPTY0004"),V.conforms(ct=>(T.QName.matches(ct)||c("The keys of the "+j+" option in fn:transform() must be of type xs:QName. Supplied value:"+ct.toString()),!0),()=>!0,()=>!0))return V}}function y(j,V){H(j,V,B(j))}function w(j){j.C&&j.C.forEach(function(V){V.parentNode=j,w(V)})}function g(j,V,ct){if(!_.N)throw new F("No XSLT processor is available to support fn:transform(). If using SaxonJS3.rt.js, it does not contain an XSLT compiler ","FOXT0001",h);let z={stylesheetParams:new It,tunnelParams:{},functionParams:{},isDynamicStylesheet:!0,destination:"application",initialMode:"compile-complete",templateParams:{"Q{}options":{noXPath:!1}}};for(let xt in V)xt==="compiler.options"?z.tunnelParams["Q{}compiler.options"]=V[xt]:z.templateParams["Q{}options"][xt]=V[xt];return z.stylesheetParams.inSituPut(ot.XS.QName.fromParts("","","staticParameters"),[ct]),z.stylesheetInternal=_,z.outputProperties={},w(_),_.relocatable==="true"&&(z.isRelocatableStylesheet=!0),V=wn.checkOptions(z),wn.internalTransform(_,j,V),V.principalResult}function x(j){if(j=L.Kb(j).expand(),1<j.length)throw new F("Supplied value when atomized is not a single string","FOXT0002");return j[0]}var I=Oe.find("SaxonJS").internals.XPath;let L=r.fixed.fa,_=J.xe("compiler"),q=!1,$=n[0].next(),rt={stylesheetParams:new It,templateParams:new It,tunnelParams:new It,functionParams:{},outputProperties:{},isDynamicStylesheet:!0,language:"XSLT",messages:[],resultDocuments:{},resultForm:"xdm"};if((n=m("requested-properties"))&&n[0]){let j=function(V,ct){c("No processor with property "+V.toEQName()+"="+ct+"() available for fn:transform()","FOXT0001")};var k=j;!(1<n.length)&&n[0]instanceof It||c("The value of the 'requested-properties' option for fn:transform() must be of type map(*)"),n=n[0],n.forAllPairs(function(V){let ct=V.v[0];switch(V.k.local){case"supports-streaming":(ct=ct.toBoolean())&&j(V.k,ct);break;case"supports-namespace-axis":ct=ct.toBoolean(),j(V.k,ct);break;case"supports-backwards-compatibility":(ct=ct.toBoolean())||j(V.k,ct);break;case"product-name":ct=ct.toString(),ct!=="SaxonJS"&&j(V.k,ct);break;case"vendor":ct=ct.toString(),ct!=="Saxonica"&&j(V.k,ct)}})}let st=m("vendor-options");st&&st[0]?(!(1<st.length)&&st[0]instanceof It||c("The value of the 'vendor-options' option for fn:transform() must be of type map(*)"),st=st[0]):st=null;var ht=m("xslt-version")[0];ht&&P(ht,T.decimal,"xslt-version"),H("stylesheet-location","stylesheetLocation",j=>Q(x(j),"stylesheet-location").toString()),H("stylesheet-node","stylesheetNode"),H("stylesheet-text","stylesheetText"),H("package-location","packageLocation",j=>Q(x(j),"package-location").toString()),H("package-node","packageNode"),H("package-text","packageText");let tt=0;"stylesheetLocation stylesheetNode stylesheetText packageLocation packageNode packageText".split(" ").forEach(j=>{rt[j]&&tt++}),tt!==1&&c("A stylesheet must be supplied as an option to fn:transform(), by exactly one of 'stylesheet-location', 'stylesheet-node', 'stylesheet-text', 'package-location', 'package-node' or 'package-text'"),H("source-node","sourceNode"),H("global-context-item","globalContextItem"),(n=m("source-node")[0])&&!m("global-context-item")[0]&&E.Va(n)&&(rt.globalContextItem=n.ownerDocument),(n=m("initial-match-selection"))&&0<n.length&&(rt.initialSelection=n),H("initial-template","initialTemplate",j=>P(j,T.QName,"initial-template").toEQName()),H("initial-mode","initialMode",function(j){return["#unnamed","#default"].includes(j.toString())?j.toString():P(j,T.QName,"initial-mode").toEQName()}),H("initial-function","initialFunction",j=>P(j,T.QName,"initial-function").toEQName()),H("static-params","staticParams"),H("base-output-uri","baseOutputURI"),H("stylesheet-base-uri","stylesheetBaseURI",j=>j.toString()),H("delivery-format","destination",j=>j.toString());let Y=rt.destination;Y&&!["raw","document","serialized"].includes(Y)&&c("The value of the delivery-format option to fn:transform() must be one of 'raw', 'document' or 'serialized'. Supplied value is "+Y),Y||="document",n=(n=m("enable-messages"))&&n.length===1?n[0].toBoolean():!1;let X=m("enable-assertions");X=X&&X.length===1?X[0].toBoolean():!1;var U=null,nt=null;if(rt.stylesheetNode){var W=rt.stylesheetNode._saxonBaseUri||"NoStylesheetBaseURI";if(rt.stylesheetNode.nodeType===9)nt=rt.stylesheetNode.cloneNode(!0);else if(rt.stylesheetNode.nodeType===11){nt=J.createDocument();for(var G=rt.stylesheetNode.childNodes,b=0;b<G.length;b++)nt.appendChild(G[b].cloneNode(!0))}else nt=E.nc(rt.stylesheetNode),W==="NoStylesheetBaseURI"&&nt._saxonBaseUri&&(W=nt._saxonBaseUri),nt=J.createDocument(),nt.appendChild(rt.stylesheetNode.cloneNode(!0));nt._saxonBaseUri=W,nt._saxonDocUri=W}if(rt.stylesheetLocation){W=L.Ea(h,r),W=J.pb(rt.stylesheetLocation,W),rt.stylesheetLocation=W;try{nt=Jt.xc(W,r)}catch(j){c("Error fetching stylesheet in fn:transform():"+j.code+" "+j.message)}nt._saxonBaseUri=W,nt._saxonDocUri=W}if(rt.stylesheetText&&(nt=J.Sb(rt.stylesheetText.toString(),!0),nt._saxonBaseUri="NoStylesheetBaseURI",nt._saxonDocUri="NoStylesheetBaseURI"),nt&&rt.stylesheetBaseURI&&(W=L.Ea(h,r),W=J.pb(rt.stylesheetBaseURI,W),nt._saxonBaseUri=W,nt._saxonDocUri=W),rt.packageNode&&(W=rt.packageNode,E.Ye(W)?U=I.sefToJSON(W.firstChild):c("The value of the 'package-node' option of fn:transform() must be a single document or element node")),rt.packageText&&(U=JSON.parse(rt.packageText.toString())),nt&&(U=rt.staticParams?rt.staticParams:new It,W=new It,G=!1,b=T.QName.fromParts("saxon",Ft.qb,"compiler.options"),st&&st.containsKey(b)&&(W=st.get(b)[0]),b=T.QName.fromParts("saxon",Ft.qb,"allowSyntaxExtensions"),st&&st.containsKey(b)&&(G=st.get(b)[0]),U=g(nt,{"enable-assertions":X,"compiler.options":W,allowSyntaxExtensions:G,relocatable:!1},U),U=I.sefToJSON(U.firstChild)),U||c("Internal error in fn:transform(): no SEF","FOXT0003"),I=U.version,I=ht?10*ht.toNumber():parseFloat(I),ht=ke.getProcessorInfo().version,I>10*ht&&c("No suitable XSLT processor is available; requested XSLT version in fn:transform() is: "+(I/10).toString()),rt.sourceNode&&rt.initialSelection&&c("Only one of 'source-node' or 'initial-match-selection' must be supplied to fn:transform() for apply-templates invocation"),rt.initialTemplate&&rt.initialMode&&c("Only one of 'initial-template' or 'initial-mode' should be supplied to fn:transform()"),rt.sourceNode){I=rt.sourceNode;var s=I.cloneNode(!0);s._saxonBaseUri=I._saxonBaseUri,s._saxonDocUri=I._saxonDocUri}rt.baseOutputURI||(rt.baseOutputURI="",q=!0),y("stylesheet-params","stylesheetParams"),y("template-params","templateParams"),y("tunnel-params","tunnelParams"),H("function-params","functionParams",function(j){return Z.assert(j instanceof qt),j.value}),Y==="serialized"&&H("serialization-params","outputProperties",j=>re(j,!0)),rt.deliverResultDocument=function(){let j=this;return new Cr(Y,function(V,ct){j.resultDocuments[V.toString()]=Y==="serialized"?[ot.XS.string.fromString(ct)]:at.U(ct)?[ct]:ct===null?[]:ct})},rt.deliverMessage=function(j){J.Yg()(j),this.kh.push([j])};let p={};I=wt(m("collections")).peek(),I!==null&&(p=re(I,!0)),rt.collectionFinder=function(j){return typeof j>"u"?null:p[j]},I=!["raw","serialized"].includes(Y);let N,D;try{w(U),U.relocatable==="true"&&(rt.isRelocatableStylesheet=!0),(rt.stylesheetNode||rt.packageText||rt.packageNode)&&(rt.stylesheetInternal=U),D=wn.checkOptions(rt),wn.internalTransform(U,s,D),N=D.principalResult}catch(j){throw j instanceof F&&j.g?new F(j.message,j.code.toString()):j}if(N&&I){Z.assert(Array.isArray(N)),s=un(r);let j=Gt.zc(s);j.Da(),N.forEach(V=>j.append(V)),j.wa(),j.close(),N=s.Gb}if(Array.isArray(N)&&N.length===1&&Array.isArray(N[0])&&(N=N[0]),s=D.resultDocuments[""],s!==void 0){if(Array.isArray(N)?0<N.length:N!=null)throw new F("A result document on the base output URI has already been created","XTDE1490");N=s}s=new It,N&&s.inSituPut(q?T.string.fromString("output"):D.Ab,Array.isArray(N)?N:[N]),n&&s.inSituPut(T.string.fromString("messages"),[new qt(D.kh)]);for(let j in D.resultDocuments)j!==""&&(Z.xa("xsl:result-document href="+j,2,r.fixed.Ka),s.inSituPut(T.anyURI.fromString(j),D.resultDocuments[j]));return At(s)},translate:function(n){let r=Ct.La(t(n[0])),h=Ct.La(t(n[1])),m=Ct.La(t(n[2])),c=[];return r.forEach(function(P){let Q;(Q=h.indexOf(P))!==-1?Q<m.length&&c.push(m[Q]):c.push(P)}),kt(Ct.ac(c))},true:function(){return Pt(!0)},"type-available":function(n,r,h){return n=e(n[0],r,h,"XTDE1428").split("}"),Pt(n[0]==="Q{http://www.w3.org/2001/XMLSchema"&&(n[1]in ot.type||["untyped","anyType","anySimpleType"].includes(n[1])))},unordered:function(n){return n[0]},"unparsed-entity-public-id":function(){return bt},"unparsed-entity-uri":function(){return bt},"unparsed-text":function(n,r,h){let m=Jt.zd(n,r,h);return m?(n=Jt.Ne(n[1]?t(n[1]):""),kt(Jt.Lf(m,r,h,n))):bt},"unparsed-text-available":function(n,r,h){return Jt.th(function(){let m=Jt.zd(n,r,h),c=Jt.Ne(n[1]?t(n[1]):"");Jt.Lf(m,r,h,c)})},"unparsed-text-lines":function(n,r,h){let m=Jt.zd(n,r,h);return m?(n=Jt.Ne(n[1]?t(n[1]):""),r=Jt.Lf(m,r,h,n).split(/\r?\n|\r/),0<r.length&&r[r.length-1]===""&&--r.length,wt(r).mapOneToOne(T.string.fromString)):bt},"upper-case":function(n){return kt(t(n[0]).toUpperCase())},"uri-collection":function(){return bt},"xml-to-json":function(n){let r=n[1]?n[1].next():new It;return n[0].mapOneToOne(function(h){return T.string.fromString(ln.Jj(h,r))})},"year-from-date":function(n){return A(n,"getUTCFullYear")},"year-from-dateTime":function(n){return A(n,"getUTCFullYear")},"years-from-duration":function(n){return S(n,0)},"zero-or-one":function(n){if(n=n[0].expand(),1<n.length)throw new F("Required length 0-1, actual length "+n.length,"FORG0003");return At(n[0]?n[0]:null)}}}(),ec=function(){function e(a,u,l){var A=l.fixed.fa;let S=u.name||"#unnamed";u=A.Ba(u,"sortKey"),A=u.map(A.Pa);let O=Bt.Ci(u,l);u=[];let M=l.X(!1);for(M.focus=Lt(a);(a=M.focus.next())!==null;)l=A.map(function(d,o){var E=M.X(!1);if(E.focus=me(M.focus.current),d=d(E),(E=d.next())&&d.next())throw new F("Multiple values in merge key","XTTE1020");return O[o](E)}),u.push({item:a,keys:l,lh:S});return u}function t(a,u,l){function A(d){let o=S[S.length-1];if(o&&0<l(o,d))throw new F("Input to xsl:merge is not correctly sorted","XTDE2220");S.push(d)}let S=[],O=0,M=0;for(;;)if(O>=a.length){for(;M<u.length;)A(u[M++]);break}else if(M>=u.length){for(;O<a.length;)A(a[O++]);break}else 0>=l(a[O],u[M])?A(a[O++]):A(u[M++]);return S}function i(a,u){return u.fixed.fa.Ba(a,"sortKey").map(function(l){return Bt.Cj(l,u)})}function f(a){return function(u,l){for(let A=0;A<a.length;A++){let S=a[A](u.keys[A],l.keys[A]);if(S!==0)return S}return 0}}function v(a,u,l){var A=null;let S=[],O={};for(let M=0;M<u.length;M++){let d=u[M];if(A=A===null?-1:l(A,d),0>A){for(O={items:[d.item],keys:d.keys,groups:{}},A=0;A<a.length;A++)O.groups[a[A].name||"#unnamed"]=[];O.groups[d.lh]=[d.item],S.push(O)}else if(A===0)O.items.push(d.item),O.groups[d.lh].push(d.item);else throw new F("Group Input to xsl:merge is not correctly sorted","XTDE2220");A=d}return S}return{ej:function(a,u){let l=u.fixed.fa;var A=l.Ba(a,"mergeSrc");let S=u.X();S.pa="merge-key";for(var O=A.map(function(m){return i(m,S)}),M=O[0],d=1;d<O.length;d++)for(var o=0;o<M.length;o++){var E=M[o],T=O[d][o];let m=E.lang===T.lang||E.lang!==null&&E.lang.equals(T.lang);if(E.order!==T.order||!m||E.Ke!==T.Ke||E.dataType!==T.dataType)throw new F("All merge sources must have compatible merge keys","XTDE2210",a)}for(O=M.map(function(m){return Bt.di(m,S)}),O=f(O),M=null,d=0;d<A.length;d++){o=A[d],E=l.ba(o,"forEachItem"),T=l.ba(o,"selectRows");try{if(E){var C=u.X(!1);for(C.focus=Lt(l.evaluate(E,u));C.focus.next()!==null;){var n=l.evaluate(T,C),r=e(n,o,C);M=M===null?r:t(M,r,O)}}else{var h=l.evaluate(T,u);let m=e(h,o,u);M=M===null?m:t(M,m,O)}}catch(m){throw m instanceof F&&m.code==="XPTY0004"?new F(m.message,"XTTE2230",a):m}}if(M===null)return bt;for(A=v(A,M,O),a=l.ba(a,"action"),C=A.map(function(m){return m.items[0]}),u=u.X(!1),u.focus=Lt(wt(C)),C=[],n=0;n<A.length;n++)for(u.focus.next(),u.vb=A[n],r=l.evaluate(a,u);(h=r.next())!==null;)C.push(h);return wt(C)}}}(),nc=function(){function e(i,f){for(let v in i)if(v==f)return{k:f,v:i[f]};return null}function t(){}return t.prototype={containsKey:function(i){return e(this,i)!==null},forAllPairs:function(i){for(let f in this)this.__proto__.hasOwnProperty(f)||i({k:f,v:this[f]})},get:function(i){let f=e(this,i);if(f===null)throw new F("'"+i+"' is not a permitted key for the given tuple type","XTTE9999");return f.v},keys:function(){let i=[];return this.forAllPairs(function(f){i.push(ot.XS.string.fromString(f.k))}),i},put:function(i,f){let v=new t,a=!1;for(let u in this)v[u]=this[u],u==i&&(a=!0,v[i]=f);if(!a)throw new F("'"+i+"' is not a permitted key for the given tuple type","XTTE9999");return v},size:function(i){let f=0;return i[0].next().forAllPairs(function(){f++}),he(f)}},t}(),ut=function(){function e(){}function t(s){let p=(s.C||[]).map(m);return N=>new Vr(function*(){for(let D of p){let k=D(N),j;for(;(j=k.next())!==null;)yield j}}())}function i(s){function p(V){switch(V){case 1:return"first";case 2:return"second";case 3:return"third";default:return V+"th"}}s=s.split("|");let N=s[0],D=s[1],k=s[2]===""?"XPTY0004":s[2],j=s[3];return{required:function(){switch(parseInt(N,10)){case 0:return p(+D+1)+" argument of "+(j===""?"anonymous function":j+"()");case 1:return p(+D+1)+" operand of '"+j+"'";case 9:return"operand of '-'";case 2:return"value in '"+j+"' expression";case 3:return j==="saxon:context-item"?"context item":"value of variable $"+j;case 4:let V=j.split("/");return"@"+V[1]+" attribute of "+(V[0]==="LRE"?"a literal result element":V[0]);case 5:return"result of call to "+(j===""?"anonymous function":"function "+j);case 7:return"result of template "+j;case 6:return p(+D+1)+" sort key";case 8:return"value of parameter $"+j;case 11:return"value of the grouping key";case 12:return"result of xsl:evaluate";case 13:return"the context item";case 14:return"the context item for the "+"ancestor ancestor-or-self attribute child descendant descendant-or-self following following-sibling namespace parent preceding preceding-sibling self preceding-or-ancestor".split(" ")[D]+" axis";case 15:return"the value of the "+j+" option";case 17:return"document-order sorter";default:return""}}(),code:k}}function f(s){if(s=s.trim(),["true","yes","1"].includes(s))return!0;if(["false","no","0"].includes(s))return!1;throw new F("Value must be yes|true|1 or no|false|0","XTDE0030")}function v(s){if(U.U(s))return At(a(s));if(rt(s))return $e(s.value.map(p=>wt(p))).mapOneToMany(v);if(ht(s))throw new F("Cannot atomize a "+(st(s)?"map":"function"),"FOTY0013");return At(s)}function a(s){let p=W.string.fromString,N=W.untypedAtomic.fromString;switch(s.nodeType){case 9:return N(s.documentElement.textContent);case 11:case 1:case 3:case 4:return N(s.textContent||"");case 2:return N(s.value);case 8:return p(s.textContent);case 7:return p(s.textContent);case 13:return p(s.uri);default:throw new F("Unknown node type "+s.nodeType,"SXJS0003")}}function u(s){return wt(s).mapOneToMany(v).expand()}function l(s){function p(k){throw new F("Effective boolean value is not defined for "+k,"FORG0006")}function N(){if(s.next()!==null)p("an atomic sequence of length > 1");else return!0}var D=s.next();if(D===null)return!1;if(U.U(D))return!0;if(ot.la(D)){if(D.code==="AB")return N()&&D.toBoolean();if(D.isNumeric())return D=D.toNumber(),N()&&!isNaN(D)&&D!==0;if(D.isStringLike())return N()&&D.toString().length!==0;p("type "+ot.ld(D.code))}else st(D)?p("maps"):rt(D)?p("arrays"):ht(D)?p("functions"):p("value "+Z.showValue(D))}function A(s,p){let N=sn["i+i"],D=W.integer.fromNumber(1);return new Cn(s,k=>(k=N(k,D),0<k.compareTo(p)?null:k))}function S(s,p){return s.C?s.C.filter(N=>N.N===p):[]}function O(s,p,N){s=S(s,"withParam");let D=[new It,new It];p.tunnelParams.forAllPairs(j=>D[1].inSituPut(j.k,j.v));let k=p.pa;p.pa="template parameter",s.forEach(function(j){let V=j.name,ct=P(j,"t")?1:0;D[ct].inSituPut(ot.XS.QName.fromEQName(V),r(j)(p).expand())}),p.pa=k,N.Fc=D[0],N.tunnelParams=D[1]}function M(s){return!/[ \t\r\n]/.test(s)}function d(s,p,N){if(s){s=s.split(/\r?\n/);for(let k=0;k<s.length;k++)if(s[k]){var D=s[k].split("=");let j=D[0];D=D[1],j==="item-separator"&&(D=D.replace(/%n/g,`
`).replace(/%%/g,"%")),D=j==="parameter-document"?void 0:j==="use-character-maps"?Ht.lf(j,D,N):Ht.mf(j,D),typeof D<"u"&&(p[j]=Ht.bf(j,D,p[j]))}}}function o(s,p){let N=r(s),D=h(s);return k=>{try{let j=N(k).next(),V=D(k).next();return j===null||V===null?null:p(j,V)}catch(j){q(j,s)}}}function E(s,p){if(p.fixed.staticBaseURI)return p.fixed.staticBaseURI;if(p.fixed.hd)return null;for(;;){if(s.baseUri)return s.baseUri;if(s=s.parentNode,!s)return null}}function T(s,p,N=!1){var D=U.Ac(p.da).createDocumentFragment();D=U.dc(D),D._saxonBaseUri=E(s,p);let k=p.X(!1);return N&&(k.da=p.masterDocument),bu.cj(D,m(s)(k),k),D}function C(s){let p=r(s),N=h(s),D=s.op;return k=>{let j=p(k),V=N(k).expand();return k=Bt.$d(s.comp,k),Bt.gc(j,V,D,k,s)}}function n(s,p){throw new F("The "+s+" construct is not implemented in SaxonJS","SXJS0002",p)}function r(s){return m(s.C[0])}function h(s){return m(s.C[1])}function m(s){if(s){var p=s.ELAB;return p||((p=b[s.N])||Z.ka("Unknown expr: "+s.N+" parent="+s.p),p=s.ELAB=p(s)),p}}function c(s,p){s=s.C||[];for(let N=0;N<s.length;N++){let D=s[N];if(D.role===p)return D}return null}function P(s,p){return(s=s.flags)?0<=s.indexOf(p):!1}function Q(s){let p={};if(p.xml=Ft.xml,s=H(s,"ns"),s!==null){s=s.split(" ");for(let N=0;N<s.length;N++){let D=s[N].split("=");p[D[0]]=D[1]==="~"?Ft.withPrefix[D[0]]:D[1]}}return p}function H(s,p){for(;s;){if(s[p])return s[p];s=s.parentNode}return null}function B(s,p){let N=Q(s);return function(D){if(D===""&&!p)return"";let k=N[D];if(k)return k;if(D==="")return"";throw new F("Undeclared prefix: "+D,"XTDE0290",s)}}function y(s,p,N){return W.QName.fromString(p,B(s,N))}function w(s,p,N){if(s!==null&&0<N){let D=U.getAttribute(s,p);return D!==null&&D!==""?D:w(s.parentNode,p,N-1)}}function g(s,p,N){let D,k=s.bSlot;if(k?(k=parseInt(k,10),s=p.oa.Je[k],D=p.fixed.Ja[s]):(s=s.coId)?D=p.fixed.Ja[parseInt(s,10)]:Z.ka("No binding slot or component Id for component"),D||Z.ka("Target component not found (slot="+k+" id="+s+")"),D.visibility==="ABSTRACT"&&D.actor.N!=="function")throw new F("Abstract "+D.actor.N+" "+D.actor.name+" has no implementation","XTDE3052");return N&&D.actor.N!==N&&Z.ka("Expected "+N+", found "+D.actor.N),D}function x(s,p,N,D){s=p.actor;var k=c(s,"body");return k=m(k),D=D.X(!0),D.oa=p,Yn(D),ut.ib(s,"u")||(D.pa="function"),D.ab={},D.Wa=null,D.focus=null,D.Eb=[],D.ma=N,k(D)}function I(s,p){for(s=s.parentNode;s.N!=="package";)s=s.parentNode;return p.fixed.nd[s.name]}function L(s,p){return m(s)(p)}function _(s){return p=>{let N=un(p),D=Gt.zc(N);return Gt.push(s,p,D),D.close(),wt(N.Gb)}}function q(s,p){throw s instanceof F&&!s.xsltLineNr&&s.setExpr(p),s}function $(s,p){function N(k){return"Context item for template "+s.name+" must be "+k}if(En(p)&&s.flags.indexOf("o")===-1)throw new F(N("supplied"),"XTTE3090",s);En(p)||s.flags.indexOf("s")!==-1||(p.focus={});let D=s.cxt;if(D&&!En(p)&&!Ie(D).ha()(ue(p)))throw new F(N("instance of "+Ie(D).toString()),"XTTE0590",s)}function rt(s){return s instanceof qt}function st(s){return s instanceof It||s instanceof ee}function ht(s){return s instanceof Ut.XdmFunction||rt(s)||st(s)}function tt(s){let p=Object.assign(s);return p.ELAB=void 0,s.C&&(p.C=s.C.map(N=>tt(N))),p}function Y(s,p,N){Z.assert(Array.isArray(s)),Z.assert(p instanceof Vt);let D=p.V(),k=D.p;if(D.o&&!yu(D.o)(s.length))throw new F("Supplied value "+Z.showValue(s)+" does not match required cardinality "+D.o+(N?" in "+N():""),"XPTY0004");if(0<s.length){if(p.itemType.la()){s=ut.Yh(s);let j=ot.XS.untypedAtomic;if(gn(p.itemType))s=s.map(V=>V.isNumeric()?V:j.matches(V)?ot.XS.double.cast(V):V instanceof ee?ot.XS.double.fromString(V.value.toString()):V);else{let V=ot.codes[k],ct=V.cast;k!=="A"&&(s=s.map(z=>j.matches(z)?ct(z):z instanceof ee?V.fromString(z.value.toString()):z)),["AO","AF"].includes(k)&&(s=s.map(z=>z.isNumeric()?V.cast(z):z)),k==="AS"&&(s=s.map(z=>ot.XS.anyURI.matches(z)?V.cast(z):z))}}else if(p.itemType.gd()){if(["FM","FA"].includes(k))s=Ne(s);else if(p.itemType instanceof Ve){let j=p.itemType.ha();s.every(V=>j(V))||(s=s.map(V=>{if(j(V))return V;if(V instanceof Ut.XdmFunction){var ct=p.itemType;let z=ct.yc().length;return ct={minArgs:z,maxArgs:z,sig:ct.ga(),alphaTree:ct.V()},new Ut.pg(ct,V)}return V}))}}if(!p.matches(s))throw new F("Supplied value "+Z.showValue(s)+" does not match required type "+p.toString()+(N?" in "+N():""),"XPTY0004")}return s}function X(s){return s.mapOneToMany(function(p){return rt(p)?$e(p.value.map(function(N){return X(wt(N))})):At(p)})}let U=at,nt=U.Ha,W=ot.XS,G,b={acFnRef:function(s){let p=W.QName.fromEQName(s.name),N=Oe.find("SaxonJS").internals.XPath;return D=>{if(D=D.X(!0),D.Xa=!0,D=N.getFnSignature(p,1,D))return D=new Ut.nf(D,p,s),At(D);throw new F("Reference to an unknown constructor function "+p+"#1","XPST0017",s)}},among:function(s){let p=r(s),N=h(s);return D=>{let k=p(D).next();return N(D).filter(j=>U.isSameNode(j,k))}},analyzeString:_,and:function(s){let p=r(s),N=h(s);return D=>Pt(l(p(D))&&l(N(D)))},applyImports:_,applyT:_,arith:function(s){let p=sn[s.calc];p||n("arithmetic ("+s.calc+")",s);let N=o(s,p);return D=>At(N(D))},arith10:function(s){function p(j){return j=j.next(),j===null?W.double.fromNumber(NaN):j.isStringLike(j)?W.double.ie(j.toString()):W.double.cast(j)}let N=r(s),D=h(s),k=sn[s.calc];return j=>At(k(p(N(j)),p(D(j))))},array:function(s){let p=(s.C||[]).map(m);return N=>{let D=p.map(k=>k(N).expand());return At(new qt(D))}},arrayBlock:function(s){let p=(s.C||[]).map(m);return N=>{let D=p.map(k=>k(N).expand());return At(new qt(D))}},atomic:function(s){let p=ot.codes[s.type].fromString(s.val);return()=>At(p)},atomSing:function(s){let p=r(s);return s.card?N=>p(N).mapOneToMany(v):N=>{if(N=p(N).mapOneToMany(v),N=We(N),N.peek()===null)throw N=i(s.diag),new F("The "+N.required+" is empty",N.code,s);return N}},att:_,attVal:function(s){let p=W.QName.fromEQName(s.name);return N=>{if(He(N,"XPDY0002","@"+p,s),N=ue(N),!U.U(N))throw new F("Context item for 'attVal' must be a node","XPTY0020",s);return N.nodeType!==1?bt:(N=p.uri===""?N.hasAttribute(p.local)?N.getAttribute(p.local):null:p.uri===Ft.xml?N.hasAttribute("xml:"+p.local)?N.getAttribute("xml:"+p.local):null:N.hasAttributeNS(p.uri,p.local)?N.getAttributeNS(p.uri,p.local):null,N===null?bt:At(W.untypedAtomic.fromString(N)))}},axis:function(s){let p=Ie(s.nodeTest||"").ha(),N=s.name;return D=>{if(He(D,"XPDY0002",N+" axis",s),D=ue(D),!U.U(D))throw new F("Context item for "+N+" axis is not a node - supplied:"+Z.showValue(D),"XPTY0020",s);return U.Bg[N](D).filter(p)}},break:_,callT:function(s){return p=>{let N=g(s,p,"template"),D=p.X(!0);return D.vb=null,D.oa=N,$(N.actor,D),O(s,p,D),r(N.actor)(D)}},cast:function(s){let p=r(s),N=P(s,"e"),D=k=>{if(k=p(k).next(),k===null){if(N)return null;throw new F("Empty sequence casting to "+Ie(s.as).toString(),"XPTY0004",s)}return k};if(P(s,"a")){let k=Le(s.as),j=k.p==="AQ"?B(s,!0):null,V=ot.codes[k.p].cast;return ct=>{if(ct=D(ct),ct===null)return bt;try{var z=V(ct,j);return At(z)}catch(xt){throw xt.code==="FORG0001"&&s.diag?(z=i(s.diag),new F("Required item type of "+z.required+" is "+Ie(s.as).toString()+"; supplied value is "+Z.yh(ct),z.code,s)):xt.code!==null?xt:new F("Failed to cast "+Z.yh(ct)+" to type "+Ie(s.as).toString(),"XPTY0004",s)}}}if(P(s,"l")){let k=ot.XS.QName.fromEQName(s.as),j=Er[k.local].fromString;return Z.assert(k.uri===Ft.ic),Z.assert(j),V=>{if(V=D(V),V===null)return bt;if(V=Rt.collapse(V.toString()).split(" ").map(j),V.length===0)throw new F("xs:"+k.local+" value must contain at least one token","FORG0001");return wt(V)}}if(P(s,"u"))return k=>(k=D(k),k===null?bt:ot.XS.double.matches(k)||ot.XS.decimal.matches(k)||ot.XS.float.matches(k)?At(k):At(ot.XS.double.cast(k)));throw new F("Unknown cast variety "+s.flags)},castable:function(s){let p=r(s),N=P(s,"e"),D;if(P(s,"a")){let k=Le(s.as),j=k.p==="AQ"?B(s,!0):null,V=ot.codes[k.p].cast;D=ct=>(V(ct,j),!0)}else if(P(s,"l")){s=ot.XS.QName.fromEQName(s.as);let k=Er[s.local].fromString;D=j=>0<Rt.collapse(j.toString()).split(" ").map(k).length}else if(P(s,"u"))D=k=>(ot.XS.double.cast(k),!0);else throw new F("Unknown castable variety "+s.flags);return k=>{k=p(k);let j=k.next();if(j===null)return Pt(N);if(k.next()!==null)return Pt(!1);k=v(j).next();try{return Pt(D(k))}catch{return Pt(!1)}}},cfn:function(s){let p=s.name,N=r(s),D;if(p==="_format-number_1")return D=ar["format-number"],k=>{let j=[N(k),kt(s.pic)];return s.hasAttribute("format")&&j.push(kt(s.format)),D(j,k,s)};if(p==="_translate_1")return D=ar.translate,k=>{let j=[N(k),kt(s.a1),kt(s.a2)];return D(j,k)};Z.ka("Unimplemented: cfn "+p,s)},check:function(s){function p(j){let V=i(s.diag);throw new F("Required cardinality of "+V.required+" is "+D[N]+"; supplied value "+j,V.code,s)}let N=s.card,D={"*":"zero or more","+":"one or more","?":"zero or one",0:"zero",1:"exactly one"},k=r(s);return j=>{if(j=k(j),N==="*")return j;var V=We(j);if(j=V.peek(),j===null){if(N==="?"||N==="0")return bt;p("is empty")}else N==="0"&&p("is not empty (first item "+Z.showValue(j)+")");if(N==="+")return V;V.next();let ct=V.next();return ct!==null&&(V=V.count()+2,p("contains "+V+" items ("+Z.showValue(j)+", "+Z.showValue(ct)+(2<V?",... )":")"))),At(j)}},choose:function(s){let p=s.C.map(m);return N=>{for(let D=0;D<p.length;D+=2)if(l(p[D](N)))return p[D+1](N);return bt}},coercedFn:function(s){let p=r(s);return N=>p(N)},comment:_,compareToInt:function(s){let p=s.op,N=W.integer.fromString(s.val),D=r(s);return k=>{k=D(k);let j=k.next();if(j===null)return bt;if(Bt.pc(j))return Pt(p==="ne");if(k.next()!==null)throw new F("Value comparison only applicable to single values","XPTY0004",s);return Pt(Bt.jf(p,j.compareTo(N)))}},compareToString:function(s){let p=s.op,N=r(s),D=W.string.fromString(s.val);return k=>{let j=N(k),V=j.next();if(V===null)return bt;if(j.next()!==null)throw new F("Value comparison only applicable to single values","XPTY0004",s);return s.comp?(k=Bt.$d(s.comp,k),["=","eq","!=","ne"].includes(p)?Pt(Bt.Dh(p,k.equals(V,D))):Pt(Bt.jf(p,k.compare(V,D)))):Pt(Bt.jf(p,V.compareTo(D)))}},compAtt:_,compElem:_,condCont:function(s){let p=r(s);return N=>{function D(k){if(U.U(k))switch(k.nodeType){case 9:case 11:case 1:return k.hasChildNodes();default:return a(k).toString()!==""}else return st(k)?0<k.keys().length:rt(k)?0<k.value.filter(function(j){return 0<j.filter(V=>D(V)).length}).length:W.string.cast(k).toString()!==""}return p(N).filter(D)}},condSeq:function(s){function p(D){if(U.U(D)){if([9,11].includes(D.nodeType))return!D.hasChildNodes();if(D.nodeType===3||D.nodeType===4)return D.nodeValue===""}else{if(ot.la(D))return W.string.cast(D).toString()==="";if(rt(D))return!X(At(D)).some(function(k){return!p(k)})}return!1}let N=s.C.map(D=>({name:D.N,eval:m(D)}));return D=>{let k=[],j=[],V=!0;return N.map(function(ct){if(ct.name==="onEmpty")V&&(k=ct.eval(D).expand());else if(ct.name==="onNonEmpty"){let z=k.length;j.unshift(function(){k.splice.apply(k,[z,0].concat(ct.eval(D).expand()))})}else ct.eval(D).forEachItem(function(z){p(z)||(V=!1),k.push(z)})}),V||j.forEach(function(ct){ct()}),wt(k)}},conditionalSort:function(s){let p=r(s),N=h(s),D=r(s.C[1]);return k=>l(p(k))?N(k):D(k)},consume:function(s){throw new F("Stylesheet uses 'consume' which requires streaming","SXJS0002",s)},convert:function(s){let p=s.to,N=ot.codes[p];N||Z.ka("Unknown to-type "+s.to);let D=r(s);return P(s,"p")?k=>D(k).mapOneToOne(j=>ot.eg(j,p)):k=>D(k).mapOneToOne(N.cast)},copy:_,copyOf:_,currentGroup:function(s){return p=>{if(p&&p.Wc)return wt(p.Wc);throw new F("There is no current group","XTDE1061",s)}},currentGroupingKey:function(s){return p=>{if(p&&p.Xc)return wt(p.Xc);throw new F("There is no current grouping key","XTDE1071",s)}},cvUntyped:function(s){let p=r(s),N=ot.codes[s.to],D=N.cast,k=N.name==="string";return j=>p(j).mapOneToOne(function(V){if(W.double.matches(V)&&N.name==="float")throw new F("xs:double may not be promoted to xs:float","XTTE0570",s);if(W.untypedAtomic.matches(V)||k&&W.anyURI.matches(V))try{return D(V)}catch(ct){throw ct.code==="FODT0001"||!s.diag?ct:(V=i(s.diag),new F(ct.message,V.code,s))}else return V})},data:function(s){let p=r(s);return N=>p(N).mapOneToMany(v)},dbl:function(s){let p=W.double.fromString(s.val);return()=>At(p)},dec:function(s){let p=gt(s.val);return()=>qr(p)},doc:_,docOrder:function(s){let p=r(s);return N=>U.ed(p(N))},dot:function(s){return p=>(He(p,"XPDY0002",". (dot)",s),At(ue(p)))},dynCall:function(s){let p=r(s),N;return 1<s.C.length&&(N=(s.C.slice(1)||[]).map(m)),D=>{let k=p(D).next();var j=N?N.map(V=>V(D).expand()):[];if(k instanceof Ut.XdmFunction)return k.evaluate(j,D,s);if(1<j.length)throw new F("Too many arguments supplied in dynamic function call to array or map","XPTY0004",s);if(j[0].length!==1)throw new F("Argument supplied in dynamic function call to array or map is not a single item: "+Z.showValue(j),"XPTY0004",s);return j=v(j[0][0]).next(),k instanceof qt&&(j=W.numeric.matches(j)?j.toNumber():W.double.cast(j).toNumber()),k.evaluate([[j]],D,s)}},elem:_,empty:function(){return()=>bt},emptyTextNodeRemover:function(s){let p=r(s);return N=>p(N).filter(D=>!(U.U(D)&&(D.nodeType===3||D.nodeType===4)&&D.textContent===""))},error:function(s){return()=>{throw new F(s.message,s.code,s)}},evaluate:function(s){let p={language:"XSLT",contextType:{o:"1",p:"",code:"1"}},N=m(c(s,"xpath")),D=m(c(s,"cxt")),k=m(c(s,"sa")),j=m(c(s,"nsCxt")),V=S(s,"withParam").map(z=>({name:W.string.fromString(z.name),eval:r(z)})),ct=m(c(s,"wp"));return z=>{let xt=N(z).next().toString(),Dt=D?D(z):bt,Tt=new It;if(V.forEach(function(Mt){Tt.inSituPut(Mt.name,Mt.eval(z).expand())}),ct&&ct(z).next().forAllPairs(function(Mt){if(!W.QName.matches(Mt.k))throw new F("Parameter names in xsl:evaluate/@with-params map must be QNames:"+Mt.k.toString(),"XTTE3165",s);Tt.inSituPut(Mt.k,Mt.v)}),Tt=At(Tt),k){var Nt=k(z).next().toString();if(f(Nt))throw new F("SaxonJS does not support schema-aware evaluation","XTDE1665",s)}(Nt=s.as)&&(p.requiredType=Nt.toString()),(Nt=s.dxns)&&Nt.toString()!=="http://www.w3.org/1999/xhtml"&&(p.xpathDefaultNamespace=Nt.toString());let Qt={};if(j){Nt=j(z);var Zt=Nt.next();if(Zt===null||Nt.next()!==null||!U.U(Zt))throw new F("xsl:evaluate/@namespace-context must evaluate to a single node","XTTE3170",s);Qt[""]="",at.Dc(Zt).forEach(Mt=>Qt[Mt.prefix]=Mt.uri),p.xpathDefaultNamespace=Qt[""]}else Qt=Q(s);let ye={};Zt=Nt=!1;let _t={};var Xt=c(s,"options");if(Xt){Xt=L(Xt,z).next();let Mt=W.string.fromString("var-slots");Xt.containsKey(Mt)&&Xt.get(Mt)[0].forAllPairs(function(R){ye[R.k.toEQName()]=re(R.v)}),Mt=W.string.fromString("allow-empty"),Xt.containsKey(Mt)&&(Nt=Xt.get(Mt)[0].toBoolean()),Mt=W.string.fromString("isStatic"),Xt.containsKey(Mt)&&(Zt=Xt.get(Mt)[0].toBoolean()),Mt=W.string.fromString("staticContext"),Xt.containsKey(Mt)&&Xt.get(Mt)[0].forAllPairs(function(R){_t[R.k.toString()]=re(R.v,!0)})}return p.params=Tt,p.namespaces=Qt,p.slotMap=ye,p.allowEmpty=Nt,p.staticTyping=!0,p.isStatic=Zt,p.staticContext=_t,p.dynamicEval=!0,(Nt=c(s,"baseUri"))&&(p.staticBaseURI=L(Nt,z).next().toString()),(Nt=H(s,"defaultCollation"))&&(p.defaultCollation=Nt),Oe.find("SaxonJS").internals.XPath.evaluateXDM(xt,Dt,z,p)}},every:function(s){let p=parseInt(s.slot,10),N=r(s),D=h(s);return k=>{let j=N(k);return Pt(!j.some(function(V){return k.ma[p]=[V],!l(D(k))}))}},except:function(s){let p=r(s),N=h(s);return D=>new oo(p(D),N(D),U.mb)},false:function(){return()=>Pt(!1)},filter:function(s){let p=r(s),N=h(s);return P(s,"i")?D=>{let k=p(D);if(D=N(D).expand(),D.length===1&&W.numeric.matches(D[0])){let j=D[0].toNumber();if(k instanceof wt)return At(k.expand()[j-1]||null);let V=Lt(k);return V.filter(function(){return V.position===j})}return l(wt(D))?k:bt}:D=>{let k=p(D),j=D.X(!1);return j.focus=Lt(k),D=P(s,"p")?function(){let V=N(j).expand();return V.length===1&&W.numeric.matches(V[0])?j.focus.position===V[0].toNumber():l(wt(V))}:function(){return l(N(j))},j.focus.filter(D)}},first:function(s){let p=r(s);return N=>At(p(N).next())},flt:function(s){let p=W.float.fromString(s.val);return()=>At(p)},fn:function(s){let p=ar[s.name];p||n(s.name+"()",s);let N=(s.C||[]).map(m);return D=>{let k=N.map(j=>j(D));return p(k,D,s)}},fnCoercer:function(s){let p=r(s),N=on(s.to),D=N.itemType,k={alphaTree:N.V()};return j=>p(j).mapOneToOne(function(V){if(!(V instanceof Ut.XdmFunction||V instanceof qt||V instanceof It)){var ct=i(s.diag);throw new F("Required item type of "+ct.required+" is "+N.toString()+"; supplied value is "+Z.showValue(V),ct.code,s)}if(ct=V instanceof Ut.XdmFunction?V.arity:1,(D instanceof Ve?D.yc():[]).length!==ct)throw ct=i(s.diag),new F("Required item type of "+ct.required+" is "+N.toString()+"; supplied value is "+Z.showValue(V),ct.code,s);return new Ut.pg(k,V)})},fnRef:function(s){let p=s.name;p=/^Q{/.test(p)?W.QName.fromEQName(p):W.QName.fromParts("",Ft.Ma,p);let N=parseInt(s.arity,10),D=Oe.find("SaxonJS").internals.XPath;return k=>{var j=k.X(!0);if(j.Xa=!0,j=D.getFnSignature(p,N,j))return k=j.isUserFunction?new Ut.rf(j,k):p.uri===Ft.ic?new Ut.nf(j,p,s):new Ut.Ae(j,p,N,s,k),At(k);throw new F("Reference to an unknown function and/or arity "+p.toEQName()+"#"+N,"XPST0017",s)}},follows:function(s){let p=o(s,function(N,D){return W.boolean.fromBoolean(0<U.mb(N,D))});return N=>At(p(N))},for:function(s){let p=parseInt(s.slot,10),N=r(s),D=h(s);return k=>N(k).mapOneToMany(function(j){return k.ma[p]=[j],D(k)})},forEach:function(s){let p=r(s),N=h(s);return c(s,"separator")?_(s):D=>{let k=D.X(!1);return k.focus=Lt(p(D)),k.Wa=null,k.focus.mapOneToMany(function(){return N(k)})}},forEachGroup:_,fork:t,functionCall:function(s){n(s.name+"()",s)},gc:C,gc10:function(s){let p=r(s),N=h(s);return D=>{let k=p(D).expand(),j=N(D).expand();k.length===1&&W.boolean.matches(k[0])?j=[W.boolean.fromBoolean(l(wt(j)))]:j.length===1&&W.boolean.matches(j[0])?k=[W.boolean.fromBoolean(l(wt(k)))]:(k=u(k),j=u(j)),D=Bt.$d(s.comp,D);let V=s.op;return V!=="="&&V!=="!="?(k=wt(k).mapOneToOne(ot.XS.numeric.Id).expand(),j=wt(j).mapOneToOne(ot.XS.numeric.Id).expand()):D=Bt.Ai(D),Bt.gc(wt(k),j,V,D,s,!0)}},gcEE:C,gVarRef:function(s){return p=>{let N=g(s,p),D=N.actor,k=D.name;if(N.value===e)throw p=new F("Circularity in global variable "+k,"XTDE0640"),p.g=!0,p;if(N.value===null||typeof N.value>"u"){if(D.N==="globalParam"){var j=p.fixed.options.stylesheetParams,V=ot.XS.QName.fromEQName(k);if(j.containsKey(V))j=j.get(V),Z.assert(Array.isArray(j)),V=on(D.as||"*"),j=Y(j,V,()=>"stylesheet parameter "+k),Z.assert(Array.isArray(j)),N.value=j;else{if(P(D,"r"))throw new F("Parameter "+k+" is required","XTDE0050",D);if(P(D,"i"))throw new F("Parameter "+k+" cannot be empty","XTDE0700",D);D.C||(N.value=[])}}if(N.value===null||typeof N.value>"u"){j=!D.parentNode.parentNode.parentNode,V=p.X(!0),V.pa="variable",V.nb.push(null),V.ab={},V.Wa=null,V.oa=N,V.focus=j?me(p.fixed.cd):null;try{let ct=r(D);N.value=e,N.value=ct(V).expand()}catch(ct){throw ct instanceof F&&(N.value=[],W.QName.fromEQName(k).uri!==Ft.qb+"generated-variable"&&(ct.g=!0)),ct}V.nb.pop()}}return wt(N.value)}},homCheck:function(s){let p=r(s);return N=>{N=We(p(N));let D=N.peek();if(D===null)return bt;let k=U.U(D);return N=N.filter(function(j){if(U.U(j)!==k)throw new F("Cannot mix nodes and atomic values in the result of a path expression","XPTY0018",s);return!0}),k?U.ed(N):N}},ifCall:function(s){let p=W.QName.fromEQName(s.name);if(p.uri==="http://saxonica.com/ns/interactiveXSLT"&&p.local==="schedule-action"){let D=r(s),k=h(s),j=m(s.C[3]);return V=>{var ct=s.C.length===4;if(4<s.C.length)throw new F("Only attributes @wait, @document and @http-request are available on ixsl:schedule-action in this version of SaxonJS","SXJS0002",s);var z=D(V).next().toNumber(),xt=k(V).next();let Dt=ct?j(V).next():null;ct=null;let Tt=V.X(!0);Yn(Tt);let Nt,Qt,Zt;3>s.C.length||s.C[2].N==="empty"?Nt=Qt=Zt=null:(Nt=s.C[2],"bSlot"in Nt?(Qt=g(Nt,V,"template"),Zt=Qt.actor):Qt=Zt=null),En(V)||(Tt.focus=Lt(At(ue(V))),Tt.focus.next()),Tt.vb=null,Tt.oa=Qt,Tt.pa=!1,Dt===null&&Zt!==null&&$(Zt,Tt),Nt!=null&&O(Nt,V,Tt);let ye,_t;return Zt===null?(ye=null,_t=function(){}):(ye=r(Zt),_t=function(){ye(Tt).expand()}),Dt!==null?ct=Jt.dj(Dt,function(Xt){Tt.focus=Lt(At(Xt[0])),Tt.focus.next(),Zt!==null&&($(Zt,Tt),_t())},z,V):xt!==null?(xt=xt.toString().split(" "),ct=xt.map(function(Xt){return J.pb(Xt,ut.Ea(s,V))}),z=Jt.Vh(ct,V.fixed.Tb,_t,z,V),ct=xt.length===1?z[ct[0]]:z):z!==0&&(z=(Xt=>new Promise(Mt=>setTimeout(Mt,Xt)))(z).then(()=>_t()),V.fixed.hc.push(z)),ct?At(ct):bt}}let N=(s.C||[]).map(m);return D=>{let k=N.map(j=>j(D));return G(p.uri,p.local,k,D,s)}},indexedFilter2:function(s){let p=m(c(s,"base")),N=m(c(s,"use")),D=m(c(s,"search"));return k=>{let j=Bt.$d(s.comp,k),V=k.X(!1);V.focus=Lt(p(k));let ct=D(k).expand();return V.focus.filter(function(){let z=N(V);return Bt.gc(z,ct,"=",j,s).next().toBoolean()})}},inlineFn:function(s){let p={sig:s.sType,alphaTree:Le(s.sType)};return N=>At(new Ut.Nh(p,s,N))},instance:function(s){let p=r(s),N=on(s.of);return D=>(D=p(D).expand(),Pt(N.matches(D)))},int:function(s){let p=W.integer.fromString(s.val);return()=>At(p)},intersect:function(s){let p=r(s),N=h(s);return D=>new so(p(D),N(D),U.mb)},intRangeTest:function(s){let p=r(s);s=s.C;let N=m(s[1]),D=m(s[2]);return k=>{let j=N(k).next(),V=D(k).next();if(!j||!V)return Pt(!1);let ct=j.toNumber(),z=V.toNumber();return k=p(k).some(function(xt){return xt=xt.value,xt>=ct&&xt<=z}),Pt(k)}},is:function(s){let p=o(s,function(N,D){return W.boolean.fromBoolean(U.isSameNode(N,D))});return N=>At(p(N))},isLast:function(s){let p=s.test==="1";return N=>Pt(N.focus.position===N.focus.last()===p)},iterate:_,javaCall:function(s){let p=W.QName.fromEQName(s.name),N=(s.C||[]).map(m);return D=>{let k=N.map(j=>j(D));return G(p.uri,p.local,k,D,s)}},lastOf:function(s){let p=r(s);return N=>{let D=We(p(N));return D.filter(function(){return D.peek()===null})}},let:function(s){let p=r(s),N=h(s),D=parseInt(s.slot,10);return k=>{let j=k.pa;k.pa="variable";let V=p(k).expand();return k.pa=j,k.ma[D]=V,N(k)}},literal:t,lookup:function(s){let p=r(s),N=h(s);return D=>{function k(Nt){z=z.concat(xt[Nt.toString()])}function j(Nt){z=z.concat(xt.get(Nt))}function V(Nt){return function(Qt){if(!W.integer.matches(Qt))throw new F("Array lookup key must be of type xs:integer; supplied value is "+Z.showValue(Qt),"XPTY0004",s);if(Qt=Qt.toNumber(),1>Qt||Qt>Nt.length)throw new F("Array index ("+Qt+") out of bounds (1 to "+Nt.length+")","FOAY0001",s);z=z.concat(Nt[Qt-1])}}let ct=p(D),z=[],xt;D=N(D).expand();let Dt=s.tuple;if(Dt!=null){let Nt=Dt.split(/\s+/);for(var Tt of D)if(Nt.indexOf(Tt.toString())===-1)throw new F("Tuple lookup key must be one of  "+Dt+". Supplied key is "+Tt.toString(),"XPTY0004",s)}for(;(xt=ct.next())!==null;)if(ut.isArray(xt))Tt=V(xt.value),D.forEach(Tt);else if(ut.isMap(xt))D.forEach(j);else if(Dt!=null&&ut.gh(xt))D.forEach(k);else throw new F("The source for a lookup operator (?) must be of type array() or map(); supplied value is "+Z.showValue(xt),"XPTY0004",s);return wt(z)}},lookupAll:function(s){let p=r(s);return N=>{function D(ct){j=j.concat(ct)}function k(ct){j=j.concat(V.get(ct))}N=p(N);let j=[],V;for(;(V=N.next())!==null;)if(ut.isArray(V))V.value.forEach(D);else if(ut.isMap(V))V.keys().forEach(k);else throw new F("The source for a lookup operator ('?') must be of type array() or map(); supplied value is "+Z.showValue(V),"XPTY0004",s);return wt(j)}},lookupTuple:function(s){let p=r(s),N=s.key;return D=>{D=p(D);let k=[],j;for(;(j=D.next())!==null;)if(N!=null&&ut.gh(j))k=k.concat(j[N]);else throw new F("The source for a lookupTuple operator (?) must be of type tuple(); supplied value is "+Z.showValue(j),"XPTY0004",s);return wt(k)}},map:function(s){let p=(s.C||[]).map(m);return N=>{let D=new It,k=null;return p.forEach(function(j){if(k===null)k=j(N).next();else{if(D.containsKey(k))throw new F("Duplicate map constructor entries for key:"+Z.showValue(k),"XQDY0137",s);j=j(N).expand(),D.inSituPut(k,j),k=null}}),At(D)}},merge:function(s){return p=>ec.ej(s,p)},mergeAdj:function(s){let p=r(s);return N=>{let D=[],k=p(N),j=!1,V;for(;(V=k.next())!==null;){var ct=U.U(V)&&(V.nodeType===3||V.nodeType===4);ct&&V.nodeValue===""||(j&&ct?(ct=U.Ac(N.da),D.push(ct.createTextNode(D.pop().nodeValue+V.nodeValue))):(j=ct,D.push(V)))}return wt(D)}},message:function(s){let p=m(c(s,"terminate")),N=m(c(s,"error"));return D=>{let k=D.pa;D.pa="variable";var j=p(D).next();let V=N(D).next().toString();try{V=y(s,V,!0).toEQName()}catch{V="Q{http://www.w3.org/2005/xqt-errors}XTMM9000"}let ct;try{ct=f(j.toString())}catch{throw new F("The terminate attribute of xsl:message must be yes|no|true|false|1|0","XTDE0030",s)}j=un(D);let z=new br(j);try{var xt=Gt.zc(z);xt.Da(),Gt.push(s.C[0],D,xt),xt.wa()}catch(Dt){z.append(ot.XS.string.fromString("xsl:message evaluation at "+Z.location(s)+" failed: "+Dt))}xt=wt(j.Gb).next(),D.fixed.options.Jf||(D.fixed.options.Jf=J.Yg());try{j=V,D.qc[j]||(D.qc[j]=0),D.qc[j]++,D.fixed.options.Jf(xt,V)}catch{}if(ct)throw Z.xa(D.getStackTrace(),1,D.fixed.Ka),D=new F("Terminated with "+xt,V,s),D.errorObject=xt,D;return D.pa=k,bt}},minus:function(s){let p=r(s);return N=>p(N).mapOneToOne(D=>D.af())},namespace:function(s){let p=r(s),N=h(s);return D=>{let k=p(D).next().toString();if(D=N(D).next().toString(),k!==""&&!Rt.Db(k))throw new F("Prefix "+k+" is not an NCName","XTDE0920",s);if(D==="")throw new F("Namespace is zero-length","XTDE0930",s);if(k==="xmlns")throw new F("Disallowed prefix xmlns","XTDE0920",s);if(D==="http://www.w3.org/2000/xmlns/")throw new F("Disallowed namespace "+D,"XTDE0905",s);if(!M(D))throw new F("Invalid namespace "+D,"XTDE0905",s);if(k==="xml"!=(D===Ft.xml))throw new F("The xml namespace prefix and uri can only be used together","XTDE0925",s);return At(new cn(k,D))}},nextIteration:_,nextMatch:_,node:function(s){return p=>{let N=parseInt(s.kind,10);var D=s.content.toString();switch(N){case 9:case 1:var k=p.fixed.fa;let j;try{j=J.Sb(D)}catch(V){throw new F(V.message,"FODC0006")}return N===1&&(j=j.documentElement),(D=s.baseUri)||(D=k.Ea(s,p)),j._saxonBaseUri=D,At(j);case 3:case 4:return At(p.da.createTextNode(D));case 8:return At(p.da.createComment(D));case 2:return k=s.localName,p=s.prefix,At(new vn(W.QName.fromParts(p,s.ns,k),D,null));case 13:return p=s.localName?s.localName.toString():"",At(new cn(p,D));case 7:return k=s.localName?s.localName.toString():"",At(p.da.createProcessingInstruction(k,D));default:throw new F("Unknown node type "+N,"SXJS0003")}}},nodeNum:function(s){return p=>Se.jj(s,p)},null:function(s){return()=>At(s)},numSeqFmt:function(s){return p=>Se.kj(s,p)},onEmpty:t,onNonEmpty:t,or:function(s){let p=r(s),N=h(s);return D=>Pt(l(p(D))||l(N(D)))},origFC:function(s){s.C||(s.C=[]);let p=s.C.map(m);return N=>{if(!s._target){let j=s.pack,V=y(s,s.name,!1).toEQName(),ct=s.C.length,z=N.fixed.Ja;Object.keys(z).forEach(function(xt){xt=z[xt],xt.oh.name===j&&xt.name===V&&xt.actor&&xt.actor.N==="function"&&S(xt.actor,"arg").length===ct&&(s._target=xt.id)})}let D=N.fixed.Ja[s._target],k=p.map(j=>j(N).expand());return x(s,D,k,N)}},param:function(s){let p=s.name,N=parseInt(s.slot,10),D=P(s,"t"),k=m(c(s,"select")),j=m(c(s,"conversion"));return V=>{var ct=D?V.tunnelParams:V.Fc,z=ot.XS.QName.fromEQName(p);if(ct.containsKey(z))ct=ct.get(z),on(s.as||"*").V().p!==""&&(ct=Ne(ct));else if(k&&!P(s,"r"))z=V.pa,V.pa="xsl:param",ct=k(V).expand(),V.pa=z;else throw new F("Required parameter $"+p+" not supplied","XTDE0700",s);if(Z.assert(Array.isArray(ct)),V.ma[N]=ct,j)try{V.ma[N]=j(V).expand()}catch{throw new F("Supplied value for parameter $"+p+" could not be converted to required type","XTTE0590",s)}return bt}},partialApply:function(s){let p=r(s),N=[],D=[],k=0,j=s.C.length-1;for(let V=1;V<s.C.length;V++){let ct=s.C[V];ct.N==="null"?(k++,N.push(Le(ct.sT||"*"))):D[V-1]=m(ct)}return V=>{let ct=p(V).next(),z=[];for(let xt=0;xt<j;xt++)D[xt]&&(z[xt]=D[xt](V).expand());return V={o:"1",p:"F",r:ct.rb.alphaTree.r,a:N},At(new Ut.Mh({minArgs:k,maxArgs:k,sig:pn(V),alphaTree:V},ct,z))}},precedes:function(s){let p=o(s,function(N,D){return W.boolean.fromBoolean(0>U.mb(N,D))});return N=>At(p(N))},procInst:_,qName:function(s){let p=W.QName.fromParts(s.pre,s.uri,s.loc);return()=>At(p)},range:function(s){let p=W.integer.fromString(s.from),N=W.integer.fromString(s.to);return()=>A(p,N)},resultDoc:function(s){return p=>{try{if(p.pa)throw new F("Cannot call xsl:result-document while evaluating "+p.pa,"XTDE1480",s);var N=I(s,p);let D={},k=function(){},j=c(s,"format");if(j){let _t=L(j,p).next().toString();_t=y(s,_t,!0).toEQName();let Xt=N.bg[_t];if(!Xt)throw new F("Unknown xsl:output format "+_t,"XTDE1460");let Mt,R;for(let K of Xt.C){let et=K.name;et==="parameter-document"?Mt=K.value:et==="Q{http://saxon.sf.net/}parameter-document-base-uri"?R=K.value:D[et]=et==="use-character-maps"?Ht.lf(et,K.value,N):Ht.mf(et,K.value)}if(Mt){let K=J.pb(Mt,R),et=Jt.xc(K,p);Ht.cf(et.documentElement,D)}}d(s.global,D,N),d(s.local,D,N);for(let _t of s.C){let Xt=_t.role.replace(/^Q{\}/,"");if(!["href","format","content","parameter-document"].includes(Xt)){Xt==="output-version"&&(Xt="version");let Mt=L(_t,p).next().toString();Mt=Xt==="use-character-maps"?Ht.lf(Xt,Mt,N):Ht.mf(Xt,Mt,B(s,!0)),typeof Mt<"u"&&(D[Xt]=Ht.bf(Xt,Mt,D[Xt]))}}let V=c(s,"Q{}parameter-document");if(V!==null){let _t=L(V,p).next().toString(),Xt=J.pb(_t,ut.Ea(s,p)),Mt=Jt.xc(Xt,p);Ht.cf(Mt.documentElement,D)}let ct=p.fixed.Ab,z=c(s,"href"),xt=z===null?"":L(z,p).next().toString(),Dt;Dt=ct?J.newURL(xt,ct):U.fd(xt)?J.newURL(xt):xt;let Tt=Dt.toString();if(p.fixed.Ab&&Tt===p.fixed.Ab.toString()&&1<p.nb.length)throw new F("Cannot revert to the original output destination while writing a secondary result","XTDE1490");let Nt,Qt,Zt,ye;if(Zt=!J.ra()&&!p.masterDocument||p.fixed.oe?"file":"html-page",Zt!=="html-page"){if(p.fixed.options.deliverResultDocument){if(Nt=p.fixed.options.deliverResultDocument(Dt),!Nt)throw new F("deliverResultDocument() result has no destination");Zt=Nt.destination}else throw new F("No deliverResultDocument function supplied");if(typeof p.fixed.Ta[Tt]<"u")throw new F("A result document with URI "+Tt+" is attempting to write to a document already read","XTDE1500",s);if(p.fixed.uh[Tt])throw new F("A result document with URI "+Tt+" has already been created","XTDE1490",s);p.fixed.uh[Tt]=!0}if(["file","serialized"].includes(Zt))ye=new Ht.xf,Qt=Ht.bh(D,ye,p),k=function(){let _t=ye.toString(),Xt=D.encoding||"utf-8";if(!Nt.save)throw new F("deliverResultDocument() result has no save method","SXJS0004",s);Nt.save(Dt,_t,Xt)};else if(["document","raw"].includes(Zt)){let _t=un(p);Qt=Zt==="document"?new br(_t):_t,k=function(){let Xt=wt(_t.Gb).next();if(Xt&&(Xt._saxonBaseUri=Dt.toString()),!Nt.save)throw new F("deliverResultDocument() result has no save method","SXJS0004",s);Nt.save(Dt,Xt)}}else if(Zt==="html-page"){let _t=D.method||"appendContent";_t==="Q{http://saxonica.com/ns/interactiveXSLT}replace-content"?_t="replaceContent":_t==="Q{http://saxonica.com/ns/interactiveXSLT}replace-element"?_t="replaceElement":_t==="Q{http://saxonica.com/ns/interactiveXSLT}insert-before"?_t="insertBefore":_t==="Q{http://saxonica.com/ns/interactiveXSLT}insert-after"&&(_t="insertAfter");let Xt,Mt=xt.charAt(0)==="#"||xt.charAt(0)==="?",R=un(p);Qt=new br(R),p.nb.push(xt);let K=T(c(s,"content"),p,Mt),et=function(it,yt){let vt=yt.parentNode;if(_t==="replaceElement"){let jt=yt.nextSibling;vt.removeChild(yt),yt=jt}_t==="insertAfter"&&(yt=yt.nextSibling),nt.Ia(it).forEachItem(function(jt){_t==="insertBefore"||_t==="insertAfter"||_t==="replaceElement"?vt.insertBefore(jt,yt):yt.appendChild(jt)})};if(Mt){if(!p.masterDocument)return Z.xa("Result document href="+xt+": no master document available",1,p.fixed.Ka),bt;if(xt==="?.")Xt=ue(p);else if(xt.charAt(0)==="?"){let it=ue(p),yt=xt.substring(1);N="",J.ra()&&(N="http://www.w3.org/1999/xhtml");let vt={language:"XSLT",contextType:{o:"1",p:"",code:"1"},xpathDefaultNamespace:N,namespaces:Q(s),dynamicEval:!0};try{Xt=Oe.find("SaxonJS").internals.XPath.evaluateXDM(yt,At(it),p,vt)}catch(jt){throw new F("Error in xsl:result-document/@href ?xpath:"+jt.message,"SXJS0020",s)}if(Xt=Xt.expand(),1<Xt.length)throw new F("xsl:result-document/@href ?xpath yields more than one node","SXJS0020",s);Xt=Xt[0]}else Xt=p.masterDocument.getElementById(xt.substring(1));if(!Xt)return Z.xa("Result document href="+xt+": no such node",1,p.fixed.Ka),bt;if(xt==="?."&&Xt!==p.masterDocument&&Xt.ownerDocument!==U.Ac(p.masterDocument))return Z.xa("Result document href="+xt+": current node is not in master document",1,p.fixed.Ka),bt;if(_t==="replaceContent")for(;Xt.firstChild;)Xt.removeChild(Xt.firstChild);k=function(){et(K,Xt),!ke.getConfigurationProperty("autoResetIndexes")&&"_saxonIndexes"in p.masterDocument||(p.masterDocument._saxonIndexes={},p.masterDocument._saxonIndexesBC={},p.masterDocument._saxonXmlIdIndex=null)}}else throw new F("xsl:result-document/@href value in browser must be '?.' or '#frag'")}else throw new F("Unsupported result-document destination "+Zt,"SXJS0002");if(Zt!=="html-page"&&(xt===""||Dt.toString()===ct)){let _t=p.fixed.zi;if(_t){if(_t.Hh)throw new F("Cannot use xsl:result-document to write to a destination already used for the principal output","XTDE1490");if(_t.mg)throw new F("Cannot write more than one xsl:result-document to the principal output destination","XTDE1490");_t.mg=!0}}if(Zt!=="html-page"){p.nb.push(Dt.toString());let _t=c(s,"content"),Xt=Gt.zc(Qt);Gt.push(_t,p,Xt),Xt.close()}return k(),p.nb.pop(),bt}catch(D){q(D,s)}}},root:function(s){return p=>{if(He(p,"XPDY0002","/",s),p=ue(p),!U.U(p))throw new F("Context item for '/' must be a node","XPTY0020",s);let N=U.nc(p);if(N.nodeType!==9&&N.nodeType!==11)throw new F("Root node for '/' must be a document node","XPDY0050",s);return At(U.nc(p))}},schedule:function(s){let p=m(c(s,"select")),N=m(c(s,"on-completion")),D=m(c(s,"on-failure"));if(typeof ScheduleImpl>"u")throw new F("Promises are an EE feature on Node.js");return ScheduleImpl(s,p,N,D)},sequence:t,slash:function(s){let p=r(s),N=h(s);return D=>{let k=D.X(!1);return k.focus=Lt(p(D)),k.focus.mapOneToMany(()=>N(k))}},some:function(s){let p=parseInt(s.slot,10),N=r(s),D=h(s);return k=>{let j=N(k);return Pt(j.some(function(V){return k.ma[p]=[V],l(D(k))}))}},sort:function(s){let p=Bt.Dj(s);return N=>{try{return p(N)}catch(D){throw D instanceof F&&D.code==="FOCH0002"?new F(D.message,"XTDE1035",s):D instanceof F&&D.code==="XPTY0004"?new F(D.message,"XTDE1030",s):D}}},sourceDoc:_,str:function(s){let p=s.val;return()=>kt(p)},subscript:function(s){let p=r(s),N=h(s);return D=>{var k=p(D);if(D=N(D).next(),D.code==="ADI")D=D.value;else if(D.equals(D.round(0)))D=ot.XS.integer.cast(D).value;else return bt;return(k=k.itemAt(D))?At(k):bt}},supplied:function(s){let p=parseInt(s.slot,10);return N=>wt(N.ma[p])},tail:function(s){let p=parseInt(s.start,10)-1,N=r(s);return D=>{let k=p;return N(D).filter(function(){return 0>=k--})}},tailCallLoop:t,to:function(s){let p=r(s),N=h(s);return D=>{let k=p(D).next();return D=N(D).next(),k===null||D===null||0<k.compareTo(D)?bt:A(k,D)}},treat:function(s){let p=Ie(s.as),N=p.ha(),D=r(s);return k=>D(k).mapOneToOne(function(j){if(N(j))return j;let V=i(s.diag);throw new F("Required item type of "+V.required+" is "+p.toString()+"; supplied value is "+Z.showValue(j),V.code,s)})},true:function(){return()=>Pt(!0)},try:function(s){let p=r(s),N=S(s,"catch");return N.forEach(D=>{let k=D.errors.split(" ").map(j=>{if(j==="*")return()=>!0;if(/^\*:/.test(j)){let ct=j.substring(2);return z=>z.local===ct}if(/}\*$/.test(j)){let ct=j.substring(2,j.length-2);return z=>z.uri===ct}let V=W.QName.fromEQName(j);return ct=>ct.equals(V)});D.test=k.length===1?k[0]:j=>k.some(V=>V(j))}),D=>{try{return wt(p(D).expand())}catch(k){let j;if(k instanceof F){if(k.g)throw k;j=k}else j=k instanceof Error?new F(k.message,"SXJS0021"):new F(k.toString(),"SXJS0021");D.Oe=j,j.xsltLineNr||(j.setExpr(s.C[0]),k instanceof Error&&k.fileName&&(j.xsltModule=k.fileName));let V;V=j.code.match("^Q{")?W.QName.fromEQName(j.code):W.QName.fromParts("","http://www.w3.org/2005/xqt-errors",j.code);for(let ct=0;ct<N.length;ct++){let z=N[ct];if(z.test(V))return r(z)(D)}throw j}}},ufCall:function(s){let p=(s.C||[]).map(m);return N=>{let D=g(s,N,"function"),k=p.map(j=>j(N).expand());return x(s,D,k,N)}},ufRef:function(s){let p=s.name;p=/^[a-z]+:/.test(p)?y(s,p,!0):/^Q\{/.test(p)?W.QName.fromEQName(p):W.QName.fromParts("",Ft.Ma,p);let N=parseInt(s.arity,10),D=Oe.find("SaxonJS").internals.XPath;return k=>{let j=D.getFnSignature(p,N,k);if(j&&j.isUserFunction)return k=new Ut.rf(j,k),At(k);Z.ka("Named user function "+p+"#"+N+" not found")}},union:function(s){let p=r(s),N=h(s);return D=>new Qr(p(D),N(D),U.mb)},useAS:_,valueOf:_,varRef:function(s){let p=parseInt(s.slot,10);return N=>wt(N.ma[p])},vc:function(s){function p(V){return V===null?null:W.untypedAtomic.matches(V)?W.string.cast(V):V}let N=s.op,D=s.onEmpty,k=r(s),j=h(s);return V=>{let ct=k(V),z=j(V),xt=p(ct.next()),Dt=p(z.next());if(xt===null||Dt===null)return D?Pt(D==="1"):bt;if(ct.next()!==null||z.next()!==null)throw new F("Value comparison only applicable to single values","XPTY0004",s);return xt.isNumeric()&&isNaN(xt.value)||Dt.isNumeric()&&isNaN(Dt.value)?Pt(N==="ne"):(V=Bt.$d(s.comp,V),["=","eq","!=","ne"].includes(N)?Pt(Bt.Dh(N,V.equals(xt,Dt))):Pt(Bt.jf(N,V.compare(xt,Dt))))}}};return{ba:c,Ie:O,Kb:v,Yh:u,zk:function(){return"ancestor ancestor-or-self attribute child descendant descendant-or-self following following-sibling namespace parent preceding preceding-sibling self preceding-or-ancestor".split(" ")},Ff:$,Ba:S,gi:tt,Gf:Y,fe:I,Wf:g,Bd:l,Pa:r,Kg:h,cb:m,escape:function(s,p){let N="";return Ct.La(s).forEach(function(D){let k=Ct.ac([D]);N+=p(D,k)?encodeURIComponent(k):k}),N},evaluate:L,mc:function(s,p){return s===null?bt:L(s,p)},ni:function(s,p,N,D){let k=ar[s.local];return k||n(s.toString()+"()",D),k(p.map(j=>wt(j)),N,D)},oi:function(s,p,N,D){return G(s.uri,s.local,p.map(k=>wt(k)),N,D)},flatten:X,Tf:function(s){let p=new It;return p.inSituPut(ot.XS.string.fromString("code"),[ot.XS.string.fromString(s.code)]),p.inSituPut(ot.XS.string.fromString("message"),[ot.XS.string.fromString(s.message)]),p.inSituPut(ot.XS.string.fromString("name"),[ot.XS.string.fromString(s.name)]),p.inSituPut(ot.XS.string.fromString("error"),[new ee(s)]),p},Vf:H,Lk:function(s){if(typeof s<"u")return w(s,"module",20)+"#"+w(s,"line",10)},ib:P,Dc:Q,isArray:rt,isMap:st,gd:ht,gh:function(s){return s instanceof nc},Zi:f,dl:n,wj:i,uj:function(s){G=s},hl:q,Ea:E,jg:y,Sd:B,Gh:function(s){return s.code==="AZ"?W.double.cast(s):s},Hj:M}}();window.abstractNode=Node,window.HostPlatform=function(){function e(v,a=!1){let u=new XMLHttpRequest,l;try{u.open("GET",v,!1),u.setRequestHeader("Accept","application/xml, text/xml;q=0.9, application/xhtml+xml;q=0.8, */*;q=0.7"),u.send(null)}catch{throw new F("Get failure "+v,"FODC0002")}if(u.status===200)a?l={responseText:u.responseText,contentType:u.getResponseHeader("Content-Type")}:l=u.responseText;else throw new F("Failed to read file at "+v,"FODC0002");return l}function t(){Math.trunc=Math.trunc||function(v){return 0>v?Math.ceil(v):Math.floor(v)},Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(v,a){if(this===null||typeof this>"u")throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof v!="function")throw new TypeError("predicate must be a function");let u=Object(this),l=u.length>>>0,A;for(let S=0;S<l;S++)if(A=u[S],v.call(a,A,S,u))return S;return-1},enumerable:!1,configurable:!1,writable:!1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(v){if(this===null||typeof this>"u")throw new TypeError("Array.prototype.includes called on null or undefined");return this.findIndex(a=>a===v)}}),String.prototype.includes||(String.prototype.includes=function(v,a){return typeof a!="number"&&(a=0),a+v.length>this.length?!1:this.indexOf(v,a)!==-1})}let i=Resources,f;return{name:"Browser",edition:"EE",xdmDTlocale:function(){return!0},init:function(){t()},crypto:function(v){return v=new TextEncoder().encode(v),window.crypto.subtle.digest("SHA-256",v)},inBrowser:function(){return!0},expose:function(v,a){window[a]=v;try{Ma.exports=v}catch{}},encodeToBase64:function(v){return btoa(v)},parseXmlFromString:function(v,a,u=null){v=v.replace(/\r\n|\r(?!\n)/g,`
`),u||="application/xml";try{let A=new DOMParser().parseFromString(v,u);if(A.getElementsByTagName("parsererror").length===0)var l=!1;else{if(!f)try{f=new DOMParser().parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch{}l=0<A.getElementsByTagNameNS(f,"parsererror").length}if(l)throw Error(A.getElementsByTagNameNS(f,"parsererror")[0].textContent);return A}catch(A){throw new F("Misplaced or malformed markup"+(A.message?": "+A.message:""),"FODC0002")}},resource:function(v){return i[v]},readFile:function(v){return e(v,!1)},readFileSync:e,resourcePromise:function(v){let a,u=v.type||"text",l=v.encoding,A="file";if(v.file)a=Promise.reject(new F("File access not supported in browser ("+v.file+")","SXJS0009"));else if(v.location){let S=v.location,O=S;S instanceof URL?S=S.toString():O=new URL(S),A=S,O.protocol==="file:"?a=Promise.reject(new F("File access not supported in browser ("+O+")","SXJS0009")):a=Jt.Ki(S,Jt.ei(v),u,l,!0)}return a.then(S=>((u==="text"||u==="xml")&&(S=Jt.Eg(S)),Promise.resolve(Jt.Fg(S)))).catch(S=>(S=Jt.rj(S,v,A,"SXJS0009"),Promise.reject(S)))},resolveUri:function(v,a){try{return(a&&a!==null&&a!==""?v&&v!==""?new URL(v,a):new URL(a):new URL(v)).toString()}catch(u){throw new F("Failed URI resolution: href="+v+" base="+a+" -- "+u,"FODC0005")}},baseURL:function(){return window.document.baseURI},getDefaultDeliverMessage:function(){return function(v){let a="";ut.Kb(v).expand().forEach(function(u){a+=(a===""?"":" ")+u.toString()}),console.log("xsl:message: "+a)}},isHTMLElement:function(v){return v.namespaceURI==="http://www.w3.org/1999/xhtml"},saxonPrint:function(v){console.log(v)},createDocument:function(){return document.implementation.createDocument("","",null)},setDocURI:function(v,a){return v._saxonBaseUri=a,v},newURL:function(v,a=null){return a!==null?new URL(v,a):new URL(v)},globalObject:window,addEventListener:function(v,a,u,l){let A="httpabort afterprint beforeprint beforeunload hashchange languagechange message offline online pagehide pageshow popstate storage unhandledrejection unload resize".split(" ");l?l.addEventListener(v,a,u):A.indexOf(v)===-1?window.document.addEventListener(v,a,u):window.addEventListener(v,a,u)}}}(),function(){function e(d,o,E,T,C){switch(d){case Ft.Ma+"/math":return a(o,E,T,C);case Ft.Ma+"/map":return v(o,E,T,C);case Ft.Ma+"/array":return f(o,E,T,C);case Ft.jd:return i(o,E,T,C);default:let n=M.getSignature(d,o);if(!n)throw new F("Unknown function Q{"+d+"}"+o,"SXJS0003",C);if(!n.impl)throw new F("No implementation provided for Q{"+d+"}"+o,"SXJS0003",C);if(n.api==="legacy")return n.impl(E,T,C);let r=n.alphaTree;for(d=[],o=0;o<E.length;o++)T=E[o],C=r.a[o],C.o==="1"||C.o==="?"?d.push(re(T.next(),!0)):d.push(new Xi(T)[Symbol.iterator]());return E=n.impl.call(null,...d),E instanceof Promise?At(new ee(E.then(h=>t(h,r)))):t(E,r)}}function t(d,o){if(d instanceof ft)return d;if(o=o.r,O.isPrototypeOf(d))return d instanceof Xi?d.saxonIterator():new to(new Pi(d));if(d===null||typeof d>"u")return bt;if(d=Jn(d),d.length===1)return d=d[0],o=o.p,o=ot.la(d)&&o!=="A"?ot.codes[o].cast(d):d,wt([o]);throw new F("Internal error: not handling expanded.length !== 1","SXJS0003")}function i(d,o,E,T){function C(y,w){for(let g=0;g<w.length;g++){if(y===null)return;try{y=y[w[g]]}catch(x){throw x.code!==null&&typeof x.code<"u"?x:new F("Failed to get property "+w[g],"SXJS0007",T)}if(typeof y>"u")return}return y}function n(y){if(typeof y!="string")throw new F(`Cannot interpolate a ${typeof y}`,"SXJS0017");if(0>y.indexOf("`"))return y.split(".");let w=[""],g=0,x=0,I=!0;for(;x<y.length;){let L=y.substring(x,x+1);switch(L){case"`":I?I=!1:x+1<y.length&&y.substring(x+1,x+2)==="`"?(w[g]+="`",x++):I=!0;break;case".":I?(g++,w[g]=""):w[g]+=L;break;default:w[g]+=L}x++}if(!I)throw new F(`Mismatched quotes in ${y}`,"SXJS0018");return w}function r(y,w,g,x){let I;try{I=y.apply(g,w)}catch(L){throw L.code!==null&&typeof L.code<"u"?L:new F("Failed to call method "+y,"SXJS0007",T)}return x?I===null||typeof I>"u"?bt:wt(Yt(I)):h(I)}function h(y){var w;return y instanceof ft?w=y:w=y instanceof ft||ot.la(y)||ut.gd(y)||at.U(y)?At(y):At(new ee(y)),w}function m(y){return y instanceof ee&&y.value instanceof Promise}function c(y){return y instanceof ee?y.value:y}function P(y){if(!(y instanceof qt))throw new F("Failed processing arguments for IXSL function call","SXJS0007",T);let w=[];return y.value.length!==0&&y.value.forEach(function(g){if(g.length!==1)throw new F("Failed processing arguments for IXSL function call. With convert-args=false, all members of the XDM array $arguments must be single items","SXJS0007",T);w.push(c(g[0]))}),w}function Q(y,w,g){return w=l.string.fromString(w),y&&y.containsKey(w)?y.get(w)[0].toBoolean():g}function H(y,w,g){Z.xa("Warning "+y+": "+w,1,g)}let B={"abort-controller":function(y,w,g){w=null,y[0]&&(w=y[0].next(),w!==null&&(w=w.toNumber()));let x=new AbortController;if(w!==null){if(0>w)throw new F("ixsl:abort-controller: supplied timeout is negative: "+w,"SXJS0007",g);let I=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>x.abort(I),w)}return h(x)},all:function(y){let w=[];return y[0].next().value.forEach(function(g){w.push(c(g[0]))}),y=Promise.all(w).then(g=>{let x=[];return g.forEach(function(I){x.push(I.expand())}),At(new qt(x))}),h(y)},"all-settled":function(y){let w=[];return y[0].next().value.forEach(function(g){w.push(c(g[0]))}),y=Promise.allSettled(w).then(g=>{let x=[];return g.forEach(function(I){let L=new It;L.inSituPut(ot.XS.string.fromString("status"),[ot.XS.string.fromString(I.status)]),I.status==="fulfilled"?L.inSituPut(ot.XS.string.fromString("value"),I.value.expand()):L.inSituPut(ot.XS.string.fromString("reason"),[ut.Tf(I.reason)]),x.push([L])}),At(new qt(x))}),h(y)},any:function(y){let w=[];return y[0].next().value.forEach(function(g){w.push(c(g[0]))}),y=Promise.any(w).then(g=>g),h(y)},apply:function(y,w,g){var x=y[2]?y[2].next():null;w=Q(x,"convert-result",!0);let I=Q(x,"convert-args",!0);if(x=c(y[0].next()),typeof x!="function")throw new F("ixsl:apply: first argument is not a function","SXJS0007",g);return y=y[1].next(),y=I?re(y):P(y),r(x,y,null,w)},call:function(y,w,g){var x=y[3]?y[3].next():null;w=Q(x,"convert-result",!0),x=Q(x,"convert-args",!0);var I=c(y[0].next());if(I===null||typeof I>"u")throw new F("ixsl:call: specified object is "+I,"SXJS0007",g);let L=y[1].next().toString();var _=n(L);let q=_.pop();if(I=C(I,_),typeof I>"u"||I===null)throw new F("Encountered null or undefined in path to nested object for ixsl:call: '"+_.join(".")+"'","SXJS0007",g);if(_=I[q],typeof _>"u")throw new F("ixsl:call: object method '"+L+"' not found","SXJS0007",g);if(typeof _!="function")throw new F("ixsl:call: property '"+L+"' is not a function","SXJS0007",g);return y=y[2].next(),y=x?re(y):P(y),r(_,y,I,w)},catch:function(y,w,g){try{let x=c(y[0].next());if(!(x instanceof Promise))throw new F("ixsl:catch first argument is not a promise: "+Z.showValue(x),"SXJS0007",g);let I=y[1].expand();if(I.length!==1)throw new F("ixsl:catch must have exactly one function item as the second argument. Supplied length "+I.length,"SXJS0007",g);let L=I[0];if(!(L instanceof Ut.XdmFunction&&L.arity===1))throw new F("ixsl:catch function must return an arity-1 function","SXJS0007",g);let _=x.catch(q=>{if(q=L.evaluate([[ut.Tf(q)]],w,g).expand(),q.length===1){let $=q[0];if(m($))return $.value}return wt(q)});return h(_)}catch(x){return h(Promise.reject(x))}},contains:function(y,w,g){var x=c(y[0].next());if(w=!0,x===null||typeof x>"u")throw new F("ixsl:contains: specified object is "+x,"SXJS0007",g);y=y[1].next().toString(),y=n(y);let I=y.pop();if(x=C(x,y),typeof x>"u"||x===null)throw new F("Encountered null or undefined in path to nested object for ixsl:contains: '"+y.join(".")+"'","SXJS0007",g);return typeof x[I]>"u"&&(w=!1),wt(Yt(w))},doc:function(y,w,g){try{let x=Jt.Zd(y,w,g);if(!x)return h(Promise.resolve(bt));let I=w.fixed.Ta,L=w.fixed.Tb;if(I[x]&&!(I[x]instanceof F))return h(Promise.resolve(At(I[x])));let _=new Headers;if(_.append("Accept","application/xml, text/xml;q=0.9, application/xhtml+xml;q=0.8, */*;q=0.7"),w={location:x,headers:_,expr:g,type:"xml"},y[1]){let $=c(y[1].next());if($!==null){if(!($ instanceof AbortController))throw new F("Object supplied in second argument of ixsl:doc is not an AbortController: "+Z.showValue($),"SXJS0007",g);w.controller=$}}let q=J.ec(w).then($=>($=at.dc(J.Sb($)),$._saxonBaseUri=$._saxonDocUri=x,I[x]=$,At($))).catch($=>{throw L[x]=I[x]=$,$});return h(q)}catch(x){return h(Promise.reject(x))}},"doc-fetched":function(y,w,g){return y=Jt.Zd(y,w,g),y?(w=w.fixed.Ta[y],Pt(w&&!(w instanceof F))):Pt(!1)},eval:function(y,w,g){w=y[1]?y[1].next():null,w=Q(w,"convert-result",!0),y=y[0].next().toString();let x;try{x=new Function("return ("+y+")")()}catch(I){throw new F("Failed to process ixsl:eval: "+I.toString(),"SXJS0007",g)}return w?wt(Yt(x)):h(x)},event:function(y,w,g){if(!J.ra())throw new F("ixsl:event is only available in the browser","SXJS0007",g);return w.de===null?bt:At(Yt(w.de)[0])},finally:function(y,w,g){try{let x=c(y[0].next());if(!(x instanceof Promise))throw new F("ixsl:finally first argument is not a promise: "+Z.showValue(x),"SXJS0007",g);let I=y[1].expand();if(I.length!==1)throw new F("ixsl:finally must have exactly one function item as the second argument. Supplied length "+I.length,"SXJS0007",g);let L=I[0];if(!(L instanceof Ut.XdmFunction&&L.arity===0))throw new F("ixsl:finally function must return an arity-0 function","SXJS0007",g);let _=x.finally(()=>{let q=L.evaluate([],w,g).expand();if(q.length===1){let $=q[0];if(m($))return $.value}return wt(q)});return h(_)}catch(x){return h(Promise.reject(x))}},get:function(y,w,g){var x=y[2]?y[2].next():null;x=Q(x,"convert-result",!0);var I=y[0].next(),L=c(I);if(L===null||typeof L>"u")throw I instanceof ee?new F("ixsl:get: specified object is "+L,"SXJS0007",g):new F("ixsl:get: specified object not found","SXJS0007",g);y=y[1].next().toString(),I=n(y);let _=I.pop();if(L=C(L,I),typeof L>"u"||L===null)throw new F("Encountered null or undefined in path to nested object for ixsl:get: '"+I.join(".")+"'","SXJS0007",g);return g=L[_],x?typeof g>"u"?(H("ixsl:get","object property '"+y+"' not found",w.fixed.Ka),bt):g===null?bt:wt(Yt(g)):h(g)},"http-request":function(y,w){var g=y[0].next();g=re(g,!0),Jt.pj(g),Z.xa("HTTP request prepared",2,w.fixed.Ka);let x=null;if(y[1]&&(x=c(y[1].next()),x!==null&&!(x instanceof AbortController)))throw new F("Object supplied in second argument of ixsl:http-request is not an AbortController: "+Z.showValue(x),"SXJS0007",T);if(x===null&&(x=new AbortController,y=0,"timeout"in g&&(y=g.timeout),y!==0)){let I=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>x.abort(I),y)}return w=Jt.Li(g,x,w,!0).then(I=>At(I[0])),h(w)},"json-parse":function(y,w,g){w=y[1]?y[1].next():null,w=Q(w,"convert-result",!1),y=y[0].next().toString();let x;try{x=JSON.parse(y)}catch(I){throw new F("Failed to parse JSON in ixsl:json-parse: "+I.toString(),"SXJS0007",g)}return w?wt(Yt(x)):At(new ee(x))},"json-doc":function(y,w,g){try{let I=Jt.zd(y,w,g);if(!I)return h(Promise.resolve(bt));let L=y[1]?y[1].next():null,_=w.fixed.kb,q=w.fixed.Tb;if(_[I]&&!(_[I]instanceof F)){var x=ln.od(_[I],L,w);return h(Promise.resolve(At(x)))}if(x={location:I,expr:g,type:"json"},y[2]){let rt=c(y[2].next());if(rt!==null){if(!(rt instanceof AbortController))throw new F("Object supplied in third argument of ixsl:json-doc is not an AbortController: "+Z.showValue(rt),"SXJS0007",g);x.controller=rt}}let $=J.ec(x).then(rt=>(_[I]=rt,rt=ln.od(rt,L,w),At(rt))).catch(rt=>{throw q[I]=_[I]=rt,rt});return h($)}catch(I){return h(Promise.reject(I))}},location:function(y,w,g){if(!J.ra())throw new F("ixsl:location is only available in the browser","SXJS0007",g);return At(Yt(window.location.toString())[0])},new:function(y,w,g){var x=y[2]?y[2].next():null;w=Q(x,"convert-result",!1),x=Q(x,"convert-args",!0);let I=y[0].next().toString();if(!I.match(A))throw new F("Name is not a valid class name:"+I,"SXJS0010");y=y[1].next(),evalArgName=x?re(y):P(y);let L;try{L=new Function(`return (new ${I}(...evalArgName))`)()}catch(_){throw new F("Failed to process ixsl:new: "+_.toString(),"SXJS0007",g)}return w?wt(Yt(L)):h(L)},page:function(y,w){return At(Yt(w.masterDocument)[0])},"query-params":function(y,w,g){function x(_){return l.string.fromString(decodeURIComponent(_.replace(I," ")))}if(!J.ra())throw new F("ixsl:query-params is only available in the browser","SXJS0007",g);let I=/\+/g;w=/([^&=]+)=?([^&]*)/g,g=window.location.search.substring(1);let L=new It;for(;(y=w.exec(g))!==null;){let _=L.get(x(y[1]));_.push(x(y[2])),L.inSituPut(x(y[1]),_)}return At(L)},race:function(y){let w=[];return y[0].next().value.forEach(function(g){w.push(c(g[0]))}),y=Promise.race(w).then(g=>g),h(y)},resolve:function(y){return y=y[0].expand(),y.length===1?(y=y[0],y=m(y)?Promise.resolve(y.value):Promise.resolve(At(y))):y=Promise.resolve(wt(y)),h(y)},sleep:function(y,w,g){try{let x=y[0].next().value;if(0>x)throw new F("ixsl:sleep supplied arg is negative: "+x,"SXJS0007",g);let I=new Promise(L=>setTimeout(L,x)).then(()=>bt);return h(I)}catch(x){return h(Promise.reject(x))}},source:function(y,w){return y=w.fixed.cd,typeof y>"u"||y===null?bt:At(Yt(y)[0])},style:function(y,w,g){if(!J.ra())throw new F("ixsl:style is only available in the browser","SXJS0007",g);for(y=y[0].next(),y=at.$f(y)?window.getComputedStyle(y):{},w=new It,g=0;g<y.length;g++){let x=y.item(g),I=y.getPropertyValue(x);typeof I>"u"||I===null?w.inSituPut(l.string.fromString(x),[]):w.inSituPut(l.string.fromString(x),[l.string.fromString(I.toString())])}return At(w)},then:function(y,w,g){try{let x=c(y[0].next());if(!(x instanceof Promise))throw new F("ixsl:then first argument is not a promise: "+Z.showValue(x),"SXJS0007",g);let I=y[1].expand();if(I.length!==1)throw new F("ixsl:then must have exactly one function item as the second argument. Supplied length "+I.length,"SXJS0007",g);let L=I[0];if(!(L instanceof Ut.XdmFunction&&L.arity===1))throw new F("ixsl:then function must return an arity-1 function","SXJS0007",g);let _=x.then(q=>{if(q=L.evaluate([q.expand()],w,g).expand(),q.length===1){let $=q[0];if(m($))return $.value}return wt(q)});return h(_)}catch(x){return h(Promise.reject(x))}},"unparsed-text":function(y,w,g){try{let x=Jt.zd(y,w,g);if(!x)return h(Promise.resolve(bt));let I=w.fixed.kb,L=w.fixed.Tb;if(I[x]&&!(I[x]instanceof F))return h(Promise.resolve(kt(I[x])));if(w={location:x,expr:g,type:"text"},y[2]){let $=c(y[2].next());if($!==null){if(!($ instanceof AbortController))throw new F("Object supplied in third argument of ixsl:unparsed-text is not an AbortController: "+Z.showValue($),"SXJS0007",g);w.controller=$}}let _=Jt.Ne(y[1]?u(y[1]):"");_&&(w.encoding=_);let q=J.ec(w).then($=>(I[x]=$,kt($))).catch($=>{throw L[x]=I[x]=$,$});return h(q)}catch(x){return h(Promise.reject(x))}},"unparsed-text-fetched":function(y,w,g){return y=Jt.Zd(y,w,g),y?(w=w.fixed.kb[y],Pt(w&&!(w instanceof F))):Pt(!1)},window:function(){return At(Yt(J.Hi())[0])},"remove-attribute":function(y,w,g){let x=y[0].next().toString();if(y=y[1].next(),y.nodeType!==1||y.ownerDocument!==w.masterDocument)throw new F("Context item for ixsl:remove-attribute must be an element in the master document","SXJS0007",g);return w=ut.jg(g,x,!1),w.uri!==""?y.removeAttributeNS(w.uri,w.local):y.removeAttribute(w.local),bt},"remove-property":function(y,w,g){let x=y[0].next().toString();var I=c(y[1].next());let L=n(x);if(y=L.pop(),I=C(I,L),typeof I>"u"||I===null)throw new F("Encountered null or undefined in path to nested object for ixsl:remove-property: '"+L.join(".")+"'","SXJS0007",g);return typeof I[y]>"u"?(H("ixsl:remove-property","'"+x+"' not found for supplied object",w.fixed.Ka),bt):(g=I.hasOwnProperty(y),delete I[y]&&g||H("ixsl:remove-property","'"+x+"' could not be removed for supplied object",w.fixed.Ka),bt)},"schedule-action":function(y,w,g){throw new F("ixsl:schedule-action - shouldn't be here","SXJS0007",g)},"set-attribute":function(y,w,g){let x=y[0].next().toString(),I=y[1].next().toString();if(y[2]||He(w,"SXJS0007","ixsl:set-attribute",g),y=y[2]?y[2].next():ue(w),w=at.Ac(w.masterDocument),y.nodeType!==1||at.Ac(y)!==w)throw new F("Context item for ixsl:set-attribute must be an element in the master document","SXJS0007",g);let L=ut.jg(g,x,!1);return L.uri!==""?(L.prefix===""&&at.Dc(y).forEach(function(_){_.uri===L.uri&&(L.prefix=_.prefix)}),y.setAttributeNS(L.uri,L.toString(),I)):y.setAttribute(L.local,I),bt},"set-property":function(y,w,g){var x=y[0].next().toString();w=!0,y[3]&&(w=re(y[3].next()));var I=y[1].next();if(w=w?re(I):c(I),y=c(y[2].next()),x=n(x),I=x.pop(),y=C(y,x),typeof y>"u"||y===null)throw new F("Encountered null or undefined in path to nested object for ixsl:set-property: '"+x.join(".")+"'","SXJS0007",g);return typeof y!="object"||(y[I]=w),bt},"set-style":function(y,w,g){if(!J.ra())throw new F("ixsl:set-style is only available in the browser","SXJS0007",g);g=y[0].next().toString();let x=re(y[1].next());return y=y[2].next(),at.$f(y)&&"style"in y?(y.style[g]=x,bt):(H("ixsl:set-style","style '"+g+"' cannot be set for supplied object",w.fixed.Ka),bt)}};if(!B[d])throw new F("Unknown ixsl function: "+d,"SXJS0003",T);return B[d](o,E,T)}function f(d,o,E,T){function C(c,P){if(1>c||c>P)throw new F("Array index ("+c+") out of bounds (1 to "+P+")","FOAY0001",T)}function n(c){return c[0].next().value}function r(c){return At(new qt(c))}function h(c,P,Q,H){let B=P.fixed.fa,y=c[1].expand(),w=c[2].expand()[0],g=Object.keys(P.ma).length;if(w instanceof Ut.XdmFunction)c=n(c),H||(c=c.reverse()),c.forEach(x=>{y=w.evaluate(H?[y,x]:[x,y],P,Q).expand()});else{let x;w.N!=="function"&&(x=w),c[0].forEachItem(function(I){let L=P.X(!0);x&&(L.oa=x),Yn(L),L.pa="function",L.ab={},L.Wa=null,L.focus=null,H?(L.ma[g]=y,L.ma[g+1]=[I]):(L.ma[g]=[I],L.ma[g+1]=y),y=B.evaluate(void 0,L).expand()})}return wt(y)}let m={append:function(c){return r(n(c).concat([c[1].expand()]))},filter:function(c,P,Q){let H=c[1].expand()[0];if(Object.keys(P.ma),c=n(c),H.evaluate){let B=[];return c.forEach(function(y){let w=H.evaluate([y],P,Q).expand();if(Array.isArray(w)&&w.length!==1||!l.boolean.matches(w[0]))throw new F("Wrong type for function result in filter(). Expecting xs:boolean, supplied value is "+Z.showValue(w),"XPTY0004",Q);w[0].toBoolean()&&B.push(y)}),r(B)}throw new F("Argument supplied to array:filter is not a function","XPTY0004",Q)},flatten:function(c){return ut.flatten(c[0])},"fold-left":function(c,P,Q){return h(c,P,Q,!0)},"fold-right":function(c,P,Q){return h(c,P,Q,!1)},"for-each":function(c,P,Q){let H=c[1].expand()[0];if(c=n(c),Object.keys(P.ma),H.evaluate){let B=[];return c.forEach(function(y){B.push(H.evaluate([y],P,Q).expand())}),r(B)}},"for-each-pair":function(c,P,Q){let H=c[2].expand();if(H.length!==1)throw new F("for-each-pair() must have exactly one function item as the third argument. Supplied length "+H.length,"XPTY0004",Q);H=H[0],Object.keys(P.ma);let B=[],y=c[0].next().value[Symbol.iterator]();c=c[1].next().value[Symbol.iterator]();let w=y.next().value,g=c.next().value;if(H instanceof Ut.XdmFunction)for(;w&&g;)B.push(H.evaluate([w,g],P,Q).expand()),w=y.next().value,g=c.next().value;return r(B)},"_from-sequence":function(c){let P=[];return c[0].forEachItem(function(Q){P.push([Q])}),r(P)},get:function(c){let P=n(c);return c=c[1].next().toNumber(),C(c,P.length),wt(P[c-1])},head:function(c){return c=n(c),C(1,c.length),wt(c[0])},"insert-before":function(c){let P=n(c),Q=c[1].next().toNumber();return C(Q,P.length+1),c=c[2].expand(),r(P.slice(0,Q-1).concat([c]).concat(P.slice(Q-1)))},join:function(c){let P=[];return c[0].forEachItem(function(Q){Q.value.forEach(function(H){P.push(H)})}),r(P)},put:function(c){let P=n(c),Q=c[1].next().toNumber();return C(Q,P.length),c=c[2].expand(),r(P.slice(0,Q-1).concat([c]).concat(P.slice(Q)))},remove:function(c){let P=n(c),Q=[];return c[1].forEachItem(function(H){H=H.toNumber(),C(H,P.length),Q.push(H-1)}),r(P.filter(function(H,B){return 0>Q.indexOf(B)}))},reverse:function(c){return r(n(c).slice().reverse())},size:function(c){return he(c[0].next().size())},sort:function(c,P,Q){let H=Bt.Te(Q,c[1],P),B=ut.Kb;if(c[2]){let y=c[2].next();B=function(w){return y.evaluate([[w]],P,Q)}}return r(n(c).slice().sort(function(y,w){return c[1]?ni(wt(y).mapOneToMany(B),wt(w).mapOneToMany(B),H):ni(wt(y).mapOneToMany(B),wt(w).mapOneToMany(B))}))},subarray:function(c){let P=n(c),Q=c[1].next().toNumber();if(C(Q,P.length+1),c=c[2]?c[2].next().toNumber():P.length-Q+1,0>c)throw new F("Length is negative","FOAY0002");return C(Q+c,P.length+1),r(P.slice(Q-1,Q+c-1))},tail:function(c){return c=n(c),C(1,c.length),r(c.slice(1))},"_to-sequence":function(c){let P=[];return n(c).forEach(function(Q){Q.forEach(function(H){P.push(H)})}),wt(P)}};if(!m[d])throw new F("Unknown array function: "+d,"SXJS0003",T);return m[d](o,E,T)}function v(d,o,E,T){let C={contains:function(n){let r=n[0].next();return n=n[1].next(),Pt(r.containsKey(n))},create:function(n){let r=new It;return n[0].forEachItem(function(h){h.forAllPairs(function(m){r.inSituPut(m.k,m.v)})}),At(r)},entry:function(n){let r=new It;return r.inSituPut(n[0].next(),n[1].expand()),At(r)},find:function(n){function r(P){ut.isArray(P)?P.value.forEach(h):ut.isMap(P)&&(P.containsKey(c)&&m.push(P.get(c)),P.keys().forEach(function(Q){h(P.get(Q))}))}function h(P){P.forEach(r)}let m=[],c=n[1].next();return h(n[0].expand()),At(new qt(m))},"for-each":function(n,r,h){let m=n[0].next();if(m instanceof ee)throw new F("Argument to map:for-each is a JSValue","XPTY0004",h);let c=m.keys(),P=n[1].expand()[0];if(P.evaluate){let Q=[];return c.forEach(function(H){Q=Q.concat(P.evaluate([[H],m.get(H)],r,h).expand())}),wt(Q)}throw new F("Argument to map:for-each is not a function","XPTY0004",h)},get:function(n){let r=n[0].next();return n=n[1].next(),wt(r.get(n))},keys:function(n){if(n=n[0].next(),n instanceof ee)throw new F("Argument to map:keys is a JSValue","XPTY0004",T);return wt(n.keys())},merge:function(n){let r=new It,h=n[1]?n[1].next():null,m=l.string.fromString("duplicates"),c=h&&h.containsKey(m)?h.get(m).toString():"use-first";return n[0].forEachItem(function(P){if(P instanceof ee)throw new F("JSValue supplied to map:merge","XPTY0004",T);P.forAllPairs(function(Q){if(!r.containsKey(Q.k)||["use-last","unspecified","use-any"].includes(c))r.inSituPut(Q.k,Q.v);else{if(c==="reject"){var H=l.string.fromString("duplicates-error-code");throw H=h.containsKey(H)?h.get(H).toString():"FOJS0003",new F("Duplicate key value '"+Q.k.toString()+"'",H,T)}if(c==="combine"){let B=[];r.get(Q.k).forEach(function(y){B.push(y)}),Q.v.forEach(function(y){B.push(y)}),r.inSituPut(Q.k,B)}}})}),At(r)},_new:function(n){let r=new It;return n[0]&&n[0].forEachItem(function(h){h.forAllPairs(function(m){if(r.containsKey(m.k))throw new F("Duplicate key value '"+m.k.toString()+"'",E.fixed.options.language==="XSLT"?"XTDE3365":"XQDY0137",T);r.inSituPut(m.k,m.v)})}),At(r)},put:function(n){let r=n[0].next(),h=n[1].next();if(n=n[2].expand(),r instanceof ee)throw new F("Argument to map:put is a JSValue","XPTY0004",T);return At(r.put(h,n))},remove:function(n){let r=n[0].next();if(r instanceof ee)throw new F("Argument to map:remove is a JSValue","XPTY0004",T);return n[1].forEachItem(function(h){r=r.remove(h)}),At(r)},size:function(n){if(n=n[0].next(),n instanceof ee)throw new F("Argument to map:size is a JSValue","XPTY0004",T);let r=0;return n.forAllPairs(function(){r++}),he(r)},"untyped-contains":function(n){let r=n[0].next();return n=n[1].next(),Pt(r.containsKey(n))}};if(!C[d])throw new F("Unknown map function: "+d,"SXJS0003",T);return C[d](o,E,T)}function a(d,o,E,T){function C(c){return c===null?(h=!0,Number.NaN):c.toNumber()}function n(){let c=o[0].next();return C(c||ut.Pa(T)(E).next())}function r(){let c=o[1].next();return C(c||ut.Kg(T)(E).next())}let h=!1,m=function(){switch(d){case"pi":return Math.PI;case"exp":return Math.exp(n());case"exp10":return Math.pow(10,n());case"log":return Math.log(n());case"log10":return Math.log(n())/Math.LN10;case"pow":let c=n(),P=r();return c===-1&&(P===1/0||P===-1/0)||c===1?1:Math.pow(c,P);case"sqrt":return Math.sqrt(n());case"sin":return Math.sin(n());case"cos":return Math.cos(n());case"tan":return Math.tan(n());case"asin":return Math.asin(n());case"acos":return Math.acos(n());case"atan":return Math.atan(n());case"atan2":return Math.atan2(n(),r());default:throw new F("Unknown math function "+T.name,"XPST0017",T)}}();return h?bt:lo(m)}function u(d){return(d=d.next())?d.value:""}let l=ot.XS,A=RegExp("^[A-Za-z_][A-Za-z_0-9.]*$"),S=Object.getPrototypeOf(function*(){}).prototype,O=Object.getPrototypeOf(S),M=new Di;return M.addLibrary(Ft.qb,{apply:ar.apply,"compile-XPath":function(d,o,E){let T=d[0].next().toString(),C,n;return 1<d.length&&(C=d[1].next(),C=C!==null?re(C,!0):{}),2<d.length&&(n=d[2]),Oe.find("SaxonJS").internals.XPath.compileToXML(T,C,n,E,o)},"compile-GlobalContext":function(d,o,E){let T,C;return T=d[0].next(),T=T!==null?re(T,!0):{},C=d[1].next(),C=C!==null?re(C,!0):{},d=d[2].next(),d=d!==null?re(d,!0):{},Oe.find("SaxonJS").internals.XPath.compileGlobalContext(T,C,d,E,o)},"discard-document":function(d,o,E){if(d=d[0].next(),d===null||d.nodeType!==9||!d._saxonBaseUri)throw new F("Node supplied to saxon:discard-document() is not a document node","XPTY0004",E);return E=d._saxonBaseUri,d=o.fixed.Ta[E],delete o.fixed.Ta[E],delete o.fixed.Tb[E],At(d)},doc:ar.doc,"dynamic-error-info":function(d,o){if(o=o.Oe,o===null)return bt;switch(d=d[0].next().toString(),d){case"description":return kt(o.message);case"code":return At(/^Q\{/.test(o.code)?l.QName.fromString(o.code):l.QName.fromParts("err","http://www.w3.org/2005/xqt-errors",o.code));case"value":return o.errorObject?At(o.errorObject):bt;case"module":return kt(o.xsltModule||"");case"line-number":return he(o.xsltLineNr);case"column-number":return he(-1);default:throw new F("unknown error info field "+d,"SXJS0003")}},"has-uniform-namespaces":function(d){return Pt(at.dh(d[0].next()))},"line-number":function(d){return d=d[0].next().Wk,he(d||-1)},"marshal-type":function(d){return d=d[0].next().toString(),d=Le(d),At(Ne(Yt(d))[0])},"message-count":function(d,o){d=d[0].next();let E=0;if(d)d=d.toEQName(),(E=o.qc[d])||(E=0);else for(let T in o.qc)E+=o.qc[T];return he(E)},"parse-sequence-type":function(d){var o=d[0].next().toString();let E=d[1].next();if(d=at.Fi(E,Ft.ri,"ns"),d!=null){let T=_e.parseNsAttribute(d);d=C=>T[C]}else d=T=>E.lookupNamespaceURI(T);return o=Ps.parseSequenceType(o,d,()=>{let T=E;for(;T&&T.nodeType===1;){if(at.aa(T).uri===Ft.Qc&&T.hasAttributeNS("","xpath-default-namespace"))return T.getAttributeNS("","xpath-default-namespace");if(T.hasAttributeNS(Ft.Qc,"xpath-default-namespace"))return T.getAttributeNS(Ft.Qc,"xpath-default-namespace");T=at.Va(T)}}),At(Ne(Yt(o.V()))[0])},"parse-XPath":function(d){let o=d[0].next().toString(),E="parse";return 1<d.length&&(E=d[1].next().toString()),d=Ps.process(o,E==="pattern.parseFast",null,!0),At(d)},permute:function(d){let o=[];return d[0].expand().forEach(E=>o.push({key:Math.random(),Gj:E})),o=o.sort(function(E,T){return E.key-T.key}),d=o.map(E=>E.Gj),wt(d)},"system-id":function(d,o){return d=ue(o),d=at.U(d)?at.baseURI(d):null,At(d===null?null:l.anyURI.fromString(d))},timestamp:function(d,o){return At(l.dateTimeStamp.fromDate(new Date,-o.fixed.Bb.getTimezoneOffset()))}}),M.addLibrary("http://exslt.org/common",{"node-set":function(d){return d[0]}}),ut.uj(e),{evaluate:e,addLibrary:function(d){M.addLibrary(d.namespace,d.signatures)}}}(),window.ScheduleImpl=function(e,t,i,f){return v=>{let a;if(i&&(a=i(v).next(),!(a instanceof Ut.XdmFunction)||a.arity!==1&&a.arity!==0))throw new F("ixsl:promise/@on-completion must return an arity-0 or arity-1 function","XPTY0004",e);let u;if(f){if(u=f(v).next(),!(u instanceof Ut.XdmFunction&&u.arity===1))throw new F("ixsl:promise/@on-failure must return an arity-1 function","XPTY0004",e);let S=new It;if(!u.Ve().yc()[0].matches([S]))throw new F("ixsl:promise/@on-failure function argument type must include map","XPTY0004",e)}let l;try{l=t(v).next()}catch(S){var A=Promise.reject(S)}return typeof A>"u"&&(A=l instanceof ee&&l.value instanceof Promise?l.value:Promise.reject(new F("ixsl:promise/@select must return a Promise","XPTY0004",e))),A=A.then(S=>{a&&(S=a.arity===0?[]:[S.expand()],a.evaluate(S,v,e).expand())}).catch(S=>{if(u)u.evaluate([[ut.Tf(S)]],v,e).expand();else throw S}),v.fixed.hc.push(A),bt}},function(){function e(f){t=f,t.init(),J.zj(f)}let t={},i={atom:ke.atom,getLogLevel:Z.getLogLevel,getProcessorInfo:ke.getProcessorInfo,getResource:ke.getResource,setLogLevel:Z.setLogLevel,serialize:ke.serialize,transform:wn.transform,XPath:{evaluate:or.evaluate},XError:F,getConfigurationProperties:ke.getConfigurationProperties,getConfigurationProperty:ke.getConfigurationProperty,setConfigurationProperties:ke.setConfigurationProperties,setConfigurationProperty:ke.setConfigurationProperty,resetIndexes:ke.resetIndexes,registerExtensionFunctions:function(f){new Di().addLibrary(f.namespace,f.signatures)},Iter:Kt,JSValue:ee,XdmArray:qt,XdmFunction:Ut,XdmMap:It,XS:ot.XS,XdmAttributeNode:vn,XdmNamespaceNode:cn,internals:{Atomic:ot,Big:gt,Codepoint:Ct,Compare:Bt,Diag:Z,DomUtils:at,Expr:ut,Fetch:Jt,NsConst:Ft,Push:Gt,Regex:Rt,Serializer:Ht,StringWriter:Ht.xf,XPath:or,checkOptions:wn.checkOptions,internalTransform:wn.internalTransform,getPlatform:function(){return t},getErrorCount:lt,resetErrorCount:mt}};return typeof window<"u"||typeof HostPlatform<"u"?(HostPlatform.entryPoint=i,e(HostPlatform),t.expose(i,"SaxonJS")):console.log("Platform binding delayed"),ot.yf(),Rt.yf(),au(),Oe.register("SaxonJS",i),Oe.register("ExternalFunctionManager",new Di),i}()}).call(ka)});var Dc={};lc(Dc,{FetchConverter:()=>Qs,MidiControllerMessage:()=>La,MidiRegisteredParameterNumber:()=>Ja,MmaConverter:()=>Vs,MuseScoreConverter:()=>Js,MuseScoreRenderer:()=>Ls,OpenSheetMusicDisplayRenderer:()=>Ms,Player:()=>ks,VerovioConverter:()=>qs,VerovioRenderer:()=>$s,WebAudioFontOutput:()=>lr,assertIsDefined:()=>ne,atoab:()=>Rr,binarySearch:()=>ur,fetish:()=>fn,parseMidiEvent:()=>jr,parseMidiFile:()=>hc,parseMusicXml:()=>_s});module.exports=fc(Dc);var hn=require("midi-player"),qa=require("json-midi-encoder");async function fn(dt,J){let pt=await fetch(dt,J);if(!pt.ok)throw new Error(pt.statusText);return pt}function ur(dt,J,pt){let lt=0,mt=dt.length-1;for(;lt<=mt;){let F=mt+lt>>1,Z=pt(J,dt[F]);if(Z>0)lt=F+1;else if(Z<0)mt=F-1;else return F}return~lt}function jr(dt){let J=new Uint8Array(dt),pt=new DataView(J.buffer),lt,mt=0,F=pt.getUint8(mt);return F===240?lt=Ra(pt,mt+1):F===255?lt=Xa(pt,mt+1):lt=ja(F,pt,mt+1,null),{...lt.event,delta:0}}var hc=(dt,J)=>{let pt=new DataView(dt),lt=mc(pt),mt=14,F=[];for(let Z=0,gt=lt.numberOfTracks;Z<gt;Z+=1){let Ct;({offset:mt,track:Ct}=pc(pt,mt)),J&&J(Z,Ct),F.push(Ct)}return{division:lt.division,format:lt.format,tracks:F}},mc=dt=>{if(dt.byteLength<14)throw new Error(`Expected at least 14 bytes instead of ${dt.byteLength}`);if(Pe(dt,0,4)!=="MThd")throw new Error(`Unexpected characters "${Pe(dt,0,4)}" found instead of "MThd"`);if(dt.getUint32(4)!==6)throw new Error(`The header has an unexpected length of ${dt.getUint32(4)} instead of 6`);let J=dt.getUint16(8),pt=dt.getUint16(10);return{division:dt.getUint16(12),format:J,numberOfTracks:pt}},pc=(dt,J)=>{if(Pe(dt,J,4)!=="MTrk")throw new Error(`Unexpected characters "${Pe(dt,J,4)}" found instead of "MTrk"`);let pt=[],lt=dt.getUint32(J+4)+J+8,mt=null,F=J+8;for(;F<lt;){let Z=dc(dt,F,mt),{event:gt,eventTypeByte:Ct}=Z;pt.push(gt),F=Z.offset,gc(gt)&&(Ct&128)>0&&(mt=Ct)}return{offset:F,track:pt}},dc=(dt,J,pt)=>{let lt,{offset:mt,value:F}=js(dt,J),Z=dt.getUint8(mt);return Z===240?lt=Ra(dt,mt+1):Z===255?lt=Xa(dt,mt+1):lt=ja(Z,dt,mt+1,pt),{...lt,event:{...lt.event,delta:F},eventTypeByte:Z}},Xa=(dt,J)=>{let pt,lt=dt.getUint8(J),{offset:mt,value:F}=js(dt,J+1);if(lt===1)pt={text:Pe(dt,mt,F)};else if(lt===2)pt={copyrightNotice:Pe(dt,mt,F)};else if(lt===3)pt={trackName:Pe(dt,mt,F)};else if(lt===4)pt={instrumentName:Pe(dt,mt,F)};else if(lt===5)pt={lyric:Pe(dt,mt,F)};else if(lt===6)pt={marker:Pe(dt,mt,F)};else if(lt===7)pt={cuePoint:Pe(dt,mt,F)};else if(lt===8)pt={programName:Pe(dt,mt,F)};else if(lt===9)pt={deviceName:Pe(dt,mt,F)};else if(lt===10||lt===11||lt===12||lt===13||lt===14||lt===15)pt={metaTypeByte:Ci(lt),text:Pe(dt,mt,F)};else if(lt===32)pt={channelPrefix:dt.getUint8(mt)};else if(lt===33)pt={midiPort:dt.getUint8(mt)};else if(lt===47)pt={endOfTrack:!0};else if(lt===81)pt={setTempo:{microsecondsPerQuarter:(dt.getUint8(mt)<<16)+(dt.getUint8(mt+1)<<8)+dt.getUint8(mt+2)}};else if(lt===84){let Z,gt=dt.getUint8(mt);gt&96?(gt&96)===32?Z=25:(gt&96)===64?Z=29:(gt&96)===96&&(Z=30):Z=24,pt={smpteOffset:{frame:dt.getUint8(mt+3),frameRate:Z,hour:gt&31,minutes:dt.getUint8(mt+1),seconds:dt.getUint8(mt+2),subFrame:dt.getUint8(mt+4)}}}else if(lt===88)pt={timeSignature:{denominator:Math.pow(2,dt.getUint8(mt+1)),metronome:dt.getUint8(mt+2),numerator:dt.getUint8(mt),thirtyseconds:dt.getUint8(mt+3)}};else if(lt===89)pt={keySignature:{key:dt.getInt8(mt),scale:dt.getInt8(mt+1)}};else if(lt===127)pt={sequencerSpecificData:_a(dt,mt,F)};else throw new Error(`Cannot parse a meta event with a type of "${Ci(lt)}"`);return{event:pt,offset:mt+F}},ja=(dt,J,pt,lt)=>{let mt=dt&128?null:lt,F=(mt===null?dt:mt)>>4,Z,gt=mt===null?pt:pt-1;if(F===8)Z={noteOff:{noteNumber:J.getUint8(gt),velocity:J.getUint8(gt+1)}},gt+=2;else if(F===9){let Ct=J.getUint8(gt),Ft=J.getUint8(gt+1);Ft===0?Z={noteOff:{noteNumber:Ct,velocity:Ft}}:Z={noteOn:{noteNumber:Ct,velocity:Ft}},gt+=2}else if(F===10)Z={keyPressure:{noteNumber:J.getUint8(gt),pressure:J.getUint8(gt+1)}},gt+=2;else if(F===11)Z={controlChange:{type:J.getUint8(gt),value:J.getUint8(gt+1)}},gt+=2;else if(F===12)Z={programChange:{programNumber:J.getUint8(gt)}},gt+=1;else if(F===13)Z={channelPressure:{pressure:J.getUint8(gt)}},gt+=1;else if(F===14)Z={pitchBend:J.getUint8(gt)|J.getUint8(gt+1)<<7},gt+=2;else throw new Error(`Cannot parse a midi event with a type of "${Ci(F)}"`);return Z.channel=(mt===null?dt:mt)&15,{event:Z,offset:gt}},Ra=(dt,J)=>{let{offset:pt,value:lt}=js(dt,J);return{event:{sysex:_a(dt,pt,lt)},offset:pt+lt}},js=(dt,J)=>{let pt=J,lt=0;for(;;){let mt=dt.getUint8(pt);if(pt+=1,mt>127)lt+=mt&127,lt<<=7;else return lt+=mt,{offset:pt,value:lt}}},Ci=dt=>dt.toString(16).toUpperCase().padStart(2,"0"),_a=(dt,J=0,pt=dt.byteLength-(J-dt.byteOffset))=>{let lt=J+dt.byteOffset,mt=[],F=new Uint8Array(dt.buffer,lt,pt);for(let Z=0;Z<pt;Z+=1)mt[Z]=Ci(F[Z]);return mt.join("")},Pe=(dt,J=0,pt=dt.byteLength-(J-dt.byteOffset))=>{let lt=J+dt.byteOffset,mt=new Uint8Array(dt.buffer,lt,pt);return String.fromCharCode.apply(null,mt)},gc=dt=>dt.channel!==void 0;var Ua=require("unzipit"),Mn=kn(cr());async function _s(dt,J){if(dt instanceof ArrayBuffer){let pt=new TextDecoder().decode(dt);try{return await Rs(pt,J)}catch{}return await Ac(dt,J)}else return await Rs(dt,J)}async function Ac(dt,J){let{entries:pt}=await(0,Ua.unzip)(dt),lt=new TextDecoder,mt=await pt["META-INF/container.xml"].arrayBuffer(),F=await Mn.default.getResource({type:"xml",encoding:"utf8",text:lt.decode(mt)}),Z=Mn.default.XPath.evaluate("//rootfile[1]/@full-path",F);if(!Z)throw new Error("[parseMusicXml] Invalid compressed MusicXML file does not contain rootfile/@full-path.");let gt=await pt[Z.value].arrayBuffer();return Rs(lt.decode(gt),J)}async function Rs(dt,J){let pt=await Mn.default.getResource({type:"xml",encoding:"utf8",text:dt});if(!Mn.default.XPath.evaluate("boolean(//score-partwise | //score-timewise)",pt))throw new Error("[parseMusicXml] Invalid MusicXML file contains neither score-partwise nor score-timewise.");let mt=Mn.default.XPath.evaluate("//score-partwise/@version | //score-timewise/@version",pt)??{value:"(unknown)"};console.debug(`[parseMusicXml] MusicXML version ${mt.value}`);let F={musicXml:dt,queries:{}};if(J)for(let Z in J)try{let gt=Mn.default.XPath.evaluate(J[Z],pt);if(gt)F.queries[Z]={query:J[Z],result:gt.nodeValue??gt.value??null};else throw"not found"}catch{F.queries[Z]={query:J[Z],result:null}}return F}var La=(ft=>(ft[ft.BankSelect_Coarse=0]="BankSelect_Coarse",ft[ft.ModulationWheel_Coarse=1]="ModulationWheel_Coarse",ft[ft.BreathController_Coarse=2]="BreathController_Coarse",ft[ft.FootController_Coarse=3]="FootController_Coarse",ft[ft.PortamentoTime_Coarse=4]="PortamentoTime_Coarse",ft[ft.DataEntry_Coarse=5]="DataEntry_Coarse",ft[ft.ChannelVolume_Coarse=6]="ChannelVolume_Coarse",ft[ft.Balance_Coarse=7]="Balance_Coarse",ft[ft.Pan_Coarse=10]="Pan_Coarse",ft[ft.Expression_Coarse=11]="Expression_Coarse",ft[ft.EffectControl1_Coarse=12]="EffectControl1_Coarse",ft[ft.EffectControl2_Coarse=13]="EffectControl2_Coarse",ft[ft.GeneralPurposeController1=16]="GeneralPurposeController1",ft[ft.GeneralPurposeController2=17]="GeneralPurposeController2",ft[ft.GeneralPurposeController3=18]="GeneralPurposeController3",ft[ft.GeneralPurposeController4=19]="GeneralPurposeController4",ft[ft.BankSelect_Fine=32]="BankSelect_Fine",ft[ft.ModulationWheel_Fine=33]="ModulationWheel_Fine",ft[ft.BreathController_Fine=34]="BreathController_Fine",ft[ft.FootController_Fine=36]="FootController_Fine",ft[ft.PortamentoTime_Fine=37]="PortamentoTime_Fine",ft[ft.DataEntry_Fine=38]="DataEntry_Fine",ft[ft.ChannelVolume_Fine=39]="ChannelVolume_Fine",ft[ft.Balance_Fine=40]="Balance_Fine",ft[ft.Pan_Fine=42]="Pan_Fine",ft[ft.Expression_Fine=43]="Expression_Fine",ft[ft.EffectControl1_Fine=44]="EffectControl1_Fine",ft[ft.EffectControl2_Fine=45]="EffectControl2_Fine",ft[ft.HoldPedal1_OnOff=64]="HoldPedal1_OnOff",ft[ft.PortamentoPedal_OnOff=65]="PortamentoPedal_OnOff",ft[ft.SostenutoPedal_OnOff=66]="SostenutoPedal_OnOff",ft[ft.SoftPedal_OnOff=67]="SoftPedal_OnOff",ft[ft.LegatoPedal_OnOff=68]="LegatoPedal_OnOff",ft[ft.HoldPedal2_OnOff=69]="HoldPedal2_OnOff",ft[ft.SoundController1=70]="SoundController1",ft[ft.SoundController2=71]="SoundController2",ft[ft.SoundController3=72]="SoundController3",ft[ft.SoundController4=73]="SoundController4",ft[ft.SoundController5=74]="SoundController5",ft[ft.SoundController6=75]="SoundController6",ft[ft.SoundController7=76]="SoundController7",ft[ft.SoundController8=77]="SoundController8",ft[ft.SoundController9=78]="SoundController9",ft[ft.SoundController10=79]="SoundController10",ft[ft.GeneralPurposeController5=80]="GeneralPurposeController5",ft[ft.GeneralPurposeController6=81]="GeneralPurposeController6",ft[ft.GeneralPurposeController7=82]="GeneralPurposeController7",ft[ft.GeneralPurposeController8=83]="GeneralPurposeController8",ft[ft.PortamentoControl=84]="PortamentoControl",ft[ft.HighResolutionVelocityPrefix=88]="HighResolutionVelocityPrefix",ft[ft.Effect1Depth=91]="Effect1Depth",ft[ft.Effect2Depth=92]="Effect2Depth",ft[ft.Effect3Depth=93]="Effect3Depth",ft[ft.Effect4Depth=94]="Effect4Depth",ft[ft.Effect5Depth=95]="Effect5Depth",ft[ft.DataButtonIncrement=96]="DataButtonIncrement",ft[ft.DataButtonDecrement=97]="DataButtonDecrement",ft[ft.NonRegisteredParameter_Coarse=98]="NonRegisteredParameter_Coarse",ft[ft.NonRegisteredParameter_Fine=99]="NonRegisteredParameter_Fine",ft[ft.RegisteredParameter_Coarse=100]="RegisteredParameter_Coarse",ft[ft.RegisteredParameter_Fine=101]="RegisteredParameter_Fine",ft[ft.AllSoundOff=120]="AllSoundOff",ft[ft.AllControllersOff=121]="AllControllersOff",ft[ft.LocalControl_OnOff=122]="LocalControl_OnOff",ft[ft.AllNotesOff=123]="AllNotesOff",ft[ft.OmniModeOff=124]="OmniModeOff",ft[ft.OmniModeOn=125]="OmniModeOn",ft[ft.PolyModeOff=126]="PolyModeOff",ft[ft.PolyModeOn=127]="PolyModeOn",ft))(La||{});var Ja=(gt=>(gt[gt.PitchBendRange=0]="PitchBendRange",gt[gt.FineTuning=1]="FineTuning",gt[gt.CoarseTuning=2]="CoarseTuning",gt[gt.TuningProgramChange=3]="TuningProgramChange",gt[gt.TuningBankSelect=4]="TuningBankSelect",gt[gt.ModulationDepthRange=5]="ModulationDepthRange",gt[gt.MidiPolyphonicExpressionConfiguration=6]="MidiPolyphonicExpressionConfiguration",gt))(Ja||{});function Rr(dt){return Uint8Array.from(atob(dt),J=>J.charCodeAt(0)).buffer}function ne(dt){if(dt==null)throw new Error(`Unexpected ${dt} value found.`)}var Qa=require("standardized-audio-context"),Va=require("webaudiofont"),Ti=require("worker-timers");var vi=9,$a=25,Fc=1,Ec=10,lr=class{constructor(J){this._audioContext=new Qa.AudioContext,this._player=new Va.WebAudioFontPlayer,this._notes=[],this._pitchBends=[],this._instruments=J.tracks.reduce((lt,mt)=>{let F=mt.find(Z=>"programChange"in Z)||mt.reduce((Z,gt)=>"noteOn"in gt?{channel:gt.channel,programChange:{programNumber:Fc}}:Z,null);if(F)if(F.channel!==vi){let Z=this._player.loader.findInstrument(F.programChange.programNumber),gt=this._player.loader.instrumentInfo(Z);lt[F.channel]={instrumentInfo:gt},this._player.loader.startLoad(this._audioContext,gt.url,gt.variable)}else lt[vi]={beats:[]},[...new Set(mt.filter(Z=>"noteOn"in Z).map(Z=>Z.noteOn.noteNumber))].forEach(Z=>{let gt=this._player.loader.findDrum(Z),Ct=this._player.loader.drumInfo(gt);lt[vi].beats[Z]={drumInfo:Ct},this._player.loader.startLoad(this._audioContext,Ct.url,Ct.variable)});return lt},{});let pt=()=>{let lt=performance.now();this._notes.filter(mt=>mt.off!==null&&mt.off<=lt).forEach(mt=>{mt.when===mt.envelope.when&&mt.envelope.cancel(),mt.envelope=null}),this._notes=this._notes.filter(mt=>!!mt.envelope),(0,Ti.setTimeout)(pt,$a)};(0,Ti.setTimeout)(pt,$a)}clear(){this._player.cancelQueue(this._audioContext),this._notes=[],this._pitchBends=[]}async initialize(){this._audioContext.state!=="running"&&(await this._audioContext.resume(),await new Promise(J=>(0,Ti.setTimeout)(J,1)))}send(J,pt){let lt=jr(J);"noteOn"in lt?this._noteOn(lt,pt):"noteOff"in lt?this._noteOff(lt,pt):"pitchBend"in lt&&this._pitchBend(lt,pt)}_noteOn(J,pt){let lt=J.channel===vi?this._instruments[J.channel].beats[J.noteOn.noteNumber].drumInfo.variable:this._instruments[J.channel].instrumentInfo.variable,mt=this._timestampToAudioContext(pt),F=this._pitchBends.find(gt=>J.channel===gt.channel&&Math.abs(pt-gt.timestamp)<Number.EPSILON),Z=this._player.queueWaveTable(this._audioContext,this._audioContext.destination,window[lt],mt,J.noteOn.noteNumber,Ec,J.noteOn.velocity/127,F?[{delta:(F.pitchBend-8192)/4096,when:0}]:[]);this._notes.push({channel:J.channel,pitch:J.noteOn.noteNumber,velocity:J.noteOn.velocity,timestamp:pt,when:Z.when,off:null,envelope:Z})}_noteOff(J,pt){let lt=this._notes.find(mt=>mt.pitch===J.noteOff.noteNumber&&mt.channel===J.channel&&mt.off===null);lt&&(lt.off=pt)}_pitchBend(J,pt){this._pitchBends=this._pitchBends.filter(lt=>lt.timestamp!==pt),this._notes.find(lt=>Math.abs(lt.timestamp-pt)<Number.EPSILON)&&console.warn("[WebAudioFontOutput] Received a pitch bend for an already scheduled note."),J.pitchBend-8192!==0&&this._pitchBends.push({channel:J.channel,pitchBend:J.pitchBend,timestamp:pt,when:this._timestampToAudioContext(pt)})}_timestampToAudioContext(J){return this._audioContext.currentTime+(J-performance.now())/1e3}};var Ka=require("timing-object"),Ya=kn(cr());var fr={name:"musicxml-player",version:"0.20.0",description:"A simple JavaScript component that loads and plays MusicXML files in the browser using Web Audio and Web MIDI.",types:"./build/types/index.d.ts",exports:{import:"./build/musicxml-player.js",require:"./build/musicxml-player.cjs"},devDependencies:{"@web/test-runner":"^0.18.2","@web/test-runner-puppeteer":"^0.16.0",concurrently:"^8.0.1",esbuild:"0.24.0","esbuild-plugins-node-modules-polyfill":"^1.6.8",eslint:"^9.13.0","json-midi-message-encoder":"^4.1.18","local-web-server":"^5.3.0",typescript:"^4.9.5","typescript-eslint":"^8.23.0"},scripts:{test:"web-test-runner src/**/*.spec.js --node-resolve","test:lint":"eslint src/**/*.ts",build:"npm run build:esm && npm run build:cjs && npm run build:d.ts","build:esm":"node esbuild.mjs --format=esm","build:cjs":"node esbuild.mjs --format=cjs","build:d.ts":"tsc --emitDeclarationOnly --outDir build/types",demo:'concurrently --kill-others "PORT=3000 musicxml-midi" "npm run demo:develop"',"demo:develop":"ws -d demo --rewrite '/mma/(.*) -> http://localhost:3000/$1' -p ${PORT:-8080}","demo:server":"ws -d demo -p ${PORT:-8082} -z --log.format combined",prepublishOnly:"npm run build:lint && npm run test && npm run build",postinstall:"./apply-patches.sh"},repository:{type:"git",url:"git+https://github.com/infojunkie/musicxml-player.git"},author:"Karim Ratib <karim.ratib@gmail.com> (https://github.com/infojunkie)",license:"GPL-3.0-only",bugs:{url:"https://github.com/infojunkie/musicxml-player/issues"},homepage:"https://github.com/infojunkie/musicxml-player#readme",dependencies:{"@types/verovio":"^3.13.4","json-midi-encoder":"^5.1.32","midi-json-parser":"^8.1.14","midi-player":"github:infojunkie/midi-player",opensheetmusicdisplay:"^1.7.1","standardized-audio-context":"^25.3.35","timing-object":"^3.1.61",timingsrc:"^1.4.5",unzipit:"^1.4.3",verovio:"^5.0.0",webaudiofont:"^3.0.4","worker-timers":"^8.0.0"}};var xc="https://raw.githubusercontent.com/infojunkie/musicxml-midi/main/build/unroll.sef.json",yc=100,ks=class dt{constructor(J,pt,lt,mt){this._options=J;this._sheet=pt;this._parseResult=lt;this._musicXml=mt;this._options.renderer.player=this,this._midiFile=this._options.converter.midi;try{let Z=this._midiFile.tracks[0],gt=Z.last();if("endOfTrack"in gt){let Ct=this._options.converter.timemap.last(),Ft=Z.filter(Rt=>"setTempo"in Rt).last()?.setTempo.microsecondsPerQuarter??5e5;gt.delta+=Ct.duration*this._midiFile.division*1e3/Ft}else console.warn("[Player.constructor] Error fixing MIDI End Of Track event: Last event is not End Of Track.")}catch(Z){console.error(`[Player.constructor] Error fixing MIDI End Of Track event: ${Z}`)}this._output=this._options.output??new lr(this._midiFile),this._midiPlayer=new Proxy((0,hn.create)({json:this._midiFile,midiOutput:this,filterMidiMessage:()=>!0}),{get(Z,gt){return gt==="stop"?()=>{try{Z.stop()}catch{}}:Reflect.get(Z,gt)}}),this._repeat=this._options.repeat??1,this._mute=this._options.mute??!1,this._velocity=this._options.velocity??1,this._duration=this._options.converter.timemap.last().timestamp+this._options.converter.timemap.last().duration;let F;this._observer=new ResizeObserver(()=>{clearTimeout(F),F=setTimeout(()=>{this._options.renderer.resize()},yc)}),this._observer.observe(this._sheet),this._timingObject=new Ka.TimingObject({velocity:this._velocity,position:0},0,this.duration),this._timingObjectListener=Z=>this._handleTimingObjectChange(Z),this._timingObject.addEventListener("change",this._timingObjectListener)}static async create(J){let pt=typeof J.container=="string"?document.getElementById(J.container):J.container;if(!pt)throw new Error("[Player.load] Failed to find container element.");let lt=document.createElement("div");lt.className="player-sheet",pt.appendChild(lt);try{let mt=await _s(J.musicXml,{title:"//work/work-title/text()",version:"//score-partwise/@version"}),F=mt.musicXml;return J.unroll&&(F=await dt._unroll(F)),await J.converter.initialize(F),await J.renderer.initialize(lt,F),new dt(J,lt,mt,F)}catch(mt){throw console.error(`[Player.load] ${mt}`),mt}}destroy(){try{this._timingObject.removeEventListener("change",this._timingObjectListener),this._sheet.remove(),this._observer.disconnect(),this._midiPlayer.stop(),this._options.renderer.destroy()}catch(J){console.error(`[Player.destroy] ${J}`)}}moveTo(J,pt,lt){this._midiPlayer.state===hn.PlayerState.Stopped&&(this._midiPlayer.play(),this._midiPlayer.pause());let mt=this.position-lt,F=this._options.converter.timemap.filter(Z=>Z.measure==J).sort((Z,gt)=>{let Ct=Math.abs(Z.timestamp-mt);return Math.abs(gt.timestamp-mt)-Ct}).last();F&&(this._midiPlayer.position=F.timestamp+lt),this._options.renderer.moveTo(J,pt,lt)}async play(){this._midiPlayer.state!==hn.PlayerState.Playing&&(this._output instanceof lr&&await this._output.initialize(),await this._play())}pause(){this._midiPlayer.state===hn.PlayerState.Playing&&(this._midiPlayer.pause(),this._timingObject.update({velocity:0}))}rewind(){this._midiPlayer.stop(),this._options.renderer.moveTo(0,0,0),this._timingObject.update({velocity:0,position:0})}get version(){return{player:`${fr.name} v${fr.version}`,renderer:this._options.renderer.version,converter:this._options.converter.version}}get musicXml(){return this._musicXml}async midi(){return await(0,qa.encode)(this._midiFile)}get state(){return this._midiPlayer.state}get title(){return this._parseResult.queries.title.result??""}get duration(){return this._duration}get position(){return Math.max(0,Math.min(this._midiPlayer.position??0,this._duration-1))}get timingObject(){return this._timingObject}set repeat(J){this._repeat=J}set mute(J){this._mute=J,this._mute&&this.clear()}set velocity(J){this._velocity=J,this._midiPlayer.state===hn.PlayerState.Playing&&(this._midiPlayer.pause(),this._timingObject.update({velocity:this._velocity}),this._play())}send(J,pt){if(this._mute)return;"channel"in jr(J)&&this._output.send(J,pt)}clear(){this._output.clear?.()}async _play(){let J=()=>{if(this._midiPlayer.state!==hn.PlayerState.Playing)return;let pt=this.position,lt=ur(this._options.converter.timemap,{measure:0,timestamp:pt,duration:0},(F,Z)=>{let gt=F.timestamp-Z.timestamp;return Math.abs(gt)<Number.EPSILON?0:gt}),mt=this._options.converter.timemap[lt>=0?lt:Math.max(0,-lt-2)];this._options.renderer.moveTo(mt.measure,mt.timestamp,Math.max(0,pt-mt.timestamp),mt.duration),this._timingObject.update({position:pt}),requestAnimationFrame(J)};requestAnimationFrame(J),this._midiPlayer.state===hn.PlayerState.Paused?await this._midiPlayer.resume(this._velocity,this._repeat):await this._midiPlayer.play(this._velocity,this._repeat)}_handleTimingObjectChange(J){}static async _unroll(J){try{return(await Ya.default.transform({stylesheetLocation:xc,sourceText:J,destination:"serialized",stylesheetParams:{renumberMeasures:!0}},"async")).principalResult}catch(pt){console.error(`[Player._unroll] ${pt}`)}return J}};var hr=require("opensheetmusicdisplay"),Ms=class{constructor(J,pt){this._rules=pt;this._currentMeasureIndex=0;this._currentVoiceEntryIndex=0;this._options={backend:"svg",drawFromMeasureNumber:1,drawUpToMeasureNumber:Number.MAX_SAFE_INTEGER,drawMeasureNumbers:!1,newSystemFromXML:!1,newPageFromXML:!1,followCursor:!0,disableCursor:!1,autoResize:!1,...J}}destroy(){this._osmd&&(this._osmd.clear(),this._osmd=void 0)}async initialize(J,pt){if(this._osmd=new hr.OpenSheetMusicDisplay(J,this._options),this._rules){let lt;for(lt in this._rules)this._osmd.EngravingRules[lt]=this._rules[lt]}this._osmd.EngravingRules.resetChordAccidentalTexts(this._osmd.EngravingRules.ChordAccidentalTexts,!0),this._osmd.EngravingRules.resetChordSymbolLabelTexts(this._osmd.EngravingRules.ChordSymbolLabelTexts),await this._osmd.load(pt),this._redraw()}moveTo(J,pt,lt,mt){ne(this._osmd);let F=this._osmd.Sheet.SourceMeasures[J];for(let Z=F.VerticalSourceStaffEntryContainers.length-1;Z>=0;Z--){let gt=F.VerticalSourceStaffEntryContainers[Z];if(this._timestampToMillisecs(F,gt.Timestamp)<=lt+Number.EPSILON){(this._currentMeasureIndex!==J||this._currentVoiceEntryIndex!==Z)&&this._updateCursor(J,Z);return}}console.error(`[OpenSheetMusicDisplayRenderer.moveTo] Could not find suitable staff entry at time ${lt} for measure ${J}`)}resize(){this._osmd&&this._redraw()}get version(){return ne(this._osmd),`opensheetmusicdisplay v${this._osmd.Version}`}_redraw(){ne(this._osmd),this._osmd.GraphicSheet?.GetCalculator instanceof hr.VexFlowMusicSheetCalculator&&(this._osmd.GraphicSheet.GetCalculator.beamsNeedUpdate=!0),this._osmd.IsReadyToRender()&&(this._osmd.render(),this._osmd.cursor.show()),this._osmd.GraphicSheet.MeasureList?.forEach((J,pt)=>{J?.forEach(lt=>{lt?.staffEntries?.forEach((mt,F)=>{mt.graphicalVoiceEntries?.forEach(Z=>{Z.vfStaveNote?.getAttribute("el")?.addEventListener("click",()=>{this.player?.moveTo(pt,this._timestampToMillisecs(lt.parentSourceMeasure,lt.parentSourceMeasure.AbsoluteTimestamp),this._timestampToMillisecs(lt.parentSourceMeasure,mt.relInMeasureTimestamp))})})})})})}_timestampToMillisecs(J,pt){return pt.RealValue*4*60*1e3/J.TempoInBPM}_updateCursor(J,pt){ne(this._osmd);let lt=this._osmd.Sheet.SourceMeasures[J],mt=lt.VerticalSourceStaffEntryContainers[pt];if(this._currentMeasureIndex=J,this._currentVoiceEntryIndex=pt,J===0&&pt===0)this._osmd.cursor.reset();else{let F=lt.AbsoluteTimestamp.clone();F.Add(mt.Timestamp),this._osmd.cursor.iterator=new hr.MusicPartManagerIterator(this._osmd.Sheet,F,void 0),this._osmd.cursor.update()}}};var Za=require("midi-json-parser");var Us=kn(cr()),mr=class{constructor(J){this._downloader=J}async extract(J){if(typeof this._downloader=="string"?this._mscore=await(await fn(this._downloader)).json():typeof this._downloader=="function"?this._mscore=this._downloader(J):this._mscore=this._downloader,!this._mscore)throw new Error("[MuseScoreBase.initialize] Failed to retrieve MuseScore metadata.");this._midi=await(0,Za.parseArrayBuffer)(Rr(this._mscore.midi)),this._timemap=[],this._mpos=await Us.default.getResource({type:"xml",encoding:"utf8",text:window.atob(this._mscore.mposXML)}),Us.default.XPath.evaluate("//events/event",this._mpos).forEach((pt,lt)=>{let mt=parseInt(pt.getAttribute("position"));lt>0&&(this._timemap[lt-1].duration=mt-this._timemap[lt-1].timestamp),this._timemap.push({measure:lt,timestamp:mt,duration:0})}),this._timemap.last().duration=this._mscore.metadata.duration*1e3-this._timemap.last().timestamp}};var _r=kn(cr()),Sn=72*5*12/96,Ls=class extends mr{constructor(J){super(J),this._cursor=document.createElement("div"),this._cursor.className="player-cursor"}destroy(){this._cursor.remove()}async initialize(J,pt){await this.extract(pt),ne(this._mscore),this._measures=_r.default.XPath.evaluate("//elements/element",this._mpos).map(mt=>({x:parseInt(mt.getAttribute("x"))/Sn,y:parseInt(mt.getAttribute("y"))/Sn,sx:parseInt(mt.getAttribute("sx"))/Sn,sy:parseInt(mt.getAttribute("sy"))/Sn,page:parseInt(mt.getAttribute("page"))}));let lt=await _r.default.getResource({type:"xml",encoding:"utf8",text:window.atob(this._mscore.sposXML)});this._segments=_r.default.XPath.evaluate("//elements/element",lt).map(mt=>({x:parseInt(mt.getAttribute("x"))/Sn,y:parseInt(mt.getAttribute("y"))/Sn,sx:parseInt(mt.getAttribute("sx"))/Sn,sy:parseInt(mt.getAttribute("sy"))/Sn,page:parseInt(mt.getAttribute("page")),timestamp:0,duration:0,measure:0})),_r.default.XPath.evaluate("//events/event",lt).forEach((mt,F)=>{let Z=parseInt(mt.getAttribute("position"));F>0&&(this._segments[F-1].duration=Z-this._segments[F-1].timestamp),this._segments[F].timestamp=Z;let gt=ur(this._timemap,{measure:0,timestamp:Z,duration:0},(Ft,Rt)=>{let Te=Ft.timestamp-Rt.timestamp;return Math.abs(Te)<Number.EPSILON?0:Te}),Ct=gt>=0?gt:Math.max(0,-gt-2);this._segments[F].measure=Ct}),this._segments.last().duration=this._mscore.metadata.duration*1e3-this._segments.last().timestamp,this._mscore.svgs.forEach((mt,F)=>{let Z=document.createElement("div");Z.setAttribute("id",`page-${F}`),Z.innerHTML=window.atob(mt),Z.getElementsByTagName("path")[0]?.setAttribute("fill","transparent"),Z.addEventListener("click",gt=>{let Ct=this._segments?.find(Ft=>Ft.x<=gt.offsetX&&Ft.y<=gt.offsetY&&Ft.x+Ft.sx>gt.offsetX&&Ft.y+Ft.sy>gt.offsetY);Ct&&this.player&&this.player.moveTo(Ct.measure,this._timemap[Ct.measure].timestamp,Ct.timestamp-this._timemap[Ct.measure].timestamp)}),J.appendChild(Z)}),J.appendChild(this._cursor),this.moveTo(0,0,0)}moveTo(J,pt,lt,mt){ne(this._measures),ne(this._segments);let F=ur(this._segments,{x:0,y:0,sx:0,sy:0,page:0,timestamp:pt+lt,duration:0,measure:0},(Rt,Te)=>{let Un=Rt.timestamp-Te.timestamp;return Math.abs(Un)<Number.EPSILON?0:Un}),Z=F>=0?F:Math.max(0,-F-2),gt=this._segments[Z].x,Ct=this._segments[Z].y,Ft=this._measures[J].sy;this._cursor.style.transform=`translate(${gt}px,${Ct}px)`,this._cursor.style.height=`${Ft}px`}resize(){}get version(){return`MuseScore v${this._mscore?.devinfo.version??"Unknown"}`}};var Js=class extends mr{constructor(J){super(J)}async initialize(J){return this.extract(J)}get midi(){return ne(this._midi),this._midi}get timemap(){return ne(this._timemap),this._timemap}get version(){return`MuseScore v${this._mscore?.devinfo.version??"Unknown"}`}};var za=kn(require("verovio/wasm")),Ga=require("verovio/esm");var $s=class{constructor(J,pt){this._notes=[];this._timemap=[];this._vrvOptions={breaks:"encoded",adjustPageHeight:!0,scale:50,footer:"none",...J},this._cursorOptions={scrollOffset:50,...pt},this._measures={rects:[],elements:[]},this._scroll={offset:0,left:0,top:0},this._position={x:0,y:0,height:0},this._measure={index:0,start:0,offset:0,duration:0},this._cursor=document.createElement("div"),this._cursor.className="player-cursor"}destroy(){this._cursor.remove(),this._vrv?.destroy()}async initialize(J,pt){this._container=J;let lt=await(0,za.default)();if(this._vrv=new Ga.VerovioToolkit(lt),!this._vrv.loadData(pt))throw new Error("[VerovioRenderer.initialize] Failed to load MusicXML.");this._container.addEventListener("scroll",()=>{this._move()}),this._redraw(),this.moveTo(0,0,0)}moveTo(J,pt,lt,mt){ne(this._vrv),this._measure={index:J,start:pt,offset:lt,duration:mt};let F=this._timemap[J].timestamp+lt,Z=this._vrv.getElementsAtTime(F),gt=[...Z.notes||[],...Z.rests||[]];if(!gt.length){let Ct=this._measures.elements[J].querySelector("g.mRest");Ct&&gt.push(Ct.id)}if((gt.length!==this._notes.length||!this._notes.every((Ct,Ft)=>gt[Ft]===Ct))&&(this._notes.forEach(Ct=>{if(!gt.includes(Ct)){let Ft=document.getElementById(Ct);Ft?.setAttribute("fill","#000"),Ft?.setAttribute("stroke","#000")}}),this._notes=gt,this._notes.forEach(Ct=>{let Ft=document.getElementById(Ct);Ft&&(Ft.setAttribute("fill","rgb(234, 107, 36)"),Ft.setAttribute("stroke","rgb(234, 107, 36)"),this._isHorizontalLayout()?mt||Ft.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):Ft.closest("g.system")?.scrollIntoView({behavior:"smooth",block:"center"}))})),this._isHorizontalLayout()&&mt){let Ct=Math.round(this._measures.rects[J].left-this._cursorOptions.scrollOffset+Math.min(1,lt/mt)*this._measures.rects[J].width);Ct!==this._scroll.offset&&(this._container?.scrollTo({behavior:"auto",left:Ct}),this._scroll.offset=Ct)}this._move()}resize(){this._redraw(),this._notes=[],this.moveTo(this._measure.index,this._measure.start,this._measure.offset,this._measure.duration)}get version(){return`verovio v${this._vrv?.getVersion()??"Unknown"}`}_isHorizontalLayout(){return this._vrvOptions.breaks==="none"}_move(){if(!this._notes.length)return;ne(this._container);let pt=this._measures.elements[this._measure.index].closest("g.system").getBoundingClientRect(),lt=this._container?.getBoundingClientRect();this._position={x:-lt.left+(this._measure.duration?Math.round(this._measures.rects[this._measure.index].left-this._container.scrollLeft+Math.min(1,this._measure.offset/this._measure.duration)*this._measures.rects[this._measure.index].width):document.getElementById(this._notes[0]).getBoundingClientRect().left),y:pt.top-lt.top,height:pt.height},this._cursor.style.transform=`translate(${this._position.x}px,${this._position.y}px)`,this._cursor.style.height=`${this._position.height}px`}_redraw(){ne(this._container),ne(this._vrv),this._vrv.setOptions({...this._vrvOptions,pageHeight:this._container.parentElement.clientHeight*100/(this._vrvOptions.scale??100),pageWidth:this._container.parentElement.clientWidth*100/(this._vrvOptions.scale??100)}),this._vrv.redoLayout({resetCache:!1}),this._container.textContent="",this._container.appendChild(this._cursor);for(let lt=0;lt<this._vrv.getPageCount();lt++){let mt=document.createElement("div");mt.setAttribute("id",`page-${lt}`),mt.innerHTML=this._vrv.renderToSVG(lt+1),this._container.appendChild(mt)}let J;this._timemap=[],this._vrv.renderToTimemap({includeMeasures:!0,includeRests:!0}).forEach(lt=>{let mt=lt;"measureOn"in mt&&this._timemap.push({measure:this._timemap.length,timestamp:mt.tstamp,duration:0});let F=this._timemap.length-1,Z=this._timemap[F].timestamp,gt=mt.tstamp-Z+1;[...mt.on||[],...mt.restsOn||[]].forEach(Ct=>{J||(J=Ct),document.getElementById(Ct)?.addEventListener("click",()=>{this.player?.moveTo(F,Z,gt)})})}),this._measures.elements=[],this._measures.rects=[],this._container.querySelectorAll("svg g.measure").forEach((lt,mt)=>{this._measures.elements.push(lt);let Z=lt.querySelector("g.staff").getBoundingClientRect(),gt=lt.querySelector(`#${J}`)??lt.querySelector("g.mRest");if(mt>0||!gt)this._measures.rects.push(DOMRect.fromRect({x:Z.x+this._container.scrollLeft,y:Z.y+this._container.scrollTop,height:Z.height,width:Z.width}));else{let Ct=gt.getBoundingClientRect();this._measures.rects.push(DOMRect.fromRect({x:Ct.x+this._container.scrollLeft,y:Z.y+this._container.scrollTop,height:Z.height,width:Z.width-(Ct.x-Z.x)}))}})}};var Wa=require("midi-json-parser");var Ha=kn(cr()),bc="https://raw.githubusercontent.com/infojunkie/musicxml-midi/main/build/timemap.sef.json",Qs=class dt{constructor(J,pt){this._midiOrUri=J;this._timemapOrUri=pt}async initialize(J){this._midi=typeof this._midiOrUri=="string"?await(0,Wa.parseArrayBuffer)(await(await fn(this._midiOrUri)).arrayBuffer()):this._midiOrUri,this._timemap=typeof this._timemapOrUri>"u"?await dt._parseTimemap(J):typeof this._timemapOrUri=="string"?await(await fn(this._timemapOrUri)).json():this._timemapOrUri}get midi(){return ne(this._midi),this._midi}get timemap(){return ne(this._timemap),this._timemap}get version(){return`${fr.name} v${fr.version}`}static async _parseTimemap(J){try{let pt=await Ha.default.transform({stylesheetLocation:bc,sourceText:J,destination:"serialized",stylesheetParams:{useSef:!0}},"async");return JSON.parse(pt.principalResult)}catch(pt){console.warn(`[FetchConverter._parseTimemap] ${pt}`)}return[]}};var tu=require("midi-json-parser");var Vs=class dt{constructor(J,pt){this._parameters=pt;this._uri=J.endsWith("/")?J.slice(0,-1):J}async initialize(J){this._version=await(await fn(`${this._uri}/`)).json();let pt=new FormData;if(pt.append("musicXml",new Blob([J],{type:"text/xml"})),this._parameters)for(let mt in this._parameters)pt.append(mt,this._parameters[mt]);let lt=await fn(`${this._uri}/convert`,{method:"POST",body:pt});this._midi=await(0,tu.parseArrayBuffer)(await lt.arrayBuffer()),this._timemap=await dt._parseTimemap(this._midi)}get midi(){return ne(this._midi),this._midi}get timemap(){return ne(this._timemap),this._timemap}get version(){return`MmaConverter v${this._version?.version??"Unknown"}`}static _parseTimemap(J){let pt=[],lt=5e5,mt=0;return J.tracks[0].forEach(F=>{if("setTempo"in F&&(lt=F.setTempo.microsecondsPerQuarter),mt+=F.delta,"marker"in F){let Z=F.marker.split(":");Z[0].localeCompare("Measure",void 0,{sensitivity:"base"})===0&&pt.push({measure:Number(Z[1]),timestamp:Math.round(mt*(lt/J.division))/1e3,duration:Number(Z[2])})}}),pt.length||console.warn("[MmaConverter._parseTimemap] Could not find any Measure:N marker message in the MIDI file."),pt}};var eu=require("midi-json-parser"),nu=kn(require("verovio/wasm")),ru=require("verovio/esm");var qs=class{constructor(J){this._timemap=[];this._options={expand:"expansion-repeat",midiNoCue:!0,...J}}async initialize(J){let pt=await(0,nu.default)();if(this._vrv=new ru.VerovioToolkit(pt),this._vrv.setOptions(this._options),!this._vrv.loadData(J))throw new Error("[VerovioConverter.initialize] Failed to load MusicXML.");if(!this._timemap.length){let lt=0;this._vrv.renderToTimemap({includeMeasures:!0,includeRests:!0}).forEach(mt=>{let F=mt;if("measureOn"in F){let Z=this._timemap.length;Z>0&&(this._timemap[Z-1].duration=F.tstamp-this._timemap[Z-1].timestamp),this._timemap.push({measure:Z,timestamp:F.tstamp,duration:0})}lt=Math.max(lt,F.tstamp)}),this._timemap.last().duration=lt-this._timemap.last().timestamp}this._midi=await(0,eu.parseArrayBuffer)(Rr(this._vrv.renderToMIDI()))}get midi(){return ne(this._midi),this._midi}get timemap(){return this._timemap}get version(){return`verovio v${this._vrv?.getVersion()??"Unknown"}`}};0&&(module.exports={FetchConverter,MidiControllerMessage,MidiRegisteredParameterNumber,MmaConverter,MuseScoreConverter,MuseScoreRenderer,OpenSheetMusicDisplayRenderer,Player,VerovioConverter,VerovioRenderer,WebAudioFontOutput,assertIsDefined,atoab,binarySearch,fetish,parseMidiEvent,parseMidiFile,parseMusicXml});
//# sourceMappingURL=musicxml-player.cjs.map
